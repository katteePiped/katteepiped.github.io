(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-517ec54d"],{"078a":function(e,t,n){var i=n("96c1"),r=n("844f");function a(e){var t=i.copyOptions(e);return i.ensureSpacesExists(t),t}e.exports=function(e,t){var n,i,o,s;return n=a(t),i=r(e,n),s="compact"in n&&n.compact?"_parent":"parent",o="addParent"in n&&n.addParent?JSON.stringify(i,(function(e,t){return e===s?"_":t}),n.spaces):JSON.stringify(i,null,n.spaces),o.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}},"0960":function(e,t,n){e.exports=n("b19a")},1:function(e,t){},"1fb5":function(e,t,n){"use strict";t.byteLength=c,t.toByteArray=h,t.fromByteArray=g;for(var i=[],r=[],a="undefined"!==typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=o.length;s<u;++s)i[s]=o[s],r[o.charCodeAt(s)]=s;function l(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");-1===n&&(n=t);var i=n===t?0:4-n%4;return[n,i]}function c(e){var t=l(e),n=t[0],i=t[1];return 3*(n+i)/4-i}function d(e,t,n){return 3*(t+n)/4-n}function h(e){var t,n,i=l(e),o=i[0],s=i[1],u=new a(d(e,o,s)),c=0,h=s>0?o-4:o;for(n=0;n<h;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],u[c++]=t>>16&255,u[c++]=t>>8&255,u[c++]=255&t;return 2===s&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,u[c++]=255&t),1===s&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,u[c++]=t>>8&255,u[c++]=255&t),u}function f(e){return i[e>>18&63]+i[e>>12&63]+i[e>>6&63]+i[63&e]}function p(e,t,n){for(var i,r=[],a=t;a<n;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),r.push(f(i));return r.join("")}function g(e){for(var t,n=e.length,r=n%3,a=[],o=16383,s=0,u=n-r;s<u;s+=o)a.push(p(e,s,s+o>u?u:s+o));return 1===r?(t=e[n-1],a.push(i[t>>2]+i[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],a.push(i[t>>10]+i[t>>4&63]+i[t<<2&63]+"=")),a.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},2:function(e,t){},"22b2":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.video&&e.video.error?n("ErrorHandler",{attrs:{message:e.video.message,error:e.video.error}}):e.loaded?n("div",[n("Player",{ref:"player",attrs:{video:e.video,"skip-to-time":e.skipToTime,sponsors:e.sponsors,selectedAutoLoop:e.selectedAutoLoop},on:{videoEnded:e.videoEnded,timeupdate:e.onTimeUpdate}}),n("v-row",{staticClass:"mb-2",attrs:{dense:""}},[n("v-col",{attrs:{md:"10","offset-md":"1"}},[n("v-card",{attrs:{outlined:"",color:"bgTwo"}},[n("v-card-title",{staticClass:"text-h5"},[e._v(e._s(e.video.title))]),n("v-card-subtitle",{staticClass:"text-subtitle-1"},[n("v-row",[n("v-col",{attrs:{md:"5","align-self":"start"}},[e._v(" "+e._s(e.$tc("counts.views",e.video.views,{n:e.addCommas(e.video.views)}))+" • "+e._s(e.video.uploadDate)+" "),e.lastWatch?n("span",[e._v(" • Last watched till "+e._s(e.lastWatchDurationH)+" "),n("ExpandableDate",{attrs:{date:e.lastWatch.timestamp}})],1):e._e()]),n("v-col",{attrs:{"offset-md":"4",md:"3","align-self":"end"}},[n("v-icon",[e._v("mdi-thumb-up")]),n("b",{staticClass:"ml-2"},[e._v(e._s(e.addCommas(e.video.likes)))]),n("v-icon",{staticClass:"ml-2"},[e._v("mdi-thumb-down")]),n("b",{staticClass:"ml-2"},[e._v(e._s(e.addCommas(e.video.dislikes)))]),n("v-btn",{staticClass:"ml-2",attrs:{icon:"",link:"",href:"https://youtu.be/"+e.videoId,target:"_blank"},on:{click:function(t){return t.preventDefault(),e.onYTClick.apply(null,arguments)}}},[n("v-icon",{attrs:{large:""}},[e._v(" mdi-youtube ")])],1),e.video.lbryId?n("v-btn",{staticClass:"ml-2",attrs:{link:"",href:"https://odysee.com/"+e.video.lbryId,target:"_blank",outlined:""}},[e._v(" LBRY ")]):e._e()],1)],1)],1),n("v-divider"),n("v-card-text",[e.video.uploaderUrl?n("router-link",{attrs:{to:e.video.uploaderUrl,custom:""},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.navigate;return[n("div",{staticStyle:{"justify-items":"center","align-items":"center","vertical-align":"center",display:"flex",cursor:"pointer"},attrs:{role:"link"},on:{click:i,keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:i.apply(null,arguments)}}},[n("div",[n("v-img",{staticClass:"rounded-circle",attrs:{src:e.video.uploaderAvatar,height:"48",width:"48"}})],1),n("a",{staticClass:"text-h5 ml-4 text-decoration-none",attrs:{href:e.video.uploaderUrl}},[e._v(" "+e._s(e.video.uploader)+" ")]),n("div",{staticClass:"ml-4"},[n("SubscriptionButton",{attrs:{"channel-id":e.channelId}})],1)])]}}],null,!1,348453868)}):e._e(),n("div",{staticClass:"mt-4",domProps:{innerHTML:e._s(e.video.description)}}),n("v-divider",{staticClass:"my-4"}),e.showDesc&&e.sponsors&&e.sponsors.segments?n("div",{staticClass:"mt-4"},[e._v(" Sponsors Segments: "+e._s(e.sponsors.segments.length)+" ")]):e._e(),n("div",[n("v-checkbox",{attrs:{dense:"","input-value":e.isAutoplayEnabled,label:"Autoplay Next Video"},on:{change:e.onAutoplayChg}}),n("v-checkbox",{attrs:{dense:"",label:"Loop this video"},model:{value:e.selectedAutoLoop,callback:function(t){e.selectedAutoLoop=t},expression:"selectedAutoLoop"}})],1)],1)],1)],1)],1),n("v-row",[e.comments&&e.comments.comments?n("v-col",{attrs:{md:"8","offset-md":"1"}},[n("h5",{staticClass:"text-h4 text-center my-4"},[e._v("Comments")]),e._l(e.comments.comments,(function(t){return n("VideoComment",{key:t.commentId,staticClass:"my-4",attrs:{comment:t,video:e.video}})})),0!==e.comments.comments.length&&null!=e.comments.nextpage?n("v-progress-linear",{directives:[{name:"intersect",rawName:"v-intersect",value:e.onCommentsProgressIntersect,expression:"onCommentsProgressIntersect"}],attrs:{indeterminate:""}}):e._e()],2):e._e(),e.video&&e.video.relatedStreams?n("v-col",{attrs:{md:"2"}},[n("h5",{staticClass:"text-h4 text-center my-4"},[e._v("Related Videos")]),e._l(e.video.relatedStreams,(function(e){return n("VideoItem",{key:e.url,staticClass:"my-4",attrs:{video:e}})}))],2):e._e()],1)],1):n("v-progress-linear",{attrs:{indeterminate:""}})},r=[],a=(n("2b3d"),n("2332")),o=n("26ee"),s=function(){return o["a"].Date.now()},u=s,l=n("4a24"),c="Expected a function",d=Math.max,h=Math.min;function f(e,t,n){var i,r,o,s,f,p,g=0,m=!1,v=!1,y=!0;if("function"!=typeof e)throw new TypeError(c);function b(t){var n=i,a=r;return i=r=void 0,g=t,s=e.apply(a,n),s}function T(e){return g=e,f=setTimeout(S,t),m?b(e):s}function E(e){var n=e-p,i=e-g,r=t-n;return v?h(r,o-i):r}function w(e){var n=e-p,i=e-g;return void 0===p||n>=t||n<0||v&&i>=o}function S(){var e=u();if(w(e))return A(e);f=setTimeout(S,E(e))}function A(e){return f=void 0,y&&i?b(e):(i=r=void 0,s)}function x(){void 0!==f&&clearTimeout(f),g=0,i=p=r=f=void 0}function _(){return void 0===f?s:A(u())}function I(){var e=u(),n=w(e);if(i=arguments,r=this,p=e,n){if(void 0===f)return T(p);if(v)return clearTimeout(f),f=setTimeout(S,t),b(p)}return void 0===f&&(f=setTimeout(S,t)),s}return t=Object(l["a"])(t)||0,Object(a["a"])(n)&&(m=!!n.leading,v="maxWait"in n,o=v?d(Object(l["a"])(n.maxWait)||0,t):o,y="trailing"in n?!!n.trailing:y),I.cancel=x,I.flush=_,I}var p=f,g=n("40d3"),m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"container",staticStyle:{width:"100%",height:"calc(100vh - 64px)",background:"#000"},attrs:{"data-shaka-player-container":""}},[n("video",{ref:"videoEl",staticStyle:{"min-width":"100%"},attrs:{"data-shaka-player":"",autoplay:e.shouldAutoPlay,loop:e.selectedAutoLoop}})])},v=[],y=n("e9e4"),b=n.n(y),T=n("8682"),E=n.n(T),w=(n("bbab"),n("c51a")),S=n.n(w);const A={generate_dash_file_from_formats(e,t){const n=this.generate_xmljs_json_from_data(e,t);return S.a.json2xml(n)},generate_xmljs_json_from_data(e,t){return{declaration:{attributes:{version:"1.0",encoding:"utf-8"}},elements:[{type:"element",name:"MPD",attributes:{xmlns:"urn:mpeg:dash:schema:mpd:2011",profiles:"urn:mpeg:dash:profile:full:2011",minBufferTime:"PT1.5S",type:"static",mediaPresentationDuration:`PT${t}S`},elements:[{type:"element",name:"Period",elements:this.generate_adaptation_set(e)}]}]}},generate_adaptation_set(e){const t=[],n=[],i=[[]];e.forEach(e=>{if(-1!==e.mimeType.indexOf("video")&&!e.videoOnly)return;const t=e.mimeType,r=n.indexOf(t);r>-1?i[r].push(e):(n.push(t),i.push([]),i[n.length-1].push(e))});for(let r=0;r<n.length;r++){let e=!1;const a={type:"element",name:"AdaptationSet",attributes:{id:r,mimeType:n[r],startWithSAP:"1",subsegmentAlignment:"true"},elements:[]};n[r].includes("audio")||(a.attributes.scanType="progressive",e=!0),i[r].forEach(t=>{e?a.elements.push(this.generate_representation_video(t)):a.elements.push(this.generate_representation_audio(t))}),t.push(a)}return t},generate_representation_audio(e){return{type:"element",name:"Representation",attributes:{id:e.itag,codecs:e.codec,bandwidth:e.bitrate},elements:[{type:"element",name:"AudioChannelConfiguration",attributes:{schemeIdUri:"urn:mpeg:dash:23003:3:audio_channel_configuration:2011",value:"2"}},{type:"element",name:"BaseURL",elements:[{type:"text",text:e.url}]},{type:"element",name:"SegmentBase",attributes:{indexRange:`${e.indexStart}-${e.indexEnd}`},elements:[{type:"element",name:"Initialization",attributes:{range:`${e.initStart}-${e.initEnd}`}}]}]}},generate_representation_video(e){return{type:"element",name:"Representation",attributes:{id:e.itag,codecs:e.codec,bandwidth:e.bitrate,width:e.width,height:e.height,maxPlayoutRate:"1",frameRate:e.fps},elements:[{type:"element",name:"BaseURL",elements:[{type:"text",text:e.url}]},{type:"element",name:"SegmentBase",attributes:{indexRange:`${e.indexStart}-${e.indexEnd}`},elements:[{type:"element",name:"Initialization",attributes:{range:`${e.initStart}-${e.initEnd}`}}]}]}}};var x=n("7cc9");window.muxjs=b.a;var _={props:{video:Object,sponsors:Object,skipToTime:Number,selectedAutoLoop:Boolean},data(){return{$player:null,$ui:null}},computed:{shouldAutoPlay(){return this.$store.getters["prefs/getPreferenceBoolean"]("playerAutoPlay",!0)},preferredVideoCodecs(){const e=[];return""!==this.$refs.videoEl.canPlayType('video/mp4; codecs="av01.0.08M.08"')&&e.push("av01"),""!==this.$refs.videoEl.canPlayType('video/webm; codecs="vp9"')&&e.push("vp9"),""!==this.$refs.videoEl.canPlayType('video/mp4; codecs="avc1.4d401f"')&&e.push("avc1"),e}},methods:{getCurrentTime(){return this.$refs.videoEl?this.$refs.videoEl.currentTime:void 0},async loadVideo(){console.log("PIPED | LOADING VIDEO");const e=this,t=this.$refs.videoEl;t.setAttribute("poster",this.video.thumbnailUrl),null!=this.skipToTime&&(t.currentTime=this.skipToTime);const n=!this.$player,i=[];i.push(...this.video.audioStreams),i.push(...this.video.videoStreams);const r=void 0!==window.MediaSource,a=this.$store.getters["prefs/getPreferenceBoolean"]("disableLBRY",!0)?null:this.video.videoStreams.filter(e=>"LBRY"===e.quality)[0];let o,s;if(this.video.livestream)o=this.video.hls,s="application/x-mpegURL";else if(this.video.audioStreams.length>0&&!a&&r){if(this.video.dash)o=this.video.dash;else{const e=A.generate_dash_file_from_formats(i,this.video.duration);o="data:application/dash+xml;charset=utf-8;base64,"+btoa(e)}s="application/dash+xml"}else if(a){if(o=a.url,this.$store.getters["prefs/getPreferenceBoolean"]("proxyLBRY",!0)){const e=new URL(o);e.searchParams.set("host",e.host),e.host=new URL(this.video.proxyUrl).host,o=e.toString()}s=await fetch(o,{method:"HEAD"}).then(e=>e.headers.get("Content-Type"))}else this.video.hls?(o=this.video.hls,s="application/x-mpegURL"):o=this.video.videoStreams.filter(e=>null==e.codec).slice(-1)[0].url;if(n){E.a.polyfill.installAll();const n=new E.a.Player(t),i=new URL(e.video.proxyUrl).host;n.getNetworkingEngine().registerRequestFilter((e,t)=>{const n=t.uris[0],r=new URL(n),a=t.headers;(r.host.endsWith(".googlevideo.com")||r.host.endsWith(".lbryplayer.xyz")&&(this.$store.getters["prefs/getPreferenceBoolean"]("proxyLBRY",!0)||a.Range))&&(r.searchParams.set("host",r.host),r.host=i,t.uris[0]=r.toString()),"/videoplayback"===r.pathname&&a.Range&&(r.searchParams.set("range",a.Range.split("=")[1]),t.headers={},t.uris[0]=r.toString())}),n.configure("streaming.bufferingGoal",this.$store.getters["prefs/getPreferenceNumber"]("bufferGoal",10)),this.setPlayerAttrs(n,t,o,s,E.a)}else this.setPlayerAttrs(this.$player,t,o,s,E.a);n&&(t.addEventListener("timeupdate",e=>{if(this.sponsors&&this.sponsors.segments){const e=t.currentTime;this.sponsors.segments.forEach(n=>{if(!n.skipped||this.selectedAutoLoop){const i=n.segment[1];e>=n.segment[0]&&e<i&&(console.log("Skipped segment at "+e),t.currentTime=i,n.skipped=!0)}})}this.$emit("timeupdate",e)}),t.addEventListener("volumechange",()=>{this.$store.commit("prefs/setPrefs",{id:"volume",value:t.volume})}),t.addEventListener("ratechange",()=>{this.$store.commit("prefs/setPrefs",{id:"rate",value:t.playbackRate})}),t.addEventListener("ended",()=>{this.$emit("videoEnded")}))},setPlayerAttrs(e,t,n,i,r){if(!this.$ui){this.$ui=new r.ui.Overlay(e,this.$refs.container,t);const n={overflowMenuButtons:["quality","captions","picture_in_picture","playback_rate"],seekBarColors:{base:"rgba(255, 255, 255, 0.3)",buffered:"rgba(255, 255, 255, 0.54)",played:"rgb(255, 0, 0)"}};this.$ui.configure(n)}const a=this.$ui.getControls().getPlayer();this.$player=a;const o=this.$store.getters["prefs/getPreferenceBoolean"]("listen",!1)&&!this.video.livestream;this.$player.configure({preferredVideoCodecs:this.preferredVideoCodecs,preferredAudioCodecs:["opus","mp4a"],manifest:{disableVideo:o,hls:{useFullSegmentsForStartTime:!0}},streaming:{useNativeHlsOnSafari:!1}});const s=this.$store.getters["prefs/getPreferenceNumber"]("quality",0),u=s>0&&(this.video.audioStreams.length>0||this.video.livestream)&&!o;u&&this.$player.configure("abr.enabled",!1),a.load(n,0,i).then(()=>{if(u){let e=Number.MAX_VALUE,t=null;a.getVariantTracks().sort((e,t)=>e.bandwidth-t.bandwidth).forEach(n=>{const i=Math.abs(s-n.height);i<e&&(e=i,t=n)}),a.selectVariantTrack(t)}this.video.subtitles.forEach(e=>{a.addTextTrackAsync(e.url,e.code,"SUBTITLE",e.mimeType,null,e.name)}),t.volume=this.$store.getters["prefs/getPreferenceNumber"]("volume",1),a.trickPlay(this.$store.getters["prefs/getPreferenceNumber"]("rate",1))})}},watch:{"video.videoId"(){this.loadVideo()}},mounted(){this.loadVideo();const e=this,t=e.$refs.videoEl,n=e=>{t.paused?t.play():t.pause(),e.preventDefault()};this.unsubToKeybindings=Object(x["a"])(window,{f(t){document.fullscreenElement?document.exitFullscreen():e.$refs.container.requestFullscreen(),t.preventDefault()},m(e){t.muted=!t.muted,e.preventDefault()},j(e){t.currentTime=Math.max(t.currentTime-15,0),e.preventDefault()},l(e){t.currentTime=t.currentTime+15,e.preventDefault()},c(t){e.$player.setTextTrackVisibility(!e.$player.isTextTrackVisible()),t.preventDefault()},Space:n,k:n,ArrowUp(e){t.volume=Math.min(t.volume+.05,1),e.preventDefault()},ArrowDown(e){t.volume=Math.max(t.volume-.05,0),e.preventDefault()},ArrowLeft(e){t.currentTime=Math.max(t.currentTime-5,0),e.preventDefault()},ArrowRight(e){t.currentTime=t.currentTime+5,e.preventDefault()}})},beforeDestroy(){this.$ui&&(this.$ui.destroy(),this.$ui=void 0,this.$player=void 0),this.$player&&(this.$player.destroy(),this.$player=void 0),this.unsubToKeybindings(),this.$refs.container.querySelectorAll("div").forEach(e=>e.remove())}},I=_,k=(n("6131"),n("2877")),C=Object(k["a"])(I,m,v,!1,null,null,null),L=C.exports,P=n("5fdc"),N=n("3dda"),D=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-row",{attrs:{align:"center",justify:"center","no-gutters":""}},[n("v-col",{attrs:{cols:"4",md:"1"}},[n("v-avatar",{staticClass:"mx-3",attrs:{size:"90%"}},[n("v-img",{attrs:{src:e.comment.thumbnail}})],1)],1),n("v-col",{attrs:{cols:"12",md:"11"}},[n("v-card-text",[e.comment.pinned?n("v-icon",{staticClass:"mx-2"},[e._v("mdi-pin")]):e._e(),n("router-link",{staticClass:"text-decoration-none primary--text",attrs:{to:e.comment.commentorUrl}},[n("b",[e._v(e._s(e.comment.author))]),e.comment.verified?n("v-icon",[e._v("mdi-account-check")]):e._e()],1),n("div",{domProps:{innerHTML:e._s(e.renderedCommentTxt)}}),n("v-divider",{staticClass:"my-2"}),n("v-icon",[e._v("mdi-thumb-up")]),e._v(" "+e._s(e.numberFormat(e.comment.likeCount))+" "),e.comment.hearted?n("v-icon",{staticClass:"ml-4"},[e._v("mdi-heart")]):e._e(),n("br"),e.subComment||0!==e.childComments.length||null==e.comment.repliesPage?e.subComment||0===e.childComments.length?e._e():n("div",[n("v-btn",{attrs:{text:""},on:{click:function(t){e.showChildComments=!e.showChildComments}}},[e._v(e._s(e.showChildComments?"Hide":"Show")+" Replies")])],1):n("v-btn",{staticClass:"mt-1",attrs:{text:"",loading:e.requestInProgress,disabled:e.requestInProgress},on:{click:e.loadReplies}},[e._v("Load Replies")]),0!==e.childComments.length&&e.showChildComments?n("div",e._l(e.childComments,(function(t){return n("video-comment",{key:t.commentId,attrs:{comment:t,video:e.video,"sub-comment":!0}})})),1):e._e()],1)],1)],1)},R=[],M=n("0e54"),U=n.n(M),O={name:"VideoComment",props:["comment","video","subComment"],data:()=>({requestInProgress:!1,showChildComments:!0,childComments:[]}),methods:{numberFormat(...e){return g["a"].numberFormat(...e)},async loadReplies(){let e=null;this.requestInProgress=!0;while(1){const t=await this.$store.dispatch("auth/makeRequest",{method:"GET",path:"/nextpage/comments/"+this.video.videoId,params:{nextpage:e||this.comment.repliesPage}});if(this.childComments=this.childComments.concat(t.comments),!t.nextpage)break;e=t.nextpage}this.requestInProgress=!1}},computed:{renderedCommentTxt(){return g["a"].purifyHTML(U.a.parseInline(this.comment.commentText,{breaks:!0}))}}},F=O,j=n("6544"),B=n.n(j),G=n("8212"),V=n("8336"),K=n("99d9"),z=n("62ad"),H=n("ce7e"),W=n("132d"),q=n("adda"),Y=n("0fd9"),X=Object(k["a"])(F,D,R,!1,null,null,null),$=X.exports;B()(X,{VAvatar:G["a"],VBtn:V["a"],VCardText:K["c"],VCol:z["a"],VDivider:H["a"],VIcon:W["a"],VImg:q["a"],VRow:Y["a"]});var J=n("cb2b"),Q=n("f4d4"),Z=n("e95f"),ee={name:"WatchVideo",data(){return{loaded:!1,video:{title:"Loading ..."},sponsors:null,selectedAutoLoop:!1,showDesc:!0,comments:null,channelId:null,dbID:null,lastWatch:null}},metaInfo(){return{title:this.video.title,meta:[{name:"twitter:title",content:this.video.title},{name:"twitter:description",content:this.video.description},{property:"og:type",content:"video"},{property:"og:title",content:this.video.title},{property:"og:description",content:this.video.description},{name:"description",content:this.video.description},{property:"og:image",content:this.video.thumbnailUrl},{name:"twitter:image",content:this.video.thumbnailUrl}]}},mounted(){this.initialize()},watch:{"$route.query.v":function(e){e&&window.scrollTo(0,0),this.initialize()}},methods:{initialize(){this.getVideoData(),this.getSponsors(),this.$store.getters["prefs/getPreferenceBoolean"]("comments",!0)&&this.getComments()},videoEnded(){!this.selectedAutoLoop&&this.isAutoplayEnabled&&this.video.relatedStreams[0]&&this.$router.push({name:"WatchVideo",query:{v:g["a"].determineVideoIdFromPath(this.video.relatedStreams[0].url)}})},onYTClick(){const e=this.$refs.player.getCurrentTime(),t=new URL("https://youtube.com/watch");t.searchParams.set("v",this.videoId),Number.isFinite(e)&&t.searchParams.set("t",e.toFixed(0)),window.location.href=t.href},numberFormat(...e){return g["a"].numberFormat(...e)},addCommas(...e){return g["a"].addCommas(...e)},fetchVideo(){return this.$store.dispatch("auth/makeRequest",{method:"GET",path:"/streams/"+this.videoId})},async getSponsors(){this.$store.getters["prefs/getPreference"]("sponsorblock",!0)&&(this.sponsors=await this.$store.dispatch("auth/makeRequest",{path:"/sponsors/"+this.videoId,params:{category:JSON.stringify(this.$store.getters["prefs/getPreference"]("selectedSkip",["sponsor","interaction","selfpromo","music_offtopic"]))}}))},fetchComments(){return this.$store.dispatch("auth/makeRequest",{path:"/comments/"+this.videoId})},onCommentsProgressIntersect(e){e[0].isIntersecting&&this.fetchMoreComments()},fetchMoreComments(){this.$store.dispatch("auth/makeRequest",{path:"/nextpage/comments/"+this.videoId,params:{nextpage:this.comments.nextpage}}).then(e=>{this.comments.nextpage=e.nextpage,this.comments.comments=this.comments.comments.concat(e.comments)})},onAutoplayChg(e){this.$store.commit("prefs/setPrefs",{id:"autoplay",value:e})},async getVideoData(){try{this.lastWatch=await Object(J["c"])(this.videoId)}catch(t){console.error("Errored while finding last watched",t)}const e=await this.fetchVideo();e.videoId=this.videoId,e.url=this.$route.fullPath,this.video=e,this.loaded=!0,this.video.error||(this.channelId=this.video.uploaderUrl.split("/")[2],this.video.description=g["a"].purifyHTML(this.video.description.replaceAll("http://www.youtube.com","").replaceAll("https://www.youtube.com","").replaceAll("\n","<br>")),this.dbID=await Object(J["a"])(e))},getComments(){this.fetchComments().then(e=>this.comments=e)},onTimeUpdate:p((function(e){if(null!=this.dbID&&this.$refs.player)return Object(J["e"])(this.dbID,this.$refs.player.getCurrentTime())}),500)},computed:{isAutoplayEnabled(){return this.$store.getters["prefs/getPreferenceBoolean"]("autoplay",!1)},videoId(){return this.$route.query.v||this.$route.params.v},skipToTime(){return"t"in this.$route.query?Number(this.$route.query.t):this.lastWatch&&null!=this.lastWatch.progress&&0!==this.lastWatch.progress&&this.$store.getters["prefs/getPreferenceBoolean"]("skipToLastPoint",!0)?this.lastWatch.progress:void 0},lastWatchDurationH(){return g["a"].timeFormat(this.lastWatch.progress)}},components:{ExpandableDate:Z["a"],SubscriptionButton:Q["a"],VideoComment:$,Player:L,VideoItem:P["a"],ErrorHandler:N["a"]}},te=ee,ne=n("b0af"),ie=n("ac7c"),re=n("8e36"),ae=n("269a"),oe=n.n(ae),se=n("90a2"),ue=Object(k["a"])(te,i,r,!1,null,null,null);t["default"]=ue.exports;B()(ue,{VBtn:V["a"],VCard:ne["a"],VCardSubtitle:K["b"],VCardText:K["c"],VCardTitle:K["d"],VCheckbox:ie["a"],VCol:z["a"],VDivider:H["a"],VIcon:W["a"],VImg:q["a"],VProgressLinear:re["a"],VRow:Y["a"]}),oe()(ue,{Intersect:se["a"]})},"27bf":function(e,t,n){"use strict";e.exports=o;var i=n("b19a"),r=Object.create(n("3a7c"));function a(e,t){var n=this._transformState;n.transforming=!1;var i=n.writecb;if(!i)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=t&&this.push(t),i(e);var r=this._readableState;r.reading=!1,(r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}function o(e){if(!(this instanceof o))return new o(e);i.call(this,e),this._transformState={afterTransform:a.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"===typeof e.transform&&(this._transform=e.transform),"function"===typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",s)}function s(){var e=this;"function"===typeof this._flush?this._flush((function(t,n){u(e,t,n)})):u(this,null,null)}function u(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}r.inherits=n("3fb5"),r.inherits(o,i),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,i.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,n){throw new Error("_transform() is not implemented")},o.prototype._write=function(e,t,n){var i=this._transformState;if(i.writecb=n,i.writechunk=e,i.writeencoding=t,!i.transforming){var r=this._readableState;(i.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},o.prototype._destroy=function(e,t){var n=this;i.prototype._destroy.call(this,e,(function(e){t(e),n.emit("close")}))}},"2c63":function(e,t,n){e.exports=n("dc14")},"2f67":function(e,t,n){},3171:function(e,t,n){(function(e){(function(t){t.parser=function(e,t){return new a(e,t)},t.SAXParser=a,t.SAXStream=d,t.createStream=c,t.MAX_BUFFER_LENGTH=65536;var i,r=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function a(e,n){if(!(this instanceof a))return new a(e,n);var i=this;s(i),i.q=i.c="",i.bufferCheckPosition=t.MAX_BUFFER_LENGTH,i.opt=n||{},i.opt.lowercase=i.opt.lowercase||i.opt.lowercasetags,i.looseCase=i.opt.lowercase?"toLowerCase":"toUpperCase",i.tags=[],i.closed=i.closedRoot=i.sawRoot=!1,i.tag=i.error=null,i.strict=!!e,i.noscript=!(!e&&!i.opt.noscript),i.state=_.BEGIN,i.strictEntities=i.opt.strictEntities,i.ENTITIES=i.strictEntities?Object.create(t.XML_ENTITIES):Object.create(t.ENTITIES),i.attribList=[],i.opt.xmlns&&(i.ns=Object.create(m)),i.trackPosition=!1!==i.opt.position,i.trackPosition&&(i.position=i.line=i.column=0),k(i,"onready")}function o(e){for(var n=Math.max(t.MAX_BUFFER_LENGTH,10),i=0,a=0,o=r.length;a<o;a++){var s=e[r[a]].length;if(s>n)switch(r[a]){case"textNode":L(e);break;case"cdata":C(e,"oncdata",e.cdata),e.cdata="";break;case"script":C(e,"onscript",e.script),e.script="";break;default:N(e,"Max buffer length exceeded: "+r[a])}i=Math.max(i,s)}var u=t.MAX_BUFFER_LENGTH-i;e.bufferCheckPosition=u+e.position}function s(e){for(var t=0,n=r.length;t<n;t++)e[r[t]]=""}function u(e){L(e),""!==e.cdata&&(C(e,"oncdata",e.cdata),e.cdata=""),""!==e.script&&(C(e,"onscript",e.script),e.script="")}t.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(e){function t(){}t.prototype=e;var n=new t;return n}),Object.keys||(Object.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}),a.prototype={end:function(){D(this)},write:K,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){u(this)}};try{i=n("d485").Stream}catch(z){i=function(){}}var l=t.EVENTS.filter((function(e){return"error"!==e&&"end"!==e}));function c(e,t){return new d(e,t)}function d(e,t){if(!(this instanceof d))return new d(e,t);i.apply(this),this._parser=new a(e,t),this.writable=!0,this.readable=!0;var n=this;this._parser.onend=function(){n.emit("end")},this._parser.onerror=function(e){n.emit("error",e),n._parser.error=null},this._decoder=null,l.forEach((function(e){Object.defineProperty(n,"on"+e,{get:function(){return n._parser["on"+e]},set:function(t){if(!t)return n.removeAllListeners(e),n._parser["on"+e]=t,t;n.on(e,t)},enumerable:!0,configurable:!1})}))}d.prototype=Object.create(i.prototype,{constructor:{value:d}}),d.prototype.write=function(t){if("function"===typeof e&&"function"===typeof e.isBuffer&&e.isBuffer(t)){if(!this._decoder){var i=n("7d72").StringDecoder;this._decoder=new i("utf8")}t=this._decoder.write(t)}return this._parser.write(t.toString()),this.emit("data",t),!0},d.prototype.end=function(e){return e&&e.length&&this.write(e),this._parser.end(),!0},d.prototype.on=function(e,t){var n=this;return n._parser["on"+e]||-1===l.indexOf(e)||(n._parser["on"+e]=function(){var t=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);t.splice(0,0,e),n.emit.apply(n,t)}),i.prototype.on.call(n,e,t)};var h="[CDATA[",f="DOCTYPE",p="http://www.w3.org/XML/1998/namespace",g="http://www.w3.org/2000/xmlns/",m={xml:p,xmlns:g},v=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,y=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,b=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,T=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function E(e){return" "===e||"\n"===e||"\r"===e||"\t"===e}function w(e){return'"'===e||"'"===e}function S(e){return">"===e||E(e)}function A(e,t){return e.test(t)}function x(e,t){return!A(e,t)}var _=0;for(var I in t.STATE={BEGIN:_++,BEGIN_WHITESPACE:_++,TEXT:_++,TEXT_ENTITY:_++,OPEN_WAKA:_++,SGML_DECL:_++,SGML_DECL_QUOTED:_++,DOCTYPE:_++,DOCTYPE_QUOTED:_++,DOCTYPE_DTD:_++,DOCTYPE_DTD_QUOTED:_++,COMMENT_STARTING:_++,COMMENT:_++,COMMENT_ENDING:_++,COMMENT_ENDED:_++,CDATA:_++,CDATA_ENDING:_++,CDATA_ENDING_2:_++,PROC_INST:_++,PROC_INST_BODY:_++,PROC_INST_ENDING:_++,OPEN_TAG:_++,OPEN_TAG_SLASH:_++,ATTRIB:_++,ATTRIB_NAME:_++,ATTRIB_NAME_SAW_WHITE:_++,ATTRIB_VALUE:_++,ATTRIB_VALUE_QUOTED:_++,ATTRIB_VALUE_CLOSED:_++,ATTRIB_VALUE_UNQUOTED:_++,ATTRIB_VALUE_ENTITY_Q:_++,ATTRIB_VALUE_ENTITY_U:_++,CLOSE_TAG:_++,CLOSE_TAG_SAW_WHITE:_++,SCRIPT:_++,SCRIPT_ENDING:_++},t.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},t.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(t.ENTITIES).forEach((function(e){var n=t.ENTITIES[e],i="number"===typeof n?String.fromCharCode(n):n;t.ENTITIES[e]=i})),t.STATE)t.STATE[t.STATE[I]]=I;function k(e,t,n){e[t]&&e[t](n)}function C(e,t,n){e.textNode&&L(e),k(e,t,n)}function L(e){e.textNode=P(e.opt,e.textNode),e.textNode&&k(e,"ontext",e.textNode),e.textNode=""}function P(e,t){return e.trim&&(t=t.trim()),e.normalize&&(t=t.replace(/\s+/g," ")),t}function N(e,t){return L(e),e.trackPosition&&(t+="\nLine: "+e.line+"\nColumn: "+e.column+"\nChar: "+e.c),t=new Error(t),e.error=t,k(e,"onerror",t),e}function D(e){return e.sawRoot&&!e.closedRoot&&R(e,"Unclosed root tag"),e.state!==_.BEGIN&&e.state!==_.BEGIN_WHITESPACE&&e.state!==_.TEXT&&N(e,"Unexpected end"),L(e),e.c="",e.closed=!0,k(e,"onend"),a.call(e,e.strict,e.opt),e}function R(e,t){if("object"!==typeof e||!(e instanceof a))throw new Error("bad call to strictFail");e.strict&&N(e,t)}function M(e){e.strict||(e.tagName=e.tagName[e.looseCase]());var t=e.tags[e.tags.length-1]||e,n=e.tag={name:e.tagName,attributes:{}};e.opt.xmlns&&(n.ns=t.ns),e.attribList.length=0,C(e,"onopentagstart",n)}function U(e,t){var n=e.indexOf(":"),i=n<0?["",e]:e.split(":"),r=i[0],a=i[1];return t&&"xmlns"===e&&(r="xmlns",a=""),{prefix:r,local:a}}function O(e){if(e.strict||(e.attribName=e.attribName[e.looseCase]()),-1!==e.attribList.indexOf(e.attribName)||e.tag.attributes.hasOwnProperty(e.attribName))e.attribName=e.attribValue="";else{if(e.opt.xmlns){var t=U(e.attribName,!0),n=t.prefix,i=t.local;if("xmlns"===n)if("xml"===i&&e.attribValue!==p)R(e,"xml: prefix must be bound to "+p+"\nActual: "+e.attribValue);else if("xmlns"===i&&e.attribValue!==g)R(e,"xmlns: prefix must be bound to "+g+"\nActual: "+e.attribValue);else{var r=e.tag,a=e.tags[e.tags.length-1]||e;r.ns===a.ns&&(r.ns=Object.create(a.ns)),r.ns[i]=e.attribValue}e.attribList.push([e.attribName,e.attribValue])}else e.tag.attributes[e.attribName]=e.attribValue,C(e,"onattribute",{name:e.attribName,value:e.attribValue});e.attribName=e.attribValue=""}}function F(e,t){if(e.opt.xmlns){var n=e.tag,i=U(e.tagName);n.prefix=i.prefix,n.local=i.local,n.uri=n.ns[i.prefix]||"",n.prefix&&!n.uri&&(R(e,"Unbound namespace prefix: "+JSON.stringify(e.tagName)),n.uri=i.prefix);var r=e.tags[e.tags.length-1]||e;n.ns&&r.ns!==n.ns&&Object.keys(n.ns).forEach((function(t){C(e,"onopennamespace",{prefix:t,uri:n.ns[t]})}));for(var a=0,o=e.attribList.length;a<o;a++){var s=e.attribList[a],u=s[0],l=s[1],c=U(u,!0),d=c.prefix,h=c.local,f=""===d?"":n.ns[d]||"",p={name:u,value:l,prefix:d,local:h,uri:f};d&&"xmlns"!==d&&!f&&(R(e,"Unbound namespace prefix: "+JSON.stringify(d)),p.uri=d),e.tag.attributes[u]=p,C(e,"onattribute",p)}e.attribList.length=0}e.tag.isSelfClosing=!!t,e.sawRoot=!0,e.tags.push(e.tag),C(e,"onopentag",e.tag),t||(e.noscript||"script"!==e.tagName.toLowerCase()?e.state=_.TEXT:e.state=_.SCRIPT,e.tag=null,e.tagName=""),e.attribName=e.attribValue="",e.attribList.length=0}function j(e){if(!e.tagName)return R(e,"Weird empty close tag."),e.textNode+="</>",void(e.state=_.TEXT);if(e.script){if("script"!==e.tagName)return e.script+="</"+e.tagName+">",e.tagName="",void(e.state=_.SCRIPT);C(e,"onscript",e.script),e.script=""}var t=e.tags.length,n=e.tagName;e.strict||(n=n[e.looseCase]());var i=n;while(t--){var r=e.tags[t];if(r.name===i)break;R(e,"Unexpected close tag")}if(t<0)return R(e,"Unmatched closing tag: "+e.tagName),e.textNode+="</"+e.tagName+">",void(e.state=_.TEXT);e.tagName=n;var a=e.tags.length;while(a-- >t){var o=e.tag=e.tags.pop();e.tagName=e.tag.name,C(e,"onclosetag",e.tagName);var s={};for(var u in o.ns)s[u]=o.ns[u];var l=e.tags[e.tags.length-1]||e;e.opt.xmlns&&o.ns!==l.ns&&Object.keys(o.ns).forEach((function(t){var n=o.ns[t];C(e,"onclosenamespace",{prefix:t,uri:n})}))}0===t&&(e.closedRoot=!0),e.tagName=e.attribValue=e.attribName="",e.attribList.length=0,e.state=_.TEXT}function B(e){var t,n=e.entity,i=n.toLowerCase(),r="";return e.ENTITIES[n]?e.ENTITIES[n]:e.ENTITIES[i]?e.ENTITIES[i]:(n=i,"#"===n.charAt(0)&&("x"===n.charAt(1)?(n=n.slice(2),t=parseInt(n,16),r=t.toString(16)):(n=n.slice(1),t=parseInt(n,10),r=t.toString(10))),n=n.replace(/^0+/,""),isNaN(t)||r.toLowerCase()!==n?(R(e,"Invalid character entity"),"&"+e.entity+";"):String.fromCodePoint(t))}function G(e,t){"<"===t?(e.state=_.OPEN_WAKA,e.startTagPosition=e.position):E(t)||(R(e,"Non-whitespace before first tag."),e.textNode=t,e.state=_.TEXT)}function V(e,t){var n="";return t<e.length&&(n=e.charAt(t)),n}function K(e){var t=this;if(this.error)throw this.error;if(t.closed)return N(t,"Cannot write after close. Assign an onready handler.");if(null===e)return D(t);"object"===typeof e&&(e=e.toString());var n=0,i="";while(1){if(i=V(e,n++),t.c=i,!i)break;switch(t.trackPosition&&(t.position++,"\n"===i?(t.line++,t.column=0):t.column++),t.state){case _.BEGIN:if(t.state=_.BEGIN_WHITESPACE,"\ufeff"===i)continue;G(t,i);continue;case _.BEGIN_WHITESPACE:G(t,i);continue;case _.TEXT:if(t.sawRoot&&!t.closedRoot){var r=n-1;while(i&&"<"!==i&&"&"!==i)i=V(e,n++),i&&t.trackPosition&&(t.position++,"\n"===i?(t.line++,t.column=0):t.column++);t.textNode+=e.substring(r,n-1)}"<"!==i||t.sawRoot&&t.closedRoot&&!t.strict?(E(i)||t.sawRoot&&!t.closedRoot||R(t,"Text data outside of root node."),"&"===i?t.state=_.TEXT_ENTITY:t.textNode+=i):(t.state=_.OPEN_WAKA,t.startTagPosition=t.position);continue;case _.SCRIPT:"<"===i?t.state=_.SCRIPT_ENDING:t.script+=i;continue;case _.SCRIPT_ENDING:"/"===i?t.state=_.CLOSE_TAG:(t.script+="<"+i,t.state=_.SCRIPT);continue;case _.OPEN_WAKA:if("!"===i)t.state=_.SGML_DECL,t.sgmlDecl="";else if(E(i));else if(A(v,i))t.state=_.OPEN_TAG,t.tagName=i;else if("/"===i)t.state=_.CLOSE_TAG,t.tagName="";else if("?"===i)t.state=_.PROC_INST,t.procInstName=t.procInstBody="";else{if(R(t,"Unencoded <"),t.startTagPosition+1<t.position){var a=t.position-t.startTagPosition;i=new Array(a).join(" ")+i}t.textNode+="<"+i,t.state=_.TEXT}continue;case _.SGML_DECL:(t.sgmlDecl+i).toUpperCase()===h?(C(t,"onopencdata"),t.state=_.CDATA,t.sgmlDecl="",t.cdata=""):t.sgmlDecl+i==="--"?(t.state=_.COMMENT,t.comment="",t.sgmlDecl=""):(t.sgmlDecl+i).toUpperCase()===f?(t.state=_.DOCTYPE,(t.doctype||t.sawRoot)&&R(t,"Inappropriately located doctype declaration"),t.doctype="",t.sgmlDecl=""):">"===i?(C(t,"onsgmldeclaration",t.sgmlDecl),t.sgmlDecl="",t.state=_.TEXT):w(i)?(t.state=_.SGML_DECL_QUOTED,t.sgmlDecl+=i):t.sgmlDecl+=i;continue;case _.SGML_DECL_QUOTED:i===t.q&&(t.state=_.SGML_DECL,t.q=""),t.sgmlDecl+=i;continue;case _.DOCTYPE:">"===i?(t.state=_.TEXT,C(t,"ondoctype",t.doctype),t.doctype=!0):(t.doctype+=i,"["===i?t.state=_.DOCTYPE_DTD:w(i)&&(t.state=_.DOCTYPE_QUOTED,t.q=i));continue;case _.DOCTYPE_QUOTED:t.doctype+=i,i===t.q&&(t.q="",t.state=_.DOCTYPE);continue;case _.DOCTYPE_DTD:t.doctype+=i,"]"===i?t.state=_.DOCTYPE:w(i)&&(t.state=_.DOCTYPE_DTD_QUOTED,t.q=i);continue;case _.DOCTYPE_DTD_QUOTED:t.doctype+=i,i===t.q&&(t.state=_.DOCTYPE_DTD,t.q="");continue;case _.COMMENT:"-"===i?t.state=_.COMMENT_ENDING:t.comment+=i;continue;case _.COMMENT_ENDING:"-"===i?(t.state=_.COMMENT_ENDED,t.comment=P(t.opt,t.comment),t.comment&&C(t,"oncomment",t.comment),t.comment=""):(t.comment+="-"+i,t.state=_.COMMENT);continue;case _.COMMENT_ENDED:">"!==i?(R(t,"Malformed comment"),t.comment+="--"+i,t.state=_.COMMENT):t.state=_.TEXT;continue;case _.CDATA:"]"===i?t.state=_.CDATA_ENDING:t.cdata+=i;continue;case _.CDATA_ENDING:"]"===i?t.state=_.CDATA_ENDING_2:(t.cdata+="]"+i,t.state=_.CDATA);continue;case _.CDATA_ENDING_2:">"===i?(t.cdata&&C(t,"oncdata",t.cdata),C(t,"onclosecdata"),t.cdata="",t.state=_.TEXT):"]"===i?t.cdata+="]":(t.cdata+="]]"+i,t.state=_.CDATA);continue;case _.PROC_INST:"?"===i?t.state=_.PROC_INST_ENDING:E(i)?t.state=_.PROC_INST_BODY:t.procInstName+=i;continue;case _.PROC_INST_BODY:if(!t.procInstBody&&E(i))continue;"?"===i?t.state=_.PROC_INST_ENDING:t.procInstBody+=i;continue;case _.PROC_INST_ENDING:">"===i?(C(t,"onprocessinginstruction",{name:t.procInstName,body:t.procInstBody}),t.procInstName=t.procInstBody="",t.state=_.TEXT):(t.procInstBody+="?"+i,t.state=_.PROC_INST_BODY);continue;case _.OPEN_TAG:A(y,i)?t.tagName+=i:(M(t),">"===i?F(t):"/"===i?t.state=_.OPEN_TAG_SLASH:(E(i)||R(t,"Invalid character in tag name"),t.state=_.ATTRIB));continue;case _.OPEN_TAG_SLASH:">"===i?(F(t,!0),j(t)):(R(t,"Forward-slash in opening tag not followed by >"),t.state=_.ATTRIB);continue;case _.ATTRIB:if(E(i))continue;">"===i?F(t):"/"===i?t.state=_.OPEN_TAG_SLASH:A(v,i)?(t.attribName=i,t.attribValue="",t.state=_.ATTRIB_NAME):R(t,"Invalid attribute name");continue;case _.ATTRIB_NAME:"="===i?t.state=_.ATTRIB_VALUE:">"===i?(R(t,"Attribute without value"),t.attribValue=t.attribName,O(t),F(t)):E(i)?t.state=_.ATTRIB_NAME_SAW_WHITE:A(y,i)?t.attribName+=i:R(t,"Invalid attribute name");continue;case _.ATTRIB_NAME_SAW_WHITE:if("="===i)t.state=_.ATTRIB_VALUE;else{if(E(i))continue;R(t,"Attribute without value"),t.tag.attributes[t.attribName]="",t.attribValue="",C(t,"onattribute",{name:t.attribName,value:""}),t.attribName="",">"===i?F(t):A(v,i)?(t.attribName=i,t.state=_.ATTRIB_NAME):(R(t,"Invalid attribute name"),t.state=_.ATTRIB)}continue;case _.ATTRIB_VALUE:if(E(i))continue;w(i)?(t.q=i,t.state=_.ATTRIB_VALUE_QUOTED):(R(t,"Unquoted attribute value"),t.state=_.ATTRIB_VALUE_UNQUOTED,t.attribValue=i);continue;case _.ATTRIB_VALUE_QUOTED:if(i!==t.q){"&"===i?t.state=_.ATTRIB_VALUE_ENTITY_Q:t.attribValue+=i;continue}O(t),t.q="",t.state=_.ATTRIB_VALUE_CLOSED;continue;case _.ATTRIB_VALUE_CLOSED:E(i)?t.state=_.ATTRIB:">"===i?F(t):"/"===i?t.state=_.OPEN_TAG_SLASH:A(v,i)?(R(t,"No whitespace between attributes"),t.attribName=i,t.attribValue="",t.state=_.ATTRIB_NAME):R(t,"Invalid attribute name");continue;case _.ATTRIB_VALUE_UNQUOTED:if(!S(i)){"&"===i?t.state=_.ATTRIB_VALUE_ENTITY_U:t.attribValue+=i;continue}O(t),">"===i?F(t):t.state=_.ATTRIB;continue;case _.CLOSE_TAG:if(t.tagName)">"===i?j(t):A(y,i)?t.tagName+=i:t.script?(t.script+="</"+t.tagName,t.tagName="",t.state=_.SCRIPT):(E(i)||R(t,"Invalid tagname in closing tag"),t.state=_.CLOSE_TAG_SAW_WHITE);else{if(E(i))continue;x(v,i)?t.script?(t.script+="</"+i,t.state=_.SCRIPT):R(t,"Invalid tagname in closing tag."):t.tagName=i}continue;case _.CLOSE_TAG_SAW_WHITE:if(E(i))continue;">"===i?j(t):R(t,"Invalid characters in closing tag");continue;case _.TEXT_ENTITY:case _.ATTRIB_VALUE_ENTITY_Q:case _.ATTRIB_VALUE_ENTITY_U:var s,u;switch(t.state){case _.TEXT_ENTITY:s=_.TEXT,u="textNode";break;case _.ATTRIB_VALUE_ENTITY_Q:s=_.ATTRIB_VALUE_QUOTED,u="attribValue";break;case _.ATTRIB_VALUE_ENTITY_U:s=_.ATTRIB_VALUE_UNQUOTED,u="attribValue";break}";"===i?(t[u]+=B(t),t.entity="",t.state=s):A(t.entity.length?T:b,i)?t.entity+=i:(R(t,"Invalid character in entity name"),t[u]+="&"+t.entity+i,t.entity="",t.state=s);continue;default:throw new Error(t,"Unknown state: "+t.state)}}return t.position>=t.bufferCheckPosition&&o(t),t}
/*! http://mths.be/fromcodepoint v0.1.0 by @mathias */_=t.STATE,String.fromCodePoint||function(){var e=String.fromCharCode,t=Math.floor,n=function(){var n,i,r=16384,a=[],o=-1,s=arguments.length;if(!s)return"";var u="";while(++o<s){var l=Number(arguments[o]);if(!isFinite(l)||l<0||l>1114111||t(l)!==l)throw RangeError("Invalid code point: "+l);l<=65535?a.push(l):(l-=65536,n=55296+(l>>10),i=l%1024+56320,a.push(n,i)),(o+1===s||a.length>r)&&(u+=e.apply(null,a),a.length=0)}return u};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:n,configurable:!0,writable:!0}):String.fromCodePoint=n}()})(t)}).call(this,n("b639").Buffer)},"3a7c":function(e,t,n){(function(e){function n(e){return Array.isArray?Array.isArray(e):"[object Array]"===m(e)}function i(e){return"boolean"===typeof e}function r(e){return null===e}function a(e){return null==e}function o(e){return"number"===typeof e}function s(e){return"string"===typeof e}function u(e){return"symbol"===typeof e}function l(e){return void 0===e}function c(e){return"[object RegExp]"===m(e)}function d(e){return"object"===typeof e&&null!==e}function h(e){return"[object Date]"===m(e)}function f(e){return"[object Error]"===m(e)||e instanceof Error}function p(e){return"function"===typeof e}function g(e){return null===e||"boolean"===typeof e||"number"===typeof e||"string"===typeof e||"symbol"===typeof e||"undefined"===typeof e}function m(e){return Object.prototype.toString.call(e)}t.isArray=n,t.isBoolean=i,t.isNull=r,t.isNullOrUndefined=a,t.isNumber=o,t.isString=s,t.isSymbol=u,t.isUndefined=l,t.isRegExp=c,t.isObject=d,t.isDate=h,t.isError=f,t.isFunction=p,t.isPrimitive=g,t.isBuffer=e.isBuffer}).call(this,n("b639").Buffer)},"3fb5":function(e,t){"function"===typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},"429b":function(e,t,n){e.exports=n("faa1").EventEmitter},4681:function(e,t,n){"use strict";var i=n("966d");function r(e,t){var n=this,r=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return r||a?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||i.nextTick(o,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(i.nextTick(o,n,e),n._writableState&&(n._writableState.errorEmitted=!0)):t&&t(e)})),this)}function a(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function o(e,t){e.emit("error",t)}e.exports={destroy:r,undestroy:a}},"493b":function(e,t,n){(function(t){var i=n("cef9");e.exports=function(e,n){e instanceof t&&(e=e.toString());var r=null;if("string"===typeof e)try{r=JSON.parse(e)}catch(a){throw new Error("The JSON structure is invalid")}else r=e;return i(r,n)}}).call(this,n("b639").Buffer)},"5e1a":function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=n("a8f0").Buffer,a=n(2);function o(e,t,n){e.copy(t,n)}e.exports=function(){function e(){i(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";var t=this.head,n=""+t.data;while(t=t.next)n+=e+t.data;return n},e.prototype.concat=function(e){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;var t=r.allocUnsafe(e>>>0),n=this.head,i=0;while(n)o(n.data,t,i),i+=n.data.length,n=n.next;return t},e}(),a&&a.inspect&&a.inspect.custom&&(e.exports.prototype[a.inspect.custom]=function(){var e=a.inspect({length:this.length});return this.constructor.name+" "+e})},6131:function(e,t,n){"use strict";n("2f67")},"6ca7":function(e,t,n){},"780f":function(e,t,n){"use strict";e.exports=a;var i=n("27bf"),r=Object.create(n("3a7c"));function a(e){if(!(this instanceof a))return new a(e);i.call(this,e)}r.inherits=n("3fb5"),r.inherits(a,i),a.prototype._transform=function(e,t,n){n(null,e)}},"7d72":function(e,t,n){"use strict";var i=n("8707").Buffer,r=i.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(e){if(!e)return"utf8";var t;while(1)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function o(e){var t=a(e);if("string"!==typeof t&&(i.isEncoding===r||!r(e)))throw new Error("Unknown encoding: "+e);return t||e}function s(e){var t;switch(this.encoding=o(e),this.encoding){case"utf16le":this.text=p,this.end=g,t=4;break;case"utf8":this.fillLast=d,t=4;break;case"base64":this.text=m,this.end=v,t=3;break;default:return this.write=y,void(this.end=b)}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(t)}function u(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function l(e,t,n){var i=t.length-1;if(i<n)return 0;var r=u(t[i]);return r>=0?(r>0&&(e.lastNeed=r-1),r):--i<n||-2===r?0:(r=u(t[i]),r>=0?(r>0&&(e.lastNeed=r-2),r):--i<n||-2===r?0:(r=u(t[i]),r>=0?(r>0&&(2===r?r=0:e.lastNeed=r-3),r):0))}function c(e,t,n){if(128!==(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!==(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!==(192&t[2]))return e.lastNeed=2,"�"}}function d(e){var t=this.lastTotal-this.lastNeed,n=c(this,e,t);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function h(e,t){var n=l(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var i=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,i),e.toString("utf8",t,i)}function f(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t}function p(e,t){if((e.length-t)%2===0){var n=e.toString("utf16le",t);if(n){var i=n.charCodeAt(n.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function g(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function m(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function v(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function y(e){return e.toString(this.encoding)}function b(e){return e&&e.length?this.write(e):""}t.StringDecoder=s,s.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(t=this.fillLast(e),void 0===t)return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},s.prototype.end=f,s.prototype.text=h,s.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},"844f":function(e,t,n){var i,r,a=n("3171"),o={on:function(){},parse:function(){}},s=n("96c1"),u=n("9b12").isArray,l=!0;function c(e){return i=s.copyOptions(e),s.ensureFlagExists("ignoreDeclaration",i),s.ensureFlagExists("ignoreInstruction",i),s.ensureFlagExists("ignoreAttributes",i),s.ensureFlagExists("ignoreText",i),s.ensureFlagExists("ignoreComment",i),s.ensureFlagExists("ignoreCdata",i),s.ensureFlagExists("ignoreDoctype",i),s.ensureFlagExists("compact",i),s.ensureFlagExists("alwaysChildren",i),s.ensureFlagExists("addParent",i),s.ensureFlagExists("trim",i),s.ensureFlagExists("nativeType",i),s.ensureFlagExists("nativeTypeAttributes",i),s.ensureFlagExists("sanitize",i),s.ensureFlagExists("instructionHasAttributes",i),s.ensureFlagExists("captureSpacesBetweenElements",i),s.ensureAlwaysArrayExists(i),s.ensureKeyExists("declaration",i),s.ensureKeyExists("instruction",i),s.ensureKeyExists("attributes",i),s.ensureKeyExists("text",i),s.ensureKeyExists("comment",i),s.ensureKeyExists("cdata",i),s.ensureKeyExists("doctype",i),s.ensureKeyExists("type",i),s.ensureKeyExists("name",i),s.ensureKeyExists("elements",i),s.ensureKeyExists("parent",i),s.checkFnExists("doctype",i),s.checkFnExists("instruction",i),s.checkFnExists("cdata",i),s.checkFnExists("comment",i),s.checkFnExists("text",i),s.checkFnExists("instructionName",i),s.checkFnExists("elementName",i),s.checkFnExists("attributeName",i),s.checkFnExists("attributeValue",i),s.checkFnExists("attributes",i),i}function d(e){var t=Number(e);if(!isNaN(t))return t;var n=e.toLowerCase();return"true"===n||"false"!==n&&e}function h(e,t){var n;if(i.compact){if(!r[i[e+"Key"]]&&(u(i.alwaysArray)?-1!==i.alwaysArray.indexOf(i[e+"Key"]):i.alwaysArray)&&(r[i[e+"Key"]]=[]),r[i[e+"Key"]]&&!u(r[i[e+"Key"]])&&(r[i[e+"Key"]]=[r[i[e+"Key"]]]),e+"Fn"in i&&"string"===typeof t&&(t=i[e+"Fn"](t,r)),"instruction"===e&&("instructionFn"in i||"instructionNameFn"in i))for(n in t)if(t.hasOwnProperty(n))if("instructionFn"in i)t[n]=i.instructionFn(t[n],n,r);else{var a=t[n];delete t[n],t[i.instructionNameFn(n,a,r)]=a}u(r[i[e+"Key"]])?r[i[e+"Key"]].push(t):r[i[e+"Key"]]=t}else{r[i.elementsKey]||(r[i.elementsKey]=[]);var o={};if(o[i.typeKey]=e,"instruction"===e){for(n in t)if(t.hasOwnProperty(n))break;o[i.nameKey]="instructionNameFn"in i?i.instructionNameFn(n,t,r):n,i.instructionHasAttributes?(o[i.attributesKey]=t[n][i.attributesKey],"instructionFn"in i&&(o[i.attributesKey]=i.instructionFn(o[i.attributesKey],n,r))):("instructionFn"in i&&(t[n]=i.instructionFn(t[n],n,r)),o[i.instructionKey]=t[n])}else e+"Fn"in i&&(t=i[e+"Fn"](t,r)),o[i[e+"Key"]]=t;i.addParent&&(o[i.parentKey]=r),r[i.elementsKey].push(o)}}function f(e){var t;if("attributesFn"in i&&e&&(e=i.attributesFn(e,r)),(i.trim||"attributeValueFn"in i||"attributeNameFn"in i||i.nativeTypeAttributes)&&e)for(t in e)if(e.hasOwnProperty(t)&&(i.trim&&(e[t]=e[t].trim()),i.nativeTypeAttributes&&(e[t]=d(e[t])),"attributeValueFn"in i&&(e[t]=i.attributeValueFn(e[t],t,r)),"attributeNameFn"in i)){var n=e[t];delete e[t],e[i.attributeNameFn(t,e[t],r)]=n}return e}function p(e){var t={};if(e.body&&("xml"===e.name.toLowerCase()||i.instructionHasAttributes)){var n,a=/([\w:-]+)\s*=\s*(?:"([^"]*)"|'([^']*)'|(\w+))\s*/g;while(null!==(n=a.exec(e.body)))t[n[1]]=n[2]||n[3]||n[4];t=f(t)}if("xml"===e.name.toLowerCase()){if(i.ignoreDeclaration)return;r[i.declarationKey]={},Object.keys(t).length&&(r[i.declarationKey][i.attributesKey]=t),i.addParent&&(r[i.declarationKey][i.parentKey]=r)}else{if(i.ignoreInstruction)return;i.trim&&(e.body=e.body.trim());var o={};i.instructionHasAttributes&&Object.keys(t).length?(o[e.name]={},o[e.name][i.attributesKey]=t):o[e.name]=e.body,h("instruction",o)}}function g(e,t){var n;if("object"===typeof e&&(t=e.attributes,e=e.name),t=f(t),"elementNameFn"in i&&(e=i.elementNameFn(e,r)),i.compact){var a;if(n={},!i.ignoreAttributes&&t&&Object.keys(t).length)for(a in n[i.attributesKey]={},t)t.hasOwnProperty(a)&&(n[i.attributesKey][a]=t[a]);!(e in r)&&(u(i.alwaysArray)?-1!==i.alwaysArray.indexOf(e):i.alwaysArray)&&(r[e]=[]),r[e]&&!u(r[e])&&(r[e]=[r[e]]),u(r[e])?r[e].push(n):r[e]=n}else r[i.elementsKey]||(r[i.elementsKey]=[]),n={},n[i.typeKey]="element",n[i.nameKey]=e,!i.ignoreAttributes&&t&&Object.keys(t).length&&(n[i.attributesKey]=t),i.alwaysChildren&&(n[i.elementsKey]=[]),r[i.elementsKey].push(n);n[i.parentKey]=r,r=n}function m(e){i.ignoreText||(e.trim()||i.captureSpacesBetweenElements)&&(i.trim&&(e=e.trim()),i.nativeType&&(e=d(e)),i.sanitize&&(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),h("text",e))}function v(e){i.ignoreComment||(i.trim&&(e=e.trim()),h("comment",e))}function y(e){var t=r[i.parentKey];i.addParent||delete r[i.parentKey],r=t}function b(e){i.ignoreCdata||(i.trim&&(e=e.trim()),h("cdata",e))}function T(e){i.ignoreDoctype||(e=e.replace(/^ /,""),i.trim&&(e=e.trim()),h("doctype",e))}function E(e){e.note=e}e.exports=function(e,t){var n=l?a.parser(!0,{}):n=new o.Parser("UTF-8"),s={};if(r=s,i=c(t),l?(n.opt={strictEntities:!0},n.onopentag=g,n.ontext=m,n.oncomment=v,n.onclosetag=y,n.onerror=E,n.oncdata=b,n.ondoctype=T,n.onprocessinginstruction=p):(n.on("startElement",g),n.on("text",m),n.on("comment",v),n.on("endElement",y),n.on("error",E)),l)n.write(e).close();else if(!n.parse(e))throw new Error("XML parsing error: "+n.getError());if(s[i.elementsKey]){var u=s[i.elementsKey];delete s[i.elementsKey],s[i.elementsKey]=u,delete s.text}return s}},8682:function(e,t,n){(function(e){
/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/
(function(){var n="undefined"!=typeof window?window:e,i={};for(var r in function(e,t,n){var i;function a(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var o="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};function s(n){n=["object"==typeof globalThis&&globalThis,n,"object"==typeof e&&e,"object"==typeof self&&self,"object"==typeof t&&t];for(var i=0;i<n.length;++i){var r=n[i];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")}var u=s(this);function l(e,t){if(t)e:{for(var n=u,i=e.split("."),r=0;r<i.length-1;r++){var a=i[r];if(!(a in n))break e;n=n[a]}i=i[i.length-1],r=n[i],a=t(r),a!=r&&null!=a&&o(n,i,{configurable:!0,writable:!0,value:a})}}function c(e){return e={next:e},e[Symbol.iterator]=function(){return this},e}function d(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:a(e)}}function h(e){if(!(e instanceof Array)){e=d(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}l("Symbol",(function(e){function t(e){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new n(i+(e||"")+"_"+r++,e)}function n(e,t){this.g=e,o(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;n.prototype.toString=function(){return this.g};var i="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",r=0;return t})),l("Symbol.iterator",(function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var i=u[t[n]];"function"===typeof i&&"function"!=typeof i.prototype[e]&&o(i.prototype,e,{configurable:!0,writable:!0,value:function(){return c(a(this))}})}return e}));var f,p="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)f=Object.setPrototypeOf;else{var g;e:{var m={a:!0},v={};try{v.__proto__=m,g=v.a;break e}catch(Hw){}g=!1}f=g?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var y=f;function b(e,t){if(e.prototype=p(t.prototype),e.prototype.constructor=e,y)y(e,t);else for(var n in t)if("prototype"!=n)if(Object.defineProperties){var i=Object.getOwnPropertyDescriptor(t,n);i&&Object.defineProperty(e,n,i)}else e[n]=t[n];e.Ai=t.prototype}function T(){this.A=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.o=0,this.D=this.i=null}function E(e){if(e.A)throw new TypeError("Generator is already running");e.A=!0}function w(e,t){e.i={Re:t,$e:!0},e.g=e.o||e.j}function S(e,t,n){return e.g=n,{value:t}}function A(e){e.g=0}function x(e,t,n){e.o=t,void 0!=n&&(e.j=n)}function _(e){e.o=0,e.j=2}function I(e,t,n){e.g=t,e.o=n||0}function k(e,t){e.o=t||0;var n=e.i.Re;return e.i=null,n}function C(e){e.D=[e.i],e.o=0,e.j=0}function L(e,t){var n=e.D.splice(0)[0];(n=e.i=e.i||n)?n.$e?e.g=e.o||e.j:void 0!=n.C&&e.j<n.C?(e.g=n.C,e.i=null):e.g=e.j:e.g=t}function P(e){this.g=new T,this.h=e}function N(e,t){E(e.g);var n=e.g.l;return n?D(e,"return"in n?n["return"]:function(e){return{value:e,done:!0}},t,e.g["return"]):(e.g["return"](t),R(e))}function D(e,t,n,i){try{var r=t.call(e.g.l,n);if(!(r instanceof Object))throw new TypeError("Iterator result "+r+" is not an object");if(!r.done)return e.g.A=!1,r;var a=r.value}catch(o){return e.g.l=null,w(e.g,o),R(e)}return e.g.l=null,i.call(e.g,a),R(e)}function R(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.A=!1,{value:t.value,done:!1}}catch(n){e.g.h=void 0,w(e.g,n)}if(e.g.A=!1,e.g.i){if(t=e.g.i,e.g.i=null,t.$e)throw t.Re;return{value:t["return"],done:!0}}return{value:void 0,done:!0}}function M(e){this.next=function(t){return E(e.g),e.g.l?t=D(e,e.g.l.next,t,e.g.B):(e.g.B(t),t=R(e)),t},this["throw"]=function(t){return E(e.g),e.g.l?t=D(e,e.g.l["throw"],t,e.g.B):(w(e.g,t),t=R(e)),t},this["return"]=function(t){return N(e,t)},this[Symbol.iterator]=function(){return this}}function U(e,t){var n=new M(new P(t));return y&&e.prototype&&y(n,e.prototype),n}function O(e){function t(t){return e.next(t)}function n(t){return e["throw"](t)}return new Promise((function(i,r){function a(e){e.done?i(e.value):Promise.resolve(e.value).then(t,n).then(a,r)}a(e.next())}))}function F(e){return O(new M(new P(e)))}function j(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function B(e,t){e instanceof String&&(e+="");var n=0,i=!1,r={next:function(){if(!i&&n<e.length){var r=n++;return{value:t(r,e[r]),done:!1}}return i=!0,{done:!0,value:void 0}}};return r[Symbol.iterator]=function(){return r},r}function G(e,t,n){e instanceof String&&(e=String(e));for(var i=e.length,r=0;r<i;r++){var a=e[r];if(t.call(n,a,r,e))return{za:r,yf:a}}return{za:-1,yf:void 0}}function V(e,t,n){if(null==e)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}T.prototype.B=function(e){this.h=e},T.prototype["return"]=function(e){this.i={return:e},this.g=this.j},T.prototype.C=function(e){this.g=e},l("Promise",(function(e){function t(e){this.h=0,this.i=void 0,this.g=[],this.A=!1;var t=this.j();try{e(t.resolve,t.reject)}catch(r){t.reject(r)}}function n(){this.g=null}function i(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;n.prototype.h=function(e){if(null==this.g){this.g=[];var t=this;this.i((function(){t.l()}))}this.g.push(e)};var a=u.setTimeout;n.prototype.i=function(e){a(e,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var e=this.g;this.g=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(i){this.j(i)}}}this.g=null},n.prototype.j=function(e){this.i((function(){throw e}))},t.prototype.j=function(){function e(e){return function(i){n||(n=!0,e.call(t,i))}}var t=this,n=!1;return{resolve:e(this.K),reject:e(this.l)}},t.prototype.K=function(e){if(e===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.O(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.I(e):this.o(e)}},t.prototype.I=function(e){var t=void 0;try{t=e.then}catch(r){return void this.l(r)}"function"==typeof t?this.R(t,e):this.o(e)},t.prototype.l=function(e){this.B(2,e)},t.prototype.o=function(e){this.B(1,e)},t.prototype.B=function(e,t){if(0!=this.h)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.h);this.h=e,this.i=t,2===this.h&&this.L(),this.D()},t.prototype.L=function(){var e=this;a((function(){if(e.H()){var t=u.console;"undefined"!==typeof t&&t.error(e.i)}}),1)},t.prototype.H=function(){if(this.A)return!1;var e=u.CustomEvent,t=u.Event,n=u.dispatchEvent;return"undefined"===typeof n||("function"===typeof e?e=new e("unhandledrejection",{cancelable:!0}):"function"===typeof t?e=new t("unhandledrejection",{cancelable:!0}):(e=u.document.createEvent("CustomEvent"),e.initCustomEvent("unhandledrejection",!1,!0,e)),e.promise=this,e.reason=this.i,n(e))},t.prototype.D=function(){if(null!=this.g){for(var e=0;e<this.g.length;++e)o.h(this.g[e]);this.g=null}};var o=new n;return t.prototype.O=function(e){var t=this.j();e.Zc(t.resolve,t.reject)},t.prototype.R=function(e,t){var n=this.j();try{e.call(t,n.resolve,n.reject)}catch(i){n.reject(i)}},t.prototype.then=function(e,n){function i(e,t){return"function"==typeof e?function(t){try{r(e(t))}catch(n){a(n)}}:t}var r,a,o=new t((function(e,t){r=e,a=t}));return this.Zc(i(e,r),i(n,a)),o},t.prototype["catch"]=function(e){return this.then(void 0,e)},t.prototype.Zc=function(e,t){function n(){switch(i.h){case 1:e(i.i);break;case 2:t(i.i);break;default:throw Error("Unexpected state: "+i.h)}}var i=this;null==this.g?o.h(n):this.g.push(n),this.A=!0},t.resolve=i,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var r=d(e),a=r.next();!a.done;a=r.next())i(a.value).Zc(t,n)}))},t.all=function(e){var n=d(e),r=n.next();return r.done?i([]):new t((function(e,t){function a(t){return function(n){o[t]=n,s--,0==s&&e(o)}}var o=[],s=0;do{o.push(void 0),s++,i(r.value).Zc(a(o.length-1),t),r=n.next()}while(!r.done)}))},t})),l("WeakMap",(function(e){function t(e){if(this.g=(u+=Math.random()+1).toString(),e){e=d(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}}function n(){}function i(e){var t=typeof e;return"object"===t&&null!==e||"function"===t}function r(e){if(!j(e,s)){var t=new n;o(e,s,{value:t})}}function a(e){var t=Object[e];t&&(Object[e]=function(e){return e instanceof n?e:(Object.isExtensible(e)&&r(e),t(e))})}if(function(){if(!e||!Object.seal)return!1;try{var t=Object.seal({}),n=Object.seal({}),i=new e([[t,2],[n,3]]);return 2==i.get(t)&&3==i.get(n)&&(i["delete"](t),i.set(n,4),!i.has(t)&&4==i.get(n))}catch(r){return!1}}())return e;var s="$jscomp_hidden_"+Math.random();a("freeze"),a("preventExtensions"),a("seal");var u=0;return t.prototype.set=function(e,t){if(!i(e))throw Error("Invalid WeakMap key");if(r(e),!j(e,s))throw Error("WeakMap key fail: "+e);return e[s][this.g]=t,this},t.prototype.get=function(e){return i(e)&&j(e,s)?e[s][this.g]:void 0},t.prototype.has=function(e){return i(e)&&j(e,s)&&j(e[s],this.g)},t.prototype["delete"]=function(e){return!!(i(e)&&j(e,s)&&j(e[s],this.g))&&delete e[s][this.g]},t})),l("Map",(function(e){function t(){var e={};return e.mb=e.next=e.head=e}function n(e,t){var n=e.g;return c((function(){if(n){for(;n.head!=e.g;)n=n.mb;for(;n.next!=n.head;)return n=n.next,{done:!1,value:t(n)};n=null}return{done:!0,value:void 0}}))}function i(e,t){var n=t&&typeof t;"object"==n||"function"==n?a.has(t)?n=a.get(t):(n=""+ ++o,a.set(t,n)):n="p_"+t;var i=e.h[n];if(i&&j(e.h,n))for(var r=0;r<i.length;r++){var s=i[r];if(t!==t&&s.key!==s.key||t===s.key)return{id:n,list:i,index:r,ya:s}}return{id:n,list:i,index:-1,ya:void 0}}function r(e){if(this.h={},this.g=t(),this.size=0,e){e=d(e);for(var n;!(n=e.next()).done;)n=n.value,this.set(n[0],n[1])}}if(function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(d([[t,"s"]]));if("s"!=n.get(t)||1!=n.size||n.get({x:4})||n.set({x:4},"t")!=n||2!=n.size)return!1;var i=n.entries(),r=i.next();return!r.done&&r.value[0]==t&&"s"==r.value[1]&&(r=i.next(),!(r.done||4!=r.value[0].x||"t"!=r.value[1]||!i.next().done))}catch(a){return!1}}())return e;var a=new WeakMap;r.prototype.set=function(e,t){e=0===e?0:e;var n=i(this,e);return n.list||(n.list=this.h[n.id]=[]),n.ya?n.ya.value=t:(n.ya={next:this.g,mb:this.g.mb,head:this.g,key:e,value:t},n.list.push(n.ya),this.g.mb.next=n.ya,this.g.mb=n.ya,this.size++),this},r.prototype["delete"]=function(e){return e=i(this,e),!(!e.ya||!e.list)&&(e.list.splice(e.index,1),e.list.length||delete this.h[e.id],e.ya.mb.next=e.ya.next,e.ya.next.mb=e.ya.mb,e.ya.head=null,this.size--,!0)},r.prototype.clear=function(){this.h={},this.g=this.g.mb=t(),this.size=0},r.prototype.has=function(e){return!!i(this,e).ya},r.prototype.get=function(e){return(e=i(this,e).ya)&&e.value},r.prototype.entries=function(){return n(this,(function(e){return[e.key,e.value]}))},r.prototype.keys=function(){return n(this,(function(e){return e.key}))},r.prototype.values=function(){return n(this,(function(e){return e.value}))},r.prototype.forEach=function(e,t){for(var n,i=this.entries();!(n=i.next()).done;)n=n.value,e.call(t,n[1],n[0],this)},r.prototype[Symbol.iterator]=r.prototype.entries;var o=0;return r})),l("Set",(function(e){function t(e){if(this.g=new Map,e){e=d(e);for(var t;!(t=e.next()).done;)this.add(t.value)}this.size=this.g.size}return function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(d([t]));if(!n.has(t)||1!=n.size||n.add(t)!=n||1!=n.size||n.add({x:4})!=n||2!=n.size)return!1;var i=n.entries(),r=i.next();return!r.done&&r.value[0]==t&&r.value[1]==t&&(r=i.next(),!r.done&&r.value[0]!=t&&4==r.value[0].x&&r.value[1]==r.value[0]&&i.next().done)}catch(a){return!1}}()?e:(t.prototype.add=function(e){return e=0===e?0:e,this.g.set(e,e),this.size=this.g.size,this},t.prototype["delete"]=function(e){return e=this.g["delete"](e),this.size=this.g.size,e},t.prototype.clear=function(){this.g.clear(),this.size=0},t.prototype.has=function(e){return this.g.has(e)},t.prototype.entries=function(){return this.g.entries()},t.prototype.values=function(){return this.g.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(e,t){var n=this;this.g.forEach((function(i){return e.call(t,i,i,n)}))},t)})),l("Array.prototype.keys",(function(e){return e||function(){return B(this,(function(e){return e}))}})),l("Array.from",(function(e){return e||function(e,t,n){t=null!=t?t:function(e){return e};var i=[],r="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];if("function"==typeof r){e=r.call(e);for(var a=0;!(r=e.next()).done;)i.push(t.call(n,r.value,a++))}else for(r=e.length,a=0;a<r;a++)i.push(t.call(n,e[a],a));return i}})),l("Array.prototype.findIndex",(function(e){return e||function(e,t){return G(this,e,t).za}})),l("Object.is",(function(e){return e||function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}})),l("Array.prototype.includes",(function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var i=n.length,r=t||0;for(0>r&&(r=Math.max(r+i,0));r<i;r++){var a=n[r];if(a===e||Object.is(a,e))return!0}return!1}})),l("String.prototype.includes",(function(e){return e||function(e,t){return-1!==V(this,e,"includes").indexOf(e,t||0)}})),l("Array.prototype.find",(function(e){return e||function(e,t){return G(this,e,t).yf}})),l("String.prototype.startsWith",(function(e){return e||function(e,t){for(var n=V(this,e,"startsWith"),i=n.length,r=e.length,a=Math.max(0,Math.min(0|t,n.length)),o=0;o<r&&a<i;)if(n[a++]!=e[o++])return!1;return o>=r}}));var K="function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i)for(var r in i)j(i,r)&&(e[r]=i[r])}return e};l("Object.assign",(function(e){return e||K})),l("Array.prototype.values",(function(e){return e||function(){return B(this,(function(e,t){return t}))}})),l("Promise.prototype.finally",(function(e){return e||function(e){return this.then((function(t){return Promise.resolve(e()).then((function(){return t}))}),(function(t){return Promise.resolve(e()).then((function(){throw t}))}))}})),l("Array.prototype.entries",(function(e){return e||function(){return B(this,(function(e,t){return[e,t]}))}})),l("String.prototype.repeat",(function(e){return e||function(e){var t=V(this,null,"repeat");if(0>e||1342177279<e)throw new RangeError("Invalid count value");e|=0;for(var n="";e;)1&e&&(n+=t),(e>>>=1)&&(t+=t);return n}})),l("Object.values",(function(e){return e||function(e){var t,n=[];for(t in e)j(e,t)&&n.push(e[t]);return n}})),l("Math.log2",(function(e){return e||function(e){return Math.log(e)/Math.LN2}})),l("Object.entries",(function(e){return e||function(e){var t,n=[];for(t in e)j(e,t)&&n.push([t,e[t]]);return n}}));var z=this||self;function H(e,t){var n,i=e.split("."),r=z;i[0]in r||"undefined"==typeof r.execScript||r.execScript("var "+i[0]);for(;i.length&&(n=i.shift());)i.length||void 0===t?r=r[n]&&r[n]!==Object.prototype[n]?r[n]:r[n]={}:r[n]=t}
/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/
function W(t,n){for(var i in n=void 0===n?{}:n,n)Object.defineProperty(this,i,{value:n[i],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=e.performance&&e.performance.now?e.performance.now():Date.now(),this.type=t,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function q(){}function Y(){}function X(){}function $(e,t){for(var n=[],i=1;i<arguments.length;++i)n[i-1]=arguments[i];te.has(e)||(te.add(e),X.apply(q,h(n)))}function J(){}function Q(){}function Z(){}function ee(){}W.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},W.prototype.stopImmediatePropagation=function(){this.g=!0},W.prototype.stopPropagation=function(){},H("shaka.util.FakeEvent",W);var te=new Set;if(e.console&&e.console.log.bind){var ne={},ie=(ne[1]=console.error.bind(console),ne[2]=console.warn.bind(console),ne[3]=console.info.bind(console),ne[4]=console.log.bind(console),ne[5]=console.debug.bind(console),ne[6]=console.debug.bind(console),ne);X=ie[2],Y=ie[1]}function re(){this.g={}}function ae(e,t){for(var n in e.g)t(n,e.g[n])}function oe(){this.Wc=new re,this.Vc=this}function se(e,t){for(var n=[],i=d(e),r=i.next();!r.done;r=i.next())n.push(t(r.value));return n}function ue(e,t){for(var n=d(e),i=n.next();!i.done;i=n.next())if(!t(i.value))return!1;return!0}function le(e,t){for(var n=d(e),i=n.next();!i.done;i=n.next())if(t(i.value))return!0;return!1}function ce(e,t){for(var n=[],i=d(e),r=i.next();!r.done;r=i.next())r=r.value,t(r)&&n.push(r);return n}i=re.prototype,i.push=function(e,t){this.g.hasOwnProperty(e)?this.g[e].push(t):this.g[e]=[t]},i.get=function(e){return(e=this.g[e])?e.slice():null},i.remove=function(e,t){e in this.g&&(this.g[e]=this.g[e].filter((function(e){return e!=t})),0==this.g[e].length&&delete this.g[e])},i.size=function(){return Object.keys(this.g).length},i.keys=function(){return Object.keys(this.g)},oe.prototype.addEventListener=function(e,t){this.Wc.push(e,t)},oe.prototype.removeEventListener=function(e,t){this.Wc.remove(e,t)},oe.prototype.dispatchEvent=function(e){var t=this.Wc.get(e.type)||[],n=this.Wc.get("All");for(n&&(t=t.concat(n)),t=d(t),n=t.next();!n.done;n=t.next()){n=n.value,e.target=this.Vc,e.currentTarget=this.Vc;try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch(i){}if(e.g)break}return e.defaultPrevented};var de=function e(t){var n;return U(e,(function(e){return 1==e.g&&(n=0),3!=e.g?n<t?S(e,n,3):e.C(0):(n++,e.C(2))}))},he=function e(t){var n,i,r,a,o,s;return U(e,(function(e){return 1==e.g&&(n=-1,r=i=void 0,a=d(t),o=a.next()),5!=e.g?o.done?-1==n?e.C(0):S(e,{za:n,Kg:i,item:r,next:void 0},0):(s=o.value,0<=n?S(e,{za:n,item:r,Kg:i,next:s},5):e.C(5)):(n++,i=r,r=s,o=a.next(),e.C(2))}))},fe=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;
/*
 @license
 Copyright 2008 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/
/*
 @license
 Copyright 2006 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/
function pe(e){var t;e instanceof pe?(ge(this,e.Wa),this.Qb=e.Qb,this.Ya=e.Ya,me(this,e.hc),this.Qa=e.Qa,ve(this,e.g.clone()),this.Eb=e.Eb):e&&(t=String(e).match(fe))?(ge(this,t[1]||"",!0),this.Qb=ye(t[2]||""),this.Ya=ye(t[3]||"",!0),me(this,t[4]),this.Qa=ye(t[5]||"",!0),ve(this,t[6]||"",!0),this.Eb=ye(t[7]||"")):this.g=new _e(null)}function ge(e,t,n){e.Wa=n?ye(t,!0):t,e.Wa&&(e.Wa=e.Wa.replace(/:$/,""))}function me(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.hc=t}else e.hc=null}function ve(e,t,n){t instanceof _e?e.g=t:(n||(t=be(t,Ae)),e.g=new _e(t))}function ye(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function be(e,t,n){return null!=e?(e=encodeURI(e).replace(t,Te),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Te(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(15&e).toString(16)}i=pe.prototype,i.Wa="",i.Qb="",i.Ya="",i.hc=null,i.Qa="",i.Eb="",i.toString=function(){var e=[],t=this.Wa;if(t&&e.push(be(t,Ee,!0),":"),t=this.Ya){e.push("//");var n=this.Qb;n&&e.push(be(n,Ee,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.hc,null!=t&&e.push(":",String(t))}return(t=this.Qa)&&(this.Ya&&"/"!=t.charAt(0)&&e.push("/"),e.push(be(t,"/"==t.charAt(0)?Se:we,!0))),(t=this.g.toString())&&e.push("?",t),(t=this.Eb)&&e.push("#",be(t,xe)),e.join("")},i.resolve=function(e){var t=this.clone();"data"===t.Wa&&(t=new pe);var n=!!e.Wa;n?ge(t,e.Wa):n=!!e.Qb,n?t.Qb=e.Qb:n=!!e.Ya,n?t.Ya=e.Ya:n=null!=e.hc;var i=e.Qa;if(n)me(t,e.hc);else if(n=!!e.Qa){if("/"!=i.charAt(0))if(this.Ya&&!this.Qa)i="/"+i;else{var r=t.Qa.lastIndexOf("/");-1!=r&&(i=t.Qa.substr(0,r+1)+i)}if(".."==i||"."==i)i="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var a=[],o=0;o<i.length;){var s=i[o++];"."==s?r&&o==i.length&&a.push(""):".."==s?((1<a.length||1==a.length&&""!=a[0])&&a.pop(),r&&o==i.length&&a.push("")):(a.push(s),r=!0)}i=a.join("/")}}return n?t.Qa=i:n=""!==e.g.toString(),n?ve(t,e.g.clone()):n=!!e.Eb,n&&(t.Eb=e.Eb),t},i.clone=function(){return new pe(this)};var Ee=/[#\/\?@]/g,we=/[#\?:]/g,Se=/[#\?]/g,Ae=/[#\?@]/g,xe=/#/g;function _e(e){this.g=e||null}function Ie(e,t,n,i){for(var r=[],a=3;a<arguments.length;++a)r[a-3]=arguments[a];this.severity=e,this.category=t,this.code=n,this.data=r,this.handled=!1}function ke(e,t){this.g=e,this.h=t}function Ce(e,t){var n=new ke(4,0),i=Ne,r=i.g,a=n.h-r.h;(0<(n.g-r.g||a)?i.i:i.h)(i.g,n,e,t)}function Le(e,t,n,i){X([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",i].join(" "))}function Pe(e,t,n,i){Y([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",i].join(""))}i=_e.prototype,i.Na=null,i.bd=null,i.add=function(e,t){if(!this.Na&&(this.Na={},this.bd=0,this.g))for(var n=this.g.split("&"),i=0;i<n.length;i++){var r=n[i].indexOf("="),a=null;if(0<=r){var o=n[i].substring(0,r);a=n[i].substring(r+1)}else o=n[i];o=decodeURIComponent(o.replace(/\+/g," ")),a=a||"",this.add(o,decodeURIComponent(a.replace(/\+/g," ")))}return this.g=null,(n=this.Na.hasOwnProperty(e)&&this.Na[e])||(this.Na[e]=n=[]),n.push(t),this.bd++,this},i.toString=function(){if(this.g)return this.g;if(!this.Na)return"";var e,t=[];for(e in this.Na)for(var n=encodeURIComponent(e),i=this.Na[e],r=0;r<i.length;r++){var a=n;""!==i[r]&&(a+="="+encodeURIComponent(i[r])),t.push(a)}return this.g=t.join("&")},i.clone=function(){var e=new _e;if(e.g=this.g,this.Na){var t,n={};for(t in this.Na)n[t]=this.Na[t].concat();e.Na=n,e.bd=this.bd}return e},Ie.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},H("shaka.util.Error",Ie),Ie.Severity={RECOVERABLE:1,CRITICAL:2},Ie.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},Ie.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_MASTER_PLAYLIST_NOT_PROVIDED:4022,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,HLS_COULD_NOT_PARSE_SEGMENT_START_TIME:4030,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,HLS_AES_128_ENCRYPTION_NOT_SUPPORTED:4034,HLS_INTERNAL_SKIP_STREAM:4035,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004},ke.prototype.toString=function(){return"v"+this.g+"."+this.h};var Ne=null;function De(e,t){return e.concat(t)}function Re(){}function Me(e){return null!=e}function Ue(e){var t=Object.create(e.prototype||Object.prototype);try{var n=e.call(t);n||(Ce("Factories requiring new","Factories should be plain functions"),n=t)}catch(i){Ce("Factories requiring new","Factories should be plain functions"),n=new e}return n}function Oe(e,t){if(0==t.length)return e;var n=t.map((function(e){return new pe(e)}));return e.map((function(e){return new pe(e)})).map((function(e){return n.map((function(t){return e.resolve(t)}))})).reduce(De,[]).map((function(e){return e.toString()}))}function Fe(e,t){return{keySystem:e,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:t||[],keyIds:new Set}}function je(e,t){if(1==t.length)return t[0];var n=Be(e,t);if(null!=n)return n;throw new Ie(2,4,4025,t)}function Be(e,t){for(var n=d(Ke[e]),i=n.next();!i.done;i=n.next()){i=i.value;for(var r=d(t),a=r.next();!a.done;a=r.next())if(a=a.value,i.test(a.trim()))return a.trim()}return e==Ge?"":null}var Ge="text",Ve={fb:"video",zb:"audio",oa:Ge,tc:"image",jh:"application"},Ke={audio:[/^vorbis$/,/^opus$/,/^flac$/,/^mp4a/,/^[ae]c-3$/],video:[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av1$/],text:[/^vtt$/,/^wvtt/,/^stpp/]};function ze(e,t){return e=qe(e),t=qe(t),e.split("-")[0]==t.split("-")[0]}function He(e,t){e=qe(e),t=qe(t);var n=e.split("-"),i=t.split("-");return n[0]==i[0]&&1==n.length&&2==i.length}function We(e,t){e=qe(e),t=qe(t);var n=e.split("-"),i=t.split("-");return 2==n.length&&2==i.length&&n[0]==i[0]}function qe(e){var t=e.split("-");return e=t[0]||"",t=t[1]||"",e=e.toLowerCase(),e=Qe.get(e)||e,(t=t.toUpperCase())?e+"-"+t:e}function Ye(e,t){return e=qe(e),t=qe(t),t==e?4:He(t,e)?3:We(t,e)?2:He(e,t)?1:0}function Xe(e){var t=e.indexOf("-");return e=0<=t?e.substring(0,t):e,e=e.toLowerCase(),Qe.get(e)||e}function $e(e){return e.language?qe(e.language):e.audio&&e.audio.language?qe(e.audio.language):e.video&&e.video.language?qe(e.video.language):"und"}function Je(e,t){for(var n=qe(e),i=new Set,r=d(t),a=r.next();!a.done;a=r.next())i.add(qe(a.value));for(r=d(i),a=r.next();!a.done;a=r.next())if(a=a.value,a==n)return a;for(r=d(i),a=r.next();!a.done;a=r.next())if(a=a.value,He(a,n))return a;for(r=d(i),a=r.next();!a.done;a=r.next())if(a=a.value,We(a,n))return a;for(i=d(i),a=i.next();!a.done;a=i.next())if(a=a.value,He(n,a))return a;return null}var Qe=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function Ze(e){this.l=qe(e),this.j=new Map,this.h=new Set,this.i=new Map,this.g=new oe}function et(e){for(var t=e.i,n=e.l,i=e.h,r=new Set,a={},o=d(i),s=o.next();!s.done;a={Vb:a.Vb},s=o.next()){a.Vb=s.value,r.add(a.Vb),r.add(Xe(a.Vb)),s=ce(t.keys(),function(e){return function(t){var n=e.Vb,i=Xe(t),r=Xe(n);return t!=i&&n!=r&&i==r}}(a)),s.sort();var u=d(s);for(s=u.next();!s.done;s=u.next())r.add(s.value);for(s=ce(t.keys(),function(e){return function(t){return Xe(t)==e.Vb}}(a)),s.sort(),u=d(s),s=u.next();!s.done;s=u.next())r.add(s.value)}for(r.add(n),n=[],r=d(r),s=r.next();!s.done;s=r.next())(s=t.get(s.value))&&n.push(s);for(n.reverse(),e.j.clear(),t=d(n),s=t.next();!s.done;s=t.next())s.value.forEach((function(t,n){e.j.set(n,t)}));for(t=e.j.keys(),r=new Set,n=d(e.h),s=n.next();!s.done;s=n.next())s=e.i.get(s.value)||new Map,tt(s,t,r);0<r.size&&(i={locales:Array.from(i),missing:Array.from(r)},e.g.dispatchEvent(new W("missing-localizations",i)))}function tt(e,t,n){t=d(t);for(var i=t.next();!i.done;i=t.next())i=i.value,e.get(i)||n.add(i)}i=Ze.prototype,i.addEventListener=function(e,t,n){this.g.addEventListener(e,t,n)},i.removeEventListener=function(e,t,n){this.g.removeEventListener(e,t,n||void 0)},i.dispatchEvent=function(e){return this.g.dispatchEvent(e)},i.Ke=function(e){var t=this;this.h.clear(),e=d(e);for(var n=e.next();!n.done;n=e.next())this.h.add(qe(n.value));et(this),e=ce(this.h,(function(e){return!t.i.has(e)})),e.length&&this.g.dispatchEvent(new W("unknown-locales",{locales:e})),e=ce(this.h,(function(e){return t.i.has(e)})),this.g.dispatchEvent(new W("locale-changed",{locales:e.length?e:[this.l]}))},i.ia=function(e,t,n){e=qe(e),void 0===n&&(n=nt);var i=this.i.get(e)||new Map;return t.forEach((function(e,t){i.has(t)&&n!=nt||i.set(t,e)})),this.i.set(e,i),et(this),this.g.dispatchEvent(new W("locale-updated")),this},i.Tg=function(e){for(var t=d(e.keys()),n=t.next();!n.done;n=t.next())n=n.value,e.set(n,this.resolve(n))},i.resolve=function(e){var t=this.j.get(e);return t||(e={locales:Array.from(this.h),missing:e},this.g.dispatchEvent(new W("unknown-localization",e)),"")},H("shaka.ui.Localization",Ze),Ze.prototype.resolve=Ze.prototype.resolve,Ze.prototype.resolveDictionary=Ze.prototype.Tg,Ze.prototype.insert=Ze.prototype.ia,Ze.prototype.changeLocale=Ze.prototype.Ke,Ze.prototype.dispatchEvent=Ze.prototype.dispatchEvent,Ze.prototype.removeEventListener=Ze.prototype.removeEventListener,Ze.prototype.addEventListener=Ze.prototype.addEventListener;var nt=1;Ze.ConflictResolution={USE_OLD:0,USE_NEW:nt},Ze.UNKNOWN_LOCALES="unknown-locales",Ze.UNKNOWN_LOCALIZATION="unknown-localization",Ze.MISSING_LOCALIZATIONS="missing-localizations",Ze.LOCALE_CHANGED="locale-changed",Ze.LOCALE_UPDATED="locale-updated";var it={BACK:"BACK",Bh:"FAST_FORWARD",Kh:"MUTE",Rh:"PAUSE",pi:"VOLUME",Ch:"FULL_SCREEN",Mh:"NOT_APPLICABLE",Wh:"RESOLUTION",Vh:"REPLAY",Ge:"LIVE",sh:"ENTER_PICTURE_IN_PICTURE",mi:"UNMUTE",vh:"EXIT_FULL_SCREEN",$h:"SKIP_AD",ai:"SKIP_TO_LIVE",Eh:"LOOP",Xh:"REWIND",hh:"AD_TIME",AD_PROGRESS:"AD_PROGRESS",gh:"AD_DURATION",ih:"AIRPLAY",rh:"ENTER_LOOP_MODE",wh:"EXIT_LOOP_MODE",Uh:"PLAYBACK_RATE",li:"UNDETERMINED_LANGUAGE",Th:"PLAY",oh:"CAPTIONS",xh:"EXIT_PICTURE_IN_PICTURE",ni:"UNRECOGNIZED_LANGUAGE",kh:"AUTO_QUALITY",Sh:"PICTURE_IN_PICTURE",ph:"CAST",Zh:"SEEK",Ih:"MORE_SETTINGS",Af:"SUBTITLE_FORCED",Dh:"LANGUAGE",Nh:"OFF",Oh:"ON",Jh:"MULTIPLE_LANGUAGES"};function rt(e){this.i=Math.exp(Math.log(.5)/e),this.h=this.g=0}function at(e,t,n){var i=Math.pow(e.i,t);n=n*(1-i)+i*e.g,isNaN(n)||(e.g=n,e.h+=t)}function ot(e){return e.g/(1-Math.pow(e.i,e.h))}function st(){this.h=new rt(2),this.i=new rt(5),this.g=0}function ut(e,t){return!("number"!==typeof e||"number"!==typeof t||!isNaN(e)||!isNaN(t))||e===t}function lt(e,t){var n=e.indexOf(t);-1<n&&e.splice(n,1)}function ct(e,t,n){if(n||(n=ut),e.length!=t.length)return!1;t=t.slice();var i={};e=d(e);for(var r=e.next();!r.done;i={Cd:i.Cd},r=e.next()){if(i.Cd=r.value,r=t.findIndex(function(e){return function(t){return n(e.Cd,t)}}(i)),-1==r)return!1;t[r]=t[t.length-1],t.pop()}return 0==t.length}function dt(e,t,n){if(n||(n=ut),e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(!n(e[i],t[i]))return!1;return!0}function ht(e,t,n){this.startTime=e,this.direction=bt,this.endTime=t,this.payload=n,this.region=new Ct,this.position=null,this.positionAlign=pt,this.size=0,this.textAlign=gt,this.writingMode=Tt,this.lineInterpretation=Et,this.line=null,this.lineHeight="",this.lineAlign=wt,this.displayAlign=vt,this.fontSize=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=_t,this.fontStyle=It,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textDecoration=[],this.wrapLine=!0,this.id="",this.nestedCues=[],this.spacer=this.lineBreak=!1,this.cellResolution={columns:32,rows:15}}function ft(e,t){if(e.startTime!=t.startTime||e.endTime!=t.endTime||e.payload!=t.payload)return!1;for(var n in e)if("startTime"!=n&&"endTime"!=n&&"payload"!=n)if("nestedCues"==n){if(!dt(e.nestedCues,t.nestedCues,ft))return!1}else if("region"==n||"cellResolution"==n){for(var i in e[n])if(e[n][i]!=t[n][i])return!1}else if(Array.isArray(e[n])){if(!dt(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1;return!0}st.prototype.getBandwidthEstimate=function(e){return 128e3>this.g?e:Math.min(ot(this.h),ot(this.i))},ht.prototype.clone=function(){var e,t=new ht(0,0,"");for(e in this)t[e]=this[e],t[e]&&t[e].constructor==Array&&(t[e]=t[e].slice());return t},H("shaka.text.Cue",ht);var pt="auto";ht.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:pt};var gt="center",mt={LEFT:"left",RIGHT:"right",CENTER:gt,START:"start",END:"end"};ht.textAlign=mt;var vt="after",yt={BEFORE:"before",CENTER:"center",AFTER:vt};ht.displayAlign=yt;var bt="ltr";ht.direction={HORIZONTAL_LEFT_TO_RIGHT:bt,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var Tt="horizontal-tb";ht.writingMode={HORIZONTAL_TOP_TO_BOTTOM:Tt,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var Et=0;ht.lineInterpretation={LINE_NUMBER:Et,PERCENTAGE:1};var wt="start",St={CENTER:"center",START:wt,END:"end"};ht.lineAlign=St;var At={white:"#FFF",lime:"#0F0",cyan:"#0FF",red:"#F00",yellow:"#FF0",magenta:"#F0F",blue:"#00F",black:"#000"};ht.defaultTextColor=At;var xt={bg_white:"#FFF",bg_lime:"#0F0",bg_cyan:"#0FF",bg_red:"#F00",bg_yellow:"#FF0",bg_magenta:"#F0F",bg_blue:"#00F",bg_black:"#000"};ht.defaultTextBackgroundColor=xt;var _t=400;ht.fontWeight={NORMAL:_t,BOLD:700};var It="normal",kt={NORMAL:It,ITALIC:"italic",OBLIQUE:"oblique"};function Ct(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=Lt,this.scroll=Pt}ht.fontStyle=kt,ht.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"},H("shaka.text.CueRegion",Ct);var Lt=1;Ct.units={PX:0,PERCENTAGE:Lt,LINES:2};var Pt="";function Nt(){}function Dt(e,t){if(!e&&!t)return!0;if(!e||!t||e.byteLength!=t.byteLength)return!1;if(Rt(e)==Rt(t)&&(e.byteOffset||0)==(t.byteOffset||0))return!0;for(var n=Ut(e),i=Ut(t),r=d(de(e.byteLength)),a=r.next();!a.done;a=r.next())if(a=a.value,n[a]!=i[a])return!1;return!0}function Rt(e){return e instanceof ArrayBuffer?e:e.buffer}function Mt(e){return e instanceof ArrayBuffer?e:0==e.byteOffset&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer}function Ut(e,t,n){return n=void 0===n?1/0:n,Ft(e,void 0===t?0:t,n,Uint8Array)}function Ot(e,t,n){return n=void 0===n?1/0:n,Ft(e,void 0===t?0:t,n,DataView)}function Ft(e,t,n,i){var r=(e.byteOffset||0)+e.byteLength;return t=Math.max(0,Math.min((e.byteOffset||0)+t,r)),new i(Rt(e),t,Math.min(t+Math.max(n,0),r)-t)}function jt(){}Ct.scrollMode={NONE:Pt,UP:"up"},H("shaka.util.BufferUtils",Nt),Nt.toDataView=Ot,Nt.toUint8=Ut,Nt.toArrayBuffer=Mt,Nt.equal=Dt,H("shaka.dependencies",jt),jt.has=function(e){return Gt.has(e)},jt.add=function(e,t){if(!Bt[e])throw Error(e+" is not supported");Gt.set(e,(function(){return t}))};var Bt={muxjs:"muxjs"};jt.Allowed=Bt;var Gt=new Map([["muxjs",function(){return e.muxjs}]]);function Vt(){var e,t,n=new Promise((function(n,i){e=n,t=i}));return n.resolve=e,n.reject=t,n}function Kt(e){this.h=e,this.g=void 0}function zt(){}function Ht(e){return e?(e=Ut(e),239==e[0]&&187==e[1]&&191==e[2]&&(e=e.subarray(3)),e=(new TextDecoder).decode(e),e.includes("�")&&Y('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),e):""}function Wt(e,t,n){if(!e)return"";if(!n&&0!=e.byteLength%2)throw new Ie(2,2,2004);var i=Math.floor(e.byteLength/2);n=new Uint16Array(i),e=Ot(e),i=d(de(i));for(var r=i.next();!r.done;r=i.next())r=r.value,n[r]=e.getUint16(2*r,t);return $t.value()(n)}function qt(e){function t(e){return n.byteLength<=e||32<=n[e]&&126>=n[e]}if(!e)return"";var n=Ut(e);if(239==n[0]&&187==n[1]&&191==n[2])return Ht(n);if(254==n[0]&&255==n[1])return Wt(n.subarray(2),!1);if(255==n[0]&&254==n[1])return Wt(n.subarray(2),!0);if(0==n[0]&&0==n[2])return Wt(e,!1);if(0==n[1]&&0==n[3])return Wt(e,!0);if(t(0)&&t(1)&&t(2)&&t(3))return Ht(e);throw new Ie(2,2,2003)}function Yt(e){var t=new TextEncoder;return Mt(t.encode(e))}function Xt(e,t){for(var n=new ArrayBuffer(2*e.length),i=new DataView(n),r=d(he(e)),a=r.next();!a.done;a=r.next())a=a.value,i.setUint16(2*a.za,a.item.charCodeAt(0),t);return n}Vt.prototype.resolve=function(){},Vt.prototype.reject=function(){},Kt.prototype.value=function(){return void 0==this.g&&(this.g=this.h()),this.g},H("shaka.util.StringUtils",zt),zt.resetFromCharCode=function(){$t.g=void 0},zt.toUTF16=Xt,zt.toUTF8=Yt,zt.fromBytesAutoDetect=qt,zt.fromUTF16=Wt,zt.fromUTF8=Ht;var $t=new Kt((function(){function e(e){try{var t=new Uint8Array(e);return 0<String.fromCharCode.apply(null,t).length}catch(n){return!1}}for(var t={qb:65536};0<t.qb;t={qb:t.qb},t.qb/=2)if(e(t.qb))return function(e){return function(t){for(var n="",i=0;i<t.length;i+=e.qb)n+=String.fromCharCode.apply(null,t.subarray(i,i+e.qb));return n}}(t);return null}));function Jt(){}function Qt(e){return e=Ut(e),e=$t.value()(e),btoa(e)}function Zt(e,t){t=void 0==t||t;var n=Qt(e).replace(/\+/g,"-").replace(/\//g,"_");return t?n:n.replace(/[=]*$/,"")}function en(t){var n=e.atob(t.replace(/-/g,"+").replace(/_/g,"/"));t=new Uint8Array(n.length),n=d(he(n));for(var i=n.next();!i.done;i=n.next())i=i.value,t[i.za]=i.item.charCodeAt(0);return t}function tn(t){var n=t.length/2,i=new Uint8Array(n);n=d(de(n));for(var r=n.next();!r.done;r=n.next())r=r.value,i[r]=e.parseInt(t.substr(2*r,2),16);return i}function nn(e){var t=Ut(e);e="",t=d(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n=n.toString(16),1==n.length&&(n="0"+n),e+=n;return e}function rn(e){for(var t=[],n=0;n<arguments.length;++n)t[n]=arguments[n];var i=0,r=d(t);for(n=r.next();!n.done;n=r.next())i+=n.value.byteLength;for(i=new Uint8Array(i),r=0,t=d(t),n=t.next();!n.done;n=t.next())n=n.value,i.set(Ut(n),r),r+=n.byteLength;return i}function an(){var e=this;this.A=Gt.get("muxjs")(),this.g=new this.A.mp4.Transmuxer({keepOriginalTimestamps:!0}),this.h=null,this.o=[],this.j=[],this.i=[],this.l=!1,this.g.on("data",(function(t){e.j=t.captions,e.i=t.metadata,e.o.push(rn(t.initSegment,t.data))})),this.g.on("done",(function(){var t={data:rn.apply(Jt,h(e.o)),captions:e.j,metadata:e.i};e.h.resolve(t),e.l=!1}))}function on(e,t){if(!Gt.get("muxjs")()||!sn(e))return!1;if(t)return MediaSource.isTypeSupported(un(t,e));var n=un("audio",e),i=un("video",e);return MediaSource.isTypeSupported(n)||MediaSource.isTypeSupported(i)}function sn(e){return"mp2t"==e.toLowerCase().split(";")[0].split("/")[1]}function un(e,t){var n=t.replace(/mp2t/i,"mp4");"audio"==e&&(n=n.replace("video","audio"));var i=/avc1\.(66|77|100)\.(\d+)/.exec(n);if(i){var r="avc1.",a=i[1],o=Number(i[2]);r=("66"==a?r+"4200":"77"==a?r+"4d00":r+"6400")+(o>>4).toString(16),r+=(15&o).toString(16),n=n.replace(i[0],r)}return n}function ln(e,t){e.l=!0,e.h=new Vt,e.o=[],e.j=[],e.i=[];var n=Ut(t);return e.g.push(n),e.g.flush(),e.l&&e.h.reject(new Ie(2,3,3018)),e.h}function cn(e,t){var n=e;return t&&(n+='; codecs="'+t+'"'),n}function dn(e,t,n){return e=cn(e,t),Gt.get("muxjs")()&&sn(e)?un(n,e):e}function hn(e){e=e.split(".");var t=e[0];return e.pop(),t}function fn(e){return e=e.split(/ *; */),e.shift(),(e=e.find((function(e){return e.startsWith("codecs=")})))?e.split("=")[1].replace(/^"|"$/g,""):""}function pn(e){this.A=null,this.i=e,this.j=this.D=0,this.l=1/0,this.h=this.g=null,this.B="",this.o=new Map}function gn(e){return!(!En[e]&&"application/cea-608"!=e&&"application/cea-708"!=e)}function mn(e,t,n,i){var r,a,o;return F((function(s){return 1==s.g?S(s,Promise.resolve(),2):e.A&&e.i?null==n||null==i?(e.A.parseInit(Ut(t)),s["return"]()):(r={periodStart:e.D,segmentStart:n,segmentEnd:i},a=e.A.parseMedia(Ut(t),r),o=a.filter((function(t){return t.startTime>=e.j&&t.startTime<e.l})),e.i.append(o),null==e.g&&(e.g=Math.max(n,e.j)),e.h=Math.min(i,e.l),void A(s)):s["return"]()}))}function vn(e,t,n){e.j=t,e.l=n}function yn(e,t,n){if(e.B=t,t=e.o.get(t))for(var i=d(t.keys()),r=i.next();!r.done;r=i.next())(r=t.get(r.value).filter((function(e){return e.endTime<=n})))&&e.i.append(r)}function bn(e){var t=[];e=d(e);for(var n=e.next();!n.done;n=e.next())n=n.value,t.push({stream:n.stream,cue:new ht(n.startTime,n.endTime,n.text)});return t}function Tn(e,t,n,i,r){var a=n+" "+i,o=new Map;t=d(t);for(var s=t.next();!s.done;s=t.next()){var u=s.value;s=u.stream,u=u.cue,o.has(s)||o.set(s,new Map),o.get(s).has(a)||o.get(s).set(a,[]),u.startTime+=r,u.endTime+=r,u.startTime>=e.j&&u.startTime<e.l&&(o.get(s).get(a).push(u),s==e.B&&e.i.append([u]))}for(r=d(o.keys()),a=r.next();!a.done;a=r.next())for(a=a.value,e.o.has(a)||e.o.set(a,new Map),t=d(o.get(a).keys()),s=t.next();!s.done;s=t.next())s=s.value,u=o.get(a).get(s),e.o.get(a).set(s,u);e.g=null==e.g?Math.max(n,e.j):Math.min(e.g,Math.max(n,e.j)),e.h=Math.max(e.h,Math.min(i,e.l))}H("shaka.util.Uint8ArrayUtils",Jt),Jt.concat=rn,Jt.toHex=nn,Jt.fromHex=tn,Jt.fromBase64=en,Jt.toBase64=Zt,Jt.toStandardBase64=Qt,Jt.equal=function(e,t){return Ce("shaka.util.Uint8ArrayUtils.equal","Please use shaka.util.BufferUtils.equal instead."),Dt(e,t)},an.prototype.destroy=function(){return this.g.dispose(),this.g=null,Promise.resolve()},(new Map).set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels"),pn.prototype.destroy=function(){return this.i=this.A=null,this.o.clear(),Promise.resolve()},pn.prototype.remove=function(e,t){var n=this;return F((function(i){if(1==i.g)return S(i,Promise.resolve(),2);!n.i||!n.i.remove(e,t)||null==n.g||t<=n.g||e>=n.h||(e<=n.g&&t>=n.h?n.g=n.h=null:e<=n.g&&t<n.h?n.g=t:e>n.g&&t>=n.h&&(n.h=e)),A(i)}))},H("shaka.text.TextEngine",pn),pn.prototype.destroy=pn.prototype.destroy,pn.findParser=function(e){return En[e]},pn.unregisterParser=function(e){delete En[e]},pn.registerParser=function(e,t){En[e]=t};var En={};function wn(e){this.h=e,this.g=null}function Sn(e){this.h=e,this.g=null}function An(){return!(!e.MediaSource||!MediaSource.isTypeSupported)}function xn(e){return""!=Pn().canPlayType(e)}function _n(){return Ln("Tizen")}function In(){return Ln("CrKey")}function kn(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!_n()}function Cn(){if(!kn())return null;var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}function Ln(e){return(navigator.userAgent||"").includes(e)}function Pn(){return Dn||(Nn||(Nn=new Sn((function(){Dn=null}))),(Dn=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(Dn=document.createElement("video")),Nn.S(1),Dn)}wn.prototype.S=function(t){var n=this;this.stop();var i=!0,r=null;return this.g=function(){e.clearTimeout(r),i=!1},r=e.setTimeout((function(){i&&n.h()}),1e3*t),this},wn.prototype.stop=function(){this.g&&(this.g(),this.g=null)},Sn.prototype.Ca=function(){return this.stop(),this.h(),this},Sn.prototype.S=function(e){var t=this;return this.stop(),this.g=new wn((function(){t.h()})).S(e),this},Sn.prototype.na=function(e){var t=this;return this.stop(),this.g=new wn((function(){t.g.S(e),t.h()})).S(e),this},Sn.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},H("shaka.util.Timer",Sn),Sn.prototype.stop=Sn.prototype.stop,Sn.prototype.tickEvery=Sn.prototype.na,Sn.prototype.tickAfter=Sn.prototype.S,Sn.prototype.tickNow=Sn.prototype.Ca;var Nn=null,Dn=null;function Rn(e,t,n,i,r){var a=e.variants;(t.length||n.length)&&(a=On(a,t,n)),a=si(a,i),t=Mn(a),t=Un(t);var o=Fn(t,r);e.variants=e.variants.filter((function(e){return Gn(e)==o}))}function Mn(e){var t=new re;e=d(e);for(var n=e.next();!n.done;n=e.next()){n=n.value;var i=Gn(n);t.push(i,n)}return t}function Un(e){var t=0,n=new Map,i=e.size();return ae(e,(function(e,r){for(var a=d(r),o=a.next();!o.done;o=a.next()){o=o.value;var s=o.video;if(s&&s.width&&s.height){s=s.width*s.height*(s.frameRate||1),n.has(s)||n.set(s,new re);var u=n.get(s);u.push(e,o),u.size()===i&&(t=Math.max(t,s))}}})),t?n.get(t):e}function On(e,t,n){var i={};t=d(t);for(var r=t.next();!r.done;i={Nd:i.Nd},r=t.next())if(i.Nd=r.value,r=e.filter(function(e){return function(t){return t.video&&t.video.codecs.startsWith(e.Nd)}}(i)),r.length){e=r;break}for(i={},n=d(n),t=n.next();!t.done;i={yd:i.yd},t=n.next())if(i.yd=t.value,t=e.filter(function(e){return function(t){return t.audio&&t.audio.codecs.startsWith(e.yd)}}(i)),t.length){e=t;break}return e}function Fn(e,t){for(var n=d(t),i=n.next();!i.done;i=n.next())if(i=i.value,i==fi||i==pi){if(e=jn(e,i),1==e.size())return e.keys()[0]}else if(i==gi)break;return Bn(e)}function jn(e,t){var n=0,i=new re;return ae(e,(function(e,r){for(var a=0,o=0,s=d(r),u=s.next();!u.done;u=s.next())u=u.value,u.decodingInfos.length&&(a+=u.decodingInfos[0][t]?1:0,o++);a/=o,a>n?(i.g={},i.push(e,r),n=a):a==n&&i.push(e,r)})),i}function Bn(e){var t="",n=1/0;return ae(e,(function(e,i){for(var r=0,a=0,o=d(i),s=o.next();!s.done;s=o.next())r+=s.value.bandwidth||0,++a;r/=a,r<n&&(t=e,n=r)})),t}function Gn(e){var t="";e.video&&(t=hn(e.video.codecs));var n="";return e.audio&&(n=hn(e.audio.codecs)),t+"-"+n}function Vn(e,t,n){e.variants=e.variants.filter((function(e){return Kn(e,t,n)}))}function Kn(e,t,n){function i(e,t,n){return e>=t&&e<=n}var r=e.video;return!(r&&r.width&&r.height&&(!i(r.width,t.minWidth,Math.min(t.maxWidth,n.width))||!i(r.height,t.minHeight,Math.min(t.maxHeight,n.height))||!i(r.width*r.height,t.minPixels,t.maxPixels))||e&&e.video&&e.video.frameRate&&!i(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||!i(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function zn(e,t){return F((function(n){if(1==n.g)return S(n,Hn(t,0<t.offlineSessionIds.length),2);Yn(e,t),Xn(t),$n(t),A(n)}))}function Hn(e,t){return F((function(n){if(1==n.g)return S(n,Wn(e.variants,t,!1),2);e.variants=e.variants.filter((function(e){var t=e.video;return Ln("Xbox One")&&t&&(t.width&&1920<t.width||t.height&&1080<t.height)&&t.codecs.includes("avc1.")?(Q(ci(e)),!1):((t=e.decodingInfos.some((function(e){return e.supported})))||Q(ci(e)),t)})),A(n)}))}function Wn(t,n,i){var r,a,o,s,u,l,c,h,f,p;return F((function(g){if(t.some((function(e){return e.decodingInfos.length})))return g["return"]();for(r=e.shakaMediaCapabilities,a=[],o=function(e,t){var n;return F((function(i){return 1==i.g?(x(i,2),S(i,r.decodingInfo(t),4)):2!=i.g?(n=i.h,e.decodingInfos.push(n),I(i,0)):(k(i),JSON.stringify(t),void A(i))}))},s=d(t),u=s.next();!u.done;u=s.next())for(l=u.value,c=qn(l,n,i),h=d(c),f=h.next();!f.done;f=h.next())p=f.value,a.push(o(l,p));return S(g,Promise.all(a),0)}))}function qn(e,t,n){var i=e.audio,r=e.video;if(n={type:n?"file":"media-source"},r){var a=r.codecs;if(r.codecs.includes(",")){var o=r.codecs.split(",");a=je("video",o),a="vp9"==a?"vp09.00.10.08":a,o=je("audio",o),o=dn(r.mimeType,o,"audio"),n.audio={contentType:o,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1}}a=dn(r.mimeType,"vp9"==a?"vp09.00.10.08":a,"video"),n.video={contentType:a,width:r.width||1,height:r.height||1,bitrate:r.bandwidth||e.bandwidth||1,framerate:r.frameRate||1}}if(i&&(a="ac-3"==i.codecs.toLowerCase()&&_n()?"ec-3":i.codecs,a=dn(i.mimeType,a,"audio"),n.audio={contentType:a,channels:i.channelsCount||2,bitrate:i.bandwidth||e.bandwidth||1,samplerate:i.audioSamplingRate||1,spatialRendering:i.spatialAudio}),o=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]),!o.length)return[n];e=[],a=new Map,o=d(o);for(var s=o.next();!s.done;s=o.next()){var u=s.value;a.get(u.keySystem)||a.set(u.keySystem,[]),a.get(u.keySystem).push(u)}o=t?"required":"optional",t=t?["persistent-license"]:["temporary"],u=d(a.keys());for(var l=u.next();!l.done;l=u.next()){var c=l.value;l=Object.assign({},n);var h=a.get(c);for(c={keySystem:c,initDataType:"cenc",persistentState:o,distinctiveIdentifier:"optional",sessionTypes:t},h=d(h),s=h.next();!s.done;s=h.next()){if(s=s.value,s.initData&&s.initData.length){for(var f=new Set,p=d(s.initData),g=p.next();!g.done;g=p.next())f.add(g.value.initDataType);c.initDataType=s.initData[0].initDataType}s.distinctiveIdentifierRequired&&(c.distinctiveIdentifier="required"),s.persistentStateRequired&&(c.persistentState="required"),s.sessionType&&(c.sessionTypes=[s.sessionType]),i&&(c.audio?c.audio.robustness=c.audio.robustness||s.audioRobustness:c.audio={robustness:s.audioRobustness}),r&&(c.video?c.video.robustness=c.video.robustness||s.videoRobustness:c.video={robustness:s.videoRobustness})}l.keySystemConfiguration=c,e.push(l)}return e}function Yn(e,t){t.variants=t.variants.filter((function(t){var n=t.audio;return t=t.video,!(n&&e&&e.audio&&!Jn(n,e.audio)||t&&e&&e.video&&!Jn(t,e.video))}))}function Xn(e){e.textStreams=e.textStreams.filter((function(e){return gn(cn(e.mimeType,e.codecs))}))}function $n(e){e.imageStreams=e.imageStreams.filter((function(e){var t=["image/svg+xml","image/png","image/jpeg"];return(Ln("Web0S")||_n()||In())&&t.push("image/webp"),t.includes(e.mimeType)}))}function Jn(e,t){return e.mimeType==t.mimeType&&e.codecs.split(".")[0]==t.codecs.split(".")[0]}function Qn(e){var t=e.audio,n=e.video,i=t?t.codecs:null,r=n?n.codecs:null,a=[];r&&a.push(r),i&&a.push(i);var o=[];n&&o.push(n.mimeType),t&&o.push(t.mimeType),o=o[0]||null;var s=[];t&&s.push(t.kind),n&&s.push(n.kind),s=s[0]||null;var u=new Set;if(t)for(var l=d(t.roles),c=l.next();!c.done;c=l.next())u.add(c.value);if(n)for(l=d(n.roles),c=l.next();!c.done;c=l.next())u.add(c.value);return e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:s,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:o,codecs:a.join(", "),audioCodec:i,videoCodec:r,primary:e.primary,roles:Array.from(u),audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null),t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.label=t.label,e.audioRoles=t.roles),e}function Zn(e){return{id:e.id,active:!1,type:Ge,bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:e.mimeType,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,forced:e.forced,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId,originalImageId:null}}function ei(e){return{id:e.id,active:!1,type:"image",bandwidth:e.bandwidth||0,language:"",label:null,kind:null,width:e.width||null,height:e.height||null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:e.mimeType,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:e.tilesLayout||null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:e.originalId}}function ti(e){return e.__shaka_id||(e.__shaka_id=hi++),e.__shaka_id}function ni(e){var t=ri(e);return t.active="disabled"!=e.mode,t.type="text",t.originalTextId=e.id,"captions"==e.kind&&(t.mimeType="application/cea-608"),e.kind&&(t.roles=[e.kind]),"forced"==e.kind&&(t.forced=!0),t}function ii(e){var t=ri(e);return t.active=e.enabled,t.type="variant",t.originalAudioId=e.id,"main"==e.kind&&(t.primary=!0),e.kind&&(t.roles=[e.kind],t.audioRoles=[e.kind],t.label=e.label),t}function ri(e){return{id:ti(e),active:!1,type:"",bandwidth:0,language:qe(e.language),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],forced:!1,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null}}function ai(e){return e.allowedByApplication&&e.allowedByKeySystem}function oi(e){return e.filter((function(e){return ai(e)}))}function si(e,t){var n=e.filter((function(e){return e.audio&&e.audio.channelsCount})),i=new Map;n=d(n);for(var r=n.next();!r.done;r=n.next()){r=r.value;var a=r.audio.channelsCount;i.has(a)||i.set(a,[]),i.get(a).push(r)}return n=Array.from(i.keys()),0==n.length?e:(r=n.filter((function(e){return e<=t})),r.length?i.get(Math.max.apply(Math,h(r))):i.get(Math.min.apply(Math,h(n))))}function ui(e,t,n,i){var r=e,a=e.filter((function(e){return e.primary}));a.length&&(r=a);var o=r.length?r[0].language:"";if(r=r.filter((function(e){return e.language==o})),t){var s=Je(qe(t),e.map((function(e){return e.language})));s&&(r=e.filter((function(e){return qe(e.language)==s})))}if(r=r.filter((function(e){return e.forced==i})),n){if(e=li(r,n),e.length)return e}else if(e=r.filter((function(e){return 0==e.roles.length})),e.length)return e;return e=r.map((function(e){return e.roles})).reduce(De,[]),e.length?li(r,e[0]):r}function li(e,t){return e.filter((function(e){return e.roles.includes(t)}))}function ci(e){var t=[];return e.audio&&t.push(di(e.audio)),e.video&&t.push(di(e.video)),t.join(", ")}function di(e){return"audio"==e.type?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:"video"==e.type?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}var hi=0,fi="smooth",pi="powerEfficient",gi="bandwidth";function mi(){var e=this;this.j=null,this.h=!1,this.g=new st,navigator.connection&&navigator.connection.addEventListener("change",(function(){if(e.s.useNetworkInformation&&e.h){e.g=new st;var t=e.chooseVariant();t&&e.j(t)}})),this.i=[],this.o=1,this.A=!1,this.s=this.l=null}function vi(e){var t=e.s.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&e.s.useNetworkInformation&&(t=1e6*navigator.connection.downlink),t}function yi(e,t){return e&&(t=t.filter((function(t){return Kn(t,e,{width:1/0,height:1/0})}))),t.sort((function(e,t){return e.bandwidth-t.bandwidth}))}function bi(e,t){this.h=e,this.g=new Set([e]),t=t||[];for(var n=d(t),i=n.next();!i.done;i=n.next())this.add(i.value)}function Ti(e,t){var n;if(!(n=!!e.audio!=!!t.audio||!!e.video!=!!t.video||e.language!=t.language)&&(n=e.audio&&t.audio)){n=e.audio;var i=t.audio;n=!((!(!n.channelsCount||!i.channelsCount||2<n.channelsCount||2<i.channelsCount)||n.channelsCount==i.channelsCount)&&Ei(n,i)&&wi(n.roles,i.roles))}return!n&&(n=e.video&&t.video)&&(n=e.video,i=t.video,n=!(Ei(n,i)&&wi(n.roles,i.roles))),!n}function Ei(e,t){if(e.mimeType!=t.mimeType)return!1;var n=e.codecs.split(",").map((function(e){return hn(e)})),i=t.codecs.split(",").map((function(e){return hn(e)}));if(n.length!=i.length)return!1;n.sort(),i.sort();for(var r=d(de(n.length)),a=r.next();!a.done;a=r.next())if(a=a.value,n[a]!=i[a])return!1;return!0}function wi(e,t){var n=new Set(e),i=new Set(t);if(n["delete"]("main"),i["delete"]("main"),n.size!=i.size)return!1;n=d(n);for(var r=n.next();!r.done;r=n.next())if(!i.has(r.value))return!1;return!0}function Si(e){this.g=e,this.h=new Ai(e.language,"",e.audio&&e.audio.channelsCount?e.audio.channelsCount:0,"")}function Ai(e,t,n,i){this.i=e,this.j=t,this.g=n,this.h=void 0===i?"":i}function xi(e,t){var n=qe(t),i=Je(n,e.map((function(e){return $e(e)})));return i?e.filter((function(e){return i==$e(e)})):[]}function _i(e,t){return e.filter((function(e){return!!e.audio&&(t?e.audio.roles.includes(t):0==e.audio.roles.length)}))}function Ii(e,t){return e.filter((function(e){return!!e.audio&&e.audio.label.toLowerCase()==t.toLowerCase()}))}function ki(){this.g=Pi,this.h=(new Map).set(Pi,2).set(Li,1)}function Ci(e,t,n){e.h.set(Pi,n).set(Li,t)}i=mi.prototype,i.stop=function(){this.j=null,this.h=!1,this.i=[],this.o=1,this.l=null},i.init=function(e){this.j=e},i.chooseVariant=function(){var e=yi(this.s.restrictions,this.i),t=this.g.getBandwidthEstimate(vi(this));this.i.length&&!e.length&&(e=yi(null,this.i),e=[e[0]]);var n=e[0]||null;e=d(he(e));for(var i=e.next();!i.done;i=e.next()){var r=i.value;i=r.item;var a=isNaN(this.o)?1:Math.abs(this.o);r=a*(r.next||{bandwidth:1/0}).bandwidth/this.s.bandwidthUpgradeTarget,t>=a*i.bandwidth/this.s.bandwidthDowngradeTarget&&t<=r&&(n=i)}return this.l=Date.now(),n},i.enable=function(){this.h=!0},i.disable=function(){this.h=!1},i.segmentDownloaded=function(e,t){var n=this.g;if(!(16e3>t)){var i=8e3*t/e,r=e/1e3;n.g+=t,at(n.h,r,i),at(n.i,r,i)}if(null!=this.l&&this.h)e:{if(this.A){if(Date.now()-this.l<1e3*this.s.switchInterval)break e}else{if(!(128e3<=this.g.g))break e;this.A=!0}n=this.chooseVariant(),this.g.getBandwidthEstimate(vi(this)),n&&this.j(n)}},i.getBandwidthEstimate=function(){return this.g.getBandwidthEstimate(this.s.defaultBandwidthEstimate)},i.setVariants=function(e){this.i=e},i.playbackRateChanged=function(e){this.o=e},i.configure=function(e){this.s=e},H("shaka.abr.SimpleAbrManager",mi),mi.prototype.configure=mi.prototype.configure,mi.prototype.playbackRateChanged=mi.prototype.playbackRateChanged,mi.prototype.setVariants=mi.prototype.setVariants,mi.prototype.getBandwidthEstimate=mi.prototype.getBandwidthEstimate,mi.prototype.segmentDownloaded=mi.prototype.segmentDownloaded,mi.prototype.disable=mi.prototype.disable,mi.prototype.enable=mi.prototype.enable,mi.prototype.chooseVariant=mi.prototype.chooseVariant,mi.prototype.init=mi.prototype.init,mi.prototype.stop=mi.prototype.stop,bi.prototype.add=function(e){return!!Ti(this.h,e)&&(this.g.add(e),!0)},bi.prototype.values=function(){return this.g.values()},Si.prototype.create=function(e){var t=this,n=e.filter((function(e){return Ti(t.g,e)}));return n.length?new bi(n[0],n):this.h.create(e)},Ai.prototype.create=function(e){var t=[];t=xi(e,this.i);var n=e.filter((function(e){return e.primary}));for(t=t.length?t:n.length?n:e,e=_i(t,this.j),e.length&&(t=e),this.g&&(e=si(t,this.g),e.length&&(t=e)),this.h&&(e=Ii(t,this.h),e.length&&(t=e)),e=new bi(t[0]),t=d(t),n=t.next();!n.done;n=t.next())n=n.value,Ti(e.h,n)&&e.add(n);return e};var Li=0,Pi=1;function Ni(e,t){var n=Ri();this.l=null==e.maxAttempts?n.maxAttempts:e.maxAttempts,this.j=null==e.baseDelay?n.baseDelay:e.baseDelay,this.A=null==e.fuzzFactor?n.fuzzFactor:e.fuzzFactor,this.o=null==e.backoffFactor?n.backoffFactor:e.backoffFactor,this.g=0,this.h=this.j,(this.i=void 0!==t&&t)&&(this.g=1)}function Di(e){var t,n;return F((function(i){if(1==i.g){if(e.g>=e.l){if(!e.i)throw new Ie(2,7,1010);e.g=1,e.h=e.j}return t=e.g,e.g++,0==t?i["return"]():(n=e.h*(1+(2*Math.random()-1)*e.A),S(i,new Promise((function(e){new Sn(e).S(n/1e3)})),2))}e.h*=e.o,A(i)}))}function Ri(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}}function Mi(e,t){this.promise=e,this.i=t,this.g=!1}function Ui(e){return new Mi(Promise.reject(e),(function(){return Promise.resolve()}))}function Oi(){var e=Promise.reject(new Ie(2,7,7001));return e["catch"]((function(){})),new Mi(e,(function(){return Promise.resolve()}))}function Fi(e){return new Mi(Promise.resolve(e),(function(){return Promise.resolve()}))}function ji(e){return new Mi(e,(function(){return e["catch"]((function(){}))}))}function Bi(e){return new Mi(Promise.all(e.map((function(e){return e.promise}))),(function(){return Promise.all(e.map((function(e){return e.abort()})))}))}function Gi(e,t,n){try{var i=e(t);return i&&i.promise&&i.abort?(n.resolve(i.promise),function(){return i.abort()}):(n.resolve(i),function(){return Promise.resolve(i).then((function(){}),(function(){}))})}catch(r){return n.reject(r),function(){return Promise.resolve()}}}function Vi(e){function t(e){switch(typeof e){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return e;default:if(!e||e.buffer&&e.buffer.constructor==ArrayBuffer)return e;if(n.has(e))return null;var i=e.constructor==Array;if(e.constructor!=Object&&!i)return null;n.add(e);var r,a=i?[]:{};for(r in e)a[r]=t(e[r]);return i&&(a.length=e.length),a}}var n=new Set;return t(e)}function Ki(e){var t,n={};for(t in e)n[t]=e[t];return n}function zi(){this.g=[]}function Hi(e,t){e.g.push(t["finally"]((function(){lt(e.g,t)})))}function Wi(e){oe.call(this),this.i=!1,this.l=new zi,this.g=new Set,this.h=new Set,this.j=e||null,this.o=!1}function qi(e,t,n,i){n=n||tr;var r=nr[e];(!r||n>=r.priority)&&(nr[e]={priority:n,Jg:t,Lg:void 0!==i&&i})}function Yi(e,t,n){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null,streamDataCallback:void 0===n?null:n}}function Xi(e,t,n){var i=Fi(void 0),r={};e=d(e.g);for(var a=e.next();!a.done;r={Id:r.Id},a=e.next())r.Id=a.value,i=i.qa(function(e){return function(){return n.body&&(n.body=Mt(n.body)),e.Id(t,n)}}(r));return i.qa(void 0,(function(e){if(e instanceof Ie&&7001==e.code)throw e;throw new Ie(2,1,1006,e)}))}function $i(e,t,n,i,r,a,o){e.o&&(n.uris[r]=n.uris[r].replace("http://","https://"));var s=new pe(n.uris[r]),u=s.Wa,l=!1;u||(u=location.protocol,u=u.slice(0,-1),ge(s,u),n.uris[r]=s.toString()),u=u.toLowerCase();var c=(u=nr[u])?u.Jg:null;if(!c)return Ui(new Ie(2,1,1e3,s));var d,h=u.Lg,f=null,p=null,g=!1;return ji(Di(i)).qa((function(){if(e.i)return Oi();d=Date.now();var i=c(n.uris[r],n,t,(function(n,i,r){f&&f.stop(),p&&p.S(s/1e3),e.j&&t==er&&(e.j(n,i),l=!0,o.g=r)}));if(!h)return i;var a=n.retryParameters.connectionTimeout;a&&(f=new Sn((function(){g=!0,i.abort()})),f.S(a/1e3));var s=n.retryParameters.stallTimeout;return s&&(p=new Sn((function(){g=!0,i.abort()}))),i})).qa((function(e){return f&&f.stop(),p&&p.stop(),void 0==e.timeMs&&(e.timeMs=Date.now()-d),{response:e,vg:l}}),(function(s){if(f&&f.stop(),p&&p.stop(),e.i)return Oi();if(g&&(s=new Ie(1,1,1003,n.uris[r],t)),s instanceof Ie){if(7001==s.code)throw s;if(1010==s.code)throw a;if(1==s.severity){var u=new W("retry",{error:s});return e.dispatchEvent(u),r=(r+1)%n.uris.length,$i(e,t,n,i,r,s,o)}}throw s}))}function Ji(e,t,n){var i=Fi(void 0),r={};e=d(e.h);for(var a=e.next();!a.done;r={Jd:r.Jd},a=e.next())r.Jd=a.value,i=i.qa(function(e){return function(){var i=n.response;return i.data&&(i.data=Mt(i.data)),e.Jd(t,i)}}(r));return i.qa((function(){return n}),(function(e){var t=2;if(e instanceof Ie){if(7001==e.code)throw e;t=e.severity}throw new Ie(t,1,1007,e)}))}function Qi(){this.g=0}function Zi(e,t,n){Mi.call(this,e,t),this.h=n}Mi.prototype.abort=function(){return this.g=!0,this.i()},Mi.prototype["finally"]=function(e){return this.promise.then((function(){return e(!0)}),(function(){return e(!1)})),this},Mi.prototype.qa=function(e,t){function n(n){return function(s){if(r.g&&n)a.reject(o);else{var u=n?e:t;u?i=Gi(u,s,a):(n?a.resolve:a.reject)(s)}}}function i(){return a.reject(o),r.abort()}var r=this,a=new Vt,o=new Ie(2,7,7001);return this.promise.then(n(!0),n(!1)),new Mi(a,(function(){return i()}))},H("shaka.util.AbortableOperation",Mi),Mi.prototype.chain=Mi.prototype.qa,Mi.prototype["finally"]=Mi.prototype["finally"],Mi.all=Bi,Mi.prototype.abort=Mi.prototype.abort,Mi.notAbortable=ji,Mi.completed=Fi,Mi.aborted=Oi,Mi.failed=Ui,zi.prototype.destroy=function(){for(var e=[],t=d(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.promise["catch"]((function(){})),e.push(n.abort());return this.g=[],Promise.all(e)},b(Wi,oe),i=Wi.prototype,i.se=function(e){this.o=e},i.Mg=function(e){this.g.add(e)},i.bh=function(e){this.g["delete"](e)},i.If=function(){this.g.clear()},i.Ng=function(e){this.h.add(e)},i.dh=function(e){this.h["delete"](e)},i.Jf=function(){this.h.clear()},i.destroy=function(){return this.i=!0,this.g.clear(),this.h.clear(),this.l.destroy()},i.request=function(e,t){var n=this,i=new Qi;if(this.i){var r=Promise.reject(new Ie(2,7,7001));return r["catch"]((function(){})),new Zi(r,(function(){return Promise.resolve()}),i)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?Vi(t.retryParameters):Ri(),t.uris=Vi(t.uris),r=Xi(this,e,t);var a=r.qa((function(){return $i(n,e,t,new Ni(t.retryParameters,!1),0,null,i)})),o=a.qa((function(t){return Ji(n,e,t)})),s=Date.now(),u=0;r.promise.then((function(){u=Date.now()-s}),(function(){}));var l=0;a.promise.then((function(){l=Date.now()}),(function(){}));var c=o.qa((function(t){var i=Date.now()-l,r=t.response;return r.timeMs+=u,r.timeMs+=i,t.vg||!n.j||r.fromCache||e!=er||n.j(r.timeMs,r.data.byteLength),r}),(function(e){throw e&&(e.severity=2),e}));return r=new Zi(c.promise,(function(){return c.abort()}),i),Hi(this.l,r),r},H("shaka.net.NetworkingEngine",Wi),Wi.prototype.request=Wi.prototype.request,Wi.prototype.destroy=Wi.prototype.destroy,Wi.makeRequest=Yi,Wi.defaultRetryParameters=function(){return Ri()},Wi.prototype.clearAllResponseFilters=Wi.prototype.Jf,Wi.prototype.unregisterResponseFilter=Wi.prototype.dh,Wi.prototype.registerResponseFilter=Wi.prototype.Ng,Wi.prototype.clearAllRequestFilters=Wi.prototype.If,Wi.prototype.unregisterRequestFilter=Wi.prototype.bh,Wi.prototype.registerRequestFilter=Wi.prototype.Mg,Wi.unregisterScheme=function(e){delete nr[e]},Wi.registerScheme=qi,Wi.prototype.setForceHTTPS=Wi.prototype.se,Wi.NumBytesRemainingClass=Qi,b(Zi,Mi),Wi.PendingRequest=Zi;var er=1;Wi.RequestType={MANIFEST:0,SEGMENT:er,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5};var tr=3;Wi.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:tr};var nr={};function ir(e){this.g=!1,this.h=new Vt,this.i=e}function rr(e,t){if(e.g){if(t instanceof Ie&&7003==t.code)throw t;throw new Ie(2,7,7003,t)}}function ar(){this.g=new re}function or(e,t,n,i){this.target=e,this.type=t,this.listener=n,this.g=sr(e,i),this.target.addEventListener(t,n,this.g)}function sr(e,t){if(void 0==t)return!1;if("boolean"==typeof t)return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter((function(e){return!n.has(e)})),ur(e)?t:t.capture||!1}function ur(e){var t=lr;if(void 0==t){t=!1;try{var n={},i={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",i),Object.defineProperty(n,"capture",i),i=function(){},e.addEventListener("test",i,n),e.removeEventListener("test",i,n)}catch(r){t=!1}lr=t}return t||!1}ir.prototype.destroy=function(){var e=this;return this.g?this.h:(this.g=!0,this.i().then((function(){e.h.resolve()}),(function(){e.h.resolve()})))},i=ar.prototype,i.release=function(){this.Ob(),this.g=null},i.m=function(e,t,n,i){this.g&&(e=new or(e,t,n,i),this.g.push(t,e))},i.Oa=function(e,t,n,i){function r(i){a.Ra(e,t,r),n(i)}var a=this;this.m(e,t,r,i)},i.Ra=function(e,t,n){if(this.g){var i=this.g.get(t)||[];i=d(i);for(var r=i.next();!r.done;r=i.next())r=r.value,r.target!=e||n!=r.listener&&n||(r.Ra(),this.g.remove(t,r))}},i.Ob=function(){if(this.g){var e,t=this.g,n=[];for(e in t.g)n.push.apply(n,h(t.g[e]));for(t=d(n),n=t.next();!n.done;n=t.next())n.value.Ra();this.g.g={}}},H("shaka.util.EventManager",ar),ar.prototype.removeAll=ar.prototype.Ob,ar.prototype.unlisten=ar.prototype.Ra,ar.prototype.listenOnce=ar.prototype.Oa,ar.prototype.listen=ar.prototype.m,ar.prototype.release=ar.prototype.release,or.prototype.Ra=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};var lr=void 0;function cr(){}function dr(e){return e=qt(e),new pe(e).Ya}function hr(e,t,n){function i(e){Ot(a).setUint32(o,e.byteLength,!0),o+=4,a.set(Ut(e),o),o+=e.byteLength}if(!n||!n.byteLength)throw new Ie(2,6,6015);var r;r="string"==typeof t?Xt(t,!0):t,e=qt(e),e=Xt(e,!0);var a=new Uint8Array(12+e.byteLength+r.byteLength+n.byteLength),o=0;return i(e),i(r),i(n),a}function fr(e){for(var t=new Map,n=d(Object.keys(e)),i=n.next();!i.done;i=n.next())i=i.value,t.set(i,e[i]);return t}function pr(e){var t={};return e.forEach((function(e,n){t[n]=e})),t}function gr(e,t){if(!e&&!t)return!0;if(e&&!t||t&&!e)return!1;if(e.size!=t.size)return!1;for(var n=d(e),i=n.next();!i.done;i=n.next()){var r=d(i.value);if(i=r.next().value,r=r.next().value,!t.has(i))return!1;if(i=t.get(i),i!=r||void 0==i)return!1}return!0}function mr(e,t){var n=this;t=void 0===t?1:t,this.G=e,this.D=new Set,this.g=this.o=null,this.ea=this.W=!1,this.H=0,this.i=null,this.h=new ar,this.j=new Map,this.B=[],this.A=new Vt,this.s=null,this.l=function(t){n.A.reject(t),e.onError(t)},this.ha=new Map,this.aa=new Map,this.O=new Sn((function(){return Fr(n)})),this.K=!1,this.I=[],this.L=!1,this.ba=new Sn((function(){zr(n)})).na(t),this.A["catch"]((function(){})),this.M=new ir((function(){return vr(n)})),this.R=!1}function vr(e){return F((function(t){switch(t.g){case 1:return e.h.release(),e.h=null,e.A.reject(),e.ba.stop(),e.ba=null,e.O.stop(),e.O=null,S(t,Gr(e),2);case 2:if(!e.g){t.C(3);break}return x(t,4),S(t,e.g.setMediaKeys(null),6);case 6:I(t,5);break;case 4:k(t);case 5:e.g=null;case 3:e.i=null,e.D.clear(),e.o=null,e.B=[],e.s=null,e.l=function(){},e.G=null,e.R=!1,A(t)}}))}function yr(e,t,n){return e.ea=!0,e.B=[],e.K=n,Er(e,t)}function br(e,t,n){return e.B=n,e.K=0<n.length,Er(e,t)}function Tr(e,t,n,i,r,a){var o=new Map;return r={audioCapabilities:r,videoCapabilities:a,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:t},r.drmInfos=[{keySystem:t,licenseServerUri:n,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:i,serverCertificateUri:"",initData:null,keyIds:null}],o.set(t,r),kr(e,o,[])}function Er(e,t){var n,i,r,a,o,s,u,l,c,h,f,p,g,m;return F((function(v){if(1==v.g){if(n=Pr(e))for(i=d(t),r=i.next();!r.done;r=i.next())a=r.value,a.video&&(a.video.drmInfos=[n]),a.audio&&(a.audio.drmInfos=[n]);for(o=t.some((function(e){return!!(e.video&&e.video.drmInfos.length||e.audio&&e.audio.drmInfos.length)})),o||(s=fr(e.s.servers),Wr(t,s)),u=d(t),r=u.next();!r.done;r=u.next())for(l=r.value,c=Kr(l),h=d(c),f=h.next();!f.done;f=h.next())p=f.value,Yr(p,fr(e.s.servers),fr(e.s.advanced||{}));return S(v,Wn(t,e.K,e.R),2)}return g=o||Object.keys(e.s.servers).length,g?(m=kr(e,void 0,t),v["return"](o?m:m["catch"]((function(){})))):(e.W=!0,v["return"](Promise.resolve()))}))}function wr(e){var t,n,i,r,a;return F((function(o){switch(o.g){case 1:if(!e.o||!e.i)return o["return"]();if(!e.i.serverCertificateUri||e.i.serverCertificate&&e.i.serverCertificate.length){o.C(2);break}return t=Yi([e.i.serverCertificateUri],e.s.retryParameters),x(o,3),n=e.G.Mb.request(5,t),S(o,n.promise,5);case 5:i=o.h,e.i.serverCertificate=Ut(i.data),I(o,4);break;case 3:throw r=k(o),new Ie(2,6,6017,r);case 4:if(e.M.g)return o["return"]();case 2:return e.i.serverCertificate&&e.i.serverCertificate.length?(x(o,6),S(o,e.o.setServerCertificate(e.i.serverCertificate),8)):o["return"]();case 8:I(o,0);break;case 6:throw a=k(o),new Ie(2,6,6004,a.message)}}))}function Sr(e,t){var n,i,r;return F((function(a){return 1==a.g?S(a,Nr(e,t),2):3!=a.g?(n=a.h,n?(i=[],(r=e.j.get(n))&&(r.bb=new Vt,i.push(r.bb)),i.push(n.remove()),S(a,Promise.all(i),3)):a["return"]()):(e.j["delete"](n),void A(a))}))}function Ar(e){for(var t=(e.i?e.i.initData:[])||[],n=d(t),i=n.next();!i.done;i=n.next())i=i.value,xr(e,i.initDataType,i.initData);for(n=d(e.B),i=n.next();!i.done;i=n.next())Nr(e,i.value);return t.length||e.B.length||e.A.resolve(),e.A}function xr(e,t,n){var i=e.j.values();i=d(i);for(var r=i.next();!r.done;r=i.next())if(Dt(n,r.value.initData)&&!Ln("Tizen 2"))return;Dr(e,t,n,e.i.sessionType)}function _r(e){return!!e&&!!e.match(/^com\.(microsoft|chromecast)\.playready/)}function Ir(e){return e=e.j.keys(),e=se(e,(function(e){return e.sessionId})),Array.from(e)}function kr(e,t,n){var i,r,a,o,s,u,l,c,h,f,p,g,m;return F((function(v){switch(v.g){case 1:if(i=new Map,n.length){r=Cr(e,n,i),v.C(2);break}return S(v,Lr(e,t),3);case 3:r=v.h;case 2:if(a=r,!a)throw new Ie(2,6,6001);for(rr(e.M),x(v,4),e.D.clear(),o=a.getConfiguration(),s=o.audioCapabilities||[],u=o.videoCapabilities||[],l=d(s),c=l.next();!c.done;c=l.next())h=c.value,e.D.add(h.contentType.toLowerCase());for(f=d(u),c=f.next();!c.done;c=f.next())p=c.value,e.D.add(p.contentType.toLowerCase());if(n.length){var y=a.keySystem,b=i.get(a.keySystem),T=[],E=[],w=[],A=[],_=new Set;qr(b,T,w,E,A,_);var C=e.K?"persistent-license":"temporary";for(y={keySystem:y,licenseServerUri:T[0],distinctiveIdentifierRequired:b[0].distinctiveIdentifierRequired,persistentStateRequired:b[0].persistentStateRequired,sessionType:b[0].sessionType||C,audioRobustness:b[0].audioRobustness||"",videoRobustness:b[0].videoRobustness||"",serverCertificate:w[0],serverCertificateUri:E[0],initData:A,keyIds:_},b=d(b),T=b.next();!T.done;T=b.next())T=T.value,T.distinctiveIdentifierRequired&&(y.distinctiveIdentifierRequired=T.distinctiveIdentifierRequired),T.persistentStateRequired&&(y.persistentStateRequired=T.persistentStateRequired);b=y}else b=a.keySystem,y=t.get(a.keySystem),T=[],E=[],w=[],A=[],_=new Set,qr(y.drmInfos,T,w,E,A,_),b={keySystem:b,licenseServerUri:T[0],distinctiveIdentifierRequired:"required"==y.distinctiveIdentifier,persistentStateRequired:"required"==y.persistentState,sessionType:y.sessionTypes[0]||"temporary",audioRobustness:(y.audioCapabilities?y.audioCapabilities[0].robustness:"")||"",videoRobustness:(y.videoCapabilities?y.videoCapabilities[0].robustness:"")||"",serverCertificate:w[0],serverCertificateUri:E[0],initData:A,keyIds:_};if(e.i=b,!e.i.licenseServerUri)throw new Ie(2,6,6012,e.i.keySystem);return S(v,a.createMediaKeys(),6);case 6:return g=v.h,rr(e.M),e.o=g,e.W=!0,S(v,wr(e),7);case 7:rr(e.M),I(v,0);break;case 4:if(m=k(v),rr(e.M,m),e.i=null,e.D.clear(),m instanceof Ie)throw m;throw new Ie(2,6,6002,m.message)}}))}function Cr(e,t,n){for(var i=d(t),r=i.next();!r.done;r=i.next()){var a=d(Kr(r.value));for(r=a.next();!r.done;r=a.next())r=r.value,n.has(r.keySystem)||n.set(r.keySystem,[]),n.get(r.keySystem).push(r)}if(1==n.size&&n.has(""))throw new Ie(2,6,6e3);for(i={},e=d(e.s.preferredKeySystems),r=e.next();!r.done;i={Gd:i.Gd},r=e.next())for(i.Gd=r.value,a=d(t),r=a.next();!r.done;r=a.next())if(r=r.value.decodingInfos.find(function(e){return function(t){return t.supported&&null!=t.keySystemAccess&&t.keySystemAccess.keySystem==e.Gd}}(i)))return r.keySystemAccess;for(e=d([!0,!1]),r=e.next();!r.done;r=e.next())for(i=r.value,a=d(t),r=a.next();!r.done;r=a.next()){var o=d(r.value.decodingInfos);for(r=o.next();!r.done;r=o.next()){var s=r.value;if(s.supported&&s.keySystemAccess){r=n.get(s.keySystemAccess.keySystem);var u=d(r);for(r=u.next();!r.done;r=u.next())if(!!r.value.licenseServerUri==i)return s.keySystemAccess}}}return null}function Lr(e,t){var n,i,r,a,o,s,u,l,c,h,f,p,g,m,v;return F((function(y){switch(y.g){case 1:if(1==t.size&&t.has(""))throw new Ie(2,6,6e3);for(i=d(t.values()),r=i.next();!r.done;r=i.next())a=r.value,0==a.audioCapabilities.length&&delete a.audioCapabilities,0==a.videoCapabilities.length&&delete a.videoCapabilities;o=d(e.s.preferredKeySystems),s=o.next();case 2:if(s.done){y.C(4);break}if(u=s.value,!t.has(u)){y.C(3);break}return l=t.get(u),x(y,6),S(y,navigator.requestMediaKeySystemAccess(u,[l]),8);case 8:return n=y.h,y["return"](n);case 6:k(y);case 7:rr(e.M);case 3:s=o.next(),y.C(2);break;case 4:c=d([!0,!1]),h=c.next();case 9:if(h.done){y.C(11);break}f=h.value,p=d(t.keys()),s=p.next();case 12:if(s.done){h=c.next(),y.C(9);break}if(g=s.value,m=t.get(g),v=m.drmInfos.some((function(e){return!!e.licenseServerUri})),v!=f){y.C(13);break}return x(y,15),S(y,navigator.requestMediaKeySystemAccess(g,[m]),17);case 17:return n=y.h,y["return"](n);case 15:k(y);case 16:rr(e.M);case 13:s=p.next(),y.C(12);break;case 11:return y["return"](n)}}))}function Pr(t){if(t=fr(t.s.clearKeys),0==t.size)return null;var n=[],i=[];t.forEach((function(e,t){var r=tn(t),a=tn(e);r={kty:"oct",kid:Zt(r,!1),k:Zt(a,!1)},n.push(r),i.push(r.kid)})),t=JSON.stringify({keys:n});var r=JSON.stringify({kids:i});return r=[{initData:Ut(Yt(r)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+e.btoa(t),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:r,keyIds:new Set(i)}}function Nr(e,t){var n,i,a,o,s;return F((function(u){switch(u.g){case 1:try{n=e.o.createSession("persistent-license")}catch(r){return i=new Ie(2,6,6005,r.message),e.l(i),u["return"](Promise.reject(i))}return e.h.m(n,"message",(function(t){e.g&&e.s.delayLicenseRequestUntilPlayed&&e.g.paused&&!e.L?e.I.push(t):Mr(e,t)})),e.h.m(n,"keystatuseschange",(function(t){return Or(e,t)})),a={initData:null,loaded:!1,fe:1/0,bb:null,type:"persistent-license"},e.j.set(n,a),x(u,2),S(u,n.load(t),4);case 4:return o=u.h,rr(e.M),o?(a.loaded=!0,Hr(e)&&e.A.resolve(),u["return"](n)):(e.j["delete"](n),e.l(new Ie(2,6,6013)),u["return"](Promise.resolve()));case 2:s=k(u),rr(e.M,s),e.j["delete"](n),e.l(new Ie(2,6,6005,s.message));case 3:return u["return"](Promise.resolve())}}))}function Dr(e,t,n,i){try{var r=e.o.createSession(i)}catch(a){return void e.l(new Ie(2,6,6005,a.message))}e.h.m(r,"message",(function(t){e.g&&e.s.delayLicenseRequestUntilPlayed&&e.g.paused&&!e.L?e.I.push(t):Mr(e,t)})),e.h.m(r,"keystatuseschange",(function(t){return Or(e,t)})),e.j.set(r,{initData:n,loaded:!1,fe:1/0,bb:null,type:i});try{n=e.s.initDataTransform(n,t,e.i)}catch(a){return t=a,a instanceof Ie||(t=new Ie(2,6,6016,a)),void e.l(t)}e.s.logLicenseExchange&&Zt(n),r.generateRequest(t,n)["catch"]((function(t){if(!e.M.g){e.j["delete"](r);var n=t.errorCode;if(n&&n.systemCode){var i=n.systemCode;0>i&&(i+=Math.pow(2,32)),i="0x"+i.toString(16)}e.l(new Ie(2,6,6006,t.message,t,i))}}))}function Rr(e,t,n){return"skd"==t&&(t=n.serverCertificate,n=dr(e),e=hr(e,n,t)),e}function Mr(e,t){var n,i,r,a,o,s,u,l,c,d,h,f,p,g;F((function(m){switch(m.g){case 1:return n=t.target,e.s.logLicenseExchange&&Zt(t.message),i=e.j.get(n),r=e.i.licenseServerUri,a=e.s.advanced[e.i.keySystem],"individualization-request"==t.messageType&&a&&a.individualizationServer&&(r=a.individualizationServer),o=Yi([r],e.s.retryParameters),o.body=t.message,o.method="POST",o.licenseRequestType=t.messageType,o.sessionId=n.sessionId,_r(e.i.keySystem)&&Ur(o),s=Date.now(),x(m,2),l=e.G.Mb.request(2,o),S(m,l.promise,4);case 4:u=m.h,I(m,3);break;case 2:return c=k(m),d=new Ie(2,6,6007,c),e.l(d),i&&i.bb&&i.bb.reject(d),m["return"]();case 3:return e.M.g?m["return"]():(e.H+=(Date.now()-s)/1e3,e.s.logLicenseExchange&&Zt(u.data),x(m,5),S(m,n.update(u.data),7));case 7:I(m,6);break;case 5:return h=k(m),f=new Ie(2,6,6008,h.message),e.l(f),i&&i.bb&&i.bb.reject(f),m["return"]();case 6:p=new W("drmsessionupdate"),e.G.onEvent(p),i&&(i.bb&&i.bb.resolve(),g=new Sn((function(){i.loaded=!0,Hr(e)&&e.A.resolve()})),g.S($r)),A(m)}}))}function Ur(e){var t=Wt(e.body,!0,!0);if(t.includes("PlayReadyKeyMessage")){t=(new DOMParser).parseFromString(t,"application/xml");for(var n=d(t.getElementsByTagName("HttpHeader")),i=n.next();!i.done;i=n.next())i=i.value,e.headers[i.getElementsByTagName("name")[0].textContent]=i.getElementsByTagName("value")[0].textContent;e.body=en(t.getElementsByTagName("Challenge")[0].textContent)}else e.headers["Content-Type"]="text/xml; charset=utf-8"}function Or(e,t){var n=t.target,i=e.j.get(n),r=!1;n.keyStatuses.forEach((function(t,n){if("string"==typeof n){var a=n;n=t,t=a}if(_r(e.i.keySystem)&&16==n.byteLength&&navigator.userAgent.match(/Edge?\//)){a=Ot(n);var o=a.getUint32(0,!0),s=a.getUint16(4,!0),u=a.getUint16(6,!0);a.setUint32(0,o,!1),a.setUint16(4,s,!1),a.setUint16(6,u,!1)}"status-pending"!=t&&(i.loaded=!0),"expired"==t&&(r=!0),a=nn(n),e.ha.set(a,t)}));var a=n.expiration-Date.now();(0>a||r&&1e3>a)&&i&&!i.bb&&(e.j["delete"](n),n.close()["catch"]((function(){}))),Hr(e)&&(e.A.resolve(),e.O.S(Jr))}function Fr(e){var t=e.ha,n=e.aa;n.clear(),t.forEach((function(e,t){return n.set(t,e)})),t=Array.from(n.values()),t.length&&t.every((function(e){return"expired"==e}))&&e.l(new Ie(2,6,6014)),e.G.md(pr(n))}function jr(){var e,t,n,i,r,a,o,s;return F((function(u){return 1==u.g?(e="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.microsoft.playready.recommendation com.apple.fps.3_0 com.apple.fps.2_0 com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" "),t=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],n={initDataTypes:["cenc"],videoCapabilities:t},i={videoCapabilities:t,persistentState:"required",sessionTypes:["persistent-license"]},r=[i,n],a=new Map,o=function(e){var t,n,i;return F((function(o){switch(o.g){case 1:return x(o,2),S(o,navigator.requestMediaKeySystemAccess(e,r),4);case 4:return t=o.h,i=!!(n=t.getConfiguration().sessionTypes)&&n.includes("persistent-license"),Ln("Tizen 3")&&(i=!1),a.set(e,{persistentState:i}),S(o,t.createMediaKeys(),5);case 5:I(o,0);break;case 2:k(o),a.set(e,null),A(o)}}))},s=e.map((function(e){return o(e)})),S(u,Promise.all(s),2)):u["return"](pr(a))}))}function Br(e){var t;return F((function(n){return 1==n.g?(t=new Promise((function(e,t){new Sn(t).S(Xr)})),x(n,2),S(n,Promise.race([Promise.all([e.close(),e.closed]),t]),4)):2!=n.g?I(n,0):(k(n),void A(n))}))}function Gr(e){var t;return F((function(n){return t=Array.from(e.j.entries()),e.j.clear(),S(n,Promise.all(t.map((function(t){t=d(t);var n=t.next().value,i=t.next().value;return F((function(t){return 1==t.g?(x(t,2),e.ea||e.B.includes(n.sessionId)||"persistent-license"!==i.type?S(t,Br(n),5):S(t,n.remove(),5)):2!=t.g?I(t,0):(k(t),void A(t))}))}))),0)}))}function Vr(e,t){if(!e.length)return t;if(!t.length)return e;for(var n=[],i=d(e),r=i.next();!r.done;r=i.next()){r=r.value;for(var a=d(t),o=a.next();!o.done;o=a.next())if(o=o.value,r.keySystem==o.keySystem){a=[],a=a.concat(r.initData||[]),a=a.concat(o.initData||[]);var s=r.keyIds&&o.keyIds?new Set([].concat(h(r.keyIds),h(o.keyIds))):r.keyIds||o.keyIds;n.push({keySystem:r.keySystem,licenseServerUri:r.licenseServerUri||o.licenseServerUri,distinctiveIdentifierRequired:r.distinctiveIdentifierRequired||o.distinctiveIdentifierRequired,persistentStateRequired:r.persistentStateRequired||o.persistentStateRequired,videoRobustness:r.videoRobustness||o.videoRobustness,audioRobustness:r.audioRobustness||o.audioRobustness,serverCertificate:r.serverCertificate||o.serverCertificate,serverCertificateUri:r.serverCertificateUri||o.serverCertificateUri,initData:a,keyIds:s});break}}return n}function Kr(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])}function zr(e){e.j.forEach((function(t,n){var i=t.fe,r=n.expiration;isNaN(r)&&(r=1/0),r!=i&&(e.G.onExpirationUpdated(n.sessionId,r),t.fe=r)}))}function Hr(e){return e=e.j.values(),ue(e,(function(e){return e.loaded}))}function Wr(e,t){var n=[];t.forEach((function(e,t){n.push({keySystem:t,licenseServerUri:e,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})}));for(var i=d(e),r=i.next();!r.done;r=i.next())r=r.value,r.video&&(r.video.drmInfos=n),r.audio&&(r.audio.drmInfos=n)}function qr(e,t,n,i,r,a){var o={};e=d(e);for(var s=e.next();!s.done;o={Ha:o.Ha},s=e.next()){if(o.Ha=s.value,t.includes(o.Ha.licenseServerUri)||t.push(o.Ha.licenseServerUri),i.includes(o.Ha.serverCertificateUri)||i.push(o.Ha.serverCertificateUri),o.Ha.serverCertificate&&(n.some(function(e){return function(t){return Dt(t,e.Ha.serverCertificate)}}(o))||n.push(o.Ha.serverCertificate)),o.Ha.initData){s={};for(var u=d(o.Ha.initData),l=u.next();!l.done;s={Rc:s.Rc},l=u.next())s.Rc=l.value,r.some(function(e){return function(t){var n=e.Rc;return!(!t.keyId||t.keyId!=n.keyId)||t.initDataType==n.initDataType&&Dt(t.initData,n.initData)}}(s))||r.push(s.Rc)}if(o.Ha.keyIds)for(s=d(o.Ha.keyIds),u=s.next();!u.done;u=s.next())a.add(u.value)}}function Yr(t,n,i){!t.keySystem||"org.w3.clearkey"==t.keySystem&&t.licenseServerUri||(n.size&&(n=n.get(t.keySystem)||"",t.licenseServerUri=n),t.keyIds||(t.keyIds=new Set),(i=i.get(t.keySystem))&&(t.distinctiveIdentifierRequired||(t.distinctiveIdentifierRequired=i.distinctiveIdentifierRequired),t.persistentStateRequired||(t.persistentStateRequired=i.persistentStateRequired),t.videoRobustness||(t.videoRobustness=i.videoRobustness),t.audioRobustness||(t.audioRobustness=i.audioRobustness),t.serverCertificate||(t.serverCertificate=i.serverCertificate),i.sessionType&&(t.sessionType=i.sessionType),t.serverCertificateUri||(t.serverCertificateUri=i.serverCertificateUri)),e.cast&&e.cast.__platform__&&"com.microsoft.playready"==t.keySystem&&(t.keySystem="com.chromecast.playready"))}H("shaka.util.FairPlayUtils",cr),cr.initDataTransform=hr,cr.defaultGetContentId=dr,i=mr.prototype,i.destroy=function(){return this.M.destroy()},i.configure=function(e){this.s=e},i.vc=function(e){var t,n,i=this;return F((function(r){if(1==r.g)return i.o?(i.g=e,i.h.Oa(i.g,"play",(function(){for(var e=d(i.I),t=e.next();!t.done;t=e.next())Mr(i,t.value);i.L=!0,i.I=[]})),"webkitCurrentPlaybackTargetIsWireless"in i.g&&i.h.m(i.g,"webkitcurrentplaybacktargetiswirelesschanged",(function(){return Gr(i)})),t=i.g.setMediaKeys(i.o),t=t["catch"]((function(e){return Promise.reject(new Ie(2,6,6003,e.message))})),S(r,t,2)):(i.h.Oa(e,"encrypted",(function(){i.l(new Ie(2,6,6010))})),r["return"]());rr(i.M),Ar(i),i.i.initData.length||i.B.length||(n=function(e){return xr(i,e.initDataType,Ut(e.initData))},i.h.m(i.g,"encrypted",n)),A(r)}))},i.zc=function(){var e=1/0,t=this.j.keys();t=d(t);for(var n=t.next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e},i.fd=function(){return pr(this.aa)};var Xr=1,$r=5,Jr=.5,Qr=new Kt((function(){return Mt(new Uint8Array([0]))}));function Zr(){}function ea(e,t,n,i){var r,a,o,s;return F((function(u){if(1==u.g)return i&&(r=ia[i.toLowerCase()])?u["return"](r):(a=na(e))&&(o=ra[a])?u["return"](o):i?u.C(2):S(u,ta(e,t,n),3);if(2!=u.g&&(i=u.h)&&(s=ia[i]))return u["return"](s);throw new Ie(2,4,4e3,e)}))}function ta(e,t,n){var i,r,a;return F((function(o){return 1==o.g?(i=Yi([e],n),i.method="HEAD",S(o,t.request(0,i).promise,2)):(r=o.h,a=r.headers["content-type"],o["return"](a?a.toLowerCase().split(";").shift():""))}))}function na(e){return e=new pe(e).Qa.split("/").pop().split("."),1==e.length?"":e.pop().toLowerCase()}H("shaka.media.ManifestParser",Zr),Zr.unregisterParserByMime=function(e){delete ia[e]},Zr.registerParserByMime=function(e,t){ia[e]=t},Zr.registerParserByExtension=function(e,t){ra[e]=t};var ia={},ra={};function aa(e,t){this.U=Ot(e),this.h=t==sa,this.g=0}function oa(){return new Ie(2,3,3e3)}i=aa.prototype,i.Ga=function(){return this.g<this.U.byteLength},i.ka=function(){return this.g},i.$f=function(){return this.U.byteLength},i.ma=function(){try{var e=this.U.getUint8(this.g);return this.g+=1,e}catch(t){throw oa()}},i.ic=function(){try{var e=this.U.getUint16(this.g,this.h);return this.g+=2,e}catch(t){throw oa()}},i.P=function(){try{var e=this.U.getUint32(this.g,this.h);return this.g+=4,e}catch(t){throw oa()}},i.jf=function(){try{var e=this.U.getInt32(this.g,this.h);return this.g+=4,e}catch(t){throw oa()}},i.jc=function(){try{if(this.h)var e=this.U.getUint32(this.g,!0),t=this.U.getUint32(this.g+4,!0);else t=this.U.getUint32(this.g,!1),e=this.U.getUint32(this.g+4,!1)}catch(n){throw oa()}if(2097151<t)throw new Ie(2,3,3001);return this.g+=8,t*Math.pow(2,32)+e},i.xb=function(e){if(this.g+e>this.U.byteLength)throw oa();var t=Ut(this.U,this.g,e);return this.g+=e,t},i.skip=function(e){if(this.g+e>this.U.byteLength)throw oa();this.g+=e},i.lf=function(e){if(this.g<e)throw oa();this.g-=e},i.seek=function(e){if(0>e||e>this.U.byteLength)throw oa();this.g=e},i.Lc=function(){for(var e=this.g;this.Ga()&&0!=this.U.getUint8(this.g);)this.g+=1;return e=Ut(this.U,e,this.g-e),this.g+=1,Ht(e)},H("shaka.util.DataViewReader",aa),aa.prototype.readTerminatedString=aa.prototype.Lc,aa.prototype.seek=aa.prototype.seek,aa.prototype.rewind=aa.prototype.lf,aa.prototype.skip=aa.prototype.skip,aa.prototype.readBytes=aa.prototype.xb,aa.prototype.readUint64=aa.prototype.jc,aa.prototype.readInt32=aa.prototype.jf,aa.prototype.readUint32=aa.prototype.P,aa.prototype.readUint16=aa.prototype.ic,aa.prototype.readUint8=aa.prototype.ma,aa.prototype.getLength=aa.prototype.$f,aa.prototype.getPosition=aa.prototype.ka,aa.prototype.hasMoreData=aa.prototype.Ga;var sa=1;function ua(){this.i=[],this.h=[],this.g=!1}function la(e){for(var t=pa(e);e.reader.Ga()&&!e.parser.g;)e.parser.od(e.start+t,e.reader,e.partialOkay)}function ca(e){var t=pa(e),n=e.reader.P();n=d(de(n));for(var i=n.next();!i.done&&(e.parser.od(e.start+t,e.reader,e.partialOkay),!e.parser.g);i=n.next());}function da(e){return function(t){e(t.reader.xb(t.reader.U.byteLength-t.reader.ka()))}}function ha(e){var t=0;e=d(e);for(var n=e.next();!n.done;n=e.next())t=t<<8|n.value.charCodeAt(0);return t}function fa(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)}function pa(e){return 8+(e.has64BitSize?8:0)+(null!=e.flags?4:0)}aa.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:sa},i=ua.prototype,i.box=function(e,t){var n=ha(e);return this.i[n]=ga,this.h[n]=t,this},i.X=function(e,t){var n=ha(e);return this.i[n]=ma,this.h[n]=t,this},i.stop=function(){this.g=!0},i.parse=function(e,t,n){for(e=new aa(e,0),this.g=!1;e.Ga()&&!this.g;)this.od(0,e,t,n)},i.od=function(e,t,n,i){var r=t.ka();if(i&&r+8>t.U.byteLength)this.g=!0;else{var a=t.P(),o=t.P(),s=!1;switch(a){case 0:a=t.U.byteLength-r;break;case 1:if(i&&t.ka()+8>t.U.byteLength)return void(this.g=!0);a=t.jc(),s=!0}var u=this.h[o];if(u){var l=null,c=null;if(this.i[o]==ma){if(i&&t.ka()+4>t.U.byteLength)return void(this.g=!0);c=t.P(),l=c>>>24,c&=16777215}o=r+a,n&&o>t.U.byteLength&&(o=t.U.byteLength),i&&o>t.U.byteLength?this.g=!0:(i=o-t.ka(),t=0<i?t.xb(i):new Uint8Array(0),t=new aa(t,0),u({parser:this,partialOkay:n||!1,version:l,flags:c,reader:t,size:a,start:r+e,has64BitSize:s}))}else t.skip(Math.min(r+a-t.ka(),t.U.byteLength-t.ka()))}},H("shaka.util.Mp4Parser",ua),ua.headerSize=pa,ua.typeToString=fa,ua.allData=da,ua.sampleDescription=ca,ua.children=la,ua.prototype.parseNext=ua.prototype.od,ua.prototype.parse=ua.prototype.parse,ua.prototype.stop=ua.prototype.stop,ua.prototype.fullBox=ua.prototype.X,ua.prototype.box=ua.prototype.box;var ga=0,ma=1;function va(e){function t(){r=!0}function n(e){a.push(e),la(e)}e=Ut(e);var i,r=!1,a=[],o=[];if((new ua).box("moov",n).box("trak",n).box("mdia",n).box("minf",n).box("stbl",n).X("stsd",(function(e){i=e,a.push(e),ca(e)})).X("encv",t).X("enca",t).X("avc1",(function(e){o.push({box:e,Ic:1701733238})})).X("avc3",(function(e){o.push({box:e,Ic:1701733238})})).X("ac-3",(function(e){o.push({box:e,Ic:1701733217})})).X("ec-3",(function(e){o.push({box:e,Ic:1701733217})})).X("mp4a",(function(e){o.push({box:e,Ic:1701733217})})).parse(e),r)return e;if(0==o.length||!i)throw ee(nn(e)),new Ie(2,3,3019);o.reverse();for(var s=d(o),u=s.next();!u.done;u=s.next())u=u.value,e=ya(e,i,u.box,a,u.Ic);return e}function ya(e,t,n,i,r){var a=Ta.value(),o=e.subarray(n.start,n.start+n.size),s=Ot(o),u=new Uint8Array(n.size+a.byteLength);for(u.set(o,0),o=Ot(u),o.setUint32(4,r),u.set(a,n.size),r=s.getUint32(4),o.setUint32(n.size+16,r),ba(u,0,u.byteLength),r=new Uint8Array(e.byteLength+u.byteLength),n=Ln("Xbox One")?n.start:n.start+n.size,a=e.subarray(n),r.set(e.subarray(0,n)),r.set(u,n),r.set(a,n+u.byteLength),e=d(i),i=e.next();!i.done;i=e.next())i=i.value,ba(r,i.start,i.size+u.byteLength);return u=Ot(r,t.start),t=pa(t),e=u.getUint32(t),u.setUint32(t,e+1),r}function ba(e,t,n){e=Ot(e,t),t=e.getUint32(0),0!=t&&(1==t?(e.setUint32(8,n>>32),e.setUint32(12,4294967295&n)):e.setUint32(0,n))}var Ta=new Kt((function(){return new Uint8Array([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])}));function Ea(e,t,n,i,r){if(i>=r)return null;for(var a=-1,o=-1,s=0;s<n.length;s++)if(n[s].some((function(e){return null!=e&&""!=e.g.trim()}))){a=s;break}for(s=n.length-1;0<=s;s--)if(n[s].some((function(e){return null!=e&&""!=e.g.trim()}))){o=s;break}if(-1===a||-1===o)return null;for(var u=s=!1,l="white",c="black",d=wa(i,r,s,u,l,c);a<=o;a++){for(var h=n[a],f=-1,p=-1,g=0;g<h.length;g++)if(null!=h[g]&&""!==h[g].g.trim()){f=g;break}for(g=h.length-1;0<=g;g--)if(null!=h[g]&&""!==h[g].g.trim()){p=g;break}if(-1===f||-1===p)h=Sa(i,r),e.nestedCues.push(h);else{for(;f<=p;f++)if(g=h[f]){var m=g.l,v=g.i,y=g.j,b=g.h;m==s&&v==u&&y==l&&b==c||(d.payload&&e.nestedCues.push(d),d=wa(i,r,m,v,y,b),s=m,u=v,l=y,c=b),d.payload+=g.g}else d.payload+=" ";d.payload&&e.nestedCues.push(d),a!==o&&(d=Sa(i,r),e.nestedCues.push(d)),d=wa(i,r,s,u,l,c)}}return e.nestedCues.length?{cue:e,stream:t}:null}function wa(e,t,n,i,r,a){return e=new ht(e,t,""),n&&e.textDecoration.push("underline"),i&&(e.fontStyle="italic"),e.color=r,e.backgroundColor=a,e}function Sa(e,t){var n=new ht(e,t,"");return n.lineBreak=!0,n}function Aa(e,t,n,i,r){this.g=e,this.l=t,this.i=n,this.h=i,this.j=r}function xa(e,t){this.i=[],this.g=1,this.h=0,this.D=e,this.B=t,this.j=this.o=!1,this.l="white",this.A="black",Ia(this)}function _a(e,t,n){return Ea(new ht(t,n,""),"CC"+(e.D<<1|e.B+1),e.i,t,n)}function Ia(e){La(e,0,15),e.g=1}function ka(e,t,n){if(!(32>n||127<n)){var i="";switch(t){case Pa:i=Ma.has(n)?Ma.get(n):String.fromCharCode(n);break;case Na:i=Ua.get(n);break;case Da:e.i[e.g].pop(),i=Oa.get(n);break;case Ra:e.i[e.g].pop(),i=Fa.get(n)}i&&e.i[e.g].push(new Aa(i,e.o,e.j,e.A,e.l))}}function Ca(e,t,n,i){if(t>=n)for(--i;0<=i;i--)e.i[t+i]=e.i[n+i].map((function(e){return e}));else for(var r=0;r<i;r++)e.i[t+r]=e.i[n+r].map((function(e){return e}))}function La(e,t,n){for(var i=0;i<=n;i++)e.i[t+i]=[]}var Pa=0,Na=1,Da=2,Ra=3,Ma=new Map([[39,"’"],[42,"á"],[92,"é"],[92,"é"],[94,"í"],[95,"ó"],[96,"ú"],[123,"ç"],[124,"÷"],[125,"Ñ"],[126,"ñ"],[127,"█"]]),Ua=new Map([[48,"®"],[49,"°"],[50,"½"],[51,"¿"],[52,"™"],[53,"¢"],[54,"£"],[55,"♪"],[56,"à"],[57,"⠀"],[58,"è"],[59,"â"],[60,"ê"],[61,"î"],[62,"ô"],[63,"û"]]),Oa=new Map([[32,"Á"],[33,"É"],[34,"Ó"],[35,"Ú"],[36,"Ü"],[37,"ü"],[38,"‘"],[39,"¡"],[40,"*"],[41,"'"],[42,"─"],[43,"©"],[44,"℠"],[45,"·"],[46,"“"],[47,"”"],[48,"À"],[49,"Â"],[50,"Ç"],[51,"È"],[52,"Ê"],[53,"Ë"],[54,"ë"],[55,"Î"],[56,"Ï"],[57,"ï"],[58,"Ô"],[59,"Ù"],[60,"ù"],[61,"Û"],[62,"«"],[63,"»"]]),Fa=new Map([[32,"Ã"],[33,"ã"],[34,"Í"],[35,"Ì"],[36,"ì"],[37,"Ò"],[38,"ò"],[39,"Õ"],[40,"õ"],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,"Ä"],[49,"ä"],[50,"Ö"],[51,"ö"],[52,"ß"],[53,"¥"],[54,"¤"],[55,"│"],[56,"Å"],[57,"å"],[58,"Ø"],[59,"ø"],[60,"┌"],[61,"┐"],[62,"└"],[63,"┘"]]);function ja(e,t){this.h=Ka,this.A=new xa(e,t),this.i=new xa(e,t),this.l=new xa(e,t),this.g=this.i,this.j=0,this.o=null}function Ba(e,t,n){e.g=e.i;var i=e.g,r=null;return e.h!==Ha&&e.h!==Wa&&(r=_a(i,e.j,n),n=e.i,n.g=0<n.h?n.h:0,La(n,0,15),n=e.l,n.g=0<n.h?n.h:0,La(n,0,15),i.g=15),e.h=Ha,i.h=t,r}function Ga(e){e.h=za,e.g=e.l,e.g.h=0}function Va(e){$("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),e.g=e.A,e.h=Wa}var Ka=0,za=1,Ha=3,Wa=4,qa="black green blue cyan red yellow magenta black".split(" "),Ya="white green blue cyan red yellow magenta white_italics".split(" ");function Xa(){this.l=!1,this.H=this.K=0,this.I=io,this.i=[],this.g=this.h=this.j=0,this.D=this.A=!1,this.B="white",this.o="black",$a(this)}function $a(e){e.i=[];for(var t=0;15>t;t++)e.i.push(Ja())}function Ja(){for(var e=[],t=0;42>t;t++)e.push(null);return e}function Qa(e,t){Za(e)&&(e.i[e.h][e.g]=new Aa(t,e.D,e.A,e.o,e.B),e.g++)}function Za(e){var t=e.g<e.H&&0<=e.g;return e.h<e.K&&0<=e.h&&t}function eo(e,t,n){var i=new ht(e.j,t,"");return i.textAlign=e.I===to?"left":e.I===no?"right":gt,(n=Ea(i,"svc"+n,e.i,e.j,t))&&(e.j=t),n}Xa.prototype.isVisible=function(){return this.l};var to=0,no=1,io=2;function ro(){this.i=[],this.h=null,this.g=0}function ao(e,t){3===t.type?(e.g=2*(63&t.value)-1,e.h=[]):e.h&&(0<e.g&&(e.h.push(t),e.g--),0===e.g&&(e.i.push(new oo(e.h)),e.h=null,e.g=0))}function oo(e){this.g=0,this.h=e}function so(e){if(!e.Ga())throw new Ie(2,2,3e3);return e.h[e.g++]}function uo(e){this.i=e,this.h=[null,null,null,null,null,null,null,null],this.g=null}function lo(e,t,n,i){if(128<=n&&135>=n)i=7&n,e.h[i]&&(e.g=e.h[i]);else{if(136===n){n=so(t).value,t=null,n=d(co(e,n));for(var r=n.next();!r.done;r=n.next())r=e.h[r.value],r.isVisible()&&(t=eo(r,i,e.i)),$a(r);return t}if(137===n)for(t=so(t).value,t=d(co(e,t)),n=t.next();!n.done;n=t.next())n=e.h[n.value],n.isVisible()||(n.j=i),n.l=!0;else{if(138===n){for(n=so(t).value,t=null,n=d(co(e,n)),r=n.next();!r.done;r=n.next())r=e.h[r.value],r.isVisible()&&(t=eo(r,i,e.i)),r.l=!1;return t}if(139===n){for(n=so(t).value,t=null,n=d(co(e,n)),r=n.next();!r.done;r=n.next())r=e.h[r.value],r.isVisible()?t=eo(r,i,e.i):r.j=i,r.l=!r.l;return t}if(140===n)return t=so(t).value,ho(e,t,i);if(143===n)return i=ho(e,255,i),fo(e),i;if(144===n)t.skip(1),i=so(t).value,e.g&&(e.g.A=0<(128&i),e.g.D=0<(64&i));else if(145===n)i=so(t).value,n=so(t).value,t.skip(1),e.g&&(t=po((48&n)>>4,(12&n)>>2,3&n),e.g.B=po((48&i)>>4,(12&i)>>2,3&i),e.g.o=t);else if(146===n)i=so(t).value,t=so(t).value,e.g&&(e=e.g,e.h=15&i,e.g=63&t);else if(151===n)t.skip(1),t.skip(1),i=so(t).value,t.skip(1),e.g&&(e.g.I=3&i);else if(152<=n&&159>=n){if(n=(15&n)-8,r=null!==e.h[n],!r){var a=new Xa;a.j=i,e.h[n]=a}i=so(t).value,so(t),so(t),a=so(t).value;var o=so(t).value;t=so(t).value,r&&0===(7&t)||(t=e.h[n],t.h=0,t.g=0,t.D=!1,t.A=!1,t.B="white",t.o="black"),t=e.h[n],t.l=0<(32&i),t.K=1+(15&a),t.H=1+(63&o),e.g=e.h[n]}}}return null}oo.prototype.Ga=function(){return this.g<this.h.length},oo.prototype.ka=function(){return this.g},oo.prototype.skip=function(e){if(this.g+e>this.h.length)throw new Ie(2,2,3e3);this.g+=e};var co=function e(t,n){var i;return U(e,(function(e){return 1==e.g&&(i=0),5!=e.g?8>i?1===(1&n)&&t.h[i]?S(e,i,5):e.C(5):e.C(0):(n>>=1,i++,e.C(2))}))};function ho(e,t,n){var i=null;t=d(co(e,t));for(var r=t.next();!r.done;r=t.next()){r=r.value;var a=e.h[r];a.isVisible()&&(i=eo(a,n,e.i)),e.h[r]=null}return i}function fo(e){e.g=null,e.h=[null,null,null,null,null,null,null,null]}function po(e,t,n){var i={0:0,1:0,2:1,3:1};return e=i[e],t=i[t],n=i[n],mo[e<<2|t<<1|n]}var go=new Map([[32," "],[33," "],[37,"…"],[42,"Š"],[44,"Œ"],[48,"█"],[49,"‘"],[50,"’"],[51,"“"],[52,"”"],[53,"•"],[57,"™"],[58,"š"],[60,"œ"],[61,"℠"],[63,"Ÿ"],[118,"⅛"],[119,"⅜"],[120,"⅝"],[121,"⅞"],[122,"│"],[123,"┐"],[124,"└"],[125,"─"],[126,"┘"],[127,"┌"]]),mo="black blue green cyan red magenta yellow white".split(" ");function vo(){this.h=[],this.g=[],this.i=new ro,this.l=0,this.B=new Map([["CC1",new ja(0,0)],["CC2",new ja(0,1)],["CC3",new ja(1,0)],["CC4",new ja(1,1)]]),this.A=this.o=0,this.j=new Map,yo(this)}function yo(e){e.o=0,e.A=0,e=d(e.B.values());for(var t=e.next();!t.done;t=e.next())t=t.value,t.h=2,t.g=t.i,t.o=null,Ia(t.i),Ia(t.l),Ia(t.A)}function bo(e){function t(e,t){return e.pts-t.pts||e.order-t.order}var n=[];e.h.sort(t),e.g.sort(t);for(var i=d(e.h),r=i.next();!r.done;r=i.next())(r=To(e,r.value))&&n.push(r);for(i=d(e.g),r=i.next();!r.done;r=i.next())ao(e.i,r.value);for(i=d(e.i.i),r=i.next();!r.done;r=i.next())r=Eo(e,r.value),n.push.apply(n,h(r));return e.i.i=[],e.h=[],e.g=[],n}function To(e,t){var n=t.type;if(16===(112&t.Ta)){var i=t.Ta>>3&1;0===n?e.o=i:e.A=i}if(n=e.B.get("CC"+(n<<1|(n?e.A:e.o)+1)),255===t.Ta&&255===t.hb||!t.Ta&&!t.hb||!wo(t.Ta)||!wo(t.hb))return 45<=++e.l&&yo(e),null;if(e.l=0,t.Ta&=127,t.hb&=127,!t.Ta&&!t.hb)return null;if(i=null,16===(112&t.Ta))e:{var r=t.Ta;if(i=t.hb,n.o===(r<<8|i))n.o=null;else if(n.o=r<<8|i,16===(240&r)&&64===(192&i)){r=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(7&r)<<1|i>>5&1];var a=(30&i)>>1,o="white",s=!1;if(7>a?o=Ya[a]:7===a&&(s=!0),i=1===(1&i),n.h!==Wa){if(a=n.g,n.h===Ha&&r!==a.g){var u=1+r-a.h;Ca(a,u,1+a.g-a.h,a.h),La(a,0,u-1),La(a,r+1,15-r)}a.g=r,n.g.o=i,n.g.j=s,n.g.l=o,n.g.A="black"}}else if(17===(247&r)&&32===(240&i))n.g.o=!1,n.g.j=!1,n.g.l="white",ka(n.g,Pa,32),o=!1,r=Ya[(14&i)>>1],"white_italics"===r&&(r="white",o=!0),n.g.o=1===(1&i),n.g.j=o,n.g.l=r;else if(16===(247&r)&&32===(240&i)||23===(247&r)&&45===(255&i))o="black",0===(7&r)&&(o=qa[(14&i)>>1]),n.g.A=o;else if(17===(247&r)&&48===(240&i))ka(n.g,Na,i);else if(18===(246&r)&&32===(224&i))ka(n.g,1&r?Ra:Da,i);else if(20===(246&r)&&32===(240&i)){switch(i=t.pts,r=null,t.hb){case 32:Ga(n);break;case 33:n=n.g,n.i[n.g].pop();break;case 37:r=Ba(n,2,i);break;case 38:r=Ba(n,3,i);break;case 39:r=Ba(n,4,i);break;case 40:ka(n.g,Pa,32);break;case 41:n.h=2,n.g=n.i,n.g.h=0,n.j=i;break;case 42:Ia(n.A),Va(n);break;case 43:Va(n);break;case 44:r=n.i,o=null,n.h!==Wa&&(o=_a(r,n.j,i)),La(r,0,15),r=o;break;case 45:r=n.g,n.h!==Ha?r=null:(o=_a(r,n.j,i),s=r.g-r.h+1,Ca(r,s-1,s,r.h),La(r,0,s-1),La(r,r.g,15-r.g),n.j=i,r=o);break;case 46:La(n.l,0,15);break;case 47:r=null,n.h!==Wa&&(r=_a(n.i,n.j,i)),o=n.l,n.l=n.i,n.i=o,Ga(n),n.j=i}i=r;break e}i=null}else r=t.hb,ka(n.g,Pa,t.Ta),ka(n.g,Pa,r);return i}function Eo(e,t){var n=[];try{for(;t.Ga();){var i=so(t).value,r=(224&i)>>5,a=31&i;if(7===r&&0!=a&&(r=63&so(t).value),0!=r){e.j.has(r)||e.j.set(r,new uo(r));for(var o=e.j.get(r),s=t.ka();t.ka()-s<a;){r=t;var u=so(r),l=u.value,c=u.pts;if(16===l){var d=so(r);l=l<<16|d.value}if(0<=l&&31>=l){var h=c;if(o.g){var f=o.g;switch(r=null,l){case 8:!Za(f)||0>=f.g&&0>=f.h||(0>=f.g?(f.g=f.H-1,f.h--):f.g--,f.i[f.h][f.g]=null);break;case 13:if(f.isVisible()&&(r=eo(f,h,o.i)),f.h+1>=f.K){h=f;for(var p=0,g=1;15>g;g++,p++)h.i[p]=h.i[g];for(g=0;1>g;g++,p++)h.i[p]=Ja()}else f.h++;f.g=0;break;case 14:f.isVisible()&&(r=eo(f,h,o.i)),f.i[f.h]=Ja(),f.g=0;break;case 12:f.isVisible()&&(r=eo(f,h,o.i)),$a(f),h=f,h.h=0,h.g=0}var m=r}else m=null}else if(128<=l&&159>=l)m=lo(o,r,l,c);else{if(4096<=l&&4127>=l)h=255&l,8<=h&&15>=h?r.skip(1):16<=h&&23>=h?r.skip(2):24<=h&&31>=h&&r.skip(3);else if(4224<=l&&4255>=l)h=255&l,128<=h&&135>=h?r.skip(4):136<=h&&143>=h&&r.skip(5);else if(32<=l&&127>=l)r=l,o.g&&Qa(o.g,127===r?"♪":String.fromCharCode(r));else if(160<=l&&255>=l)o.g&&Qa(o.g,String.fromCharCode(l));else if(4128<=l&&4223>=l){if(r=255&l,o.g)if(go.has(r)){var v=go.get(r);Qa(o.g,v)}else Qa(o.g,"_")}else 4256<=l&&4351>=l&&o.g&&Qa(o.g,160!=(255&l)?"_":"[CC]");m=null}(r=m)&&n.push(r)}}}}catch(y){if(!(y instanceof Ie&&3e3===y.code))throw y;$("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.")}return n}function wo(e){for(var t=0;e;)t^=1&e,e>>=1;return 1===t}function So(){}var Ao=function e(t,n){var i,r,a,o;return U(e,(function(e){if(1==e.g){for(var t=n,s=0,u=0;u<t.length;)2==s&&3==t[u]?(s=0,t=[].concat(h(t)),t.splice(u,1),t=new Uint8Array(t)):0==t[u]?s++:s=0,u++;i=t,r=0}if(4!=e.g){if(!(r<i.length))return e.C(0);for(a=0;255==i[r];)a+=255,r++;for(a+=i[r++],o=0;255==i[r];)o+=255,r++;return o+=i[r++],4!=a?e.C(4):S(e,i.subarray(r,r+o),4)}return r+=o,e.C(2)}))};function xo(e,t){var n=null,i=null,r=e.P();return 1&t&&e.skip(8),2&t&&e.skip(4),8&t&&(n=e.P()),16&t&&(i=e.P()),{trackId:r,Pe:n,Lf:i}}function _o(e,t){return{Od:1==t?e.jc():e.P()}}function Io(e,t){return 1==t?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4)),{timescale:e.P()}}function ko(e,t,n){var i=e.P(),r=[];1&n&&e.skip(4),4&n&&e.skip(4);for(var a=d(de(i)),o=a.next();!o.done;o=a.next())o={le:null,sampleSize:null,rd:null},256&n&&(o.le=e.P()),512&n&&(o.sampleSize=e.P()),1024&n&&e.skip(4),2048&n&&(o.rd=0==t?e.P():e.jf()),r.push(o);return{zi:i,mf:r}}function Co(){this.j=new So,this.i=new Map,this.h=this.g=0}function Lo(){this.h=new Co,this.g=new vo}function Po(e,t){var n=e.h.parse(t);n=d(n);for(var i=n.next();!i.done;i=n.next()){var r=i.value,a=Ut(r.Ig);if(0<a.length&&(i=e.g,r=r.pts,a=new aa(a,0),181===a.ma()&&49===a.ic()&&1195456820===a.P()&&3===a.ma())){var o=a.ma();if(0!==(64&o)){o&=31,a.skip(1);for(var s=0;s<o;s++){var u=a.ma(),l=(4&u)>>2,c=a.ma(),h=a.ma();l&&(u&=3,0===u||1===u?i.h.push({pts:r,type:u,Ta:c,hb:h,order:i.h.length}):(i.g.push({pts:r,type:u,value:c,order:i.g.length}),i.g.push({pts:r,type:2,value:h,order:i.g.length})))}}}}return bo(e.g)}function No(e){return!e||1==e.length&&1e-6>e.end(0)-e.start(0)?null:e.length?e.end(e.length-1):null}function Do(e,t,n){return n=void 0===n?0:n,!(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0)||t>e.end(e.length-1))&&t+n>=e.start(0)}function Ro(e,t){if(!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0))return 0;for(var n=0,i=d(Uo(e)),r=i.next();!r.done;r=i.next()){var a=r.value;r=a.start,a=a.end,a>t&&(n+=a-Math.max(r,t))}return n}function Mo(e,t,n){return!e||!e.length||1==e.length&&1e-6>e.end(0)-e.start(0)?null:(e=Uo(e).findIndex((function(e,i,r){return e.start>t&&(0==i||r[i-1].end-t<=n)})),0<=e?e:null)}function Uo(e){if(!e)return[];for(var t=[],n=d(de(e.length)),i=n.next();!i.done;i=n.next())i=i.value,t.push({start:e.start(i),end:e.end(i)});return t}function Oo(e,t,n,i){var r=this;this.g=e,this.o=n,this.j={},this.K={},this.i=null,this.L=i||function(){},this.l={},this.h=new ar,this.B={},this.D=t,this.H=new Vt,this.A=Fo(this,this.H),this.M=new ir((function(){return jo(r)})),this.I=""}function Fo(e,t){var n=new MediaSource;return e.h.Oa(n,"sourceopen",(function(){URL.revokeObjectURL(e.I),t.resolve()})),e.I=is(n),e.g.src=e.I,n}function jo(e){var t,n,i,r,a,o,s,u;return F((function(l){if(1==l.g){for(n in t=[],e.l)for(i=e.l[n],r=i[0],e.l[n]=i.slice(0,1),r&&t.push(r.p["catch"](Re)),a=d(i.slice(1)),o=a.next();!o.done;o=a.next())s=o.value,s.p.reject(new Ie(2,7,7003,void 0));for(u in e.i&&t.push(e.i.destroy()),e.o&&t.push(e.o.destroy()),e.B)t.push(e.B[u].destroy());return S(l,Promise.all(t),2)}e.h&&(e.h.release(),e.h=null),e.g&&(e.g.removeAttribute("src"),e.g.load(),e.g=null),e.A=null,e.i=null,e.o=null,e.j={},e.B={},e.D=null,e.l={},A(l)}))}function Bo(e,t){e.i||(e.i=new pn(e.o)),"application/cea-608"!=t&&"application/cea-708"!=t&&(e.i.A=Ue(En[t]))}function Go(e){return!e.A||"ended"==e.A.readyState}function Vo(e,t){if(t==Ge)var n=e.i.g;else n=Ho(e,t),n=!n||1==n.length&&1e-6>n.end(0)-n.start(0)?null:1==n.length&&0>n.start(0)?0:n.length?n.start(0):null;return n}function Ko(e,t){return t==Ge?e.i.h:No(Ho(e,t))}function zo(e,t,n){return t==Ge?(e=e.i,null==e.h||e.h<n?0:e.h-Math.max(n,e.g)):(e=Ho(e,t),Ro(e,n))}function Ho(e,t){try{return e.j[t].buffered}catch(n){return null}}function Wo(e,t,n,i,r,a){var o,s,u,l,c,d,h,f;return F((function(p){return 1==p.g?(o=Ve,t==o.oa?S(p,mn(e.i,n,i,r),0):e.B[t]?S(p,ln(e.B[t],n),10):a?(e.i||Bo(e,"text/vtt"),null==i&&null==r?e.D.init(n):(s=Po(e.D,n),s.length&&(u=e.j[o.fb].timestampOffset,Tn(e.i,s,i,r,u))),n=ns(e,n,i,t),S(p,Qo(e,t,(function(){e.j[t].appendBuffer(n)})),0)):(n=ns(e,n,i,t),S(p,Qo(e,t,(function(){e.j[t].appendBuffer(n)})),0))):(l=p.h,e.i||Bo(e,"text/vtt"),l.metadata&&(c=e.j[t].timestampOffset,e.L(l.metadata,c,r)),l.captions&&l.captions.length&&(d=e.j[o.fb].timestampOffset,h=bn(l.captions),Tn(e.i,h,i,r,d)),f=l.data,f=ns(e,f,i,t),S(p,Qo(e,t,(function(){e.j[t].appendBuffer(f)})),0))}))}function qo(e,t){var n=Ko(e,"video")||0;yn(e.i,t,n)}function Yo(e){e.i&&yn(e.i,"",0)}function Xo(e,t){var n;return F((function(i){return n=Ve,t==n.oa?e.i?S(i,e.i.remove(0,1/0),0):i["return"]():S(i,Qo(e,t,(function(){var n=e.A.duration;0>=n?Jo(e,t):e.j[t].remove(0,n)})),0)}))}function $o(e,t,n,i,r){var a;return F((function(o){return a=Ve,t==a.oa?(e.i.D=n,vn(e.i,i,r),o["return"]()):S(o,Promise.all([Qo(e,t,(function(){var n=e.j[t].appendWindowStart,i=e.j[t].appendWindowEnd;e.j[t].abort(),e.j[t].appendWindowStart=n,e.j[t].appendWindowEnd=i,Jo(e,t)})),Qo(e,t,(function(){var i=n;0>i&&(i+=.001),e.j[t].timestampOffset=i,Jo(e,t)})),Qo(e,t,(function(){e.j[t].appendWindowStart=0,e.j[t].appendWindowEnd=r,e.j[t].appendWindowStart=i,Jo(e,t)}))]),0)}))}function Jo(e,t){var n=e.l[t][0];n&&(n.p.resolve(),es(e,t))}function Qo(e,t,n){return rr(e.M),n={start:n,p:new Vt},e.l[t].push(n),1==e.l[t].length&&ts(e,t),n.p}function Zo(e,t){var n,i,r,a,o,s;return F((function(u){switch(u.g){case 1:for(r in rr(e.M),n=[],i={},e.j)i.qc=new Vt,a={start:function(e){return function(){return e.qc.resolve()}}(i),p:i.qc},e.l[r].push(a),n.push(i.qc),1==e.l[r].length&&a.start(),i={qc:i.qc};return x(u,2),S(u,Promise.all(n),4);case 4:I(u,3);break;case 2:throw o=k(u),o;case 3:try{t()}catch(l){throw new Ie(2,3,3015,l)}finally{for(s in e.j)es(e,s)}A(u)}}))}function es(e,t){e.l[t].shift(),ts(e,t)}function ts(e,t){var n=e.l[t][0];if(n)try{n.start()}catch(i){"QuotaExceededError"==i.name?n.p.reject(new Ie(2,3,3017,t)):n.p.reject(new Ie(2,3,3015,i)),es(e,t)}}function ns(e,t,n,i){var r=e.g.mediaKeys;return null==n&&r&&(_n()||Ln("Xbox One"))&&"mp4"==e.K[i].split(";")[0].split("/")[1]&&(t=va(t)),t}Co.prototype.init=function(e){var t=this,n=[],i=[];if((new ua).box("moov",la).box("mvex",la).X("trex",(function(e){var n=e.reader;n.skip(4),n.skip(4),e=n.P(),n=n.P(),t.g=e,t.h=n})).box("trak",la).X("tkhd",(function(e){var t=e.reader;1==e.version?(t.skip(8),t.skip(8)):(t.skip(4),t.skip(4)),e=t.P(),n.push(e)})).box("mdia",la).X("mdhd",(function(e){e=Io(e.reader,e.version),i.push(e.timescale)})).parse(e,!0),!n.length||!i.length||n.length!=i.length)throw new Ie(2,2,2010);n.forEach((function(e,n){t.i.set(e,i[n])}))},Co.prototype.parse=function(e){var t=this,n=[],i=this.g,r=this.h,a=[],o=null,s=9e4;return(new ua).box("moof",la).box("traf",la).X("trun",(function(e){a=ko(e.reader,e.version,e.flags).mf})).X("tfhd",(function(e){e=xo(e.reader,e.flags),i=e.Pe||t.g,r=e.Lf||t.h,e=e.trackId,t.i.has(e)&&(s=t.i.get(e))})).X("tfdt",(function(e){o=_o(e.reader,e.version).Od})).box("mdat",(function(e){if(null===o)throw new Ie(2,2,2010);e=e.reader;var u=o,l=s,c=i,h=r,f=a,p=0,g=h;for(f.length&&(g=f[0].sampleSize||h);e.Ga();){var m=e.P();if(6==(31&e.ma())){var v=0;f.length>p&&(v=f[p].rd||0),v=(u+v)/l;for(var y=d(Ao(t.j,e.xb(m-1))),b=y.next();!b.done;b=y.next())n.push({Ig:b.value,pts:v})}else e.skip(m-1);g-=m+4,0==g&&(u=f.length>p?u+(f[p].le||c):u+c,p++,g=f.length>p&&f[p].sampleSize||h)}})).parse(e,!1),n},Lo.prototype.init=function(e){this.h.init(e)},i=Oo.prototype,i.destroy=function(){return this.M.destroy()},i.init=function(e,t){var n,i,r,a,o,s,u,l=this;return F((function(c){if(1==c.g)return n=Ve,S(c,l.H,2);for(i={},r=d(e.keys()),a=r.next();!a.done;i={La:i.La},a=r.next())i.La=a.value,o=e.get(i.La),s=cn(o.mimeType,o.codecs),i.La==n.oa?Bo(l,s):(!t&&MediaSource.isTypeSupported(s)||!on(s,i.La)||(l.B[i.La]=new an,s=un(i.La,s)),u=l.A.addSourceBuffer(s),l.h.m(u,"error",function(e){return function(){l.l[e.La][0].p.reject(new Ie(2,3,3014,l.g.error?l.g.error.code:0))}}(i)),l.h.m(u,"updateend",function(e){return function(){return Jo(l,e.La)}}(i)),l.j[i.La]=u,l.K[i.La]=s,l.l[i.La]=[]);A(c)}))},i.dd=function(){var e={total:Uo(this.g.buffered),audio:Uo(Ho(this,"audio")),video:Uo(Ho(this,"video")),text:[]};if(this.i){var t=this.i.g,n=this.i.h;null!=t&&null!=n&&e.text.push({start:t,end:n})}return e},i.remove=function(e,t,n){var i,r=this;return F((function(a){return i=Ve,e==i.oa?S(a,r.i.remove(t,n),0):S(a,Qo(r,e,(function(){n<=t?Jo(r,e):r.j[e].remove(t,n)})),0)}))},i.flush=function(e){var t,n=this;return F((function(i){return t=Ve,e==t.oa?i["return"]():S(i,Qo(n,e,(function(){n.g.currentTime-=.001,Jo(n,e)})),0)}))},i.endOfStream=function(e){var t=this;return F((function(n){return S(n,Zo(t,(function(){Go(t)||(e?t.A.endOfStream(e):t.A.endOfStream())})),0)}))},i.ab=function(e){var t=this;return F((function(n){return S(n,Zo(t,(function(){t.A.duration=e})),0)}))},i.getDuration=function(){return this.A.duration};var is=e.URL.createObjectURL;function rs(e,t,n){this.Fa=e,this.Ba=t,this.va=n}function as(e,t){return e&&t?e.Dc()==t.Dc()&&e.yc()==t.yc()&&dt(e.Fa(),t.Fa()):e==t}function os(e,t,n,i,r,a,o,s,u,l,c){l=void 0===l?[]:l,this.startTime=e,this.j=this.endTime=t,this.i=n,this.Ba=i,this.va=r,this.h=a,this.timestampOffset=o,this.appendWindowStart=s,this.appendWindowEnd=u,this.g=l,this.tilesLayout=void 0===c?"":c}function ss(e,t,n){this.j=e,this.pd=t,this.o=this.l=1/0,this.g=1,this.h=this.i=null,this.A=0,this.B=!0,this.D=0,this.H=void 0===n||n,this.I=0}function us(e,t){this.j=e,this.o=ds(e),this.g=e.g.currentTime,this.l=Date.now()/1e3,this.h=!1,this.A=t,this.i=function(){}}function ls(e,t){e.i=t}function cs(e){this.g=e}function ds(e){if(e.g.paused||0==e.g.playbackRate||0==e.g.buffered.length)var t=!1;else e:{t=e.g.currentTime,e=d(Uo(e.g.buffered));for(var n=e.next();!n.done;n=e.next())if(n=n.value,!(t<n.start-.1||t>n.end-.5)){t=!0;break e}t=!1}return t}function hs(e,t,n,i,r){var a=this;this.g=e,this.D=t,this.s=n,this.B=r,this.h=new ar,this.A=!1,this.H=e.readyState,this.j=!1,this.i=i,this.o=!1,this.h.m(e,"waiting",(function(){return fs(a)})),this.l=new Sn((function(){fs(a)})).na(.25)}function fs(e){if(0!=e.g.readyState){if(e.g.seeking){if(!e.A)return}else e.A=!1;if(!e.g.paused||0==e.g.currentTime&&(e.g.autoplay||0!=e.g.currentTime)){var t;if(e.g.readyState!=e.H&&(e.j=!1,e.H=e.g.readyState),!(t=!e.i)){t=e.i;var n=t.j,i=ds(n),r=n.g.currentTime,a=Date.now()/1e3;t.g==r&&t.o==i||(t.l=a,t.g=r,t.o=i,t.h=!1),r=a-t.l,(i=r>=t.A&&i&&!t.h)&&(t.i(t.g,r),t.h=!0,t.g=n.g.currentTime),t=!i}if(t){var o=e.s.smallGapLimit;if(r=e.g.currentTime,t=e.g.buffered,n=Mo(t,r,e.s.gapDetectionThreshold),!(null==n||0==n&&!e.o||(i=t.start(n),i>=e.D.ib()))){a=i-r,o=a<=o;var s=!1;.001>a||(o||e.j||(e.j=!0,r=new W("largegap",{currentTime:r,gapSize:a}),r.cancelable=!0,e.B(r),e.s.jumpLargeGaps&&!r.defaultPrevented&&(s=!0)),!o&&!s)||(0!=n&&t.end(n-1),e.g.currentTime=i)}}}}}function ps(e,t,n,i){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?i():(t=gs.value().get(t),n.Oa(e,t,i))}rs.prototype.Dc=function(){return this.Ba},rs.prototype.yc=function(){return this.va},H("shaka.media.InitSegmentReference",rs),rs.prototype.getEndByte=rs.prototype.yc,rs.prototype.getStartByte=rs.prototype.Dc,i=os.prototype,i.Fa=function(){return this.i()},i.mg=function(){return this.startTime},i.Yf=function(){return this.endTime},i.Dc=function(){return this.Ba},i.yc=function(){return this.va},i.rg=function(){return this.tilesLayout},H("shaka.media.SegmentReference",os),os.prototype.getTilesLayout=os.prototype.rg,os.prototype.getEndByte=os.prototype.yc,os.prototype.getStartByte=os.prototype.Dc,os.prototype.getEndTime=os.prototype.Yf,os.prototype.getStartTime=os.prototype.mg,os.prototype.getUris=os.prototype.Fa,i=ss.prototype,i.getDuration=function(){return this.l},i.gg=function(){return this.g},i.ab=function(e){this.l=e},i.kg=function(){return this.j},i.qf=function(e){this.A=e},i.Oc=function(e){this.B=e},i.xe=function(e){this.o=e},i.Zg=function(e){this.pd=e},i.Xf=function(){return this.pd},i.ec=function(e){if(0!=e.length){var t=e[e.length-1].endTime;this.be(e[0].startTime),this.g=e.reduce((function(e,t){return Math.max(e,t.endTime-t.startTime)}),this.g),this.h=Math.max(this.h,t),null!=this.j&&this.H&&(this.j=(Date.now()+this.A)/1e3-this.h-this.g)}},i.be=function(e){this.i=null==this.i?e:Math.min(this.i,e)},i.ae=function(e){this.g=Math.max(this.g,e)},i.offset=function(e){null!=this.i&&(this.i+=e),null!=this.h&&(this.h+=e)},i.Y=function(){return 1/0==this.l&&!this.B},i.Jb=function(){return 1/0!=this.l&&!this.B},i.vb=function(){return Math.max(this.D,this.Fb()-this.o)},i.tf=function(e){this.D=e},i.Fb=function(){return this.Y()||this.Jb()?Math.min(Math.max(0,(Date.now()+this.A)/1e3-this.g-this.j)+this.I,this.l):this.h||this.l},i.Cc=function(e){var t=Math.max(this.i,this.D);return 1/0==this.o?Math.ceil(1e3*t)/1e3:Math.max(t,Math.min(this.Fb()-this.o+e,this.ib()))},i.bc=function(){return this.Cc(0)},i.ib=function(){return Math.max(0,this.Fb()-(this.Y()||this.Jb()?this.pd:0))},i.xf=function(){return!(null==this.j||null!=this.h&&this.H)},i.pf=function(e){this.I=e},H("shaka.media.PresentationTimeline",ss),ss.prototype.setAvailabilityTimeOffset=ss.prototype.pf,ss.prototype.usingPresentationStartTime=ss.prototype.xf,ss.prototype.getSeekRangeEnd=ss.prototype.ib,ss.prototype.getSeekRangeStart=ss.prototype.bc,ss.prototype.getSafeSeekRangeStart=ss.prototype.Cc,ss.prototype.getSegmentAvailabilityEnd=ss.prototype.Fb,ss.prototype.setUserSeekStart=ss.prototype.tf,ss.prototype.getSegmentAvailabilityStart=ss.prototype.vb,ss.prototype.isInProgress=ss.prototype.Jb,ss.prototype.isLive=ss.prototype.Y,ss.prototype.offset=ss.prototype.offset,ss.prototype.notifyMaxSegmentDuration=ss.prototype.ae,ss.prototype.notifyMinSegmentStartTime=ss.prototype.be,ss.prototype.notifySegments=ss.prototype.ec,ss.prototype.getDelay=ss.prototype.Xf,ss.prototype.setDelay=ss.prototype.Zg,ss.prototype.setSegmentAvailabilityDuration=ss.prototype.xe,ss.prototype.setStatic=ss.prototype.Oc,ss.prototype.setClockOffset=ss.prototype.qf,ss.prototype.getPresentationStartTime=ss.prototype.kg,ss.prototype.setDuration=ss.prototype.ab,ss.prototype.getMaxSegmentDuration=ss.prototype.gg,ss.prototype.getDuration=ss.prototype.getDuration,us.prototype.release=function(){this.j=null,this.i=function(){}},hs.prototype.release=function(){this.h&&(this.h.release(),this.h=null),null!=this.l&&(this.l.stop(),this.l=null),this.i&&(this.i.release(),this.i=null),this.g=this.D=this.B=null},hs.prototype.ge=function(){this.o=!0,fs(this)};var gs=new Kt((function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])}));function ms(e,t,n){var i=this;this.g=e,this.l=t,this.j=n,this.o=!1,this.h=new ar,this.i=new Es(e),ps(this.g,HTMLMediaElement.HAVE_METADATA,this.h,(function(){bs(i,i.j)}))}function vs(e){return e.o?e.g.currentTime:e.j}function ys(e,t){0<e.g.readyState?ws(e.i,t):ps(e.g,HTMLMediaElement.HAVE_METADATA,e.h,(function(){bs(e,e.j)}))}function bs(e,t){.001>Math.abs(e.g.currentTime-t)?Ts(e):(e.h.Oa(e.g,"seeking",(function(){Ts(e)})),ws(e.i,0==e.g.currentTime?t:e.g.currentTime))}function Ts(e){e.o=!0,e.h.m(e.g,"seeking",(function(){return e.l()}))}function Es(e){var t=this;this.h=e,this.o=10,this.l=this.j=this.i=0,this.g=new Sn((function(){0>=t.i||t.h.currentTime!=t.j?t.g.stop():(t.h.currentTime=t.l,t.i--)}))}function ws(e,t){e.j=e.h.currentTime,e.l=t,e.i=e.o,e.h.currentTime=t,e.g.na(.1)}function Ss(e){function t(){null==n.i||0==n.i?n.j=!0:(n.h.Oa(n.g,"seeking",(function(){n.j=!0})),n.g.currentTime=Math.max(0,n.g.currentTime+n.i))}var n=this;this.g=e,this.j=!1,this.i=null,this.h=new ar,ps(this.g,HTMLMediaElement.HAVE_CURRENT_DATA,this.h,(function(){t()}))}function As(e,t,n,i,r,a){var o=this;this.i=e,this.g=t.presentationTimeline,this.I=t.minBufferTime||0,this.s=n,this.D=r,this.B=null,this.j=new hs(e,t.presentationTimeline,n,Cs(e,n),a),this.h=new ms(e,(function(){var e=o.j;e.A=!0,e.o=!1,e.j=!1;var t=vs(o.h);return e=Is(o,t),.001<Math.abs(e-t)&&(t=Date.now()/1e3,!o.B||o.B<t-1)?(o.B=t,ys(o.h,e),e=void 0):(o.D(),e=void 0),e}),xs(this,i)),this.A=new Sn((function(){if(0!=o.i.readyState&&!o.i.paused){var e=vs(o.h),t=o.g.bc(),n=o.g.ib();3>n-t&&(t=n-3),e<t&&(e=Is(o,e),o.i.currentTime=e)}})).na(.25)}function xs(e,t){return null==t?t=1/0>e.g.getDuration()?e.g.bc():e.g.ib():0>t&&(t=e.g.ib()+t),_s(e,ks(e,t))}function _s(e,t){var n=e.g.getDuration();return t>=n?n-e.s.durationBackoff:t}function Is(e,t){var n=Math.max(e.I,e.s.rebufferingGoal),i=e.s.safeSeekOffset,r=e.g.bc(),a=e.g.ib(),o=e.g.getDuration();3>a-r&&(r=a-3);var s=e.g.Cc(n),u=e.g.Cc(i);return n=e.g.Cc(n+i),t>=o?_s(e,t):t>a?a:t<r?Do(e.i.buffered,u)?u:n:t>=s||Do(e.i.buffered,t)?t:n}function ks(e,t){var n=e.g.bc();return t<n?n:(n=e.g.ib(),t>n?n:t)}function Cs(e,t){if(!t.stallEnabled)return null;var n=t.stallSkip,i=new us(new cs(e),t.stallThreshold);return ls(i,(function(){n?e.currentTime+=n:(e.pause(),e.play())})),i}function Ls(e){this.g=e,this.h=null,this.i=0,this.j=!1}function Ps(e,t,n){return new Ls([new os(e,e+t,(function(){return n}),0,null,null,e,e,e+t)])}function Ns(e,t,n){this.i=e,this.h=t,this.g=n}function Ds(){Ls.call(this,[]),this.l=[]}function Rs(e){var t=this;this.g=e,this.j=!1,this.i=this.g.hd(),this.h=new Sn((function(){t.g.df(.25*t.i)}))}function Ms(e){e.h.stop();var t=e.j?0:e.i;if(0<=t)try{return void(e.g.hd()!=t&&e.g.ve(t))}catch(n){}e.h.na(.25),0!=e.g.hd()&&e.g.ve(0)}function Us(e){var t=this;this.h=e,this.g=new Set,this.i=new Sn((function(){Os(t,!1)})).na(.25)}function Os(e,t){for(var n=d(e.g),i=n.next();!i.done;i=n.next()){i=i.value;for(var r=e.h.currentTime,a=t,o=d(i.l.g),s=o.next();!s.done;s=o.next()){s=s.value;var u=i.j.get(s),l=r<s.startTime?Vs:r>s.endTime?zs:Ks;i.j.set(s,l);for(var c=d(i.o),h=c.next();!h.done;h=c.next())h=h.value,h.Tb==u&&h.Sb==l&&h.Ib(s,a)}}}function Fs(e){var t=this;this.h=function(){},this.g=new Set,this.j=e,this.i=new Sn((function(){for(var e=t.j(),n=d(t.g),i=n.next();!i.done;i=n.next())i=i.value,i.endTime<e.start&&t.g["delete"](i)})).na(2)}function js(e,t){e.h=t}function Bs(e){var t=this;this.l=e,this.j=new Map,this.g=function(){},this.h=function(){},this.i=function(){},this.o=[{Tb:null,Sb:Ks,Ib:function(e,n){return t.g(e,n)}},{Tb:Vs,Sb:Ks,Ib:function(e,n){return t.g(e,n)}},{Tb:zs,Sb:Ks,Ib:function(e,n){return t.g(e,n)}},{Tb:Ks,Sb:Vs,Ib:function(e,n){return t.h(e,n)}},{Tb:Ks,Sb:zs,Ib:function(e,n){return t.h(e,n)}},{Tb:Vs,Sb:zs,Ib:function(e,n){return t.i(e,n)}},{Tb:zs,Sb:Vs,Ib:function(e,n){return t.i(e,n)}}]}function Gs(e,t,n,i){e.g=t,e.h=n,e.i=i}ms.prototype.release=function(){this.h&&(this.h.release(),this.h=null),null!=this.i&&(this.i.release(),this.i=null),this.l=function(){},this.g=null},Es.prototype.release=function(){this.g&&(this.g.stop(),this.g=null),this.h=null},Ss.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.g=null},Ss.prototype.o=function(e){this.i=this.j?this.i:e},Ss.prototype.l=function(){return(this.j?this.g.currentTime:this.i)||0},Ss.prototype.H=function(){},As.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.j&&(this.j.release(),this.j=null),this.A&&(this.A.stop(),this.A=null),this.i=this.h=this.g=this.s=null,this.D=function(){}},As.prototype.o=function(e){ys(this.h,e)},As.prototype.l=function(){var e=vs(this.h);return 0<this.i.readyState&&!this.i.paused?ks(this,e):e},As.prototype.H=function(){this.j.ge()},i=Ls.prototype,i.destroy=function(){return Ce("shaka.media.SegmentIndex","Please use release() instead of destroy()."),this.release(),Promise.resolve()},i.release=function(){this.j||(this.g=[],this.h&&this.h.stop(),this.h=null)},i.Ag=function(){this.j=!0},i.find=function(e){for(var t=this.g.length-1,n=t;0<=n;--n){var i=this.g[n],r=n<t?this.g[n+1].startTime:i.endTime;if(e>=i.startTime&&e<r)return n+this.i}return this.g.length&&e<this.g[0].startTime?this.i:null},i.get=function(e){return 0==this.g.length?null:(e-=this.i,0>e||e>=this.g.length?null:this.g[e])},i.offset=function(e){if(!this.j)for(var t=d(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.startTime+=e,n.endTime+=e,n.timestampOffset+=e},i.kd=function(e){!this.j&&e.length&&(this.g=this.g.filter((function(t){return t.startTime<e[0].startTime})),this.g.push.apply(this.g,h(e)))},i.dc=function(e,t){var n=this;e=e.filter((function(e){return e.endTime>t&&(0==n.g.length||e.endTime>n.g[0].startTime)})),this.kd(e),this.Db(t)},i.Db=function(e){if(!this.j){var t=this.g.length;this.g=this.g.filter((function(t){return t.endTime>e})),this.i+=t-this.g.length}},i.ub=function(e,t,n){if(n=void 0!==n&&n,!this.j){for(;this.g.length;){if(!(this.g[this.g.length-1].startTime>=t))break;this.g.pop()}for(;this.g.length;){if(!(this.g[0].endTime<=e))break;this.g.shift(),n||this.i++}0!=this.g.length&&(e=this.g[this.g.length-1],this.g[this.g.length-1]=new os(e.startTime,t,e.i,e.Ba,e.va,e.h,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,e.g,e.tilesLayout))}},i.ud=function(e,t){var n=this;this.j||(this.h&&this.h.stop(),this.h=new Sn((function(){var e=t();e?n.g.push.apply(n.g,h(e)):(n.h.stop(),n.h=null)})),this.h.na(e))},Ls.prototype[Symbol.iterator]=function(){return this.$b(0)},Ls.prototype.$b=function(e){var t=this.find(e);if(null==t)return null;t--;var n=this.get(t+1),i=-1;if(n&&0<n.g.length)for(var r=n.g.length-1;0<=r;--r){var a=n.g[r];if(e>=a.startTime&&e<a.endTime){t++,i=r-1;break}}return new Ns(this,t,i)},H("shaka.media.SegmentIndex",Ls),Ls.forSingleSegment=Ps,Ls.prototype.getIteratorForTime=Ls.prototype.$b,Ls.prototype.updateEvery=Ls.prototype.ud,Ls.prototype.fit=Ls.prototype.ub,Ls.prototype.evict=Ls.prototype.Db,Ls.prototype.mergeAndEvict=Ls.prototype.dc,Ls.prototype.merge=Ls.prototype.kd,Ls.prototype.offset=Ls.prototype.offset,Ls.prototype.get=Ls.prototype.get,Ls.prototype.find=Ls.prototype.find,Ls.prototype.markImmutable=Ls.prototype.Ag,Ls.prototype.release=Ls.prototype.release,Ls.prototype.destroy=Ls.prototype.destroy,Ns.prototype.seek=function(e){return Ce("shaka.media.SegmentIterator","Please use SegmentIndex.getIteratorForTime instead of seek()."),(e=this.i.$b(e))?(this.h=e.h,this.g=e.g):(this.h=Number.MAX_VALUE,this.g=0),this.next().value},Ns.prototype.current=function(){var e=this.i.get(this.h);return e&&0<e.g.length&&e.Fa().length&&this.g>=e.g.length&&(this.h++,this.g=0,e=this.i.get(this.h)),e&&0<e.g.length?e.g[this.g]:e},Ns.prototype.next=function(){var e=this.i.get(this.h);return e&&0<e.g.length?(this.g++,e.Fa().length&&this.g==e.g.length&&(this.h++,this.g=0)):(this.h++,this.g=0),e=this.current(),{value:e,done:!e}},H("shaka.media.SegmentIterator",Ns),Ns.prototype.next=Ns.prototype.next,Ns.prototype.current=Ns.prototype.current,Ns.prototype.seek=Ns.prototype.seek,b(Ds,Ls),i=Ds.prototype,i.clone=function(){var e=new Ds;return e.l=this.l.slice(),e},i.release=function(){for(var e=d(this.l),t=e.next();!t.done;t=e.next())t.value.release();this.l=[]},i.find=function(e){for(var t=0,n=d(this.l),i=n.next();!i.done;i=n.next()){i=i.value;var r=i.find(e);if(null!=r)return r+t;t+=i.i+i.g.length}return null},i.get=function(e){for(var t=0,n=d(this.l),i=n.next();!i.done;i=n.next()){i=i.value;var r=i.get(e-t);if(r)return r;t+=i.i+i.g.length}return null},i.offset=function(){},i.kd=function(){},i.Db=function(){},i.dc=function(){},i.ub=function(){},i.ud=function(){},H("shaka.media.MetaSegmentIndex",Ds),Ds.prototype.updateEvery=Ds.prototype.ud,Ds.prototype.fit=Ds.prototype.ub,Ds.prototype.mergeAndEvict=Ds.prototype.dc,Ds.prototype.evict=Ds.prototype.Db,Ds.prototype.merge=Ds.prototype.kd,Ds.prototype.offset=Ds.prototype.offset,Ds.prototype.get=Ds.prototype.get,Ds.prototype.find=Ds.prototype.find,Ds.prototype.release=Ds.prototype.release,Rs.prototype.release=function(){this.h&&(this.h.stop(),this.h=null),this.g=null},Rs.prototype.set=function(e){this.i=e,Ms(this)},Rs.prototype.ed=function(){return this.g.ed()},Us.prototype.release=function(){this.i.stop();for(var e=d(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g.clear()},Fs.prototype.release=function(){this.h=function(){},this.g.clear(),this.i.stop()},Bs.prototype.release=function(){this.l=null,this.j.clear(),this.g=function(){},this.h=function(){},this.i=function(){}};var Vs=1,Ks=2,zs=3;function Hs(e,t,n,i,r){return e=Yi(e,i,r),0==t&&null==n||(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function Ws(e,t){var n=this;this.G=t,this.F=e,this.s=null,this.l=1,this.i=this.h=null,this.g=new Map,this.o=!1,this.A=null,this.j=!1,this.M=new ir((function(){return qs(n)}))}function qs(e){var t,n,i,r;return F((function(a){if(1==a.g){for(t=[],n=d(e.g.values()),i=n.next();!i.done;i=n.next())r=i.value,mu(r),t.push(vu(r));return S(a,Promise.all(t),2)}e.g.clear(),e.G=null,e.F=null,e.s=null,A(a)}))}function Ys(e,t){var n,i,r,a,o;F((function(s){switch(s.g){case 1:return n=Ve,x(s,2),S(s,Xo(e.G.V,n.oa),4);case 4:I(s,3);break;case 2:i=k(s),e.G&&e.G.onError(i);case 3:r=cn(t.mimeType,t.codecs),Bo(e.G.V,r),a=e.G.V.o,(a.isTextVisible()||e.s.alwaysStreamText)&&(o=iu(t),e.g.set(n.oa,o),gu(e,o,0)),A(s)}}))}function Xs(e){var t=e.g.get(Ge);t&&(mu(t),vu(t)["catch"]((function(){})),e.g["delete"](Ge)),e.i=null}function $s(e,t){var n=e.g.get("video");if(n){var i=n.stream;if(i)if(t){var r=i.trickModeVideo;r&&!n.Pb&&(Zs(e,r,!1,0,!1),n.Pb=i)}else(i=n.Pb)&&(n.Pb=null,Zs(e,i,!0,0,!1))}}function Js(e,t,n,i,r){n=void 0!==n&&n,i=void 0===i?0:i,r=void 0!==r&&r,e.h=t,e.o&&(t.video&&Zs(e,t.video,n,i,r),t.audio&&Zs(e,t.audio,n,i,r))}function Qs(e,t){e.i=t,e.o&&Zs(e,t,!0,0,!1)}function Zs(e,t,n,i,r){var a=e.g.get(t.type);a||t.type!=Ge?a&&(a.Pb&&(t.trickModeVideo?(a.Pb=t,t=t.trickModeVideo):a.Pb=null),a.stream!=t||r)&&(t.type==Ge&&Bo(e.G.V,cn(t.mimeType,t.codecs)),a.stream=t,a.sa=null,n&&(a.wc?a.xd=!0:a.kb?(a.Rb=!0,a.$c=i,a.xd=!0):(mu(a),pu(e,a,!0,i)["catch"]((function(t){e.G&&e.G.onError(t)})))),eu(e,a)["catch"]((function(t){e.G&&e.G.onError(t)}))):Ys(e,t)}function eu(e,t){var n,i;return F((function(r){if(1==r.g)return t.Pa?(n=t.stream,i=t.Pa,n.segmentIndex?r.C(2):S(r,n.createSegmentIndex(),2)):r["return"]();if(t.Pa!=i||t.stream!=n)return r["return"]();var a=e.G.gd(),o=Ko(e.G.V,t.type),s=t.stream.segmentIndex.find(t.Ua?t.Ua.endTime:a),u=null==s?null:t.stream.segmentIndex.get(s);s=u&&u.va?u.va-u.Ba:null,u&&!s&&(s=(u.endTime-u.startTime)*(t.stream.bandwidth||0)/8),s?((u=u.h)&&(s+=(u.va?u.va-u.Ba:null)||0),u=e.G.getBandwidthEstimate(),a=8*s/u<(o||0)-a-Math.max(e.F.minBufferTime||0,e.s.rebufferingGoal)||t.Pa.h.g>s):a=!1,a&&t.Pa.abort(),A(r)}))}function tu(e,t){t.wc||t.Rb||(t.kb?(t.Rb=!0,t.$c=0):null==Vo(e.G.V,t.type)?null==t.cb&&gu(e,t,0):(mu(t),pu(e,t,!1,0)["catch"]((function(t){e.G&&e.G.onError(t)}))))}function nu(e){var t,n,i,r,a,o,s,u,l,c;return F((function(h){if(1==h.g){if(t=Ve,!e.h)throw new Ie(2,5,5006);return n=new Map,i=new Set,e.h.audio&&(n.set(t.zb,e.h.audio),i.add(e.h.audio)),e.h.video&&(n.set(t.fb,e.h.video),i.add(e.h.video)),e.i&&(n.set(t.oa,e.i),i.add(e.i)),r=e.G.V,a=e.s.forceTransmuxTS,S(h,r.init(n,a),2)}rr(e.M);var f=e.F.presentationTimeline.getDuration();for(1/0>f?e.G.V.ab(f):e.G.V.ab(Math.pow(2,32)),o=d(n.keys()),s=o.next();!s.done;s=o.next())u=s.value,l=n.get(u),e.g.has(u)||(c=iu(l),e.g.set(u,c),gu(e,c,0));A(h)}))}function iu(e){return{stream:e,type:e.type,sa:null,Ua:null,jd:null,Wd:null,Vd:null,Ud:null,Pb:null,endOfStream:!1,kb:!1,cb:null,Rb:!1,$c:0,xd:!1,wc:!1,je:!1,Ec:!1,Pa:null}}function ru(e,t){if(hu(t))return qo(e.G.V,t.stream.originalId||""),null;t.type==Ge&&Yo(e.G.V);var n=e.G.gd(),i=t.Ua?t.Ua.endTime:n,r=zo(e.G.V,t.type,n),a=Math.max(e.F.minBufferTime||0,e.s.rebufferingGoal,e.s.bufferingGoal)*e.l;if(i>=e.F.presentationTimeline.getDuration())return t.endOfStream=!0,"video"==t.type&&(n=e.g.get(Ge))&&hu(n)&&(n.endOfStream=!0),null;if(t.endOfStream=!1,r>=a)return e.s.updateIntervalSeconds/2;if(r=Ko(e.G.V,t.type),r=au(e,t,n,r),!r)return e.s.updateIntervalSeconds;a=1/0;var o=Array.from(e.g.values());o=d(o);for(var s=o.next();!s.done;s=o.next())s=s.value,hu(s)||s.sa&&!s.sa.current()||(a=Math.min(a,s.Ua?s.Ua.endTime:n));return i>=a+e.F.presentationTimeline.g?e.s.updateIntervalSeconds:(ou(e,t,n,r)["catch"]((function(){})),null)}function au(e,t,n,i){if(t.sa)return t.sa.current();if(t.Ua||i)return t.sa=t.stream.segmentIndex.$b(t.Ua?t.Ua.endTime:i),t.sa&&t.sa.next().value;e=e.s.inaccurateManifestTolerance,i=Math.max(n-e,0);var r=null;return e&&(t.sa=t.stream.segmentIndex.$b(i),r=t.sa&&t.sa.next().value),r||(t.sa=t.stream.segmentIndex.$b(n),r=t.sa&&t.sa.next().value),r}function ou(t,n,i,r){var a,o,s,u,l,c,d,h,f,p,g,m;return F((function(v){switch(v.g){case 1:return a=Ve,o=n.stream,s=n.sa,n.kb=!0,x(v,2),S(v,lu(t,n,r),4);case 4:return rr(t.M),t.j?v["return"]():(u="video/mp4"==o.mimeType||"audio/mp4"==o.mimeType,l=e.ReadableStream,t.s.lowLatencyMode&&l&&u?(h=new Uint8Array(0),f=function(e){var a,s,u;return F((function(l){return rr(t.M),t.j?l["return"]():(h=su(h,e),a=!1,s=0,(new ua).box("mdat",(function(e){s=e.size+e.start,a=!0})).parse(h,!1,!0),a?(u=h.subarray(0,s),h=h.subarray(s),S(l,cu(t,n,i,o,r,u),0)):l.C(0))}))},S(v,fu(t,n,r,f),6)):(c=fu(t,n,r),S(v,c,7)));case 7:return d=v.h,rr(t.M),t.j?v["return"]():n.Rb?(n.kb=!1,gu(t,n,0),v["return"]()):S(v,cu(t,n,i,o,r,d),6);case 6:if(rr(t.M),t.j)return v["return"]();n.Ua=r,s.next(),n.kb=!1,n.je=!1,p=t.G.V.dd(),g=p[n.type],Z(JSON.stringify(g)),n.Rb||t.G.ge(),gu(t,n,0),I(v,0);break;case 2:if(m=k(v),rr(t.M,m),t.j)return v["return"]();if(n.kb=!1,7001==m.code)n.kb=!1,n.cb=null,gu(t,n,0),v.C(0);else if(n.type==a.oa&&t.s.ignoreTextStreamFailures)t.g["delete"](a.oa),v.C(0);else if(3017==m.code)uu(t,n,m),v.C(0);else{if(1001!=m.code||!m.data||404!=m.data[1])return n.Ec=!0,m.severity=2,S(v,yu(t,m),0);n.kb=!1,n.cb=null,gu(t,n,1),v.C(0)}}}))}function su(e,t){var n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}function uu(e,t,n){if(!Array.from(e.g.values()).some((function(e){return e!=t&&e.je}))){var i=Math.round(100*e.l);if(20<i)e.l-=.2;else{if(!(4<i))return t.Ec=!0,e.j=!0,void e.G.onError(n);e.l-=.04}t.je=!0}gu(e,t,4)}function lu(e,t,n){var i,r,a,o,s,u,l;return F((function(c){return i=[],r=Math.max(0,n.appendWindowStart-.1),a=n.appendWindowEnd+.01,o=n.timestampOffset,o==t.Wd&&r==t.Vd&&a==t.Ud||(s=function(){var n;return F((function(i){if(1==i.g)return x(i,2),t.Vd=r,t.Ud=a,t.Wd=o,S(i,$o(e.G.V,t.type,o,r,a),4);if(2!=i.g)return I(i,0);throw n=k(i),t.Vd=null,t.Ud=null,t.Wd=null,n}))},i.push(s())),!as(n.h,t.jd)&&(t.jd=n.h)&&(u=fu(e,t,n.h),l=function(){var n,i,r;return F((function(a){switch(a.g){case 1:return x(a,2),S(a,u,4);case 4:return n=a.h,rr(e.M),i=t.stream.closedCaptions&&0<t.stream.closedCaptions.size,S(a,Wo(e.G.V,t.type,n,null,null,i),5);case 5:I(a,0);break;case 2:throw r=k(a),t.jd=null,r}}))},i.push(l())),S(c,Promise.all(i),0)}))}function cu(e,t,n,i,r,a){var o;return F((function(s){return 1==s.g?(o=i.closedCaptions&&0<i.closedCaptions.size,null!=i.emsgSchemeIdUris&&0<i.emsgSchemeIdUris.length&&(new ua).X("emsg",(function(t){var n=i.emsgSchemeIdUris;if(0===t.version)var a=t.reader.Lc(),o=t.reader.Lc(),s=t.reader.P(),u=t.reader.P(),l=t.reader.P(),c=t.reader.P(),d=r.startTime+u/s;else s=t.reader.P(),d=t.reader.jc()/s+r.timestampOffset,u=d-r.startTime,l=t.reader.P(),c=t.reader.P(),a=t.reader.Lc(),o=t.reader.Lc();t=t.reader.xb(t.reader.U.byteLength-t.reader.ka()),n.includes(a)&&("urn:mpeg:dash:event:2012"==a?e.G.Hg():(n=new W(bc,{detail:{startTime:d,endTime:d+l/s,schemeIdUri:a,value:o,timescale:s,presentationTimeDelta:u,eventDuration:l,id:c,messageData:t}}),e.G.onEvent(n)))})).parse(a),S(s,du(e,t,n),2)):3!=s.g?(rr(e.M),S(s,Wo(e.G.V,t.type,a,r.startTime,r.endTime,o),3)):(rr(e.M),void A(s))}))}function du(e,t,n){var i,r,a,o;return F((function(s){if(1==s.g)return i=Math.max(e.s.bufferBehind,e.F.presentationTimeline.g),r=Vo(e.G.V,t.type),null==r?s["return"]():(a=n-r,o=a-i,.01>=o?s["return"]():S(s,e.G.V.remove(t.type,r,r+o),2));rr(e.M),A(s)}))}function hu(e){return e&&e.type==Ge&&("application/cea-608"==e.stream.mimeType||"application/cea-708"==e.stream.mimeType)}function fu(e,t,n,i){var r,a,o,s;return F((function(u){return 1==u.g?(r=er,a=Hs(n.Fa(),n.Ba,n.va,e.s.retryParameters,i),o=e.G.Mb.request(r,a),t.Pa=o,S(u,o.promise,2)):(s=u.h,t.Pa=null,u["return"](s.data))}))}function pu(e,t,n,i){var r,a;return F((function(o){return 1==o.g?(t.Rb=!1,t.xd=!1,t.$c=0,t.wc=!0,t.Ua=null,t.jd=null,t.sa=null,i?(r=e.G.gd(),a=e.G.V.getDuration(),S(o,e.G.V.remove(t.type,r+i,a),3)):S(o,Xo(e.G.V,t.type),4)):3!=o.g?(rr(e.M),n?S(o,e.G.V.flush(t.type),3):o.C(3)):(rr(e.M),t.wc=!1,t.endOfStream=!1,gu(e,t,0),void A(o))}))}function gu(e,t,n){var i=t.type;(i!=Ge||e.g.has(i))&&(t.cb=new wn((function(){var n;return F((function(i){return 1==i.g?(x(i,2),S(i,e.Jc(t),4)):2!=i.g?I(i,0):(n=k(i),e.G&&e.G.onError(n),void A(i))}))})).S(n))}function mu(e){null!=e.cb&&(e.cb.stop(),e.cb=null)}function vu(e){return F((function(t){return e.Pa?S(t,e.Pa.abort(),0):t.C(0)}))}function yu(e,t){return F((function(n){if(1==n.g)return S(n,Di(e.A),2);rr(e.M),e.G.onError(t),t.handled||e.s.failureCallback(t),A(n)}))}function bu(e,t){var n=fc(),i=this;this.j=t,this.i=e,this.l=n,this.A=null,this.o=[],this.h=this.g=null,this.B=Promise.resolve().then((function(){return wu(i)})),this.M=new ir((function(){return Tu(i)}))}function Tu(e){var t,n,i;return F((function(r){if(1==r.g)return e.h&&e.h.abort(),Au(e),S(r,e.B,2);for(e.g&&e.g.Za.Nb(),t=d(e.o),n=t.next();!n.done;n=t.next())i=n.value,i.Za.Nb();e.g=null,e.o=[],e.j=null,A(r)}))}function Eu(e,t){var n={fc:function(){},ld:function(){},Nb:function(){},onError:function(){},nd:function(){},xi:function(){}};return e.o.push({create:t,Za:n}),e.h&&e.h.abort(),Au(e),n}function wu(e){return F((function(t){if(e.M.g)t=t.C(0);else{if(0==e.o.length||e.g&&!e.g.Hb)var n=!1;else{e.g&&(e.g.Za.Nb(),e.g=null),n=e.o.shift();var i=n.create(e.l);i?(n.Za.fc(),e.g={node:i.node,payload:i.payload,Hb:i.Hb,Za:n.Za}):n.Za.nd(),n=!0}n?n=Promise.resolve():e.g?n=Su(e):(e.j.Gg(e.i),e.A=new Vt,n=e.A),t=S(t,n,1)}return t}))}function Su(e){var t,n;return F((function(i){switch(i.g){case 1:return e.i=e.j.ig(e.i,e.l,e.g.node,e.g.payload),x(i,2),e.h=e.j.Nf(e.i,e.l,e.g.payload),S(i,e.h.promise,4);case 4:e.h=null,e.i==e.g.node&&(e.g.Za.ld(),e.g=null),I(i,0);break;case 2:return t=k(i),7001==t.code?e.g.Za.Nb():e.g.Za.onError(t),e.g=null,e.h=null,n=e,S(i,e.j.handleError(e.l,t),5);case 5:n.i=i.h,A(i)}}))}function Au(e){e.A&&(e.A.resolve(),e.A=null)}function xu(e){this.g=null;for(var t=d(Array.from(e.textTracks)),n=t.next();!n.done;n=t.next())n=n.value,n.mode="disabled","Shaka Player TextTrack"==n.label&&(this.g=n);this.g||(this.g=e.addTextTrack("subtitles","Shaka Player TextTrack")),this.g.mode="hidden"}function _u(e){if(e.startTime>=e.endTime)return null;var t=new VTTCue(e.startTime,e.endTime,e.payload);t.lineAlign=e.lineAlign,t.positionAlign=e.positionAlign,e.size&&(t.size=e.size);try{t.align=e.textAlign}catch(n){}return"center"==e.textAlign&&"center"!=t.align&&(t.align="middle"),"vertical-lr"==e.writingMode?t.vertical="lr":"vertical-rl"==e.writingMode&&(t.vertical="rl"),1==e.lineInterpretation&&(t.snapToLines=!1),null!=e.line&&(t.line=e.line),null!=e.position&&(t.position=e.position),t}function Iu(e,t){var n=e.mode;e.mode="showing"==n?"showing":"hidden";for(var i=d(Array.from(e.cues)),r=i.next();!r.done;r=i.next())(r=r.value)&&t(r)&&e.removeCue(r);e.mode=n}function ku(){}function Cu(e){return document.createElement(e)}function Lu(){return document.createElement("button")}function Pu(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function Nu(t,n){var i=this;this.o=!1,this.l=[],this.g=t,this.B=n,this.i=Cu("div"),this.i.classList.add("shaka-text-container"),this.i.style.textAlign="center",this.i.style.display="flex",this.i.style.flexDirection="column",this.i.style.alignItems="center",this.i.style.justifyContent="flex-end",this.B.appendChild(this.i),this.D=new Sn((function(){Ru(i)})).na(.25),this.j=new Map,this.h=new ar,this.h.m(document,"fullscreenchange",(function(){Ru(i,!0)})),this.A=null,"ResizeObserver"in e&&(this.A=new ResizeObserver((function(){Ru(i,!0)})),this.A.observe(this.i))}function Du(e,t,n,i,r){var a=!1,o=[],s=[];t=d(t);for(var u=t.next();!u.done;u=t.next()){u=u.value;var l=e.j.get(u),c=u.startTime<=i&&u.endTime>i,h=l?l.zf:null;l&&(o.push(l.Ne),c||(a=!0,e.j["delete"](u),l=null)),c&&(s.push(u),l||(Mu(e,u,r),l=e.j.get(u),h=l.zf,a=!0)),0<u.nestedCues.length&&h&&Du(e,u.nestedCues,h,i,!0)}if(a){for(i=d(o),r=i.next();!r.done;r=i.next())n.removeChild(r.value);for(s.sort((function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime-t.endTime})),s=d(s),u=s.next();!u.done;u=s.next())i=e.j.get(u.value),n.appendChild(i.Ne)}}function Ru(e,t){if(e.i){var n=e.g.currentTime;if((!e.o||void 0!==t&&t)&&0<e.j.size&&(Pu(e.i),e.j.clear()),e.o){for(var i=new Map,r=d(e.j.keys()),a=r.next();!a.done;a=r.next())a=a.value,i.set(a,e.j.get(a));Du(e,e.l,e.i,n,!1)}}}function Mu(e,t,n){var i=n?"span":"div";(t.lineBreak||t.spacer)&&(t.spacer&&Ce("shaka.extern.Cue","Please use lineBreak instead of spacer."),i="br");var r=Cu(i);"br"!=i&&Uu(e,r,t,n),i=r,!n&&t.nestedCues.length&&(i=Cu("span"),i.classList.add("shaka-text-wrapper"),r.appendChild(i)),e.j.set(t,{Ne:r,zf:i})}function Uu(e,t,n,i){var r=t.style,a=0==n.nestedCues.length;r.whiteSpace="pre-wrap";var o=n.payload.replace(/\s+$/g,(function(e){return" ".repeat(e.length)}));i?t.textContent=o:o.length&&(r=Cu("span"),r.textContent=o,t.appendChild(r),r=r.style),r.backgroundColor=n.backgroundColor,r.border=n.border,r.color=n.color,r.direction=n.direction,r.opacity=n.opacity,r.paddingLeft=Ou(n.linePadding,n,e.B),r.paddingRight=Ou(n.linePadding,n,e.B),n.backgroundImage&&(r.backgroundImage="url('"+n.backgroundImage+"')",r.backgroundRepeat="no-repeat",r.backgroundSize="contain",r.backgroundPosition="center",""==n.backgroundColor&&(r.backgroundColor="transparent")),i?r.display="inline":(r.display="flex",r.flexDirection="column",r.alignItems="center",r.justifyContent="before"==n.displayAlign?"flex-start":"center"==n.displayAlign?"center":"flex-end"),a||(r.margin="0"),r.fontFamily=n.fontFamily,r.fontWeight=n.fontWeight.toString(),r.fontStyle=n.fontStyle,r.letterSpacing=n.letterSpacing,r.fontSize=Ou(n.fontSize,n,e.B),n.line?1==n.lineInterpretation&&(r.position="absolute",n.writingMode==Tt?n.lineAlign==wt?r.top=n.line+"%":"end"==n.lineAlign&&(r.bottom=n.line+"%"):"vertical-lr"==n.writingMode?n.lineAlign==wt?r.left=n.line+"%":"end"==n.lineAlign&&(r.right=n.line+"%"):n.lineAlign==wt?r.right=n.line+"%":"end"==n.lineAlign&&(r.left=n.line+"%")):n.region&&n.region.id&&(!i&&!a||n.backgroundImage)&&(e=n.region.widthUnits==Lt?"%":"px",t=n.region.viewportAnchorUnits==Lt?"%":"px",r.height=n.region.height+(n.region.heightUnits==Lt?"%":"px"),r.width=n.region.width+e,r.position="absolute",r.top=n.region.viewportAnchorY+t,r.left=n.region.viewportAnchorX+t),r.lineHeight=n.lineHeight,n.position&&(n.writingMode==Tt?r.paddingLeft=n.position:r.paddingTop=n.position),"line-left"==n.positionAlign?r.cssFloat="left":"line-right"==n.positionAlign&&(r.cssFloat="right"),r.textAlign=n.textAlign,r.textDecoration=n.textDecoration.join(" "),r.writingMode=n.writingMode,"writingMode"in document.documentElement.style&&r.writingMode==n.writingMode||(r.webkitWritingMode=n.writingMode),n.size&&(n.writingMode==Tt?r.width=n.size+"%":r.height=n.size+"%")}function Ou(e,t,n){var i=(i=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(i[1]),ah:i[2]}:null;if(!i)return e;var r=i.value;switch(i.ah){case"%":return r/100*n.clientHeight/t.cellResolution.rows+"px";case"c":return n.clientHeight*r/t.cellResolution.rows+"px";default:return e}}function Fu(e,t){function n(e){for(var n=e,i=d(t),r=i.next();!r.done;r=i.next())r=r.value,r.end&&r.start<e&&(n+=r.end-r.start);return e=Math.floor(n/3600),i=Math.floor(n/60%60),r=Math.floor(n%60),n=Math.floor(1e3*n%1e3),(10>e?"0":"")+e+":"+(10>i?"0":"")+i+":"+(10>r?"0":"")+r+"."+(100>n?10>n?"00":"0":"")+n}function i(e){var t=[],n=700<=e.fontWeight,r="italic"==e.fontStyle,a=e.textDecoration.includes("underline");return n&&t.push("b"),r&&t.push("i"),a&&t.push("u"),n=t.reduce((function(e,t){return e+"<"+t+">"}),""),t=t.reduceRight((function(e,t){return e+"</"+t+">"}),""),e.lineBreak||e.spacer?(e.spacer&&Ce("shaka.text.Cue","Please use lineBreak instead of spacer."),"\n"):e.nestedCues.length?e.nestedCues.map(i).join(""):n+e.payload+t}var r=e.map((function(e){if(e.nestedCues.length){var t=e.clone();return t.nestedCues=[],t.payload=i(e),t}return e})),a="WEBVTT\n\n";r=d(r);for(var o=r.next();!o.done;o=r.next())o=o.value,a+=n(o.startTime)+" --\x3e "+n(o.endTime)+function(e){var t=[];switch(e.textAlign){case"left":t.push("align:left");break;case"right":t.push("align:right");break;case gt:t.push("align:middle");break;case"start":t.push("align:start");break;case"end":t.push("align:end")}switch(e.writingMode){case"vertical-lr":t.push("vertical:lr");break;case"vertical-rl":t.push("vertical:rl")}return t.length?" "+t.join(" "):""}(o)+"\n",a+=o.payload+"\n\n";return a}function ju(){}function Bu(e,t,n,i,r){var a,o=r in i,s=!0;for(a in t){var u=r+"."+a,l=o?i[r]:n[a];o||a in n?void 0===t[a]?void 0===l||o?delete e[a]:e[a]=Vi(l):l.constructor==Object&&t[a]&&t[a].constructor==Object?(e[a]||(e[a]=Vi(l)),u=Bu(e[a],t[a],l,i,u),s=s&&u):typeof t[a]!=typeof l||null==t[a]||"function"!=typeof t[a]&&t[a].constructor!=l.constructor?(Y("Invalid config, wrong type for "+u),s=!1):("function"==typeof n[a]&&n[a].length!=t[a].length&&X("Unexpected number of arguments for "+u),e[a]=t[a]):(Y("Invalid config, unrecognized key "+u),s=!1)}return s}function Gu(e,t){for(var n={},i=n,r=0,a=0;;){if(r=e.indexOf(".",r),0>r)break;0!=r&&"\\"==e[r-1]||(a=e.substring(a,r).replace(/\\\./g,"."),i[a]={},i=i[a],a=r+1),r+=1}return i[e.substring(a).replace(/\\\./g,".")]=t,n}function Vu(){}function Ku(){var e=1/0;navigator.connection&&navigator.connection.saveData&&(e=360);var t={retryParameters:Ri(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,initDataTransform:Rr,logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[]},n={retryParameters:Ri(),availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,defaultPresentationDelay:0,dash:{clockSyncUri:"",ignoreDrmInfo:!1,disableXlinkProcessing:!1,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},manifestPreprocessor:function(e){return e}},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,useFullSegmentsForStartTime:!1}},i={retryParameters:Ri(),failureCallback:function(e){return[e]},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.1,smallGapLimit:.5,jumpLargeGaps:!1,durationBackoff:1,forceTransmuxTS:!1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsOnSafari:!0,inaccurateManifestTolerance:2,lowLatencyMode:!1,autoLowLatencyMode:!1,forceHTTPS:!1,preferNativeHls:!1,updateIntervalSeconds:1};(navigator.userAgent.match(/Edge\//)||_n()||In())&&(i.gapDetectionThreshold=.5),(Ln("Web0S")||_n()||In())&&(i.stallSkip=0);var r={trackSelectionCallback:function(e){return F((function(t){return t["return"](e)}))},downloadSizeCallback:function(e){var t;return F((function(n){return 1==n.g?navigator.storage&&navigator.storage.estimate?S(n,navigator.storage.estimate(),3):n["return"](!0):(t=n.h,n["return"](t.usage+e<.95*t.quota))}))},progressCallback:function(e,t){return[e,t]},usePersistentLicense:!0},a={drm:t,manifest:n,streaming:i,offline:r,abrFactory:function(){return new mi},abr:{enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:e,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0}},preferredAudioLanguage:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoCodecs:[],preferredAudioCodecs:[],preferForcedSubs:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayFactory:function(){return null}};return r.trackSelectionCallback=function(e){return F((function(t){return t["return"](Hu(e,a.preferredAudioLanguage))}))},a}function zu(e,t,n){var i={".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:""}};return Bu(e,t,n||Ku(),i,"")}function Hu(e,t){var n=e.filter((function(e){return"variant"==e.type})),i=[],r=Je(t,n.map((function(e){return e.language})));r&&(i=n.filter((function(e){return qe(e.language)==r}))),0==i.length&&(i=n.filter((function(e){return e.primary}))),0==i.length&&(n.map((function(e){return e.language})),i=n);var a=i.filter((function(e){return e.height&&480>=e.height}));if(a.length&&(a.sort((function(e,t){return t.height-e.height})),i=a.filter((function(e){return e.height==a[0].height}))),n=[],i.length){var o=Math.floor(i.length/2);i.sort((function(e,t){return e.bandwidth-t.bandwidth})),n.push(i[o])}for(i=d(e),o=i.next();!o.done;o=i.next())o=o.value,o.type!=Ge&&"image"!=o.type||n.push(o);return n}function Wu(){this.g=null,this.h=[]}function qu(e,t){if(null==e.g)e.g={timestamp:Date.now()/1e3,state:t,duration:0};else{var n=Date.now()/1e3;e.g.duration=n-e.g.timestamp,e.g.state!=t&&(e.h.push(e.g),e.g={timestamp:n,state:t,duration:0})}}function Yu(e,t){var n=0;e.g&&e.g.state==t&&(n+=e.g.duration);for(var i=d(e.h),r=i.next();!r.done;r=i.next())r=r.value,n+=r.state==t?r.duration:0;return n}function Xu(e){function t(e){return{timestamp:e.timestamp,state:e.state,duration:e.duration}}for(var n=[],i=d(e.h),r=i.next();!r.done;r=i.next())n.push(t(r.value));return e.g&&n.push(t(e.g)),n}function $u(){this.i=this.h=null,this.g=[]}function Ju(e,t,n){e.i!=t&&(e.i=t,e.g.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:n,bandwidth:null}))}function Qu(){this.A=this.B=this.K=this.H=this.o=this.j=this.I=this.l=this.i=this.L=this.O=this.R=this.D=this.W=NaN,this.g=new Wu,this.h=new $u}function Zu(t,n){oe.call(this);var i=this;this.l=Bc,this.eb=this.g=null,this.W=!1,this.h=new ar,this.Ab=this.B=this.Ia=this.F=this.tb=this.A=this.i=this.pb=this.K=this.sb=this.I=this.ua=this.H=this.L=this.o=this.T=null,this.Xd=1e9,this.s=Rl(this),this.Td={width:1/0,height:1/0},this.j=null,this.ba=new Ai(this.s.preferredAudioLanguage,this.s.preferredVariantRole,this.s.preferredAudioChannelCount),this.ea=this.s.preferredTextLanguage,this.Xa=this.s.preferredTextRole,this.Ja=this.s.preferForcedSubs,this.Bb=[],n&&n(this),this.T=bl(this),this.T.se(this.s.streaming.forceHTTPS),this.D=null,Wc&&(this.D=Ue(Wc)),this.h.m(e,"online",(function(){i.ke()})),this.Ma={name:"detach"},this.gb={name:"attach"},this.R={name:"unload"},this.$d={name:"manifest-parser"},this.Rd={name:"manifest"},this.ha={name:"media-source"},this.Xb={name:"drm-engine"},this.O={name:"load"},this.ee={name:"src-equals-drm-engine"},this.xa={name:"src-equals"};var r=new Map;r.set(this.gb,(function(e,t){return ji(il(i,e,t))})),r.set(this.Ma,(function(e){return e.J&&(i.h.Ra(e.J,"error"),e.J=null),i.D&&i.D.release(),i.g=null,e=Promise.resolve(),ji(e)})),r.set(this.R,(function(e){return ji(rl(i,e))})),r.set(this.ha,(function(e){return e=al(i,e),ji(e)})),r.set(this.$d,(function(e,t){var n=ol(i,e,t);return ji(n)})),r.set(this.Rd,(function(e){return sl(i,e)})),r.set(this.Xb,(function(e){return e=ul(i,e),ji(e)})),r.set(this.O,(function(e,t){return ji(ll(i,e,t))})),r.set(this.ee,(function(e,t){var n=cl(i,e,t);return ji(n)})),r.set(this.xa,(function(e,t){return dl(i,e,t)})),this.aa=new bu(this.Ma,{ig:function(e,t,n,r){var a=null;return e==i.Ma&&(a=n==i.Ma?i.Ma:i.gb),e==i.gb&&(a=n==i.Ma||t.J!=r.J?i.Ma:n==i.gb?i.gb:n==i.ha||n==i.O?i.ha:n==i.xa?i.ee:null),e==i.ha&&(a=n==i.O&&t.J==r.J?i.$d:i.R),e==i.$d&&(a=hc(i.O,i.Rd,i.R,n,t,r)),e==i.Rd&&(a=hc(i.O,i.Xb,i.R,n,t,r)),e==i.Xb&&(a=hc(i.O,i.O,i.R,n,t,r)),e==i.ee&&(a=n==i.xa&&t.J==r.J?i.xa:i.R),e!=i.O&&e!=i.xa||(a=i.R),e==i.R&&(a=r.J&&t.J==r.J?i.gb:i.Ma),a},Nf:function(e,t,n){return i.dispatchEvent(el(_c,{state:e.name})),r.get(e)(t,n)},handleError:function(e){return F((function(t){return 1==t.g?S(t,rl(i,e),2):t["return"](e.J?i.gb:i.Ma)}))},Gg:function(e){i.dispatchEvent(el(Ic,{state:e.name}))}}),t&&this.vc(t,!0)}function el(e,t){return new W(e,t)}function tl(){if(e.Promise||X("A Promise implementation or polyfill is required"),e.TextDecoder&&e.TextEncoder||X("A TextDecoder/TextEncoder implementation or polyfill is required"),!(e.Promise&&e.Uint8Array&&e.TextDecoder&&e.TextEncoder&&Array.prototype.forEach)||Ln("Trident/"))return!1;var t=Cn();return!(t&&12>t||!(e.MediaKeys&&e.navigator&&e.navigator.requestMediaKeySystemAccess&&e.MediaKeySystemAccess&&e.MediaKeySystemAccess.prototype.getConfiguration))&&(!!An()||xn("application/x-mpegurl"))}function nl(e,t){if(!An())return!0;var n=t.mimeType,i=t.uri||"";if(n||(n=na(i),n=qc[n]),n){if(""==(t.J||Pn()).canPlayType(n))return!1;if(!An()||!(n in ia)&&!(na(i)in ra)||e.s.streaming.preferNativeHls)return!0;if(kn())return e.s.streaming.useNativeHlsOnSafari}return!1}function il(e,t,n){return null==t.J&&(t.J=n.J,e.h.m(t.J,"error",(function(){var t=nc(e);t&&ec(e,t)}))),e.g=t.J,Promise.resolve()}function rl(e,t){var n,i,r,a,o,s,u,l,c;return F((function(h){switch(h.g){case 1:return e.l!=jc&&(e.l=Bc),n=e.Bb.map((function(e){return e()})),e.Bb=[],S(h,Promise.all(n),2);case 2:if(e.dispatchEvent(el(Uc)),t.mimeType=null,t.startTime=null,t.uri=null,t.J&&(e.h.Ra(t.J,"loadedmetadata"),e.h.Ra(t.J,"playing"),e.h.Ra(t.J,"pause"),e.h.Ra(t.J,"ended"),e.h.Ra(t.J,"ratechange")),e.ua&&(e.ua.release(),e.ua=null),e.sb&&(e.sb.stop(),e.sb=null),!e.A){h.C(3);break}return S(h,e.A.stop(),4);case 4:e.A=null,e.tb=null;case 3:if(!e.B){h.C(5);break}return S(h,e.B.stop(),5);case 5:if(!e.i){h.C(7);break}return S(h,e.i.destroy(),8);case 8:e.i=null;case 7:if(e.I&&(e.I.release(),e.I=null),e.H&&(e.H.release(),e.H=null),!e.L){h.C(9);break}return S(h,e.L.destroy(),10);case 10:e.L=null;case 9:if(e.D&&e.D.onAssetUnload(),!t.J||!t.J.src){h.C(11);break}return S(h,new Promise((function(e){return new Sn(e).S(.1)})),12);case 12:for(t.J.removeAttribute("src"),t.J.load();t.J.lastChild;)t.J.removeChild(t.J.firstChild);case 11:if(!e.o){h.C(13);break}return S(h,e.o.destroy(),14);case 14:e.o=null;case 13:if(e.Ia=null,e.K=null,e.F){for(i=d(e.F.variants),r=i.next();!r.done;r=i.next())for(a=r.value,o=d([a.audio,a.video]),s=o.next();!s.done;s=o.next())(u=s.value)&&u.segmentIndex&&u.segmentIndex.release();for(l=d(e.F.textStreams),s=l.next();!s.done;s=l.next())c=s.value,c.segmentIndex&&c.segmentIndex.release()}e.F=null,e.j=new Qu,e.Qd=null,Bl(e),A(h)}}))}function al(e,t){var n,i,r,a;return F((function(o){if(1==o.g)return n=new Lo,i=e.s.textDisplayFactory,r=Ue(i),e.Qd=i,a=Al(t.J,n,r,(function(t,n,i){t=d(t);for(var r=t.next();!r.done;r=t.next())if(r=r.value,r.data&&r.cueTime&&r.frames){for(var a=r.cueTime+n,o=i,s=d(r.frames),u=s.next();!u.done;u=s.next())gl(e,a,o,"ID3",u.value);e.D&&e.D.onHlsTimedMetadata(r,a)}})),S(o,a.H,2);e.L=a,A(o)}))}function ol(e,t,n){var i,r,a,o;return F((function(s){if(1==s.g)return t.mimeType=n.mimeType,t.uri=n.uri,i=t.uri,r=e.T,e.Ia=i,a=e,S(s,ea(i,r,e.s.manifest.retryParameters,t.mimeType),2);a.tb=s.h,e.A=Ue(e.tb),o=Vi(e.s.manifest),n.J&&"AUDIO"===n.J.nodeName&&(o.disableVideo=!0),e.A.configure(o),A(s)}))}function sl(e,t){var n=t.uri,i=e.T;e.pb=new Fs((function(){return e.Ka()})),js(e.pb,(function(t){tc(e,Nc,t),e.D&&e.D.onDashTimedMetadata(t)}));var r={networkingEngine:i,filter:function(t){return Ul(e,t)},makeTextStreamsForClosedCaptions:function(t){return Ml(e,t)},onTimelineRegionAdded:function(t){var n=e.pb;e:{for(var i=d(n.g),r=i.next();!r.done;r=i.next())if(r=r.value,r.schemeIdUri==t.schemeIdUri&&r.id==t.id&&r.startTime==t.startTime&&r.endTime==t.endTime){i=r;break e}i=null}null==i&&(n.g.add(t),n.h(t))},onEvent:function(t){return e.dispatchEvent(t)},onError:function(t){return ec(e,t)},isLowLatencyMode:function(){return e.s.streaming.lowLatencyMode},isAutoLowLatencyMode:function(){return e.s.streaming.autoLowLatencyMode},enableLowLatencyMode:function(){e.configure("streaming.lowLatencyMode",!0)}},a=Date.now()/1e3;return new Mi(function(){var t,i,o,s;return F((function(u){if(1==u.g)return t=e,S(u,e.A.start(n,r),2);if(t.F=u.h,i=el(Ac),e.dispatchEvent(i),0==e.F.variants.length)throw new Ie(2,4,4036);vl(e.F),o=Date.now()/1e3,s=o-a,e.j.I=s,A(u)}))}(),(function(){return e.A.stop()}))}function ul(e,t){var n,i;return F((function(r){return 1==r.g?(n=Date.now()/1e3,i=!0,e.o=yl(e,{Mb:e.T,onError:function(t){ec(e,t)},md:function(t){ic(e,t)},onExpirationUpdated:function(t,n){rc(e,t,n)},onEvent:function(t){e.dispatchEvent(t),t.type==yc&&i&&(i=!1,e.j.j=Date.now()/1e3-n)}}),e.o.configure(e.s.drm),S(r,br(e.o,e.F.variants,e.F.offlineSessionIds),2)):3!=r.g?S(r,e.o.vc(t.J),3):S(r,Ul(e,e.F),0)}))}function ll(e,t,n){var i,r,a,o,s,u,l,c,d,h,f;return F((function(p){switch(p.g){case 1:if(t.startTime=n.startTime,i=t.J,r=t.uri,e.Ia=r,e.I=new Rs({hd:function(){return t.J.playbackRate},ed:function(){return t.J.defaultPlaybackRate},ve:function(e){t.J.playbackRate=e},df:function(e){t.J.currentTime+=e}}),a=function(){return Vl(e)},o=function(){return Gl(e)},e.h.m(i,"playing",a),e.h.m(i,"pause",a),e.h.m(i,"ended",a),e.h.m(i,"ratechange",o),s=e.s.abrFactory,e.B&&e.Ab==s||(e.Ab=s,e.B=Ue(s),"function"!=typeof e.B.playbackRateChanged&&(Ce("AbrManager","Please use an AbrManager with playbackRateChanged function."),e.B.playbackRateChanged=function(){}),e.B.configure(e.s.abr)),e.ba=new Ai(e.s.preferredAudioLanguage,e.s.preferredVariantRole,e.s.preferredAudioChannelCount),e.ea=e.s.preferredTextLanguage,e.Xa=e.s.preferredTextRole,e.Ja=e.s.preferForcedSubs,ac(e.F.presentationTimeline,e.s.playRangeStart,e.s.playRangeEnd),e.B.init((function(t,n,i){e.i&&t!=e.i.h&&Hl(e,t,!0,void 0!==n&&n,void 0===i?0:i)})),e.H=Tl(e,t.startTime),e.ua=El(e),u=Math.max(e.F.minBufferTime,e.s.streaming.rebufferingGoal),wl(e,u),Rn(e.F,e.s.preferredVideoCodecs,e.s.preferredAudioCodecs,e.s.preferredAudioChannelCount,e.s.preferredDecodingAttributes),e.i=xl(e),e.i.configure(e.s.streaming),e.l=Gc,e.dispatchEvent(el(Cc)),l=null,e.Gb().find((function(e){return e.active}))){p.C(2);break}if(l=Kl(e)?e.B.chooseVariant():null,Hl(e,l,!0,!1,0),!e.s.streaming.startAtSegmentBoundary){p.C(3);break}return c=e.H.l(),S(p,jl(l,c),4);case 4:d=p.h,e.H.o(d);case 3:Yl(e,null,Qn(l));case 2:return h=e.jb().find((function(e){return e.active})),h||((f=ui(e.F.textStreams,e.ea,e.Xa,e.Ja)[0]||null)&&Ju(e.j.h,f,!0),l&&(f?(l.audio&&ql(e,l.audio,f)&&(e.W=!0),e.W&&e.L.o.setTextVisibility(!0),Ql(e)):e.W=!1),f&&(e.s.streaming.alwaysStreamText||e.Lb())&&Qs(e.i,f)),S(p,e.i.start(),5);case 5:e.s.abr.enabled&&(e.B.enable(),Zl(e)),Yn(e.i?e.i.h:null,e.F),sc(e.F),Xl(e),Kl(e),e.F.variants.some((function(e){return e.primary})),e.h.Oa(i,"loadedmetadata",(function(){e.j.l=Date.now()/1e3-n.Ae})),A(p)}}))}function cl(e,t,n){var i,r,a,o,s,u,l;return F((function(c){return 1==c.g?(i=Ve,r=Date.now()/1e3,a=!0,e.o=yl(e,{Mb:e.T,onError:function(t){ec(e,t)},md:function(t){ic(e,t)},onExpirationUpdated:function(t,n){rc(e,t,n)},onEvent:function(t){e.dispatchEvent(t),t.type==yc&&a&&(a=!1,e.j.j=Date.now()/1e3-r)}}),e.o.configure(e.s.drm),o=n.uri||"",s=na(o),u=qc[s],"application/x-mpegurl"==u&&kn()&&(u="application/vnd.apple.mpegurl"),u||(u="video/mp4"),l={id:0,language:"und",primary:!1,audio:null,video:{id:0,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:n.mimeType?n.mimeType.split(";")[0]:u,codecs:n.mimeType?fn(n.mimeType):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",label:null,type:i.fb,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null},bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},e.o.R=!0,S(c,br(e.o,[l],[]),2)):S(c,e.o.vc(t.J),0)}))}function dl(e,t,n){function i(){return Vl(e)}t.uri=n.uri,t.startTime=n.startTime,e.Ia=t.uri,e.H=new Ss(t.J),null!=t.startTime&&e.H.o(t.startTime),e.I=new Rs({hd:function(){return t.J.playbackRate},ed:function(){return t.J.defaultPlaybackRate},ve:function(e){t.J.playbackRate=e},df:function(e){t.J.currentTime+=e}}),wl(e,e.s.streaming.rebufferingGoal),e.h.m(t.J,"playing",i),e.h.m(t.J,"pause",i),e.h.m(t.J,"ended",i),e.h.m(t.J,"ratechange",(function(){return Gl(e)})),"none"!=e.g.preload&&e.h.Oa(e.g,"loadedmetadata",(function(){e.j.l=Date.now()/1e3-n.Ae})),e.g.audioTracks&&(e.h.m(e.g.audioTracks,"addtrack",(function(){return Xl(e)})),e.h.m(e.g.audioTracks,"removetrack",(function(){return Xl(e)})),e.h.m(e.g.audioTracks,"change",(function(){return Xl(e)}))),e.g.textTracks&&(e.h.m(e.g.textTracks,"addtrack",(function(t){if(t.track)switch(t=t.track,t.kind){case"metadata":pl(e,t);break;case"chapters":ml(e,t);break;default:Xl(e)}})),e.h.m(e.g.textTracks,"removetrack",(function(){return Xl(e)})),e.h.m(e.g.textTracks,"change",(function(){return Xl(e)}))),t.J.src=t.uri,(_n()||Ln("Web0S"))&&t.J.load(),e.l=Vc,e.dispatchEvent(el(Cc));var r=new Vt;ps(e.g,HTMLMediaElement.HAVE_METADATA,e.h,(function(){r.resolve()}));var a=!1;return e.Bb.push((function(){a=!0})),ps(e.g,HTMLMediaElement.HAVE_CURRENT_DATA,e.h,(function(){var t;return F((function(n){return 1==n.g?a?n["return"]():(hl(e),t=Il(e),t.find((function(e){return"disabled"!=e.mode}))?n.C(2):S(n,new Promise((function(t){e.h.Oa(e.g.textTracks,"change",t),new Sn(t).S(1)})),2)):a?n["return"]():(fl(e),void A(n))}))})),e.g.error?r.reject(nc(e)):"none"==e.g.preload&&(X('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),r.resolve()),e.h.Oa(e.g,"error",(function(){r.reject(nc(e))})),new Mi(r,(function(){return r.reject(new Ie(2,7,7001)),Promise.resolve()}))}function hl(e){var t=e.s.preferredAudioLanguage;if(""!=t){e.td(t);var n=e.s.preferredVariantRole;""!=n&&e.td(t,n)}}function fl(e){var t=e.s.preferredTextLanguage,n=e.s.preferForcedSubs;if(""!=t){e.me(t,"",n);var i=e.s.preferredTextRole;""!=i&&e.me(t,i,n)}}function pl(e,t){"metadata"==t.kind&&(t.mode="hidden",e.h.m(t,"cuechange",(function(){if(t.activeCues)for(var n=d(t.activeCues),i=n.next();!i.done;i=n.next())i=i.value,gl(e,i.startTime,i.endTime,i.type,i.value),e.D&&e.D.onCueMetadataChange(i.value)})),new Sn((function(){var t=kl(e);t=d(t);for(var n=t.next();!n.done;n=t.next())n.value.mode="hidden"})).Ca().S(.5))}function gl(e,t,n,i,r){e.dispatchEvent(el(xc,{startTime:t,endTime:n,wi:i,payload:r}))}function ml(e,t){t&&"chapters"==t.kind&&(t.mode="hidden",new Sn((function(){var t=Cl(e);t=d(t);for(var n=t.next();!n.done;n=t.next())n.value.mode="hidden"})).Ca().S(.5))}function vl(e){function t(e){return e.video&&e.audio||e.video&&e.video.codecs.includes(",")}e.variants.some(t)&&(e.variants=e.variants.filter(t))}function yl(e,t){return new mr(t,e.s.drm.updateExpirationTime)}function bl(e){return new Wi((function(t,n){e.B&&e.B.segmentDownloaded(t,n)}))}function Tl(e,t){return new As(e.g,e.F,e.s.streaming,t,(function(){if(e.ua&&Os(e.ua,!0),e.i)for(var t=e.i,n=t.G.gd(),i=t.s.smallGapLimit,r=d(t.g.keys()),a=r.next();!a.done;a=r.next()){a=a.value;var o=t.g.get(a);o.sa=null;var s=t.G.V;if(a==Ge?(s=s.i,s=null!=s.g&&null!=s.h&&(n>=s.g&&n<s.h)):(s=Ho(s,a),s=Do(s,n,i)),!s&&(null!=Ko(t.G.V,a)&&tu(t,o),o.Pa&&(o.Pa.abort(),o.Pa=null),a===Ge))for(a=t.G.V.D.g,a.l=0,a.h=[],a.g=[],o=a.i,o.i=[],o.h=[],o.g=0,yo(a),a=d(a.j.values()),o=a.next();!o.done;o=a.next())fo(o.value)}e.K&&Sl(e)}),(function(t){return e.dispatchEvent(t)}))}function El(e){var t=new Bs(e.pb);Gs(t,(function(t){tc(e,Dc,t)}),(function(t){tc(e,Rc,t)}),(function(t,n){n||(tc(e,Dc,t),tc(e,Rc,t))}));var n=new Us(e.g);return n.g.add(t),n}function wl(e,t){e.K=new ki,e.K.g=Li,Ci(e.K,t,Math.min(.5,t/2)),Bl(e),e.sb=new Sn((function(){Sl(e)})).na(.25)}function Sl(e){switch(e.l){case Vc:if(e.g.ended)var t=!0;else{var n=No(e.g.buffered);t=null!=n&&n>=e.g.duration-1}break;case Gc:e:if(e.g.ended||Go(e.L))t=!0;else{if(e.F.presentationTimeline.Y()){n=e.F.presentationTimeline.Fb();var i=No(e.g.buffered);if(null!=i&&i>=n){t=!0;break e}}t=!1}break;default:t=!1}i=Ro(e.g.buffered,e.g.currentTime),n=e.K;var r=t,a=n.h.get(n.g);t=n.g,i=r||i>=a?Pi:Li,n.g=i,t!=i&&Bl(e)}function Al(e,t,n,i){return new Oo(e,t,n,i)}function xl(e){return new Ws(e.F,{gd:function(){return e.H.l()},getBandwidthEstimate:function(){return e.B.getBandwidthEstimate()},V:e.L,Mb:e.T,onError:function(t){return ec(e,t)},onEvent:function(t){return e.dispatchEvent(t)},Hg:function(){e.A&&e.A.update&&e.A.update()},ge:function(){e.H&&e.H.H(),Sl(e)}})}function _l(e){if(e.A){var t=Vi(e.s.manifest);e.g&&"AUDIO"===e.g.nodeName&&(t.disableVideo=!0),e.A.configure(t)}if(e.o&&e.o.configure(e.s.drm),e.i){e.i.configure(e.s.streaming);try{Fl(e,e.F)}catch(a){ec(e,a)}e.B&&Kl(e),t=e.i.h,!t||t.allowedByApplication&&t.allowedByKeySystem||zl(e)}if(e.T&&e.T.se(e.s.streaming.forceHTTPS),e.L&&(t=e.s.textDisplayFactory,e.Qd!=t)){var n=Ue(t),i=e.L,r=i.o;i.o=n,r&&(n.setTextVisibility(r.isTextVisible()),r.destroy()),i.i&&(i.i.i=n),e.Qd=t,e.i&&(t=e.i,(n=t.g.get(Ge))&&Zs(t,n.stream,!0,0,!0))}e.B&&(e.B.configure(e.s.abr),e.s.abr.enabled?e.B.enable():e.B.disable(),Zl(e)),e.K&&(t=e.s.streaming.rebufferingGoal,e.F&&(t=Math.max(t,e.F.minBufferTime)),Ci(e.K,t,Math.min(.5,t/2))),e.F&&ac(e.F.presentationTimeline,e.s.playRangeStart,e.s.playRangeEnd)}function Il(e){return Array.from(e.g.textTracks).filter((function(e){return"metadata"!=e.kind&&"chapters"!=e.kind&&"Shaka Player TextTrack"!=e.label}))}function kl(e){return Array.from(e.g.textTracks).filter((function(e){return"metadata"==e.kind}))}function Cl(e){return Array.from(e.g.textTracks).filter((function(e){return"chapters"==e.kind}))}function Ll(e,t){var n,i;return F((function(r){switch(r.g){case 1:return n=na(t),(i=Yc[n])?r["return"](i):(x(r,2),S(r,ta(t,e.T,e.s.streaming.retryParameters),4));case 4:i=r.h,I(r,3);break;case 2:k(r);case 3:if(i)return r["return"](i);throw new Ie(1,2,2011,n)}}))}function Pl(e,t,n,i,r,a,o){var s,u,l,c;return F((function(d){if(1==d.g)return"text/vtt"!=r||o.length?S(d,Nl(t,e.T,e.s.streaming.retryParameters),3):d.C(2);2!=d.g&&(s=d.h,u=Dl(e,s,r,o),l=new Blob([u],{type:"text/vtt"}),t=is(l),r="text/vtt"),c=document.createElement("track"),c.src=t,c.label=a,c.kind=i,c.srclang=n,e.g.getAttribute("crossorigin")||e.g.setAttribute("crossorigin","anonymous"),e.g.appendChild(c),A(d)}))}function Nl(e,t,n){var i,r,a;return F((function(o){return 1==o.g?(i=er,r=Yi([e],n),r.method="GET",S(o,t.request(i,r).promise,2)):(a=o.h,o["return"](a.data))}))}function Dl(e,t,n,i){var r=En[n];if(r)return n=r(),e={periodStart:0,segmentStart:0,segmentEnd:e.g.duration},t=Ut(t),t=n.parseMedia(t,e),Fu(t,i);throw new Ie(2,2,2014,n)}function Rl(e){var t=Ku();return t.streaming.failureCallback=function(t){var n=[1001,1002,1003];e.Y()&&n.includes(t.code)&&(t.severity=1,e.ke())},t.textDisplayFactory=function(){return e.eb?new Nu(e.g,e.eb):new xu(e.g)},t}function Ml(e,t){for(var n=new Set,i=d(t.textStreams),r=i.next();!r.done;r=i.next())r=r.value,"application/cea-608"!=r.mimeType&&"application/cea-708"!=r.mimeType||n.add(r.originalId);for(i=d(t.variants),r=i.next();!r.done;r=i.next())if((r=r.value.video)&&r.closedCaptions)for(var a=d(r.closedCaptions.keys()),o=a.next();!o.done;o=a.next())if(o=o.value,!n.has(o)){var s=o.startsWith("CC")?"application/cea-608":"application/cea-708",u=new Ds;s={id:e.Xd++,originalId:o,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:u,mimeType:s,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:r.closedCaptions.get(o),label:null,type:Ge,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:r.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null},t.textStreams.push(s),n.add(o)}}function Ul(e,t){return F((function(n){if(1==n.g)return S(n,Ol(e,t),2);Fl(e,t),A(n)}))}function Ol(e,t){var n;return F((function(i){if(1==i.g)return n=e.i?e.i.h:null,S(i,zn(n,t),2);sc(t),A(i)}))}function Fl(e,t){if(e.l!=jc){for(var n=e.s.restrictions,i=e.Td,r=!1,a=d(t.variants),o=a.next();!o.done;o=a.next()){o=o.value;var s=o.allowedByApplication;o.allowedByApplication=Kn(o,n,i),s!=o.allowedByApplication&&(r=!0)}if(r&&e.i&&Xl(e),(n=e.o?e.o.i:null)&&e.o.o)for(i=d(t.variants),r=i.next();!r.done;r=i.next())for(r=r.value,r=d((r.video?r.video.drmInfos:[]).concat(r.audio?r.audio.drmInfos:[])),a=r.next();!a.done;a=r.next())if(a=a.value,a.keySystem==n.keySystem)for(a=d(a.initData||[]),o=a.next();!o.done;o=a.next())o=o.value,xr(e.o,o.initDataType,o.initData);oc(e,t)}}function jl(e,t){var n,i,r,a,o;return F((function(s){return 1==s.g?(n=e.audio,i=e.video,r=function(e,t){var n,i;return F((function(r){return 1==r.g?e?S(r,e.createSegmentIndex(),2):r["return"](null):(n=e.segmentIndex[Symbol.iterator]().seek(t),n?(i=n.startTime,r["return"](i)):r["return"](null))}))},S(s,r(n,t),2)):3!=s.g?(a=s.h,S(s,r(i,t),3)):(o=s.h,null!=o&&null!=a?s["return"](Math.max(o,a)):null!=o?s["return"](o):null!=a?s["return"](a):s["return"](t))}))}function Bl(e){var t=e.Hc();if(e.j&&e.K&&e.H){var n=e.I;n.j=t,Ms(n),Vl(e)}e.dispatchEvent(el(vc,{buffering:t}))}function Gl(e){var t=e.g.playbackRate;0!=t&&(e.I&&e.I.set(t),t=el(kc),e.dispatchEvent(t))}function Vl(e){if(e.j&&e.K){var t=e.j.g;e.K.g==Li?qu(t,"buffering"):e.g.paused?qu(t,"paused"):e.g.ended?qu(t,"ended"):qu(t,"playing")}}function Kl(e){try{oc(e,e.F)}catch(n){return ec(e,n),!1}var t=e.F.variants.filter((function(e){return ai(e)}));return t=e.ba.create(t),e.B.setVariants(Array.from(t.values())),!0}function zl(e){var t;(t=Kl(e)?e.B.chooseVariant():null)&&Hl(e,t,!0,!0,0)}function Hl(e,t,n,i,r){var a=e.i.h;if(t==a)i&&Js(e.i,t,i,r,!0);else{var o=e.j.h;o.h!=t&&(o.h=t,o.g.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:n,bandwidth:t.bandwidth})),Js(e.i,t,i,r),i=null,a&&(i=Qn(a)),t=Qn(t),n?Yl(e,i,t):$l(e,i,t)}}function Wl(e,t){var n=Array.from(e.g.audioTracks).find((function(e){return e.enabled}));t.enabled=!0,t.id!==n.id&&(n.enabled=!1),n=ii(n);var i=ii(t);$l(e,n,i)}function ql(e,t,n){return e=qe(e.s.preferredTextLanguage),t=qe(t.language),n=qe(n.language),ze(n,e)&&!ze(t,n)}function Yl(e,t,n){t=el(mc,{Fg:t,Eg:n}),uc(e,t)}function Xl(e){var t=el(Mc);uc(e,t)}function $l(e,t,n){t=el(Oc,{Fg:t,Eg:n}),uc(e,t)}function Jl(e){var t=el(Lc);uc(e,t)}function Ql(e){var t=el(Pc);uc(e,t)}function Zl(e){var t=el(gc,{Dg:e.s.abr.enabled});uc(e,t)}function ec(e,t){if(e.l!=jc){var n=el(Tc,{detail:t});e.dispatchEvent(n),n.defaultPrevented&&(t.handled=!0)}}function tc(e,t,n){e.dispatchEvent(el(t,{detail:{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,eventElement:n.eventElement}}))}function nc(e){if(!e.g.error)return null;var t=e.g.error.code;if(1==t)return null;var n=e.g.error.msExtendedCode;return n&&(0>n&&(n+=Math.pow(2,32)),n=n.toString(16)),new Ie(2,3,3016,t,n,e.g.error.message)}function ic(e,t){if(e.i){var n=Object.keys(t),i=1==n.length&&"00"==n[0],r=!1;if(n.length){n=d(e.F.variants);for(var a=n.next();!a.done;a=n.next()){a=a.value;var o=[];a.audio&&o.push(a.audio),a.video&&o.push(a.video),o=d(o);for(var s=o.next();!s.done;s=o.next()){var u=s.value;if(s=a.allowedByKeySystem,u.keyIds.size){a.allowedByKeySystem=!0,u=d(u.keyIds);for(var l=u.next();!l.done;l=u.next())l=l.value,l=t[i?"00":l],a.allowedByKeySystem=a.allowedByKeySystem&&!!l&&!zc.includes(l)}s!=a.allowedByKeySystem&&(r=!0)}}}r&&Kl(e),(i=e.i.h)&&!i.allowedByKeySystem&&zl(e),r&&Xl(e)}}function rc(e,t,n){e.A&&e.A.onExpirationUpdated&&e.A.onExpirationUpdated(t,n),t=el(Ec),e.dispatchEvent(t)}function ac(e,t,n){0<t&&(e.Y()||e.tf(t)),t=e.getDuration(),n<t&&(e.Y()||e.ab(n))}function oc(e,t){var n=e.o?e.o.fd():{},i=Object.keys(n);i=i.length&&"00"==i[0];for(var r=!1,a=!1,o=new Set,s=new Set,u=d(t.variants),l=u.next();!l.done;l=u.next()){l=l.value;var c=[];l.audio&&c.push(l.audio),l.video&&c.push(l.video),c=d(c);for(var h=c.next();!h.done;h=c.next())if(h=h.value,h.keyIds.size){h=d(h.keyIds);for(var f=h.next();!f.done;f=h.next()){f=f.value;var p=n[i?"00":f];p?zc.includes(p)&&s.add(p):o.add(f)}}l.allowedByApplication?l.allowedByKeySystem&&(r=!0):a=!0}if(!r)throw n={hasAppRestrictions:a,missingKeys:Array.from(o),restrictedKeyStatuses:Array.from(s)},new Ie(2,4,4012,n)}function sc(e){if(!e.variants.some(ai))throw new Ie(2,4,4032)}function uc(e,t){F((function(n){if(1==n.g)return S(n,Promise.resolve(),2);e.l!=jc&&e.dispatchEvent(t),A(n)}))}function lc(e){var t=new Set;e=d(e);for(var n=e.next();!n.done;n=e.next())n=n.value,n.language?t.add(qe(n.language)):t.add("und");return t}function cc(e){var t=new Map,n=new Map;e=d(e);for(var i=e.next();!i.done;i=e.next()){i=i.value;var r="und",a=[];i.language&&(r=qe(i.language)),a="variant"==i.type?i.audioRoles:i.roles,a&&a.length||(a=[""]),t.has(r)||t.set(r,new Set),a=d(a);for(var o=a.next();!o.done;o=a.next())o=o.value,t.get(r).add(o),i.label&&(n.has(r)||n.set(r,new Map),n.get(r).set(o,i.label))}var s=[];return t.forEach((function(e,t){for(var i=d(e),r=i.next();!r.done;r=i.next()){r=r.value;var a=null;n.has(t)&&n.get(t).has(r)&&(a=n.get(t).get(r)),s.push({language:t,role:r,label:a})}})),s}function dc(){return new Ie(2,7,7e3)}function hc(e,t,n,i,r,a){return i==e&&r.J==a.J&&r.uri==a.uri&&r.mimeType==a.mimeType?t:n}function fc(){return{J:null,mimeType:null,startTime:null,Ae:NaN,uri:null}}function pc(e){return new Promise((function(t,n){e.Nb=function(){return n(dc())},e.ld=function(){return t()},e.onError=function(e){return n(e)},e.nd=function(){return n(dc())}}))}Ws.prototype.destroy=function(){return this.M.destroy()},Ws.prototype.configure=function(e){this.s=e,this.A=new Ni({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0,stallTimeout:0,connectionTimeout:0},!0)},Ws.prototype.start=function(){var e=this;return F((function(t){if(1==t.g)return S(t,nu(e),2);rr(e.M),e.o=!0,A(t)}))},Ws.prototype.Jc=function(e){var t,n,i,r,a,o=this;return F((function(s){switch(s.g){case 1:if(rr(o.M),e.kb||null==e.cb||e.wc)return s["return"]();if(e.cb=null,!e.Rb){s.C(2);break}return S(s,pu(o,e,e.xd,e.$c),3);case 3:return s["return"]();case 2:if(e.stream.segmentIndex){s.C(4);break}return t=e.stream,S(s,e.stream.createSegmentIndex(),5);case 5:if(t!=e.stream)return null==e.cb&&gu(o,e,0),s["return"]();case 4:x(s,6),n=ru(o,e),null!=n&&(gu(o,e,n),e.Ec=!1),I(s,7);break;case 6:return i=k(s),S(s,yu(o,i),8);case 8:return s["return"]();case 7:if(r=Array.from(o.g.values()),!o.o||!r.every((function(e){return e.endOfStream}))){s.C(0);break}return S(s,o.G.V.endOfStream(),10);case 10:rr(o.M),a=o.G.V.getDuration(),0!=a&&a<o.F.presentationTimeline.getDuration()&&o.F.presentationTimeline.ab(a),A(s)}}))},bu.prototype.destroy=function(){return this.M.destroy()},i=xu.prototype,i.remove=function(e,t){return!!this.g&&(Iu(this.g,(function(n){return n.startTime<t&&n.endTime>e})),!0)},i.append=function(e){function t(e){var n=[],i=700<=e.fontWeight,r="italic"==e.fontStyle,a=e.textDecoration.includes("underline");return i&&n.push("b"),r&&n.push("i"),a&&n.push("u"),i=n.reduce((function(e,t){return e+"<"+t+">"}),""),n=n.reduceRight((function(e,t){return e+"</"+t+">"}),""),e.lineBreak||e.spacer?(e.spacer&&Ce("shaka.extern.Cue","Please use lineBreak instead of spacer."),"\n"):e.nestedCues.length?e.nestedCues.map(t).join(""):i+e.payload+n}var n=e.map((function(e){if(e.nestedCues.length){var n=e.clone();return n.nestedCues=[],n.payload=t(e),n}return e})),i=[];e=this.g.cues?Array.from(this.g.cues):[];var r={};n=d(n);for(var a=n.next();!a.done;r={Ub:r.Ub},a=n.next())r.Ub=a.value,e.some(function(e){return function(t){return t.startTime==e.Ub.startTime&&t.endTime==e.Ub.endTime&&t.text==e.Ub.payload}}(r))||(a=_u(r.Ub))&&i.push(a);for(e=i.slice().sort((function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime!=t.endTime?e.endTime-t.startTime:"line"in VTTCue.prototype?i.indexOf(t)-i.indexOf(e):i.indexOf(e)-i.indexOf(t)})),e=d(e),r=e.next();!r.done;r=e.next())this.g.addCue(r.value)},i.destroy=function(){return this.g&&(Iu(this.g,(function(){return!0})),this.g.mode="disabled"),this.g=null,Promise.resolve()},i.isTextVisible=function(){return"showing"==this.g.mode},i.setTextVisibility=function(e){this.g.mode=e?"showing":"hidden"},H("shaka.text.SimpleTextDisplayer",xu),xu.prototype.setTextVisibility=xu.prototype.setTextVisibility,xu.prototype.isTextVisible=xu.prototype.isTextVisible,xu.prototype.destroy=xu.prototype.destroy,xu.prototype.append=xu.prototype.append,xu.prototype.remove=xu.prototype.remove,H("shaka.util.Dom",ku),ku.removeAllChildren=Pu,i=Nu.prototype,i.append=function(e){var t=[].concat(h(this.l)),n={};e=d(e);for(var i=e.next();!i.done;n={Pc:n.Pc},i=e.next())n.Pc=i.value,t.some(function(e){return function(t){return ft(t,e.Pc)}}(n))||this.l.push(n.Pc);Ru(this)},i.destroy=function(){this.B.removeChild(this.i),this.i=null,this.o=!1,this.l=[],this.D&&this.D.stop(),this.j.clear(),this.h&&(this.h.release(),this.h=null),this.A&&(this.A.disconnect(),this.A=null)},i.remove=function(e,t){return!!this.i&&(this.l=this.l.filter((function(n){return n.startTime<e||n.endTime>=t})),Ru(this),!0)},i.isTextVisible=function(){return this.o},i.setTextVisibility=function(e){this.o=e},H("shaka.text.UITextDisplayer",Nu),Nu.prototype.setTextVisibility=Nu.prototype.setTextVisibility,Nu.prototype.isTextVisible=Nu.prototype.isTextVisible,Nu.prototype.remove=Nu.prototype.remove,Nu.prototype.destroy=Nu.prototype.destroy,Nu.prototype.append=Nu.prototype.append,H("shaka.text.WebVttGenerator",(function(){})),H("shaka.util.ConfigUtils",ju),ju.convertToConfigObject=Gu,ju.mergeConfigObjects=Bu,H("shaka.util.PlayerConfiguration",Vu),Vu.mergeConfigObjects=zu,b(Zu,oe),i=Zu.prototype,i.destroy=function(){var e,t=this;return F((function(n){switch(n.g){case 1:return t.l==jc?n["return"]():(t.l=jc,e=Eu(t.aa,(function(){return{node:t.Ma,payload:fc(),Hb:!1}})),S(n,new Promise((function(t){e.fc=function(){},e.ld=function(){t()},e.Nb=function(){t()},e.onError=function(){t()},e.nd=function(){t()}})),2));case 2:return S(n,t.aa.destroy(),3);case 3:if(t.h&&(t.h.release(),t.h=null),t.Ab=null,t.B=null,t.s=null,t.j=null,t.eb=null,!t.T){n.C(0);break}return S(n,t.T.destroy(),5);case 5:t.T=null,A(n)}}))},i.vc=function(e,t){if(t=void 0===t||t,this.l==jc)return Promise.reject(dc());var n=fc();n.J=e,An()||(t=!1);var i=t?this.ha:this.gb,r=Eu(this.aa,(function(){return{node:i,payload:n,Hb:!1}}));return r.fc=function(){},pc(r)},i.detach=function(){var e=this;if(this.l==jc)return Promise.reject(dc());var t=Eu(this.aa,(function(){return{node:e.Ma,payload:fc(),Hb:!1}}));return t.fc=function(){},pc(t)},i.Ee=function(e){var t=this;if(e=void 0===e||e,this.l==jc)return Promise.reject(dc());An()||(e=!1);var n=fc(),i=Eu(this.aa,(function(i){var r=i.J&&e?t.ha:i.J?t.gb:t.Ma;return n.J=i.J,{node:r,payload:n,Hb:!1}}));return i.fc=function(){},pc(i)},i.load=function(e,t,n){var i=this;if(this.l==jc)return Promise.reject(dc());this.dispatchEvent(el(Sc));var r=fc();r.uri=e,r.Ae=Date.now()/1e3,n&&(r.mimeType=n),void 0!==t&&(r.startTime=t);var a=nl(this,r)?this.xa:this.O,o=Eu(this.aa,(function(e){return null==e.J?null:(r.J=e.J,{node:a,payload:r,Hb:!0})}));return this.j=new Qu,o.fc=function(){},new Promise((function(e,t){o.nd=function(){return t(new Ie(2,7,7002))},o.ld=function(){e(),i.dispatchEvent(el(wc))},o.Nb=function(){return t(dc())},o.onError=function(e){return t(e)}}))},i.configure=function(e,t){2==arguments.length&&"string"==typeof e&&(e=Gu(e,t)),e.manifest&&e.manifest.dash&&"defaultPresentationDelay"in e.manifest.dash&&(Ce("manifest.dash.defaultPresentationDelay configuration","Please Use manifest.defaultPresentationDelay instead."),e.manifest.defaultPresentationDelay=e.manifest.dash.defaultPresentationDelay,delete e.manifest.dash.defaultPresentationDelay),e.streaming&&e.streaming.lowLatencyMode&&(void 0==e.streaming.inaccurateManifestTolerance&&(e.streaming.inaccurateManifestTolerance=0),void 0==e.streaming.rebufferingGoal&&(e.streaming.rebufferingGoal=.01));var n=zu(this.s,e,Rl(this));return _l(this),n},i.getConfiguration=function(){var e=Rl(this);return zu(e,this.s,Rl(this)),e},i.Qf=function(){if(this.g){var e=this.g.buffered.length;e=e?this.g.buffered.end(e-1):0;var t=this.getConfiguration().streaming.bufferingGoal;if(t=Math.min(this.g.currentTime+t,this.Ka().end),e>=t)return 1;if(!(e<=this.g.currentTime)&&e<t)return(e-this.g.currentTime)/(t-this.g.currentTime)}return 0},i.Sg=function(){for(var e in this.s)delete this.s[e];zu(this.s,Rl(this),Rl(this)),_l(this)},i.Ve=function(){return this.l},i.hg=function(){return this.g},i.Ac=function(){return this.T},i.Pd=function(){return this.Ia},i.cd=function(){return this.D?this.D:null},i.Y=function(){return this.F?this.F.presentationTimeline.Y():!(!this.g||!this.g.src)&&1/0==this.g.duration},i.Jb=function(){return!!this.F&&this.F.presentationTimeline.Jb()},i.Ze=function(){if(this.F){var e=this.F.variants;return!!e.length&&!e[0].video}return!(!this.g||!this.g.src)&&(this.g.videoTracks?0==this.g.videoTracks.length:0==this.g.videoHeight)},i.Ka=function(){if(this.F){var e=this.F.presentationTimeline;return{start:e.bc(),end:e.ib()}}return this.g&&this.g.src&&(e=this.g.seekable,e.length)?{start:e.start(0),end:e.end(e.length-1)}:{start:0,end:0}},i.ug=function(){this.Y()&&(this.g.currentTime=this.Ka().end)},i.keySystem=function(){var e=this.drmInfo();return e?e.keySystem:""},i.drmInfo=function(){return this.o?this.o.i:null},i.zc=function(){return this.o?this.o.zc():1/0},i.fd=function(){return this.o?this.o.fd():{}},i.Hc=function(){return!!this.K&&this.K.g==Li},i.Bc=function(){return this.g?this.I?this.I.i:1:0},i.De=function(e){0==e?X("A trick play rate of 0 is unsupported!"):(this.g.paused&&this.g.play(),this.I.set(e),this.l==Gc&&(this.B.playbackRateChanged(e),$s(this.i,1<Math.abs(e))))},i.Ie=function(){var e=this.I.ed();this.l==Vc&&this.I.set(e),this.l==Gc&&(this.I.set(e),this.B.playbackRateChanged(e),$s(this.i,!1))},i.Gb=function(){if(this.F){for(var e=this.i?this.i.h:null,t=[],n=0,i=d(this.F.variants),r=i.next();!r.done;r=i.next())if(r=r.value,ai(r)){var a=Qn(r);a.active=r==e,a.active||1==n||null==e||r.video!=e.video||r.audio!=e.audio||(a.active=!0),a.active&&n++,t.push(a)}return t}return this.g&&this.g.audioTracks?Array.from(this.g.audioTracks).map((function(e){return ii(e)})):[]},i.jb=function(){if(this.F){for(var e=this.i?this.i.i:null,t=[],n=d(this.F.textStreams),i=n.next();!i.done;i=n.next()){i=i.value;var r=Zn(i);r.active=i==e,t.push(r)}return t}return this.g&&this.g.src&&this.g.textTracks?Il(this).map((function(e){return ni(e)})):[]},i.Zf=function(){return this.F?this.F.imageStreams.map((function(e){return ei(e)})):[]},i.qg=function(e,t){var n,i,r,a,o,s,u,l,c,d,h,f,p,g,m,v,y,b,T=this;return F((function(E){return 1==E.g?T.F?(n=T.F.imageStreams.find((function(t){return t.id==e})))?n.segmentIndex?E.C(3):S(E,n.createSegmentIndex(),3):E["return"](null):E.C(2):2!=E.g?(i=n.segmentIndex.find(t),null==i?E["return"](null):(r=n.segmentIndex.get(i),a=r.tilesLayout||n.tilesLayout,o=/(\d+)x(\d+)/.exec(a),o?(s=n.width||0,u=n.height||0,l=parseInt(o[1],10),c=parseInt(o[2],10),d=s/l,h=u/c,f=l*c,p=r.j-r.startTime,g=p/f,m=r.startTime,y=v=0,1<f&&(b=Math.floor((t-r.startTime)/g),m=r.startTime+b*g,v=b%l*d,y=Math.floor(b/l)*h),E["return"]({height:h,positionX:v,positionY:y,startTime:m,duration:g,uris:r.Fa(),width:d})):E["return"](null))):E["return"](null)}))},i.oe=function(e){if(this.F&&this.i){var t=this.F.textStreams.find((function(t){return t.id==e.id}));t&&t!=this.i.i&&(Ju(this.j.h,t,!1),Qs(this.i,t),Jl(this),this.ea=t.language)}else if(this.g&&this.g.src&&this.g.textTracks){t=Il(this),t=d(t);for(var n=t.next();!n.done;n=t.next())n=n.value,ti(n)==e.id?n.mode=this.W?"showing":"hidden":n.mode="disabled";Jl(this)}},i.pe=function(e,t,n){if(t=void 0!==t&&t,n=void 0===n?0:n,this.F&&this.i){this.s.abr.enabled&&X("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var i=this.F.variants.find((function(t){return t.id==e.id}));i&&ai(i)&&(Hl(this,i,!1,t,n),this.ba=new Si(i),Kl(this))}else if(this.g&&this.g.audioTracks)for(t=Array.from(this.g.audioTracks),t=d(t),n=t.next();!n.done;n=t.next())if(n=n.value,ti(n)==e.id){Wl(this,n);break}},i.Pf=function(){return cc(this.Gb())},i.pg=function(){return cc(this.jb())},i.Of=function(){return Array.from(lc(this.Gb()))},i.og=function(){return Array.from(lc(this.jb()))},i.td=function(e,t){if(this.F&&this.H){this.ba=new Ai(e,t||"",0,"");var n=function(e,t){return e.video||t.video?e.video&&t.video?Math.abs((e.video.height||0)-(t.video.height||0))+Math.abs((e.video.width||0)-(t.video.width||0)):1/0:0},i=this.i.h,r=this.ba.create(this.F.variants),a=null;r=d(r.values());for(var o=r.next();!o.done;o=r.next())o=o.value,(!a||n(a,i)>n(o,i))&&(a=o);a?(n=Qn(a),this.pe(n,!0)):zl(this)}else if(this.g&&this.g.audioTracks){for(r=Array.from(this.g.audioTracks),n=qe(e),a=i=null,r=d(r),o=r.next();!o.done;o=r.next()){o=o.value;var s=ii(o);qe(s.language)==n&&(i=o,t?s.roles.includes(t)&&(a=o):0==s.roles.length&&(a=o))}a?Wl(this,a):i&&Wl(this,i)}},i.me=function(e,t,n){if(n=void 0!==n&&n,this.F&&this.H)this.ea=e,this.Xa=t||"",this.Ja=n,(e=ui(this.F.textStreams,this.ea,this.Xa,this.Ja)[0]||null)&&e!=this.i.i&&(Ju(this.j.h,e,!1),this.s.streaming.alwaysStreamText||this.Lb())&&(Qs(this.i,e),Jl(this));else{var i=qe(e);(e=this.jb().find((function(e){return qe(e.language)==i&&(!t||e.roles.includes(t))&&e.forced==n})))&&this.oe(e)}},i.Ug=function(e){if(this.F&&this.H){for(var t=null,n=d(this.F.variants),i=n.next();!i.done;i=n.next())if(i=i.value,i.audio.label==e){t=i;break}null!=t&&(this.ba=new Ai(t.language,"",0,e),zl(this))}},i.Lb=function(){var e=this.W;return this.L?this.L.o.isTextVisible():this.g&&this.g.src&&this.g.textTracks?Il(this).some((function(e){return"showing"==e.mode})):e},i.Te=function(){return this.g&&this.g.src&&this.g.textTracks?Cl(this).map((function(e){return ni(e)})):[]},i.Sf=function(e){var t=qe(e),n=Cl(this).find((function(e){return qe(e.language)==t}));if(!n||!n.cues)return[];e=[],n=d(n.cues);for(var i=n.next();!i.done;i=n.next())i=i.value,e.push({title:i.text,startTime:i.startTime,endTime:i.endTime});return e},i.ye=function(e){if(e=!!e,this.W!=e){if(this.W=e,this.l==Gc)this.L.o.setTextVisibility(e),this.s.streaming.alwaysStreamText||(e?this.i.i||(e=ui(this.F.textStreams,this.ea,this.Xa,this.Ja),0<e.length&&(Qs(this.i,e[0]),Jl(this))):Xs(this.i));else if(this.g&&this.g.src&&this.g.textTracks){var t=Il(this);t=d(t);for(var n=t.next();!n.done;n=t.next())n=n.value,"disabled"!=n.mode&&(n.mode=e?"showing":"hidden")}Ql(this)}},i.jg=function(){if(!this.Y())return null;var e=this.aa.l,t=0;if(this.H)t=this.H.l();else if(e){if(null==e.startTime)return new Date;t=e.startTime}return this.F?new Date(1e3*(this.F.presentationTimeline.j+t)):this.g&&this.g.getStartDate?(e=this.g.getStartDate(),isNaN(e.getTime())?null:new Date(e.getTime()+1e3*t)):null},i.We=function(){if(!this.Y())return null;if(this.F)return new Date(1e3*this.F.presentationTimeline.j);if(this.g&&this.g.getStartDate){var e=this.g.getStartDate();return isNaN(e.getTime())?null:e}return null},i.dd=function(){if(this.l==Gc)return this.L.dd();var e={total:[],audio:[],video:[],text:[]};return this.l==Vc&&(e.total=Uo(this.g.buffered)),e},i.getStats=function(){if(this.l!=Gc&&this.l!=Vc)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,switchHistory:[],stateHistory:[]};Vl(this);var e=this.g,t=e.currentTime/e.duration;if(!isNaN(t)){var n=this.j;t=Math.round(100*t),n.i=isNaN(n.i)?t:Math.max(n.i,t)}e.getVideoPlaybackQuality&&(e=e.getVideoPlaybackQuality(),n=this.j,t=Number(e.totalVideoFrames),n.R=Number(e.droppedVideoFrames),n.O=t,this.j.L=Number(e.corruptedVideoFrames)),this.o?(e=this.o,e=e.H?e.H:NaN):e=NaN,this.j.o=e,this.l==Gc&&((e=this.i.h)&&(this.j.B=(this.I?this.I.i:1)*e.bandwidth),e&&e.video&&(n=this.j,t=e.video.height||NaN,n.W=e.video.width||NaN,n.D=t),this.Y()&&(e=this.We().valueOf()+1e3*this.Ka().end,this.j.H=(Date.now()-e)/1e3),this.F&&this.F.presentationTimeline&&(this.j.K=this.F.presentationTimeline.g),e=this.B.getBandwidthEstimate(),this.j.A=e);var i=this.j;e=i.W,n=i.D,t=i.B;var r=i.O,a=i.R,o=i.L,s=i.A,u=i.i,l=i.l,c=i.I,h=i.j,f=Yu(i.g,"playing"),p=Yu(i.g,"paused"),g=Yu(i.g,"buffering"),m=i.o,v=i.H,y=i.K,b=Xu(i.g),T=[];i=d(i.h.g);for(var E=i.next();!E.done;E=i.next())E=E.value,T.push({timestamp:E.timestamp,id:E.id,type:E.type,fromAdaptation:E.fromAdaptation,bandwidth:E.bandwidth});return{width:e,height:n,streamBandwidth:t,decodedFrames:r,droppedFrames:a,corruptedFrames:o,estimatedBandwidth:s,completionPercent:u,loadLatency:l,manifestTimeSeconds:c,drmTimeSeconds:h,playTime:f,pauseTime:p,bufferingTime:g,licenseTime:m,liveLatency:v,maxSegmentDuration:y,stateHistory:b,switchHistory:T}},i.addTextTrack=function(e,t,n,i,r,a,o){if(o=void 0!==o&&o,Ce("addTextTrack","Please use an addTextTrackAsync."),this.l!=Gc&&this.l!=Vc)throw new Ie(1,7,7004);if(!i){var s=na(e);if(i=Yc[s],!i)throw new Ie(1,2,2011,s)}if(this.l==Vc){if("text/vtt"!=i)throw new Ie(1,2,2013,i);if(o&&(n="forced"),i=document.createElement("track"),i.src=e,i.label=a||"",i.kind=n,i.srclang=t,this.g.getAttribute("crossorigin")||this.g.setAttribute("crossorigin","anonymous"),this.g.appendChild(i),e=this.jb().find((function(e){return e.language==t&&e.label==(a||"")&&e.kind==n})))return Xl(this),e;throw new Ie(1,2,2012)}if(s=this.F.presentationTimeline.getDuration(),1/0==s)throw new Ie(1,4,4033);if(e={id:this.Xd++,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:Ps(0,s,[e]),mimeType:i||"",codecs:r||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,label:a||null,type:Ge,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!!o,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null},!gn(cn(e.mimeType,e.codecs)))throw new Ie(2,2,2014,i);return this.F.textStreams.push(e),Xl(this),Zn(e)},i.Ef=function(e,t,n,i,r,a,o){o=void 0!==o&&o;var s,u,l,c,d,h,f,p,g,m,v,y=this;return F((function(b){switch(b.g){case 1:if(y.l!=Gc&&y.l!=Vc)throw new Ie(1,7,7004);if(i){b.C(2);break}return S(b,Ll(y,e),3);case 3:i=b.h;case 2:if(s=[],y.D)try{s=y.D.getServerSideCuePoints()}catch(T){}if(y.l!=Vc){b.C(4);break}return o&&(n="forced"),S(b,Pl(y,e,t,n,i,a||"",s),5);case 5:if(u=y.jb(),l=u.find((function(e){return e.language==t&&e.label==(a||"")&&e.kind==n})))return Xl(y),b["return"](l);throw new Ie(1,2,2012);case 4:if(c=Ve,d=y.F.presentationTimeline.getDuration(),1/0==d)throw new Ie(1,4,4033);if(!s.length){b.C(6);break}return S(b,Nl(e,y.T,y.s.streaming.retryParameters),7);case 7:h=b.h,f=Dl(y,h,i,s),p=new Blob([f],{type:"text/vtt"}),e=is(p),i="text/vtt";case 6:if(g={id:y.Xd++,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:Ps(0,d,[e]),mimeType:i||"",codecs:r||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,label:a||null,type:c.oa,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!!o,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null},m=cn(g.mimeType,g.codecs),v=gn(m),!v)throw new Ie(2,2,2014,i);return y.F.textStreams.push(g),Xl(y),b["return"](Zn(g))}}))},i.Df=function(e,t,n){var i,r,a,o,s,u,l,c=this;return F((function(h){switch(h.g){case 1:if(c.l!=Gc&&c.l!=Vc)throw new Ie(1,7,7004);if(n){h.C(2);break}return S(h,Ll(c,e),3);case 3:n=h.h;case 2:if(i=[],c.D)try{i=c.D.getServerSideCuePoints()}catch(f){}return S(h,Pl(c,e,t,"chapters",n,"",i),4);case 4:if(r=c.Te(),a=r.find((function(e){return e.language==t}))){for(o=Cl(c),s=d(o),u=s.next();!u.done;u=s.next())l=u.value,ml(c,l);return h["return"](a)}throw new Ie(1,2,2012)}}))},i.ue=function(e,t){this.Td.width=e,this.Td.height=t},i.ke=function(){if(this.l==Gc){var e=this.i;if(e.M.g)e=!1;else if(e.j)e=!1;else{for(var t=d(e.g.values()),n=t.next();!n.done;n=t.next())n=n.value,n.Ec&&(n.Ec=!1,gu(e,n,.1));e=!0}}else e=!1;return e},i.eg=function(){return X("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.F},i.fg=function(){return this.tb},i.ze=function(e){this.eb=e},H("shaka.Player",Zu),Zu.prototype.setVideoContainer=Zu.prototype.ze,Zu.prototype.getManifestParserFactory=Zu.prototype.fg,Zu.prototype.getManifest=Zu.prototype.eg,Zu.prototype.retryStreaming=Zu.prototype.ke,Zu.prototype.setMaxHardwareResolution=Zu.prototype.ue,Zu.prototype.addChaptersTrack=Zu.prototype.Df,Zu.prototype.addTextTrackAsync=Zu.prototype.Ef,Zu.prototype.addTextTrack=Zu.prototype.addTextTrack,Zu.prototype.getStats=Zu.prototype.getStats,Zu.prototype.getBufferedInfo=Zu.prototype.dd,Zu.prototype.getPresentationStartTimeAsDate=Zu.prototype.We,Zu.prototype.getPlayheadTimeAsDate=Zu.prototype.jg,Zu.prototype.setTextTrackVisibility=Zu.prototype.ye,Zu.prototype.getChapters=Zu.prototype.Sf,Zu.prototype.getChaptersTracks=Zu.prototype.Te,Zu.prototype.isTextTrackVisible=Zu.prototype.Lb,Zu.prototype.selectVariantsByLabel=Zu.prototype.Ug,Zu.prototype.selectTextLanguage=Zu.prototype.me,Zu.prototype.selectAudioLanguage=Zu.prototype.td,Zu.prototype.getTextLanguages=Zu.prototype.og,Zu.prototype.getAudioLanguages=Zu.prototype.Of,Zu.prototype.getTextLanguagesAndRoles=Zu.prototype.pg,Zu.prototype.getAudioLanguagesAndRoles=Zu.prototype.Pf,Zu.prototype.selectVariantTrack=Zu.prototype.pe,Zu.prototype.selectTextTrack=Zu.prototype.oe,Zu.prototype.getThumbnails=Zu.prototype.qg,Zu.prototype.getImageTracks=Zu.prototype.Zf,Zu.prototype.getTextTracks=Zu.prototype.jb,Zu.prototype.getVariantTracks=Zu.prototype.Gb,Zu.prototype.cancelTrickPlay=Zu.prototype.Ie,Zu.prototype.trickPlay=Zu.prototype.De,Zu.prototype.getPlaybackRate=Zu.prototype.Bc,Zu.prototype.isBuffering=Zu.prototype.Hc,Zu.prototype.getKeyStatuses=Zu.prototype.fd,Zu.prototype.getExpiration=Zu.prototype.zc,Zu.prototype.drmInfo=Zu.prototype.drmInfo,Zu.prototype.keySystem=Zu.prototype.keySystem,Zu.prototype.goToLive=Zu.prototype.ug,Zu.prototype.seekRange=Zu.prototype.Ka,Zu.prototype.isAudioOnly=Zu.prototype.Ze,Zu.prototype.isInProgress=Zu.prototype.Jb,Zu.prototype.isLive=Zu.prototype.Y,Zu.prototype.getAdManager=Zu.prototype.cd,Zu.prototype.getAssetUri=Zu.prototype.Pd,Zu.prototype.getNetworkingEngine=Zu.prototype.Ac,Zu.prototype.getMediaElement=Zu.prototype.hg,Zu.prototype.getLoadMode=Zu.prototype.Ve,Zu.prototype.resetConfiguration=Zu.prototype.Sg,Zu.prototype.getBufferFullness=Zu.prototype.Qf,Zu.prototype.getConfiguration=Zu.prototype.getConfiguration,Zu.prototype.configure=Zu.prototype.configure,Zu.prototype.load=Zu.prototype.load,Zu.prototype.unload=Zu.prototype.Ee,Zu.prototype.detach=Zu.prototype.detach,Zu.prototype.attach=Zu.prototype.vc,Zu.probeSupport=function(e){var t,n,i,r,a,o;return e=void 0===e||e,F((function(s){if(1==s.g)return t={},e?S(s,jr(),3):s.C(2);2!=s.g&&(t=s.h);var u={};if(An()){for(var l in ia)u[l]=!0;for(var c in ra)u[c]=!0}l={mpd:"application/dash+xml",m3u8:"application/x-mpegurl",ism:"application/vnd.ms-sstr+xml"},c=d(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"]);for(var h=c.next();!h.done;h=c.next())h=h.value,u[h]=An()?!!ia[h]:xn(h);for(var f in l)u[f]=An()?!!ra[f]:xn(l[f]);for(n=u,u={},f=d('video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="opus",audio/mp4; codecs="flac",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",")),l=f.next();!l.done;l=f.next())l=l.value,u[l]=An()?!!gn(l)||(MediaSource.isTypeSupported(l)||on(l)):xn(l),c=l.split(";")[0],u[c]=u[c]||u[l];for(o in i=u,r={manifest:n,media:i,drm:t},a=Hc,a)r[o]=a[o]();return s["return"](r)}))},Zu.isBrowserSupported=tl,Zu.setAdManagerFactory=function(e){Wc=e},Zu.registerSupportPlugin=function(e,t){Hc[e]=t},Zu.prototype.destroy=Zu.prototype.destroy;var gc="abrstatuschanged",mc="adaptation",vc="buffering",yc="drmsessionupdate",bc="emsg",Tc="error",Ec="expirationupdated",wc="loaded",Sc="loading",Ac="manifestparsed",xc="metadata",_c="onstatechange",Ic="onstateidle",kc="ratechange",Cc="streaming",Lc="textchanged",Pc="texttrackvisibility",Nc="timelineregionadded",Dc="timelineregionenter",Rc="timelineregionexit",Mc="trackschanged",Uc="unloading",Oc="variantchanged",Fc={lh:gc,mh:mc,nh:vc,qh:yc,yh:bc,Error:Tc,Ah:Ec,Fh:"largegap",Gh:wc,Hh:Sc,Lh:Ac,Metadata:xc,Ph:_c,Qh:Ic,Yh:kc,bi:"sessiondata",ci:Cc,di:Lc,ei:Pc,gi:Nc,ii:Dc,ji:Rc,ki:Mc,oi:Uc,ri:Oc},jc=0,Bc=1,Gc=2,Vc=3;Zu.LoadMode={DESTROYED:jc,NOT_LOADED:Bc,MEDIA_SOURCE:Gc,SRC_EQUALS:Vc},Zu.version="v3.2.1";var Kc=["3","2"];Ne=new function(e){this.g=e,this.i=Le,this.h=Pe}(new ke(Number(Kc[0]),Number(Kc[1])));var zc=["output-restricted","internal-error"],Hc={},Wc=null,qc={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav"},Yc={sbv:"text/x-subviewer",srt:"text/srt",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml",lrc:"application/x-subtitle-lrc",ssa:"text/x-ssa",ass:"text/x-ssa"};function Xc(){this.h=[],this.j=this.i=this.g=0}function $c(e,t){var n=this;this.i=e,this.g=t,this.j=!1,this.l=this.g.getVolume(),this.h=new ar,this.h.m(this.g,google.ima.AdEvent.Type.PAUSED,(function(){n.j=!0})),this.h.m(this.g,google.ima.AdEvent.Type.RESUMED,(function(){n.j=!1}))}function Jc(e,t,n,i){var r=this;this.o=e,this.g=t,this.B=null,this.D=NaN,this.j=i,this.A=null,this.h=new ar,google.ima.settings.setLocale(n),e=new google.ima.AdDisplayContainer(this.o,this.g),e.initialize(),this.l=new google.ima.AdsLoader(e),this.l.getSettings().setPlayerType("shaka-player"),this.l.getSettings().setPlayerVersion("v3.2.1"),this.i=null,this.h.Oa(this.l,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,(function(e){Zc(r,e)})),this.h.m(this.l,google.ima.AdErrorEvent.Type.AD_ERROR,(function(e){Qc(r,e)})),this.g.onended=function(){r.l.contentComplete()}}function Qc(e,t){t.getError(),nd(e,null),e.j(new W("ad-cue-points-changed",{cuepoints:[]}))}function Zc(t,n){t.j(new W("ads-loaded",{loadTime:Date.now()/1e3-t.D})),t.i=n.getAdsManager(t.g),t.j(new W("ima-ad-manager-loaded",{imaAdManager:t.i}));var i=t.i.getCuePoints();if(i.length){var r=[];i=d(i);for(var a=i.next();!a.done;a=i.next())r.push({start:a.value,end:null});t.j(new W("ad-cue-points-changed",{cuepoints:r}))}ed(t);try{t.i.init(t.g.offsetWidth,t.g.offsetHeight,document.fullscreenElement?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),t.h.m(t.g,"loadeddata",(function(){t.i.resize(t.g.offsetWidth,t.g.offsetHeight,document.fullscreenElement?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)})),"ResizeObserver"in e&&(t.B=new ResizeObserver((function(){t.i.resize(t.g.offsetWidth,t.g.offsetHeight,document.fullscreenElement?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)})),t.B.observe(t.g)),t.i.start()}catch(o){nd(t,null)}}function ed(e){e.h.m(e.i,google.ima.AdErrorEvent.Type.AD_ERROR,(function(t){Qc(e,t)})),e.h.m(e.i,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,(function(t){td(e,t)})),e.h.m(e.i,google.ima.AdEvent.Type.STARTED,(function(t){td(e,t)})),e.h.m(e.i,google.ima.AdEvent.Type.FIRST_QUARTILE,(function(t){e.j(new W("ad-first-quartile",{originalEvent:t}))})),e.h.m(e.i,google.ima.AdEvent.Type.MIDPOINT,(function(t){e.j(new W("ad-midpoint",{originalEvent:t}))})),e.h.m(e.i,google.ima.AdEvent.Type.THIRD_QUARTILE,(function(t){e.j(new W("ad-third-quartile",{originalEvent:t}))})),e.h.m(e.i,google.ima.AdEvent.Type.COMPLETE,(function(t){e.j(new W("ad-complete",{originalEvent:t}))})),e.h.m(e.i,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,(function(t){nd(e,t)})),e.h.m(e.i,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,(function(t){nd(e,t)})),e.h.m(e.i,google.ima.AdEvent.Type.SKIPPED,(function(t){e.j(new W("ad-skipped",{originalEvent:t}))})),e.h.m(e.i,google.ima.AdEvent.Type.VOLUME_CHANGED,(function(t){e.j(new W("ad-volume-changed",{originalEvent:t}))})),e.h.m(e.i,google.ima.AdEvent.Type.VOLUME_MUTED,(function(t){e.j(new W("ad-muted",{originalEvent:t}))})),e.h.m(e.i,google.ima.AdEvent.Type.PAUSED,(function(t){e.A.j=!0,e.j(new W("ad-paused",{originalEvent:t}))})),e.h.m(e.i,google.ima.AdEvent.Type.RESUMED,(function(t){e.A.j=!1,e.j(new W("ad-resumed",{originalEvent:t}))})),e.h.m(e.i,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,(function(t){e.j(new W("ad-skip-state-changed",{originalEvent:t}))})),e.h.m(e.i,google.ima.AdEvent.Type.CLICK,(function(t){e.j(new W("ad-clicked",{originalEvent:t}))})),e.h.m(e.i,google.ima.AdEvent.Type.AD_PROGRESS,(function(t){e.j(new W("ad-progress",{originalEvent:t}))})),e.h.m(e.i,google.ima.AdEvent.Type.AD_BUFFERING,(function(t){e.j(new W("ad-buffering",{originalEvent:t}))})),e.h.m(e.i,google.ima.AdEvent.Type.IMPRESSION,(function(t){e.j(new W("ad-impression",{originalEvent:t}))})),e.h.m(e.i,google.ima.AdEvent.Type.DURATION_CHANGE,(function(t){e.j(new W("ad-duration-changed",{originalEvent:t}))})),e.h.m(e.i,google.ima.AdEvent.Type.USER_CLOSE,(function(t){e.j(new W("ad-closed",{originalEvent:t}))})),e.h.m(e.i,google.ima.AdEvent.Type.LOADED,(function(t){e.j(new W("ad-loaded",{originalEvent:t}))})),e.h.m(e.i,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,(function(t){e.j(new W("all-ads-completed",{originalEvent:t}))})),e.h.m(e.i,google.ima.AdEvent.Type.LINEAR_CHANGED,(function(t){e.j(new W("ad-linear-changed",{originalEvent:t}))})),e.h.m(e.i,google.ima.AdEvent.Type.AD_METADATA,(function(t){e.j(new W("ad-metadata",{originalEvent:t}))})),e.h.m(e.i,google.ima.AdEvent.Type.LOG,(function(t){e.j(new W("ad-recoverable-error",{originalEvent:t}))})),e.h.m(e.i,google.ima.AdEvent.Type.AD_BREAK_READY,(function(t){e.j(new W("ad-break-ready",{originalEvent:t}))})),e.h.m(e.i,google.ima.AdEvent.Type.INTERACTION,(function(t){e.j(new W("ad-interaction",{originalEvent:t}))}))}function td(e,t){var n=t.getAd();e.A=new $c(n,e.i),e.j(new W("ad-started",{ad:e.A,sdkAdObject:n,originalEvent:t})),e.o.setAttribute("ad-active","true"),e.g.pause()}function nd(e,t){e.j(new W("ad-stopped",{originalEvent:t})),e.o.removeAttribute("ad-active"),e.g.play()}function id(e,t){this.i=e,this.h=null,this.g=t}function rd(e,t,n,i){var r=this;this.B=e,this.g=t,this.l=null,this.L=NaN,this.j=i,this.K=!1,this.D=this.o=this.A=null,this.H="",this.I=[],this.h=new ar,e=new google.ima.dai.api.UiSettings,e.setLocale(n),this.i=new google.ima.dai.api.StreamManager(this.g,this.B,e),this.j(new W("ima-stream-manager-loaded",{imaStreamManager:this.i})),this.h.m(this.i,google.ima.dai.api.StreamEvent.Type.LOADED,(function(e){ad(r,e)})),this.h.m(this.i,google.ima.dai.api.StreamEvent.Type.ERROR,(function(){r.H.length?r.l.resolve(r.H):r.l.reject("IMA Stream request returned an error and there was no backup asset uri provided."),r.l=null})),this.h.m(this.i,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,(function(){})),this.h.m(this.i,google.ima.dai.api.StreamEvent.Type.STARTED,(function(e){e=e.getAd(),r.o=new id(e,r.g),r.D&&(r.o.h=r.D),r.j(new W("ad-started",{ad:r.o})),r.B.setAttribute("ad-active","true")})),this.h.m(this.i,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,(function(){r.B.removeAttribute("ad-active");var e=r.g.currentTime;r.A&&r.A>e&&(r.g.currentTime=r.A,r.A=null)})),this.h.m(this.i,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,(function(e){r.D=e.getStreamData().adProgressData,r.o&&(r.o.h=r.D)})),this.h.m(this.i,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,(function(){r.j(new W("ad-first-quartile"))})),this.h.m(this.i,google.ima.dai.api.StreamEvent.Type.MIDPOINT,(function(){r.j(new W("ad-midpoint"))})),this.h.m(this.i,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,(function(){r.j(new W("ad-third-quartile"))})),this.h.m(this.i,google.ima.dai.api.StreamEvent.Type.COMPLETE,(function(){r.j(new W("ad-complete")),r.j(new W("ad-stopped")),r.B.removeAttribute("ad-active"),r.o=null})),this.h.m(this.i,google.ima.dai.api.StreamEvent.Type.SKIPPED,(function(){r.j(new W("ad-skipped")),r.j(new W("ad-stopped"))})),this.h.m(this.i,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,(function(e){var t=e.getStreamData();e=[],t=d(t.cuepoints);for(var n=t.next();!n.done;n=t.next())n=n.value,e.push({start:n.start,end:n.end});r.I=e,r.j(new W("ad-cue-points-changed",{cuepoints:e}))}))}function ad(e,t){e.j(new W("ads-loaded",{loadTime:Date.now()/1e3-e.L}));var n=t.getStreamData().url;e.l.resolve(n),e.l=null,e.K||e.h.m(e.g,"seeked",(function(){var t=e.g.currentTime;if(0!=t){e.i.streamTimeForContentTime(t);var n=e.i.previousCuePointForStreamTime(t);n&&!n.played&&(e.A=t,e.g.currentTime=n.start)}}))}function od(){oe.call(this),this.g=this.h=null,this.j=new Xc,this.i=navigator.language}function sd(e){return JSON.stringify(e,(function(e,t){if("function"!=typeof t){if(t instanceof Event||t instanceof W){var n={};for(r in t){var i=t[r];i&&"object"==typeof i?"detail"==r&&(n[r]=i):r in Event||(n[r]=i)}return n}if(t instanceof Error){var r=new Set(["name","message","stack"]);for(n in t)r.add(n);for(i=d(Object.getOwnPropertyNames(t)),n=i.next();!n.done;n=i.next())r.add(n.value);for(i={},r=d(r),n=r.next();!n.done;n=r.next())n=n.value,i[n]=t[n];r={__type__:"Error",contents:i}}else if(t instanceof TimeRanges)for(r={__type__:"TimeRanges",length:t.length,start:[],end:[]},n=d(Uo(t)),i=n.next();!i.done;i=n.next()){i=i.value;var a=i.end;r.start.push(i.start),r.end.push(a)}else r=t instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(t)}:"number"==typeof t?isNaN(t)?"NaN":isFinite(t)?t:0>t?"-Infinity":"Infinity":t;return r}}))}function ud(e){return JSON.parse(e,(function(e,t){if("NaN"==t)var n=NaN;else if("-Infinity"==t)n=-1/0;else if("Infinity"==t)n=1/0;else if(t&&"object"==typeof t&&"TimeRanges"==t.__type__)n=ld(t);else if(t&&"object"==typeof t&&"Uint8Array"==t.__type__)n=new Uint8Array(t.entries);else if(t&&"object"==typeof t&&"Error"==t.__type__){n=t.contents;var i,r=Error(n.message);for(i in n)r[i]=n[i];n=r}else n=t;return n}))}function ld(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}i=$c.prototype,i.getDuration=function(){return this.i.getDuration()},i.getMinSuggestedDuration=function(){return this.i.getMinSuggestedDuration()},i.getRemainingTime=function(){return this.g.getRemainingTime()},i.isPaused=function(){return this.j},i.isSkippable=function(){return 0<=this.i.getSkipTimeOffset()},i.getTimeUntilSkippable=function(){var e=this.i.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},i.canSkipNow=function(){return this.g.getAdSkippableState()},i.skip=function(){return this.g.skip()},i.pause=function(){return this.g.pause()},i.play=function(){return this.g.resume()},i.getVolume=function(){return this.g.getVolume()},i.setVolume=function(e){return this.g.setVolume(e)},i.isMuted=function(){return 0==this.g.getVolume()},i.resize=function(e,t){this.g.resize(e,t,document.fullscreenElement?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)},i.setMuted=function(e){e?(this.l=this.getVolume(),this.setVolume(0)):this.setVolume(this.l)},i.getSequenceLength=function(){var e=this.i.getAdPodInfo();return null==e?1:e.getTotalAds()},i.getPositionInSequence=function(){var e=this.i.getAdPodInfo();return null==e?1:e.getAdPosition()},i.release=function(){this.g=this.i=null},H("shaka.ads.ClientSideAd",$c),$c.prototype.release=$c.prototype.release,$c.prototype.getPositionInSequence=$c.prototype.getPositionInSequence,$c.prototype.getSequenceLength=$c.prototype.getSequenceLength,$c.prototype.setMuted=$c.prototype.setMuted,$c.prototype.resize=$c.prototype.resize,$c.prototype.isMuted=$c.prototype.isMuted,$c.prototype.setVolume=$c.prototype.setVolume,$c.prototype.getVolume=$c.prototype.getVolume,$c.prototype.play=$c.prototype.play,$c.prototype.pause=$c.prototype.pause,$c.prototype.skip=$c.prototype.skip,$c.prototype.canSkipNow=$c.prototype.canSkipNow,$c.prototype.getTimeUntilSkippable=$c.prototype.getTimeUntilSkippable,$c.prototype.isSkippable=$c.prototype.isSkippable,$c.prototype.isPaused=$c.prototype.isPaused,$c.prototype.getRemainingTime=$c.prototype.getRemainingTime,$c.prototype.getMinSuggestedDuration=$c.prototype.getMinSuggestedDuration,$c.prototype.getDuration=$c.prototype.getDuration,Jc.prototype.stop=function(){this.i&&this.i.stop(),this.o&&Pu(this.o)},Jc.prototype.release=function(){this.stop(),this.B&&this.B.disconnect(),this.h&&this.h.release(),this.i&&this.i.destroy(),this.l.destroy()},i=id.prototype,i.getDuration=function(){return this.h?this.h.duration:-1},i.getMinSuggestedDuration=function(){return this.getDuration()},i.getRemainingTime=function(){return this.h?this.h.duration-this.h.currentTime:-1},i.isPaused=function(){return this.g.paused},i.isSkippable=function(){return this.i.isSkippable()},i.getTimeUntilSkippable=function(){var e=this.i.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},i.canSkipNow=function(){return 0==this.getTimeUntilSkippable()},i.skip=function(){this.g.currentTime+=this.getRemainingTime()},i.pause=function(){return this.g.pause()},i.play=function(){return this.g.play()},i.getVolume=function(){return this.g.volume},i.setVolume=function(e){this.g.volume=e},i.isMuted=function(){return this.g.muted},i.resize=function(){},i.setMuted=function(e){this.g.muted=e},i.getSequenceLength=function(){var e=this.i.getAdPodInfo();return null==e?1:e.getTotalAds()},i.getPositionInSequence=function(){var e=this.i.getAdPodInfo();return null==e?1:e.getAdPosition()},i.release=function(){this.g=this.h=this.i=null},H("shaka.ads.ServerSideAd",id),id.prototype.release=id.prototype.release,id.prototype.getPositionInSequence=id.prototype.getPositionInSequence,id.prototype.getSequenceLength=id.prototype.getSequenceLength,id.prototype.setMuted=id.prototype.setMuted,id.prototype.resize=id.prototype.resize,id.prototype.isMuted=id.prototype.isMuted,id.prototype.setVolume=id.prototype.setVolume,id.prototype.getVolume=id.prototype.getVolume,id.prototype.play=id.prototype.play,id.prototype.pause=id.prototype.pause,id.prototype.skip=id.prototype.skip,id.prototype.canSkipNow=id.prototype.canSkipNow,id.prototype.getTimeUntilSkippable=id.prototype.getTimeUntilSkippable,id.prototype.isSkippable=id.prototype.isSkippable,id.prototype.isPaused=id.prototype.isPaused,id.prototype.getRemainingTime=id.prototype.getRemainingTime,id.prototype.getMinSuggestedDuration=id.prototype.getMinSuggestedDuration,id.prototype.getDuration=id.prototype.getDuration,rd.prototype.stop=function(){this.H="",this.A=null,this.I=[]},rd.prototype.release=function(){this.stop(),this.h&&this.h.release()},rd.prototype.onCueMetadataChange=function(e){if(e.key&&e.data){var t={};t[e.key]=e.data,this.i.onTimedMetadata(t)}},b(od,oe),i=od.prototype,i.setLocale=function(e){this.i=e},i.initClientSide=function(t,n){var i=this;if(!e.google||!google.ima||!google.ima.AdsLoader)throw new Ie(2,10,1e4);this.h&&this.h.release(),this.h=new Jc(t,n,this.i,(function(e){if(e&&e.type)switch(e.type){case"ads-loaded":i.j.h.push(e.loadTime);break;case"ad-started":i.j.g++;break;case"ad-complete":i.j.i++;break;case"ad-skipped":i.j.j++}i.dispatchEvent(e)}))},i.release=function(){this.h&&(this.h.release(),this.h=null),this.g&&(this.g.release(),this.g=null)},i.onAssetUnload=function(){this.h&&this.h.stop(),this.g&&this.g.stop(),this.dispatchEvent(new W("ad-stopped")),this.j=new Xc},i.requestClientSideAds=function(e){if(!this.h)throw new Ie(1,10,10001);var t=this.h;t.D=Date.now()/1e3,t.l.requestAds(e)},i.initServerSide=function(t,n){var i=this;if(!e.google||!google.ima||!google.ima.dai)throw new Ie(2,10,10002);this.g&&this.g.release(),this.g=new rd(t,n,this.i,(function(e){if(e&&e.type)switch(e.type){case"ads-loaded":i.j.h.push(e.loadTime);break;case"ad-started":i.j.g++;break;case"ad-complete":i.j.i++;break;case"ad-skipped":i.j.j++}i.dispatchEvent(e)}))},i.requestServerSideStream=function(e,t){if(t=void 0===t?"":t,!this.g)throw new Ie(1,10,10003);e.adTagParameters||(e.adTagParameters={});var n=e.adTagParameters;(n.mpt||n.mpv)&&X('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.adTagParameters.mpt="shaka-player",e.adTagParameters.mpv="v3.2.1",n=this.g;var i=t;return n.l?n=Promise.reject(new Ie(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(n.K=!0),n.l=new Vt,n.i.requestStream(e),n.H=i||"",n.L=Date.now()/1e3,n=n.l),n},i.replaceServerSideAdTagParameters=function(e){if(!this.g)throw new Ie(1,10,10003);(e.mpt||e.mpv)&&X('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),e.mpt="Shaka Player",e.mpv="v3.2.1",this.g.i.replaceAdTagParameters(e)},i.getServerSideCuePoints=function(){if(!this.g)throw new Ie(1,10,10003);return this.g.I},i.getStats=function(){var e=this.j;return{loadTimes:e.h,started:e.g,playedCompletely:e.i,skipped:e.j}},i.onDashTimedMetadata=function(e){if(this.g&&"urn:google:dai:2018"==e.schemeIdUri){var t=e.schemeIdUri,n=e.eventElement?e.eventElement.getAttribute("messageData"):null;this.g.i.processMetadata(t,n,e.startTime)}},i.onHlsTimedMetadata=function(e,t){this.g&&this.g.i.processMetadata("ID3",e.data,t)},i.onCueMetadataChange=function(e){this.g&&this.g.onCueMetadataChange(e)},H("shaka.ads.AdManager",od),od.prototype.onCueMetadataChange=od.prototype.onCueMetadataChange,od.prototype.onHlsTimedMetadata=od.prototype.onHlsTimedMetadata,od.prototype.onDashTimedMetadata=od.prototype.onDashTimedMetadata,od.prototype.getStats=od.prototype.getStats,od.prototype.getServerSideCuePoints=od.prototype.getServerSideCuePoints,od.prototype.replaceServerSideAdTagParameters=od.prototype.replaceServerSideAdTagParameters,od.prototype.requestServerSideStream=od.prototype.requestServerSideStream,od.prototype.initServerSide=od.prototype.initServerSide,od.prototype.requestClientSideAds=od.prototype.requestClientSideAds,od.prototype.onAssetUnload=od.prototype.onAssetUnload,od.prototype.release=od.prototype.release,od.prototype.initClientSide=od.prototype.initClientSide,od.prototype.setLocale=od.prototype.setLocale,od.ADS_LOADED="ads-loaded",od.AD_STARTED="ad-started",od.AD_FIRST_QUARTILE="ad-first-quartile",od.AD_MIDPOINT="ad-midpoint",od.AD_THIRD_QUARTILE="ad-third-quartile",od.AD_COMPLETE="ad-complete",od.AD_STOPPED="ad-stopped",od.AD_SKIPPED="ad-skipped",od.AD_VOLUME_CHANGED="ad-volume-changed",od.AD_MUTED="ad-muted",od.AD_PAUSED="ad-paused",od.AD_RESUMED="ad-resumed",od.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",od.CUEPOINTS_CHANGED="ad-cue-points-changed",od.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",od.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",od.AD_CLICKED="ad-clicked",od.AD_PROGRESS="ad-progress",od.AD_BUFFERING="ad-buffering",od.AD_IMPRESSION="ad-impression",od.AD_DURATION_CHANGED="ad-duration-changed",od.AD_CLOSED="ad-closed",od.AD_LOADED="ad-loaded",od.ALL_ADS_COMPLETED="all-ads-completed",od.AD_LINEAR_CHANGED="ad-linear-changed",od.AD_METADATA="ad-metadata",od.AD_RECOVERABLE_ERROR="ad-recoverable-error",od.AD_BREAK_READY="ad-break-ready",od.AD_INTERACTION="ad-interaction",Wc=function(){return new od};var cd="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),dd="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),hd=["loop","playbackRate"],fd=["pause","play"],pd={getAssetUri:2,getAudioLanguages:4,getAudioLanguagesAndRoles:4,getBufferFullness:1,getBufferedInfo:2,getConfiguration:4,getExpiration:2,getKeyStatuses:2,getPlaybackRate:2,getTextLanguages:4,getTextLanguagesAndRoles:4,getTextTracks:2,getStats:5,getVariantTracks:2,getImageTracks:2,getThumbnails:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,getLoadMode:10},gd={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20},md=[["getConfiguration","configure"]],vd=[["isTextTrackVisible","setTextTrackVisibility"]],yd="addChaptersTrack addTextTrack addTextTrackAsync cancelTrickPlay configure getChapters getChaptersTracks resetConfiguration retryStreaming selectAudioLanguage selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay goToLive".split(" "),bd=["attach","detach","load","unload"];function Td(e,t,n,i,r,a){var o=this;this.L=e,this.j=new Sn(t),this.aa=n,this.D=!1,this.B=i,this.K=r,this.R=a,this.h=this.o=!1,this.W="",this.A=null,this.H=function(){return _d(o)},this.I=function(e,t){var n=ud(t);switch(n.type){case"event":var i=n.targetName;n=n.event,n=new W(n.type,n),o.B(i,n);break;case"update":for(var r in i=n.update,i)for(var a in n=o.g[r]||{},i[r])n[a]=i[r][a];o.D&&(o.aa(),o.D=!1);break;case"asyncComplete":if(r=n.id,n=n.error,a=o.i[r],delete o.i[r],a)if(n){for(i in r=new Ie(n.severity,n.category,n.code),n)r[i]=n[i];a.reject(r)}else a.resolve()}},this.g={video:{},player:{}},this.O=0,this.i={},this.l=null,Nd.add(this)}function Ed(e){if(e.h){var t=e.R();chrome.cast.requestSession((function(n){return wd(e,t,n)}),(function(t){return Sd(e,t)}))}}function wd(e,t,n){Pd=n,n.addUpdateListener(e.H),n.addMessageListener("urn:x-cast:com.google.shaka.v2",e.I),_d(e),kd(e,{type:"init",initState:t,appData:e.A}),e.l.resolve()}function Sd(e,t){var n=8003;switch(t.code){case"cancel":n=8004;break;case"timeout":n=8005;break;case"receiver_unavailable":n=8006}e.l.reject(new Ie(2,8,n,t))}function Ad(e,t){var n=e.R();e.l=new Vt,e.D=!0,wd(e,n,t)}function xd(e){var t=Pd;t.removeUpdateListener(e.H),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.I)}function _d(e){var t=!!Pd&&"connected"==Pd.status;if(e.h&&!t){for(var n in e.K(),e.g)e.g[n]={};Id(e)}e.h=t,e.W=t?Pd.receiver.friendlyName:"",e.j.Ca()}function Id(e){for(var t in e.i){var n=e.i[t];delete e.i[t],n.reject(new Ie(1,7,7e3))}}function kd(e,t){var n=sd(t),i=Pd;try{i.sendMessage("urn:x-cast:com.google.shaka.v2",n,(function(){}),J)}catch(r){throw n=new Ie(2,8,8005,r),i=new W("error",{detail:n}),e.B("player",i),e.Yb(),n}}i=Td.prototype,i.destroy=function(){return Nd["delete"](this),Id(this),Pd&&xd(this),this.j&&(this.j.stop(),this.j=null),this.K=this.B=null,this.h=this.o=!1,this.I=this.H=this.l=this.i=this.g=this.A=null,Promise.resolve()},i.ra=function(){return this.h},i.qd=function(){return this.W},i.init=function(){if(this.L.length)if(e.chrome&&chrome.cast&&chrome.cast.isAvailable){this.o=!0,this.j.Ca();var t=new chrome.cast.SessionRequest(this.L);t=new chrome.cast.ApiConfig(t,(function(e){for(var t=d(Nd),n=t.next();!n.done;n=t.next())Ad(n.value,e)}),(function(e){for(var t=d(Nd),n=t.next();!n.done;n=t.next())n=n.value,Ld="available"==e,n.j.Ca()}),"origin_scoped"),chrome.cast.initialize(t,(function(){}),(function(){})),Ld&&this.j.S(Cd),(t=Pd)&&t.status!=chrome.cast.SessionStatus.STOPPED?Ad(this,t):Pd=null}else e.__onGCastApiAvailable||(e.__onGCastApiAvailable=Dd),e.__onGCastApiAvailable!=Dd&&X("A global Cast SDK hook is already installed! Shaka Player will be unable to receive a notification when the Cast SDK is ready.")},i.qe=function(e){this.A=e,this.h&&kd(this,{type:"appData",appData:this.A})},i.cast=function(e){var t=this;return F((function(n){if(!t.o)throw new Ie(1,8,8e3);if(!Ld)throw new Ie(1,8,8001);if(t.h)throw new Ie(1,8,8002);return t.l=new Vt,chrome.cast.requestSession((function(n){return wd(t,e,n)}),(function(e){return Sd(t,e)})),S(n,t.l,0)}))},i.Yb=function(){if(this.h){if(Id(this),Pd){xd(this);try{Pd.stop((function(){}),(function(){}))}catch(Hw){}Pd=null}_d(this)}},i.get=function(e,t){var n=this;if("video"==e){if(fd.includes(t))return function(i){for(var r=[],a=0;a<arguments.length;++a)r[a]=arguments[a];return n.kf.apply(n,[e,t].concat(h(r)))}}else if("player"==e){if(gd[t]&&!this.get("player","isLive")())return function(){};if(yd.includes(t))return function(i){for(var r=[],a=0;a<arguments.length;++a)r[a]=arguments[a];return n.kf.apply(n,[e,t].concat(h(r)))};if(bd.includes(t))return function(i){for(var r=[],a=0;a<arguments.length;++a)r[a]=arguments[a];return n.Pg.apply(n,[e,t].concat(h(r)))};if(pd[t])return function(){return n.g[e][t]}}return this.g[e][t]},i.set=function(e,t,n){this.g[e][t]=n,kd(this,{type:"set",targetName:e,property:t,value:n})},i.kf=function(e,t,n){for(var i=[],r=2;r<arguments.length;++r)i[r-2]=arguments[r];kd(this,{type:"call",targetName:e,methodName:t,args:i})},i.Pg=function(e,t,n){for(var i=[],r=2;r<arguments.length;++r)i[r-2]=arguments[r];r=new Vt;var a=this.O.toString();this.O++,this.i[a]=r;try{kd(this,{type:"asyncCall",targetName:e,methodName:t,args:i,id:a})}catch(o){r.reject(o)}return r};var Cd=.02,Ld=!1,Pd=null,Nd=new Set;function Dd(e){if(e){e=d(Nd);for(var t=e.next();!t.done;t=e.next())t.value.init()}}function Rd(e,t,n){oe.call(this);var i=this;this.j=e,this.i=t,this.h=this.A=this.l=this.B=this.o=null,this.H=n,this.D=new Map,this.g=new Td(n,(function(){return jd(i)}),(function(){return Bd(i)}),(function(e,t){return zd(i,e,t)}),(function(){return Gd(i)}),(function(){return Fd(i)})),Md(this)}function Md(e){e.g.init(),e.h=new ar;for(var t=d(cd),n=t.next();!n.done;n=t.next())e.h.m(e.j,n.value,(function(t){e.g.ra()||(t=new W(t.type,t),e.l.dispatchEvent(t))}));for(var i in Fc)e.h.m(e.i,Fc[i],(function(t){e.g.ra()||e.A.dispatchEvent(t)}));for(var r in e.o={},t={},e.j)t.lc=r,Object.defineProperty(e.o,t.lc,{configurable:!1,enumerable:!0,get:function(t){return function(){return Vd(e,t.lc)}}(t),set:function(t){return function(n){var i=t.lc;e.g.ra()?e.g.set("video",i,n):e.j[i]=n}}(t)}),t={lc:t.lc};e.B={},Od(e,(function(t){Object.defineProperty(e.B,t,{configurable:!1,enumerable:!0,get:function(){return Kd(e,t)}})})),Ud(e),e.l=new oe,e.l.Vc=e.o,e.A=new oe,e.A.Vc=e.B}function Ud(e){var t=new Map;Od(e,(function(n,i){if(t.has(i)){var r=t.get(i);n.length<r.length?e.D.set(n,r):e.D.set(r,n)}else t.set(i,n)}))}function Od(e,t){function n(e){return"constructor"!=e&&"function"==typeof i[e]&&!r.has(e)}var i=e.i,r=new Set;for(a in i)n(a)&&(r.add(a),t(a,i[a]));for(var a=Object.getPrototypeOf(i),o=Object.getPrototypeOf({});a&&a!=o;){for(var s=d(Object.getOwnPropertyNames(a)),u=s.next();!u.done;u=s.next())u=u.value,n(u)&&(r.add(u),t(u,i[u]));a=Object.getPrototypeOf(a)}}function Fd(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.i.Pd(),startTime:null};e.j.pause();for(var n=d(hd),i=n.next();!i.done;i=n.next())i=i.value,t.video[i]=e.j[i];for(e.j.ended||(t.startTime=e.j.currentTime),n=d(md),i=n.next();!i.done;i=n.next()){var r=i.value;i=r[1],r=e.i[r[0]](),t.player[i]=r}for(n=d(vd),i=n.next();!i.done;i=n.next())r=i.value,i=r[1],r=e.i[r[0]](),t.playerAfterLoad[i]=r;return t}function jd(e){var t=new W("caststatuschanged");e.dispatchEvent(t)}function Bd(e){var t=new W(e.o.paused?"pause":"play");e.l.dispatchEvent(t)}function Gd(e){for(var t=d(md),n=t.next();!n.done;n=t.next()){var i=n.value;n=i[1],i=e.g.get("player",i[0])(),e.i[n](i)}var r=e.g.get("player","getAssetUri")();n=e.g.get("video","ended"),t=Promise.resolve();var a=e.j.autoplay;i=null,n||(i=e.g.get("video","currentTime")),r&&(e.j.autoplay=!1,t=e.i.load(r,i));var o={};for(n=d(hd),i=n.next();!i.done;i=n.next())i=i.value,o[i]=e.g.get("video",i);t.then((function(){if(e.j){for(var t=d(hd),n=t.next();!n.done;n=t.next())n=n.value,e.j[n]=o[n];for(t=d(vd),n=t.next();!n.done;n=t.next()){var i=n.value;n=i[1],i=e.g.get("player",i[0])(),e.i[n](i)}e.j.autoplay=a,r&&e.j.play()}}),(function(t){t=new W(Tc,{detail:t}),e.i.dispatchEvent(t)}))}function Vd(e,t){if("addEventListener"==t)return function(t,n,i){return e.l.addEventListener(t,n,i)};if("removeEventListener"==t)return function(t,n,i){return e.l.removeEventListener(t,n,i)};if(e.g.ra()&&0==Object.keys(e.g.g.video).length){var n=e.j[t];if("function"!=typeof n)return n}return e.g.ra()?e.g.get("video",t):(n=e.j[t],"function"==typeof n&&(n=n.bind(e.j)),n)}function Kd(e,t){if(e.D.has(t)&&(t=e.D.get(t)),"addEventListener"==t)return function(t,n,i){return e.A.addEventListener(t,n,i)};if("removeEventListener"==t)return function(t,n,i){return e.A.removeEventListener(t,n,i)};if("getMediaElement"==t)return function(){return e.o};if("getSharedConfiguration"==t)return e.g.get("player","getConfiguration");if("getNetworkingEngine"==t)return function(){return e.i.Ac()};if("getDrmEngine"==t)return function(){return e.i.o};if("getAdManager"==t)return function(){return e.i.cd()};if("setVideoContainer"==t)return function(t){return e.i.ze(t)};if(e.g.ra()){if("getManifest"==t||"drmInfo"==t)return function(){return X(t+"() does not work while casting!"),null};if("attach"==t||"detach"==t)return function(){return X(t+"() does not work while casting!"),Promise.resolve()}}return e.g.ra()&&0==Object.keys(e.g.g.video).length&&pd[t]||!e.g.ra()?e.i[t].bind(e.i):e.g.get("player",t)}function zd(e,t,n){e.g.ra()&&("video"==t?e.l.dispatchEvent(n):"player"==t&&e.A.dispatchEvent(n))}function Hd(e,t,n,i){oe.call(this);var r=this;this.g=e,this.i=t,this.h=new ar,this.O={video:e,player:t},this.I=n||function(){},this.R=i||function(e){return e},this.j=null,this.K=!1,this.A=!0,this.o=0,this.H=!1,this.D=!0,this.B=this.l=null,this.L=new Sn((function(){Jd(r)})),Wd(this)}function Wd(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=function(){return qd(e)},t.onSenderDisconnected=function(){return qd(e)},t.onSystemVolumeChanged=function(){var t=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();t&&ih(e,{type:"update",update:{video:{volume:t.level,muted:t.muted}}},e.l),ih(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.l)},e.B=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.B.onMessage=function(t){return th(e,t)},e.l=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.l.onMessage=function(t){return eh(e,t)},t.start(),t=d(cd);for(var n=t.next();!n.done;n=t.next())e.h.m(e.g,n.value,(function(t){return $d(e,"video",t)}));for(var i in Fc)e.h.m(e.i,Fc[i],(function(t){return $d(e,"player",t)}));cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?e.i.ue(3840,2160):e.i.ue(1920,1080),e.h.m(e.g,"loadeddata",(function(){e.H=!0})),e.h.m(e.i,"loading",(function(){e.A=!1,Yd(e)})),e.h.m(e.g,"playing",(function(){e.A=!1,Yd(e)})),e.h.m(e.g,"pause",(function(){Yd(e)})),e.h.m(e.i,"unloading",(function(){e.A=!0,Yd(e)})),e.h.m(e.g,"ended",(function(){new Sn((function(){e.g&&e.g.ended&&(e.A=!0,Yd(e))})).S(oh)}))}function qd(e){e.o=0,e.D=!0,e.K=0!=cast.receiver.CastReceiverManager.getInstance().getSenders().length,Yd(e)}function Yd(e){var t;F((function(n){return 1==n.g?S(n,Promise.resolve(),2):e.i?(t=new W("caststatuschanged"),e.dispatchEvent(t),Qd(e)||rh(e),void A(n)):n["return"]()}))}function Xd(e,t,n){var i,r,a,o,s,u,l,c,d,h;F((function(f){switch(f.g){case 1:for(i in t.player)r=t.player[i],e.i[i](r);return e.I(n),a=e.g.autoplay,t.manifest?(e.g.autoplay=!1,x(f,5),S(f,e.i.load(t.manifest,t.startTime),7)):S(f,Promise.resolve(),3);case 7:I(f,3);break;case 5:return o=k(f),s=Tc,u=new W(s,{detail:o}),e.i&&e.i.dispatchEvent(u),f["return"]();case 3:if(!e.i)return f["return"]();for(l in t.video)c=t.video[l],e.g[l]=c;for(d in t.playerAfterLoad)h=t.playerAfterLoad[d],e.i[d](h);e.g.autoplay=a,t.manifest&&(e.g.play(),rh(e)),A(f)}}))}function $d(e,t,n){e.i&&(Jd(e),ih(e,{type:"event",targetName:t,event:n},e.l))}function Jd(e){e.L.S(ah);for(var t={video:{},player:{}},n=d(dd),i=n.next();!i.done;i=n.next())i=i.value,t.video[i]=e.g[i];if(e.i.Y())for(var r in gd)0==e.o%gd[r]&&(t.player[r]=e.i[r]());for(var a in pd)0==e.o%pd[a]&&(t.player[a]=e.i[a]());(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),e.H&&(e.o+=1),ih(e,{type:"update",update:t},e.l),Qd(e)}function Qd(e){return!(!e.D||!e.g.duration&&!e.i.Y())&&(Zd(e),e.D=!1,!0)}function Zd(e,t){var n={contentId:e.i.Pd(),streamType:e.i.Y()?"LIVE":"BUFFERED",contentType:""};e.i.Y()||(n.duration=e.g.duration),e.j&&(n.metadata=e.j),rh(e,void 0===t?0:t,n)}function eh(e,t){var n=ud(t.data);switch(n.type){case"init":e.o=0,e.H=!1,e.D=!0,Xd(e,n.initState,n.appData),Jd(e);break;case"appData":e.I(n.appData);break;case"set":var i=n.targetName,r=n.property;if(n=n.value,"video"==i){var a=cast.receiver.CastReceiverManager.getInstance();if("volume"==r){a.setSystemVolumeLevel(n);break}if("muted"==r){a.setSystemVolumeMuted(n);break}}e.O[i][r]=n;break;case"call":i=e.O[n.targetName],i[n.methodName].apply(i,n.args);break;case"asyncCall":i=n.targetName,r=n.methodName,"player"==i&&"load"==r&&(e.o=0,e.H=!1);var o=n.id,s=t.senderId;a=e.O[i],n=a[r].apply(a,n.args),"player"==i&&"load"==r&&(n=n.then((function(){e.D=!0}))),n.then((function(){return nh(e,s,o,null)}),(function(t){return nh(e,s,o,t)}))}}function th(e,t){var n=ud(t.data);switch(n.type){case"PLAY":e.g.play(),rh(e);break;case"PAUSE":e.g.pause(),rh(e);break;case"SEEK":var i=n.currentTime,r=n.resumeState;null!=i&&(e.g.currentTime=Number(i)),r&&"PLAYBACK_START"==r?(e.g.play(),rh(e)):r&&"PLAYBACK_PAUSE"==r&&(e.g.pause(),rh(e));break;case"STOP":e.i.Ee().then((function(){e.i&&rh(e)}));break;case"GET_STATUS":Zd(e,Number(n.requestId));break;case"VOLUME":r=n.volume,i=r.level,r=r.muted;var a=e.g.volume,o=e.g.muted;null!=i&&(e.g.volume=Number(i)),null!=r&&(e.g.muted=r),a==e.g.volume&&o==e.g.muted||rh(e);break;case"LOAD":e.o=0,e.H=!1,e.D=!1,i=n.media,r=n.currentTime,a=e.R(i.contentId),o=n.autoplay||!0,e.I(i.customData),o&&(e.g.autoplay=!0),e.i.load(a,r).then((function(){e.i&&Zd(e)}))["catch"]((function(t){var i="LOAD_FAILED";7==t.category&&7e3==t.code&&(i="LOAD_CANCELLED"),ih(e,{requestId:Number(n.requestId),type:i},e.B)}));break;default:ih(e,{requestId:Number(n.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.B)}}function nh(e,t,n,i){e.i&&ih(e,{type:"asyncComplete",id:n,error:i},e.l,t)}function ih(e,t,n,i){e.K&&(e=sd(t),i?n.getCastChannel(i).send(e):n.broadcast(e))}function rh(e,t,n){n=void 0===n?null:n;var i={mediaSessionId:0,playbackRate:e.g.playbackRate,playerState:e.A?sh:e.i.Hc()?lh:e.g.paused?ch:uh,currentTime:e.g.currentTime,supportedMediaCommands:63,volume:{level:e.g.volume,muted:e.g.muted}};n&&(i.media=n),ih(e,{requestId:void 0===t?0:t,type:"MEDIA_STATUS",status:[i]},e.B)}b(Rd,oe),i=Rd.prototype,i.destroy=function(e){return e&&this.g.Yb(),this.h&&(this.h.release(),this.h=null),e=[],this.i&&(e.push(this.i.destroy()),this.i=null),this.g&&(e.push(this.g.destroy()),this.g=null),this.B=this.o=this.j=null,Promise.all(e)},i.wb=function(){return this.o},i.ac=function(){return this.B},i.He=function(){return this.g.o&&Ld},i.ra=function(){return this.g.ra()},i.qd=function(){return this.g.qd()},i.cast=function(){var e,t=this;return F((function(n){return 1==n.g?(e=Fd(t),S(n,t.g.cast(e),2)):t.i?S(n,t.i.Ee(),0):n["return"]()}))},i.qe=function(e){this.g.qe(e)},i.vf=function(){Ed(this.g)},i.Yb=function(){this.g.Yb()},i.Le=function(e){var t=this;return F((function(n){if(1==n.g)return e==t.H?n["return"]():(t.H=e,t.g.Yb(),S(n,t.g.destroy(),2));t.g=null,t.g=new Td(e,(function(){return jd(t)}),(function(){return Bd(t)}),(function(e,n){return zd(t,e,n)}),(function(){return Gd(t)}),(function(){return Fd(t)})),t.g.init(),A(n)}))},H("shaka.cast.CastProxy",Rd),Rd.prototype.changeReceiverId=Rd.prototype.Le,Rd.prototype.forceDisconnect=Rd.prototype.Yb,Rd.prototype.suggestDisconnect=Rd.prototype.vf,Rd.prototype.setAppData=Rd.prototype.qe,Rd.prototype.cast=Rd.prototype.cast,Rd.prototype.receiverName=Rd.prototype.qd,Rd.prototype.isCasting=Rd.prototype.ra,Rd.prototype.canCast=Rd.prototype.He,Rd.prototype.getPlayer=Rd.prototype.ac,Rd.prototype.getVideo=Rd.prototype.wb,Rd.prototype.destroy=Rd.prototype.destroy,b(Hd,oe),i=Hd.prototype,i.isConnected=function(){return this.K},i.xg=function(){return this.A},i.Xg=function(e){this.j=e},i.Kf=function(){this.j=null},i.Yg=function(e){this.j||(this.j={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.j.title=e},i.Wg=function(e){this.j||(this.j={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.j.images=[{url:e}]},i.Vg=function(e){this.j||(this.j={}),this.j.artist=e,this.j.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},i.destroy=function(){var e,t,n=this;return F((function(i){if(1==i.g)return n.h&&(n.h.release(),n.h=null),e=[],n.i&&(e.push(n.i.destroy()),n.i=null),n.L&&(n.L.stop(),n.L=null),n.g=null,n.O=null,n.I=null,n.K=!1,n.A=!0,n.l=null,n.B=null,S(i,Promise.all(e),2);t=cast.receiver.CastReceiverManager.getInstance(),t.stop(),A(i)}))},H("shaka.cast.CastReceiver",Hd),Hd.prototype.destroy=Hd.prototype.destroy,Hd.prototype.setContentArtist=Hd.prototype.Vg,Hd.prototype.setContentImage=Hd.prototype.Wg,Hd.prototype.setContentTitle=Hd.prototype.Yg,Hd.prototype.clearContentMetadata=Hd.prototype.Kf,Hd.prototype.setContentMetadata=Hd.prototype.Xg,Hd.prototype.isIdle=Hd.prototype.xg,Hd.prototype.isConnected=Hd.prototype.isConnected;var ah=.5,oh=5,sh="IDLE",uh="PLAYING",lh="BUFFERING",ch="PAUSED";function dh(e){var t=this;this.g=[],this.h=[],this.data=[],(new ua).box("moov",la).X("pssh",(function(e){if(!(1<e.version)){var n=Ut(e.reader.U,-12,e.size);if(t.data.push(n),t.g.push(nn(e.reader.xb(16))),0<e.version){n=e.reader.P(),n=d(de(n));for(var i=n.next();!i.done;i=n.next())i=nn(e.reader.xb(16)),t.h.push(i)}}})).parse(e)}function hh(e,t){var n=e.length,i=t.length+16+n,r=new Uint8Array(i),a=Ot(r),o=0;return a.setUint32(o,i),o+=4,a.setUint32(o,1886614376),o+=4,a.setUint32(o,0),o+=4,r.set(t,o),o+=t.length,a.setUint32(o,n),r.set(e,o+4),r}function fh(e){if(!e)return e;var t=new dh(e);if(1>=t.data.length)return e;e=[];var n={};t=d(t.data);for(var i=t.next();!i.done;n={Qc:n.Qc},i=t.next())n.Qc=i.value,e.some(function(e){return function(t){return Dt(t,e.Qc)}}(n))||e.push(n.Qc);return rn.apply(Jt,h(e))}function ph(e,t){var n=mh(e,t);return 1!=n.length?null:n[0]}function gh(e,t,n){return e=yh(e,t,n),1!=e.length?null:e[0]}function mh(e,t){return Array.from(e.childNodes).filter((function(e){return e instanceof Element&&e.tagName==t}))}function vh(e){return Array.from(e.childNodes).filter((function(e){return e instanceof Element}))}function yh(e,t,n){return Array.from(e.childNodes).filter((function(e){return e instanceof Element&&e.localName==n&&e.namespaceURI==t}))}function bh(e,t,n){return e.hasAttributeNS(t,n)?e.getAttributeNS(t,n):null}function Th(e){return Array.from(e.childNodes).every(Eh)?e.textContent.trim():null}function Eh(e){return e.nodeType==Node.TEXT_NODE||e.nodeType==Node.CDATA_SECTION_NODE}function wh(e,t,n,i){i=void 0===i?null:i;var r=null;return e=e.getAttribute(t),null!=e&&(r=n(e)),null==r?i:r}function Sh(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:Math.floor(e/1e3)):null}function Ah(e){return e?(e=/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(e),e?(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null):null):null}function xh(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return t?(e=Number(t[1]),isFinite(e)?(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null):null):null}function _h(e){return e=Number(e),0===e%1?e:null}function Ih(e){return e=Number(e),0===e%1&&0<e?e:null}function kh(e){return e=Number(e),0===e%1&&0<=e?e:null}function Ch(e){return e=Number(e),isNaN(e)?null:e}function Lh(e){var t;return e=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e),isNaN(e)?null:e}function Ph(e,t){var n=new DOMParser,i=null;try{i=n.parseFromString(e,"text/xml")}catch(r){return null}return n=i.documentElement,!n||n.getElementsByTagName("parsererror").length||i.documentElement.tagName!=t?null:n}function Nh(e,t){try{var n=Ht(e);return Ph(n,t)}catch(i){return null}}function Dh(e,t,n){var i=jh(e),r=null;e=[];var a=[],o=new Set(i.map((function(e){return e.keyId})));if(o["delete"](null),1<o.size)throw new Ie(2,4,4010);if(t||(a=i.filter((function(e){return"urn:mpeg:dash:mp4protection:2011"!=e.nf||(r=e.init||r,!1)})),a.length&&(e=Fh(r,a,n),0==e.length&&(e=[Fe("",r)]))),i.length&&(t||!a.length))for(e=[],t=d(Object.values(n)),n=t.next();!n.done;n=t.next())n=n.value,"org.w3.clearkey"!=n&&e.push(Fe(n,r));if(o=Array.from(o)[0]||null)for(t=d(e),n=t.next();!n.done;n=t.next())for(n=d(n.value.initData),i=n.next();!i.done;i=n.next())i.value.keyId=o;return{Oe:o,si:r,drmInfos:e,Se:!0}}function Rh(e,t,n,i){var r=Dh(e,n,i);if(t.Se)e=1==t.drmInfos.length&&!t.drmInfos[0].keySystem,n=0==r.drmInfos.length,(0==t.drmInfos.length||e&&!n)&&(t.drmInfos=r.drmInfos),t.Se=!1;else if(0<r.drmInfos.length&&(t.drmInfos=t.drmInfos.filter((function(e){return r.drmInfos.some((function(t){return t.keySystem==e.keySystem}))})),0==t.drmInfos.length))throw new Ie(2,4,4008);return r.Oe||t.Oe}function Mh(e){var t=0,n=Ot(e),i=n.getUint32(t,!0);if(i!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){i=n.getUint16(e,!0),e+=2;var r=n.getUint16(e,!0);if(e+=2,0!=(1&r)||r+e>n.byteLength){n=[];break e}var a=Ut(n,e,r);t.push({type:i,value:a}),e+=r}n=t}return n}function Uh(e){e=d(e.getElementsByTagName("DATA"));for(var t=e.next();!t.done;t=e.next()){t=d(t.value.childNodes);for(var n=t.next();!n.done;n=t.next())if(n=n.value,n instanceof Element&&"LA_URL"==n.tagName)return n.textContent}return""}function Oh(e){return e=gh(e.node,"urn:microsoft:playready","pro"),e?(e=en(e.textContent),e=Mh(e).filter((function(e){return e.type===Gh}))[0],e?(e=Wt(e.value,!0),(e=Ph(e,"WRMHEADER"))?Uh(e):""):""):""}function Fh(e,t,n){var i=[];t=d(t);for(var r=t.next();!r.done;r=t.next()){r=r.value;var a=n[r.nf];if(a){var o;if(o=gh(r.node,"urn:microsoft:playready","pro")){o=en(o.textContent);var s=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);o=[{initData:hh(o,s),initDataType:"cenc",keyId:r.keyId}]}else o=null;o=Fe(a,r.init||e||o),(a=Vh.get(a))&&(o.licenseServerUri=a(r)),i.push(o)}}return i}function jh(e){var t=[];e=d(e);for(var n=e.next();!n.done;n=e.next())(n=Bh(n.value))&&t.push(n);return t}function Bh(e){var t=e.getAttribute("schemeIdUri"),n=bh(e,"urn:mpeg:cenc:2013","default_KID"),i=yh(e,"urn:mpeg:cenc:2013","pssh").map(Th);if(!t)return null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase(),n.includes(" ")))throw new Ie(2,4,4009);var r=[];try{r=i.map((function(e){return{initDataType:"cenc",initData:en(e),keyId:null}}))}catch(a){throw new Ie(2,4,4007)}return{node:e,nf:t,keyId:n,init:0<r.length?r:null}}var Gh=1,Vh=(new Map).set("com.widevine.alpha",(function(e){return(e=gh(e.node,"urn:microsoft","laurl"))&&e.getAttribute("licenseUrl")||""})).set("com.microsoft.playready",Oh).set("com.microsoft.playready.recommendation",Oh).set("com.microsoft.playready.software",Oh).set("com.microsoft.playready.hardware",Oh);function Kh(t,n,i,r,a){var o={RepresentationID:n,Number:i,Bandwidth:r,Time:a};return t.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,(function(t,n,i,r){if("$$"==t)return"$";var a=o[n];if(null==a)return t;switch("RepresentationID"==n&&i&&(i=void 0),"Time"==n&&(a=Math.round(a)),r){case void 0:case"d":case"i":case"u":t=a.toString();break;case"o":t=a.toString(8);break;case"x":t=a.toString(16);break;case"X":t=a.toString(16).toUpperCase();break;default:t=a.toString()}return i=e.parseInt(i,10)||1,Array(Math.max(0,i-t.length)+1).join("0")+t}))}function zh(e,t){var n=Hh(e,t,"timescale"),i=1;n&&(i=Ih(n)||1);var r=Hh(e,t,"duration");n=Ih(r||""),"image"==e.N.contentType&&(n=Ch(r||"")),n&&(n/=i);var a=Hh(e,t,"startNumber");r=Number(Hh(e,t,"presentationTimeOffset"))||0;var o=kh(a||"");null!=a&&null!=o||(o=1);var s=Wh(e,t,"SegmentTimeline");if(a=null,s){a=i;var u=e.$.duration||1/0,l=mh(s,"S");s=[];var c=-r;l=d(he(l));for(var h=l.next();!h.done;h=l.next()){h=h.value;var f=h.item,p=h.next,g=wh(f,"t",kh);h=wh(f,"d",kh);var m=wh(f,"r",_h);if(null!=g&&(g-=r),!h)break;if(f=null!=g?g:c,g=m||0,0>g)if(p){if(p=wh(p,"t",kh),null==p)break;if(f>=p)break;g=Math.ceil((p-f)/h)-1}else{if(1/0==u)break;if(f/a>=u)break;g=Math.ceil((u*a-f)/h)-1}for(0<s.length&&f!=c&&(s[s.length-1].end=f/a),p=d(de(g+1)),g=p.next();!g.done;g=p.next())c=f+h,s.push({start:f/a,end:c/a,eh:f}),f=c}a=s}return{timescale:i,Aa:n,kc:o,ob:r/i||0,Fe:r,timeline:a}}function Hh(e,t,n){return[t(e.N),t(e.Da),t(e.wa)].filter(Me).map((function(e){return e.getAttribute(n)})).reduce((function(e,t){return e||t}))}function Wh(e,t,n){return[t(e.N),t(e.Da),t(e.wa)].filter(Me).map((function(e){return ph(e,n)})).reduce((function(e,t){return e||t}))}function qh(e,t,n,i,r,a){for(var o=bh(e,"http://www.w3.org/1999/xlink","href"),s=bh(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",u=d(Array.from(e.attributes)),l=u.next();!l.done;l=u.next())l=l.value,"http://www.w3.org/1999/xlink"==l.namespaceURI&&e.removeAttributeNS(l.namespaceURI,l.localName);if(5<=a)return Ui(new Ie(2,4,4028));if("onLoad"!=s)return Ui(new Ie(2,4,4027));var c=Oe([i],[o]);return r.request(0,Yi(c,t)).qa((function(i){if(i=Nh(i.data,e.tagName),!i)return Ui(new Ie(2,4,4001,o));for(;e.childNodes.length;)e.removeChild(e.childNodes[0]);for(;i.childNodes.length;){var s=i.childNodes[0];i.removeChild(s),e.appendChild(s)}for(i=d(Array.from(i.attributes)),s=i.next();!s.done;s=i.next())e.setAttributeNode(s.value.cloneNode(!1));return Yh(e,t,n,c[0],r,a+1)}))}function Yh(e,t,n,i,r,a){if(a=void 0===a?0:a,bh(e,"http://www.w3.org/1999/xlink","href")){var o=qh(e,t,n,i,r,a);return n&&(o=o.qa(void 0,(function(){return Yh(e,t,n,i,r,a)}))),o}o=[];for(var s=d(Array.from(e.childNodes)),u=s.next();!u.done;u=s.next())u=u.value,u instanceof Element&&("urn:mpeg:dash:resolve-to-zero:2013"==bh(u,"http://www.w3.org/1999/xlink","href")?e.removeChild(u):"SegmentTimeline"!=u.tagName&&o.push(Yh(u,t,n,i,r,a)));return Bi(o).qa((function(){return e}))}function Xh(e,t,n,i,r,a,o){var s,u=(new ua).X("sidx",(function(e){s=$h(t,i,r,a,o,n,e)}));if(e&&u.parse(e),s)return s;throw new Ie(2,3,3004)}function $h(e,t,n,i,r,a,o){var s=[];o.reader.skip(4);var u=o.reader.P();if(0==u)throw new Ie(2,3,3005);if(0==o.version)var l=o.reader.P(),c=o.reader.P();else l=o.reader.jc(),c=o.reader.jc();o.reader.skip(2);var h=o.reader.ic();for(e=e+o.size+c,h=d(de(h)),c=h.next();!c.done;c=h.next()){var f=o.reader.P();c=(2147483648&f)>>>31,f&=2147483647;var p=o.reader.P();if(o.reader.skip(4),1==c)throw new Ie(2,3,3006);s.push(new os(l/u+n,(l+p)/u+n,(function(){return a}),e,e+f-1,t,n,i,r)),l+=p,e+=f}return o.parser.stop(),s}function Jh(e){this.h=Ot(e),this.g=new aa(this.h,0)}function Qh(e){var t=Zh(e);if(7<t.length)throw new Ie(2,3,3002);var n=0;t=d(t);for(var i=t.next();!i.done;i=t.next())n=256*n+i.value;t=Zh(e);e:{i=d(ef);for(var r=i.next();!r.done;r=i.next())if(Dt(t,new Uint8Array(r.value))){i=!0;break e}i=!1}if(i)t=e.h.byteLength-e.g.ka();else{if(8==t.length&&224&t[1])throw new Ie(2,3,3001);i=0,r=d(he(t));for(var a=r.next();!a.done;a=r.next()){a=a.value;var o=a.item;i=0==a.za?o&(1<<8-t.length)-1:256*i+o}t=i}return t=e.g.ka()+t<=e.h.byteLength?t:e.h.byteLength-e.g.ka(),i=Ot(e.h,e.g.ka(),t),e.g.skip(t),new tf(n,i)}function Zh(e){var t=e.g.ka(),n=e.g.ma();if(0==n)throw new Ie(2,3,3002);return n=8-Math.floor(Math.log2(n)),e.g.skip(n-1),Ut(e.h,t,n)}Jh.prototype.Ga=function(){return this.g.Ga()};var ef=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function tf(e,t){this.id=e,this.g=t}function nf(e){if(8<e.g.byteLength)throw new Ie(2,3,3002);if(8==e.g.byteLength&&224&e.g.getUint8(0))throw new Ie(2,3,3001);for(var t=0,n=d(de(e.g.byteLength)),i=n.next();!i.done;i=n.next())i=e.g.getUint8(i.value),t=256*t+i;return t}function rf(e,t,n,i,r,a,o,s,u){function l(){return r}var c=[];e=new Jh(e.g);for(var d=null,h=null;e.Ga();){var f=Qh(e);if(187==f.id){var p=af(f);p&&(f=n*p.fh,p=t+p.Og,null!=d&&c.push(new os(d+o,f+o,l,h,p-1,a,o,s,u)),d=f,h=p)}}return null!=d&&c.push(new os(d+o,i+o,l,h,null,a,o,s,u)),c}function af(e){var t=new Jh(e.g);if(e=Qh(t),179!=e.id)throw new Ie(2,3,3013);if(e=nf(e),t=Qh(t),183!=t.id)throw new Ie(2,3,3012);t=new Jh(t.g);for(var n=0;t.Ga();){var i=Qh(t);if(241==i.id){n=nf(i);break}}return{fh:e,Og:n}}function of(e,t){var n=Wh(e,t,"Initialization");if(!n)return null;var i=e.N.Sa,r=n.getAttribute("sourceURL");r&&(i=Oe(e.N.Sa,[r])),r=0;var a=null;return(n=wh(n,"range",xh))&&(r=n.start,a=n.end),new rs((function(){return i}),r,a)}function sf(e,t){var n=Number(Hh(e,lf,"presentationTimeOffset"))||0,i=Hh(e,lf,"timescale"),r=1;i&&(r=Ih(i)||1);var a=n/r||0,o=of(e,lf);df(e,o);var s=Ki(e);return{Zb:function(){var e=Wh(s,lf,"RepresentationIndex"),n=s.N.Sa;return e&&(e=e.getAttribute("sourceURL"))&&(n=Oe(s.N.Sa,[e])),e=cf(s),uf(s,t,o,n,e.start,e.end,a)}}}function uf(e,t,n,i,r,a,o){var s,u,l,c,d,h,f,p,g,m,v,y,b,T,E;return F((function(w){if(1==w.g)return s=e.presentationTimeline,u=!e.Cb||!e.$.bf,l=e.$.start,c=e.$.duration,d=e.N.mimeType.split("/")[1],h=t,f=null,p=[h(i,r,a),"webm"==d?h(n.Fa(),n.Ba,n.va):null],h=null,S(w,Promise.all(p),2);if(g=w.h,m=g[0],v=g[1]||null,y=null,b=l-o,T=l,E=c?l+c:1/0,"mp4"==d)var A=Xh(m,r,i,n,b,T,E);else{if(A=new Jh(v),440786851!=Qh(A).id)throw new Ie(2,3,3008);var x=Qh(A);if(408125543!=x.id)throw new Ie(2,3,3009);A=x.g.byteOffset,x=new Jh(x.g);for(var _=null;x.Ga();){var I=Qh(x);if(357149030==I.id){_=I;break}}if(!_)throw new Ie(2,3,3010);for(_=new Jh(_.g),I=1e6,x=null;_.Ga();){var k=Qh(_);if(2807729==k.id)I=nf(k);else if(17545==k.id)if(4==k.g.byteLength)x=k.g.getFloat32(0);else{if(8!=k.g.byteLength)throw new Ie(2,3,3003);x=k.g.getFloat64(0)}}if(null==x)throw new Ie(2,3,3011);if(_=I/1e9,x*=_,I=Qh(new Jh(m)),475249515!=I.id)throw new Ie(2,3,3007);A=rf(I,A,_,x,i,n,b,T,E)}return y=A,s.ec(y),f=new Ls(y),u&&f.ub(T,E,!0),w["return"](f)}))}function lf(e){return e.Mc}function cf(e){var t=Wh(e,lf,"RepresentationIndex");return e=Hh(e,lf,"indexRange"),e=xh(e||""),t&&(e=wh(t,"range",xh,e)),e}function df(e,t){if(hf(e,t),!cf(e))throw new Ie(2,4,4002)}function hf(e,t){var n=e.N.mimeType.split("/")[1];if(e.N.contentType!=Ge&&"mp4"!=n&&"webm"!=n)throw new Ie(2,4,4006);if("webm"==n&&!t)throw new Ie(2,4,4005)}function ff(e,t){var n=of(e,pf),i=gf(e);if(!i.Aa&&!i.timeline&&1<i.cc.length)throw new Ie(2,4,4002);if(!i.Aa&&!e.$.duration&&!i.timeline&&1==i.cc.length)throw new Ie(2,4,4002);if(i.timeline&&0==i.timeline.length)throw new Ie(2,4,4002);var r=null,a=null;return e.wa.id&&e.N.id&&(a=e.wa.id+","+e.N.id,r=t[a]),n=mf(e.$.start,e.$.duration,e.N.Sa,i,n),i=!r,r?r.dc(n,e.presentationTimeline.vb()):(e.presentationTimeline.ec(n),r=new Ls(n),a&&e.Cb&&(t[a]=r)),e.Cb&&e.$.bf||r.ub(e.$.start,e.$.duration?e.$.start+e.$.duration:1/0,i),{Zb:function(){return Promise.resolve(r)}}}function pf(e){return e.yb}function gf(e){var t=vf(e);e=zh(e,pf);var n=e.kc;0==n&&(n=1);var i=0;return e.Aa?i=e.Aa*(n-1):e.timeline&&0<e.timeline.length&&(i=e.timeline[0].start),{Aa:e.Aa,startTime:i,kc:n,ob:e.ob,timeline:e.timeline,cc:t}}function mf(e,t,n,i,r){var a=i.cc.length;i.timeline&&i.timeline.length!=i.cc.length&&(a=Math.min(i.timeline.length,i.cc.length));var o=e-i.ob,s=t?e+t:1/0,u=[],l=i.startTime,c={};a=d(de(a));for(var h=a.next();!h.done;c={Ed:c.Ed},h=a.next()){h=h.value;var f=i.cc[h];c.Ed=Oe(n,[f.Cg]);var p=void 0;p=null!=i.Aa?l+i.Aa:i.timeline?i.timeline[h].end:l+t,u.push(new os(e+l,e+p,function(e){return function(){return e.Ed}}(c),f.start,f.end,r,o,e,s)),l=p}return u}function vf(e){return[e.N.yb,e.Da.yb,e.wa.yb].filter(Me).map((function(e){return mh(e,"SegmentURL")})).reduce((function(e,t){return 0<e.length?e:t})).map((function(t){t.getAttribute("indexRange")&&!e.Ye&&(e.Ye=!0);var n=t.getAttribute("media");return t=wh(t,"mediaRange",xh,{start:0,end:null}),{Cg:n,start:t.start,end:t.end}}))}function yf(e,t,n,i,r,a){var o=Af(e),s=Tf(e);Ef(s);var u=Ki(e);if(s.Gc)return hf(e,o),{Zb:function(){var e=Kh(s.Gc,u.N.id,null,u.bandwidth||null,null);return e=Oe(u.N.Sa,[e]),uf(u,t,o,e,0,null,s.ob)}};if(s.Aa)return i||(e.presentationTimeline.ae(s.Aa),e.presentationTimeline.be(e.$.start)),{Zb:function(){return wf(u,s,r,o,a)}};var l=null;i=null,e.wa.id&&e.N.id&&(i=e.wa.id+","+e.N.id,l=n[i]);var c=Sf(u,s,o),d=e.$.start,h=e.$.duration?e.$.start+e.$.duration:1/0,f=1/0!=h;return l?(f&&new Ls(c).ub(d,h,!0),l.dc(c,e.presentationTimeline.vb())):(e.presentationTimeline.ec(c),l=new Ls(c),i&&e.Cb&&(n[i]=l)),f&&l.ub(d,h),{Zb:function(){return Promise.resolve(l)}}}function bf(e){return e.Nc}function Tf(e){var t=zh(e,bf),n=Hh(e,bf,"media");return e=Hh(e,bf,"index"),{Aa:t.Aa,timescale:t.timescale,kc:t.kc,ob:t.ob,Fe:t.Fe,timeline:t.timeline,Zd:n,Gc:e}}function Ef(e){var t=e.Gc?1:0;if(t+=e.timeline?1:0,t+=e.Aa?1:0,0==t)throw new Ie(2,4,4002);if(1!=t&&(e.Gc&&(e.timeline=null),e.Aa=null),!e.Gc&&!e.Zd)throw new Ie(2,4,4002)}function wf(e,t,n,i,r){function a(e){var n=(e-p)*f,r=n+t.ob,a=n+l;n=a+f;var o=Math.min(n,s());return a=new os(a,o,(function(){var t=Kh(m,y,e,v,r*g);return Oe(b,[t])}),0,null,i,T,l,s()),a.j=n,a}function o(){var e=[Math.max(u.vb(),l),Math.min(u.Fb(),s())].map((function(e){return e-l}));return[Math.ceil(e[0]/f),Math.ceil(e[1]/f)-1].map((function(e){return e+p}))}function s(){var e=null!=c&&r[c]||h;return e?l+e:1/0}var u=e.presentationTimeline,l=e.$.start,c=e.wa.id,h=e.$.duration,f=t.Aa,p=t.kc,g=t.timescale,m=t.Zd,v=e.bandwidth||null,y=e.N.id,b=e.N.Sa,T=l-t.ob,E=o();e=e.Cb?Math.max(E[0],E[1]-n+1):E[0],E=E[1],n=[];for(var w=e;w<=E;++w){var S=a(w);n.push(S)}var A=new Ls(n);if(n=u.Fb()<s(),w=u.Y(),n||w){var x=Math.max(e,E+1);A.ud(f,(function(){var e=u.vb();A.Db(e);var t=d(o());t.next(),t=t.next().value;for(var n=[];x<=t;){var i=a(x);n.push(i),x++}return e>s()&&!n.length?null:n}))}return Promise.resolve(A)}function Sf(e,t,n){var i=e.$.start,r=e.$.duration,a=i-t.ob;r=r?i+r:1/0;for(var o=[],s={},u=d(he(t.timeline)),l=u.next();!l.done;s={Dd:s.Dd,Hd:s.Hd,Kd:s.Kd,zd:s.zd,Md:s.Md,Bd:s.Bd},l=u.next()){l=l.value;var c=l.item,h=c.start,f=c.eh;c=c.end,s.Kd=l.za+t.kc,s.Md=f+t.Fe,s.Hd=e.N.id,s.zd=e.bandwidth||null,s.Dd=t.Zd,s.Bd=e.N.Sa,o.push(new os(i+h,i+c,function(e){return function(){var t=Kh(e.Dd,e.Hd,e.Kd,e.zd||null,e.Md);return Oe(e.Bd,[t]).map((function(e){return e.toString()}))}}(s),0,null,n,a,i,r))}return o}function Af(e){var t=Hh(e,bf,"initialization");if(!t)return null;var n=e.N.id,i=e.bandwidth||null,r=e.N.Sa;return new rs((function(){var e=Kh(t,n,null,i,null);return Oe(r,[e])}),0,null)}function xf(){this.l=[],this.g=[],this.h=[],this.j=[],this.i=[],this.o=new Set}function _f(e,t,n){var i,r,a,o,s,u,l,c,h,f,p,g,m,v,y,b,T,E,w,x,_,I,k,C,L,P,N,D,R,M,U,O,j;return F((function(F){switch(F.g){case 1:if(i=Ve,If(t),Cf(t),kf(t),Lf(t),!n&&1==t.length){r=t[0],e.g=r.Yc,e.h=r.wd,e.j=r.textStreams,e.i=r.imageStreams,F.C(2);break}for(a=-1,o=d(he(t)),s=o.next();!s.done;s=o.next())u=s.value,l=u.za,c=u.item,e.o.has(c.id)||(e.o.add(c.id),-1==a&&(a=l));if(-1==a)return F["return"]();for(h=t.map((function(e){return e.Yc})),f=t.map((function(e){return e.wd})),p=t.map((function(e){return e.textStreams})),g=t.map((function(e){return e.imageStreams})),m=d(p),v=m.next();!v.done;v=m.next())y=v.value,y.push($f(i.oa));for(b=d(g),T=b.next();!T.done;T=b.next())E=T.value,E.push($f(i.tc));return S(F,Nf(e.g,h,a,Of,jf),3);case 3:return S(F,Nf(e.h,f,a,Of,jf),4);case 4:return S(F,Nf(e.j,p,a,Of,jf),5);case 5:return S(F,Nf(e.i,g,a,Of,jf),2);case 2:if(w=0,x=[],e.h.length&&e.g.length)for(P=d(e.g),N=P.next();!N.done;N=P.next())for(D=N.value,R=d(e.h),M=R.next();!M.done;M=R.next())U=M.value,O=Vr(D.drmInfos,U.drmInfos),D.drmInfos.length&&U.drmInfos.length&&!O.length||(j=w++,x.push({id:j,language:D.language,primary:D.primary,audio:D,video:U,bandwidth:(D.bandwidth||0)+(U.bandwidth||0),drmInfos:O,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(_=e.h.concat(e.g),I=d(_),k=I.next();!k.done;k=I.next())C=k.value,L=w++,x.push({id:L,language:C.language,primary:C.primary,audio:C.type==i.zb?C:null,video:C.type==i.fb?C:null,bandwidth:C.bandwidth||0,drmInfos:C.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});e.l=x,A(F)}}))}function If(e){e=d(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;for(var n=[],i=d(t.Yc),r=i.next();!r.done;r=i.next()){r=r.value;for(var a=!1,o=d(n),s=o.next();!s.done;s=o.next())s=s.value,r.id!=s.id&&r.channelsCount==s.channelsCount&&r.language==s.language&&r.bandwidth==s.bandwidth&&r.label==s.label&&r.codecs==s.codecs&&r.mimeType==s.mimeType&&ct(r.roles,s.roles)&&r.audioSamplingRate==s.audioSamplingRate&&r.primary==s.primary&&(a=!0);a||n.push(r)}t.Yc=n}}function kf(e){e=d(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;for(var n=[],i=d(t.textStreams),r=i.next();!r.done;r=i.next()){r=r.value;for(var a=!1,o=d(n),s=o.next();!s.done;s=o.next())s=s.value,r.id!=s.id&&r.language==s.language&&r.label==s.label&&r.codecs==s.codecs&&r.mimeType==s.mimeType&&ct(r.roles,s.roles)&&(a=!0);a||n.push(r)}t.textStreams=n}}function Cf(e){e=d(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;for(var n=[],i=d(t.wd),r=i.next();!r.done;r=i.next()){r=r.value;for(var a=!1,o=d(n),s=o.next();!s.done;s=o.next())s=s.value,r.id!=s.id&&r.width==s.width&&r.frameRate==s.frameRate&&r.codecs==s.codecs&&r.mimeType==s.mimeType&&r.label==s.label&&ct(r.roles,s.roles)&&gr(r.closedCaptions,s.closedCaptions)&&r.bandwidth==s.bandwidth&&(a=!0);a||n.push(r)}t.wd=n}}function Lf(e){e=d(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;for(var n=[],i=d(t.imageStreams),r=i.next();!r.done;r=i.next()){r=r.value;for(var a=!1,o=d(n),s=o.next();!s.done;s=o.next())s=s.value,r.id!=s.id&&r.width==s.width&&r.codecs==s.codecs&&r.mimeType==s.mimeType&&(a=!0);a||n.push(r)}t.imageStreams=n}}function Pf(e){var t,n,i,r,a,o,s,u,l,c,h,f,p,g,m,v,y,b,T,E,w,A,x,_,I,k,C;return F((function(L){switch(L.g){case 1:if(t=Ve,1==e.length)return L["return"](e[0]);for(n=e.map((function(e){return e.filter((function(e){return e.type==t.zb}))})),i=e.map((function(e){return e.filter((function(e){return e.type==t.fb}))})),r=e.map((function(e){return e.filter((function(e){return e.type==t.oa}))})),a=e.map((function(e){return e.filter((function(e){return e.type==t.tc}))})),o=d(r),s=o.next();!s.done;s=o.next())u=s.value,u.push(Xf(t.oa));for(l=d(a),c=l.next();!c.done;c=l.next())h=c.value,h.push(Xf(t.tc));return S(L,Nf([],n,0,Ff,Bf),2);case 2:return f=L.h,S(L,Nf([],i,0,Ff,Bf),3);case 3:return p=L.h,S(L,Nf([],r,0,Ff,Bf),4);case 4:return g=L.h,S(L,Nf([],a,0,Ff,Bf),5);case 5:if(m=L.h,v=0,p.length&&f.length)for(w=d(f),A=w.next();!A.done;A=w.next())for(x=A.value,_=d(p),I=_.next();!I.done;I=_.next())k=I.value,C=v++,k.variantIds.push(C),x.variantIds.push(C);else for(y=p.concat(f),b=d(y),T=b.next();!T.done;T=b.next())E=T.value,E.variantIds=[v++];return L["return"](p.concat(f).concat(g).concat(m))}}))}function Nf(e,t,n,i,r){var a,o,s,u,l,c,h,f,p,g,m,v,y,b,T,E,w,A,x,_,I,k,C,L;return F((function(P){switch(P.g){case 1:for(a=Ve,o=[],s=d(he(t)),u=s.next();!u.done;u=s.next())l=u.value,c=l.za,h=l.item,c>=n?o.push(new Set(h)):o.push(new Set);f=d(e),p=f.next();case 2:if(p.done){P.C(4);break}return g=p.value,S(P,Df(g,t,n,r,o),5);case 5:if(m=P.h,!m)throw new Ie(2,4,4037);p=f.next(),P.C(2);break;case 4:v=d(o),y=v.next();case 6:if(y.done){P.C(8);break}b=y.value,T=d(b),E=T.next();case 9:if(E.done){y=v.next(),P.C(6);break}return w=E.value,S(P,Mf(w,t,i,r,o),12);case 12:(A=P.h)&&e.push(A),E=T.next(),P.C(9);break;case 8:for(x=d(o),y=x.next();!y.done;y=x.next())for(_=y.value,I={},k=d(_),E=k.next();!E.done;I={rb:I.rb},E=k.next())if(I.rb=E.value,C=I.rb.type==a.oa&&!I.rb.language,L=I.rb.type==a.tc&&!I.rb.tilesLayout,!C&&!L&&e.some(function(e){return function(t){return t.mimeType==e.rb.mimeType&&hn(t.codecs)==hn(e.rb.codecs)}}(I)))throw new Ie(2,4,4037);return P["return"](e)}}))}function Df(e,t,n,i,r){var a;return F((function(o){return 1==o.g?(a=Gf(t,e))?S(o,Rf(a),2):o["return"](!1):(Uf(e,a,n,i,r),o["return"](!0))}))}function Rf(e){var t=[];e=d(e);for(var n=e.next();!n.done;n=e.next())n=n.value,t.push(n.createSegmentIndex()),n.trickModeVideo&&!n.trickModeVideo.segmentIndex&&t.push(n.trickModeVideo.createSegmentIndex());return Promise.all(t)}function Mf(e,t,n,i,r){var a,o;return F((function(s){return 1==s.g?(a=n(e),(o=Gf(t,a))?a.createSegmentIndex?S(s,Rf(o),2):s.C(2):s["return"](null)):(Uf(a,o,0,i,r),s["return"](a))}))}function Uf(e,t,n,i,r){t=d(he(t));for(var a=t.next();!a.done;a=t.next()){var o=a.value;if(a=o.za,o=o.item,a>=n){i(e,o);var s=!0;"audio"==e.type&&0==Ye(e.language,o.language)&&(s=!1),s&&r[a]["delete"](o)}}}function Of(e){return e=Object.assign({},e),e.originalId=null,e.createSegmentIndex=function(){return Promise.resolve()},e.segmentIndex=new Ds,e.emsgSchemeIdUris=[],e.keyIds=new Set,e.closedCaptions=null,e.trickModeVideo=null,e}function Ff(e){return e=Object.assign({},e),e.keyIds=new Set,e.segments=[],e.variantIds=[],e.closedCaptions=null,e}function jf(e,t){e.roles=Array.from(new Set(e.roles.concat(t.roles))),t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=Array.from(new Set(e.emsgSchemeIdUris.concat(t.emsgSchemeIdUris))));var n=t.keyIds;if(n=new Set([].concat(h(e.keyIds),h(n))),e.keyIds=n,null==e.originalId?e.originalId=t.originalId:e.originalId+=","+(t.originalId||""),n=Vr(e.drmInfos,t.drmInfos),t.drmInfos.length&&e.drmInfos.length&&!n.length)throw new Ie(2,4,4038);if(e.drmInfos=n,e.encrypted=e.encrypted||t.encrypted,t.closedCaptions){e.closedCaptions||(e.closedCaptions=new Map),n=d(t.closedCaptions);for(var i=n.next();!i.done;i=n.next()){var r=d(i.value);i=r.next().value,r=r.next().value,e.closedCaptions.set(i,r)}}e.segmentIndex.l.push(t.segmentIndex),t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=Of(t.trickModeVideo),e.trickModeVideo.segmentIndex=e.segmentIndex.clone()),jf(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&jf(e.trickModeVideo,t)}function Bf(e,t){e.roles=Array.from(new Set(e.roles.concat(t.roles)));var n=t.keyIds;if(n=new Set([].concat(h(e.keyIds),h(n))),e.keyIds=n,e.encrypted=e.encrypted&&t.encrypted,e.segments.push.apply(e.segments,h(t.segments)),t.closedCaptions){e.closedCaptions||(e.closedCaptions=new Map),n=d(t.closedCaptions);for(var i=n.next();!i.done;i=n.next()){var r=d(i.value);i=r.next().value,r=r.next().value,e.closedCaptions.set(i,r)}}}function Gf(e,t){for(var n=[],i=d(e),r=i.next();!r.done;r=i.next()){var a=t,o={audio:Vf,video:Vf,text:Kf,image:zf}[a.type],s={audio:Hf,video:Wf,text:qf,image:Yf}[a.type],u=null;r=d(r.value);for(var l=r.next();!l.done;l=r.next())l=l.value,!o(a,l)||u&&!s(a,u,l)||(u=l);if(a=u,!a)return null;n.push(a)}return n}function Vf(e,t){var n;if(!(n=t.mimeType!=e.mimeType||hn(t.codecs)!=hn(e.codecs))&&(n=e.drmInfos)){n=e.drmInfos;var i=t.drmInfos;n=!(!n.length||!i.length||0<Vr(n,i).length)}return!n}function Kf(e,t){return!!e.language&&(!t.language||0!=Ye(e.language,t.language)&&t.kind==e.kind)}function zf(e){return!!e.tilesLayout}function Hf(e,t,n){if(e.id==n.id)return!0;var i=Ye(e.language,t.language),r=Ye(e.language,n.language);return r>i||!(r<i)&&(!(t.primary||!n.primary)||!(t.primary&&!n.primary)&&(e.roles.length?(i=t.roles.filter((function(t){return e.roles.includes(t)})),r=n.roles.filter((function(t){return e.roles.includes(t)})),r.length>i.length||!(r.length<i.length)&&n.roles.length<t.roles.length):!(n.roles.length||!t.roles.length)||!(n.roles.length&&!t.roles.length)&&(i=Jf(e.channelsCount,t.channelsCount,n.channelsCount),i==Zf||i!=tp&&(i=Jf(e.audioSamplingRate,t.audioSamplingRate,n.audioSamplingRate),i==Zf||i!=tp&&!(!e.bandwidth||Qf(e.bandwidth,t.bandwidth,n.bandwidth)!=Zf)))))}function Wf(e,t,n){if(e.id==n.id)return!0;var i=Jf(e.width*e.height,t.width*t.height,n.width*n.height);if(i==Zf)return!0;if(i==tp)return!1;if(e.frameRate){if(i=Jf(e.frameRate,t.frameRate,n.frameRate),i==Zf)return!0;if(i==tp)return!1}return!(!e.bandwidth||Qf(e.bandwidth,t.bandwidth,n.bandwidth)!=Zf)}function qf(e,t,n){if(e.id==n.id)return!0;var i=Ye(e.language,t.language),r=Ye(e.language,n.language);if(r>i)return!0;if(r<i)return!1;if(!t.primary&&n.primary)return!0;if(t.primary&&!n.primary)return!1;if(e.roles.length){if(i=t.roles.filter((function(t){return e.roles.includes(t)})),r=n.roles.filter((function(t){return e.roles.includes(t)})),r.length>i.length)return!0;if(r.length<i.length)return!1}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return n.mimeType==e.mimeType&&n.codecs==e.codecs&&(t.mimeType!=e.mimeType||t.codecs!=e.codecs)}function Yf(e,t,n){return e.id==n.id||Jf(e.width*e.height,t.width*t.height,n.width*n.height)==Zf}function Xf(e){return{id:0,originalId:"",primary:!1,type:e,mimeType:"",codecs:"",language:"",label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null}}function $f(e){return{id:0,originalId:"",createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Ls([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",label:null,type:e,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null}}function Jf(e,t,n){if(t==e&&e!=n)return tp;if(n==e&&e!=t)return Zf;if(t>e){if(n<=e||n-e<t-e)return Zf;if(n-e>t-e)return tp}else{if(n>e)return tp;if(e-n<e-t)return Zf;if(e-n>e-t)return tp}return ep}function Qf(e,t,n){return t=Math.abs(e-t),e=Math.abs(e-n),e<t?Zf:t<e?tp:ep}xf.prototype.release=function(){for(var e=d(this.g.concat(this.h,this.j,this.i)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();this.g=[],this.h=[],this.j=[],this.i=[],this.l=[]};var Zf=1,ep=0,tp=-1;function np(){var e=this;this.G=this.s=null,this.h=[],this.F=null,this.D=1,this.l={},this.I={},this.g=new xf,this.B=0,this.H=new rt(5),this.A=new Sn((function(){e.Jc()})),this.i=new zi,this.j=1/0,this.o=!1}function ip(e){var t,n,i,r,a,o,s;return F((function(u){return 1==u.g?(t=Yi(e.h,e.s.retryParameters),n=e.G.networkingEngine,i=Date.now(),r=n.request(0,t),Hi(e.i,r),S(u,r.promise,2)):3!=u.g?(a=u.h,e.G?(a.uri&&!e.h.includes(a.uri)&&e.h.unshift(a.uri),S(u,rp(e,a.data,a.uri),3)):u["return"](0)):(o=Date.now(),s=(o-i)/1e3,at(e.H,1,s),u["return"](s))}))}function rp(e,t,n){var i,r,a,o;return F((function(s){if(1==s.g){if(i=Nh(t,"MPD"),!i)throw new Ie(2,4,4001,n);return e.s.dash.disableXlinkProcessing?s["return"](ap(e,i,n)):(r=e.s.dash.xlinkFailGracefully,a=Yh(i,e.s.retryParameters,r,n,e.G.networkingEngine),Hi(e.i,a),S(s,a.promise,2))}return o=s.h,s["return"](ap(e,o,n))}))}function ap(e,t,n){var i,r,a,o,s,u,l,c,h,f,p,g,m,v,y,b,T,E,w,x,_,I,k,C,L,P,N,D,R,M;return F((function(U){switch(U.g){case 1:if((i=e.s.dash.manifestPreprocessor)&&i(t),r=[n],a=mh(t,"Location").map(Th).filter(Me),0<a.length&&(o=Oe(r,a),r=e.h=o),s=mh(t,"BaseURL"),u=s.map(Th),l=Oe(r,u),c=0,s&&s.length&&(c=wh(s[0],"availabilityTimeOffset",Ch)||0),h=e.s.dash.ignoreMinBufferTime,f=0,h||(f=wh(t,"minBufferTime",Ah)||0),e.B=wh(t,"minimumUpdatePeriod",Ah,-1),p=wh(t,"availabilityStartTime",Sh),g=wh(t,"timeShiftBufferDepth",Ah),m=e.s.dash.ignoreSuggestedPresentationDelay,v=null,m||(v=wh(t,"suggestedPresentationDelay",Ah)),y=e.s.dash.ignoreMaxSegmentDuration,b=null,y||(b=wh(t,"maxSegmentDuration",Ah)),T=t.getAttribute("type")||"static",e.F)for(E=e.F.presentationTimeline,w=d(Object.values(e.l)),x=w.next();!x.done;x=w.next())_=x.value,_.Db(E.vb());else I=e.s.defaultPresentationDelay||1.5*f,k=null!=v?v:I,E=new ss(p,k,e.s.dash.autoCorrectDrift);C=t.getAttribute("profiles")||"",L={Cb:"static"!=T,presentationTimeline:E,wa:null,$:null,Da:null,N:null,bandwidth:0,Ye:!1,Wb:c,profiles:C.split(",")};var O=wh(t,"mediaPresentationDuration",Ah),F=[],j=0,B=mh(t,"Period");B=d(he(B));for(var G=B.next();!G.done;G=B.next()){var V=G.value;G=V.item,V=V.next,j=wh(G,"start",Ah,j);var K=wh(G,"duration",Ah),z=null;if(V){var H=wh(V,"start",Ah);null!=H&&(z=H-j)}else null!=O&&(z=O-j);if(null==z&&(z=K),G=op(e,L,l,{start:j,duration:z,node:G,bf:null==z||!V}),F.push(G),L.wa.id&&z&&(e.I[L.wa.id]=z),null==z){j=null;break}j+=z}return P=null!=O?{periods:F,duration:O,Qe:!1}:{periods:F,duration:j,Qe:!0},N=P.duration,D=P.periods,E.Oc("static"==T),"static"!=T&&P.Qe||E.ab(N||1/0),e.j&&!e.o&&e.G.isAutoLowLatencyMode()&&(e.G.enableLowLatencyMode(),e.o=e.G.isLowLatencyMode()),e.o?E.pf(e.j):e.j&&X("Low-latency DASH live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details."),E.Y()&&!isNaN(e.s.availabilityWindowOverride)&&(g=e.s.availabilityWindowOverride),null==g&&(g=1/0),E.xe(g),E.ae(b||1),S(U,_f(e.g,D,L.Cb),2);case 2:if(e.F){e.F.variants=e.g.l,e.F.textStreams=e.g.j,e.F.imageStreams=e.g.i,e.G.filter(e.F),U.C(3);break}if(e.F={presentationTimeline:E,variants:e.g.l,textStreams:e.g.j,imageStreams:e.g.i,offlineSessionIds:[],minBufferTime:f||0},!E.xf()){U.C(3);break}return R=mh(t,"UTCTiming"),S(U,gp(e,l,R),5);case 5:if(M=U.h,!e.G)return U["return"]();E.qf(M);case 3:e.G.makeTextStreamsForClosedCaptions(e.F),A(U)}}))}function op(e,t,n,i){t.wa=dp(i.node,null,n),t.$=i,t.wa.Wb=t.Wb,t.wa.id||(t.wa.id="__shaka_period_"+i.start),n=mh(i.node,"EventStream"),n=d(n);for(var r=n.next();!r.done;r=n.next())mp(e,i.start,i.duration,r.value);if(n=mh(i.node,"AdaptationSet").map((function(n){return up(e,t,n)})).filter(Me),t.Cb){i=[],r=d(n);for(var a=r.next();!a.done;a=r.next()){a=d(a.value.Rg);for(var o=a.next();!o.done;o=a.next())i.push(o.value)}if(i.length!=new Set(i).size)throw new Ie(2,4,4018)}for(i=n.filter((function(e){return!e.Ce})),n=n.filter((function(e){return e.Ce})),n=d(n),r=n.next();!r.done;r=n.next()){r=r.value,a=r.Ce.split(" "),o=d(i);for(var s=o.next();!s.done;s=o.next()){var u=s.value;if(a.includes(u.id)){s={},u=d(u.streams);for(var l=u.next();!l.done;s={Uc:s.Uc},l=u.next())s.Uc=l.value,s.Uc.trickModeVideo=r.streams.find(function(e){return function(t){return hn(e.Uc.codecs)==hn(t.codecs)}}(s))}}}if(r=e.s.disableAudio?[]:sp(i,"audio"),o=e.s.disableVideo?[]:sp(i,"video"),a=e.s.disableText?[]:sp(i,Ge),n=e.s.disableThumbnails?[]:sp(i,"image"),!o.length&&!r.length)throw new Ie(2,4,4004);for(i=[],r=d(r),s=r.next();!s.done;s=r.next())i.push.apply(i,h(s.value.streams));for(r=[],o=d(o),s=o.next();!s.done;s=o.next())r.push.apply(r,h(s.value.streams));for(o=[],a=d(a),s=a.next();!s.done;s=a.next())o.push.apply(o,h(s.value.streams));for(a=[],n=d(n),s=n.next();!s.done;s=n.next())a.push.apply(a,h(s.value.streams));return{id:t.wa.id,Yc:i,wd:r,textStreams:o,imageStreams:a}}function sp(e,t){return e.filter((function(e){return e.contentType==t}))}function up(e,t,n){t.Da=dp(n,t.wa,null);var i=!1,r=mh(n,"Role"),a=r.map((function(e){return e.getAttribute("value")})).filter(Me),o=void 0,s=t.Da.contentType==Ge;s&&(o="subtitle"),r=d(r);for(var u=r.next();!u.done;u=r.next()){u=u.value;var l=u.getAttribute("schemeIdUri");if(null==l||"urn:mpeg:dash:role:2011"==l)switch(u=u.getAttribute("value"),u){case"main":i=!0;break;case"caption":case"subtitle":o=u}}l=mh(n,"EssentialProperty"),r=null,u=!1,l=d(l);for(var c=l.next();!c.done;c=l.next())c=c.value,"http://dashif.org/guidelines/trickmode"==c.getAttribute("schemeIdUri")?r=c.getAttribute("value"):u=!0;l=mh(n,"Accessibility");var f=new Map;for(l=d(l),c=l.next();!c.done;c=l.next()){var p=c.value;if(c=p.getAttribute("schemeIdUri"),p=p.getAttribute("value"),"urn:scte:dash:cc:cea-608:2015"==c)if(c=1,null!=p){p=p.split(";");for(var g=d(p),m=g.next();!m.done;m=g.next()){var v=m.value,y=m=void 0;v.includes("=")?(v=v.split("="),m=v[0].startsWith("CC")?v[0]:"CC"+v[0],y=v[1]||"und"):(m="CC"+c,2==p.length?c+=2:c++,y=v),f.set(m,qe(y))}}else f.set("CC1","und");else if("urn:scte:dash:cc:cea-708:2015"==c)if(c=1,null!=p)for(p=d(p.split(";")),m=p.next();!m.done;m=p.next())m=m.value,v=g=void 0,m.includes("=")?(m=m.split("="),g="svc"+m[0],v=m[1].split(",")[0].split(":").pop()):(g="svc"+c,c++,v=m),f.set(g,qe(v));else f.set("svc1","und");else"urn:mpeg:dash:role:2011"==c&&null!=p&&(a.push(p),"captions"==p&&(o="caption"))}if(u)return null;u=mh(n,"ContentProtection");var b=Dh(u,e.s.dash.ignoreDrmInfo,e.s.dash.keySystemsByURI),T=qe(n.getAttribute("lang")||"und"),E=n.getAttribute("label");if((u=mh(n,"Label"))&&u.length&&(u=u[0],u.textContent&&(E=u.textContent)),u=mh(n,"Representation"),n=u.map((function(n){return lp(e,t,b,o,T,E,i,a,f,n)})).filter((function(e){return!!e})),0==n.length){if(r="image"==t.Da.contentType,e.s.dash.ignoreEmptyAdaptationSet||s||r)return null;throw new Ie(2,4,4003)}if(!t.Da.contentType||"application"==t.Da.contentType)for(t.Da.contentType=yp(n[0].mimeType,n[0].codecs),s=d(n),l=s.next();!l.done;l=s.next())l.value.type=t.Da.contentType;for(s=d(n),l=s.next();!l.done;l=s.next())for(l=l.value,c=d(b.drmInfos),p=c.next();!p.done;p=c.next())p=p.value,p.keyIds=p.keyIds&&l.keyIds?new Set([].concat(h(p.keyIds),h(l.keyIds))):p.keyIds||l.keyIds;return s=u.map((function(e){return e.getAttribute("id")})).filter(Me),{id:t.Da.id||"__fake__"+e.D++,contentType:t.Da.contentType,language:T,ti:i,streams:n,drmInfos:b.drmInfos,Ce:r,Rg:s}}function lp(e,t,n,i,r,a,o,s,u,l){if(t.N=dp(l,t.Da,null),e.j=Math.min(e.j,t.N.Wb),!fp(t.N))return null;var c=t.$.start;t.bandwidth=wh(l,"bandwidth",Ih)||0;var d=t.N.contentType,h=d==Ge||"application"==d;d="image"==d;try{var f=function(t,n,i){return vp(e,t,n,i)};if(t.N.Mc)var p=sf(t,f);else if(t.N.yb)p=ff(t,e.l);else if(t.N.Nc)p=yf(t,f,e.l,!!e.F,e.s.dash.initialSegmentLimit,e.I);else{var g=t.N.Sa,m=t.$.duration||0;p={Zb:function(){return Promise.resolve(Ps(c,m,g))}}}}catch(w){if((h||d)&&4002==w.code)return null;throw w}f=mh(l,"ContentProtection"),f=Rh(f,n,e.s.dash.ignoreDrmInfo,e.s.dash.keySystemsByURI),f=new Set(f?[f]:[]);var v=!1;mh(l,"SupplementalProperty").some((function(e){return"tag:dolby.com,2018:dash:EC3_ExtensionType:2018"==e.getAttribute("schemeIdUri")&&"JOC"==e.getAttribute("value")}))&&(t.N.mimeType="audio/eac3-joc",v=!0);var y,b,T=!1;if(h&&(T=s.includes("forced_subtitle")),d&&((l=mh(l,"EssentialProperty").find((function(e){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(e.getAttribute("schemeIdUri"))})))&&(y=l.getAttribute("value")),!y))return null;l=t.N.codecs,t.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(l.includes("hvc1.2.4.L153.B0")||l.includes("hev1.2.4.L153.B0"))&&(b="PQ");var E={id:e.D++,originalId:t.N.id,createSegmentIndex:function(){var e;return F((function(t){if(1==t.g)return E.segmentIndex?t.C(0):(e=E,S(t,p.Zb(),3));e.segmentIndex=t.h,A(t)}))},segmentIndex:null,mimeType:t.N.mimeType,codecs:t.N.codecs,frameRate:t.N.frameRate,pixelAspectRatio:t.N.pixelAspectRatio,bandwidth:t.bandwidth,width:t.N.width,height:t.N.height,kind:i,encrypted:0<n.drmInfos.length,drmInfos:n.drmInfos,keyIds:f,language:r,label:a,type:t.Da.contentType,primary:o,trickModeVideo:null,emsgSchemeIdUris:t.N.emsgSchemeIdUris,roles:s,forced:T,channelsCount:t.N.ce,audioSamplingRate:t.N.audioSamplingRate,spatialAudio:v,closedCaptions:u,hdr:b,tilesLayout:y};return E}function cp(e,t){0>e.B||e.A.S(Math.max(3,e.B-t,ot(e.H)))}function dp(e,t,n){t=t||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,ce:null,audioSamplingRate:null,Wb:0},n=n||t.Sa;var i=mh(e,"BaseURL"),r=i.map(Th),a=e.getAttribute("contentType")||t.contentType,o=e.getAttribute("mimeType")||t.mimeType,s=e.getAttribute("codecs")||t.codecs,u=wh(e,"frameRate",Lh)||t.frameRate,l=e.getAttribute("sar")||t.pixelAspectRatio,c=mh(e,"InbandEventStream"),h=t.emsgSchemeIdUris.slice();c=d(c);for(var f=c.next();!f.done;f=c.next())f=f.value.getAttribute("schemeIdUri"),h.includes(f)||h.push(f);c=mh(e,"AudioChannelConfiguration"),c=hp(c)||t.ce,f=wh(e,"audioSamplingRate",kh)||t.audioSamplingRate,a||(a=yp(o,s));var p=ph(e,"SegmentBase"),g=ph(e,"SegmentTemplate"),m=p&&wh(p,"availabilityTimeOffset",Ch)||0,v=g&&wh(g,"availabilityTimeOffset",Ch)||0;return i=i&&i.length&&wh(i[0],"availabilityTimeOffset",Ch)||0,i=t.Wb+i+m+v,{Sa:Oe(n,r),Mc:p||t.Mc,yb:ph(e,"SegmentList")||t.yb,Nc:g||t.Nc,width:wh(e,"width",kh)||t.width,height:wh(e,"height",kh)||t.height,contentType:a,mimeType:o,codecs:s,frameRate:u,pixelAspectRatio:l,emsgSchemeIdUris:h,id:e.getAttribute("id"),ce:c,audioSamplingRate:f,Wb:i}}function hp(e){e=d(e);for(var t=e.next();!t.done;t=e.next()){var n=t.value;if((t=n.getAttribute("schemeIdUri"))&&(n=n.getAttribute("value")))switch(t){case"urn:mpeg:dash:outputChannelPositionList:2012":return n.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(t=parseInt(n,10),!t)continue;return t;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(t=parseInt(n,16),!t)continue;for(e=0;t;)1&t&&++e,t>>=1;return e;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(t=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(n=parseInt(n,10))&&0<n&&n<t.length)return t[n]}}return null}function fp(e){var t=e.Mc?1:0;return t+=e.yb?1:0,t+=e.Nc?1:0,0==t?e.contentType==Ge||"application"==e.contentType:(1!=t&&(e.Mc&&(e.yb=null),e.Nc=null),!0)}function pp(e,t,n,i){var r,a,o,s,u,l;return F((function(c){if(1==c.g)return r=Oe(t,[n]),a=Yi(r,e.s.retryParameters),a.method=i,o=e.G.networkingEngine.request(4,a),Hi(e.i,o),S(c,o.promise,2);if(s=c.h,"HEAD"==i){if(!s.headers||!s.headers.date)return c["return"](0);u=s.headers.date}else u=Ht(s.data);return l=Date.parse(u),isNaN(l)?c["return"](0):c["return"](l-Date.now())}))}function gp(e,t,n){var i,r,a,o,s,u,l,c;return F((function(h){switch(h.g){case 1:i=n.map((function(e){return{scheme:e.getAttribute("schemeIdUri"),value:e.getAttribute("value")}})),r=e.s.dash.clockSyncUri,!i.length&&r&&i.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:r}),a=d(i),o=a.next();case 2:if(o.done){h.C(4);break}switch(s=o.value,x(h,5),u=s.scheme,l=s.value,u){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return h.C(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return h.C(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return c=Date.parse(l),h["return"](isNaN(c)?0:c-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":X("NTP UTCTiming scheme is not supported");break;default:X("Unrecognized scheme in UTCTiming element",u)}h.C(9);break;case 7:return S(h,pp(e,t,l,"HEAD"),10);case 10:return h["return"](h.h);case 8:return S(h,pp(e,t,l,"GET"),11);case 11:return h["return"](h.h);case 9:I(h,3);break;case 5:k(h);case 3:o=a.next(),h.C(2);break;case 4:return X("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),h["return"](0)}}))}function mp(e,t,n,i){var r=i.getAttribute("schemeIdUri")||"",a=i.getAttribute("value")||"",o=wh(i,"timescale",kh)||1;i=d(mh(i,"Event"));for(var s=i.next();!s.done;s=i.next()){s=s.value;var u=wh(s,"presentationTime",kh)||0,l=wh(s,"duration",kh)||0;u=u/o+t,l=u+l/o,null!=n&&(u=Math.min(u,t+n),l=Math.min(l,t+n)),s={schemeIdUri:r,value:a,startTime:u,endTime:l,id:s.getAttribute("id")||"",eventElement:s},e.G.onTimelineRegionAdded(s)}}function vp(e,t,n,i){var r,a,o,s,u;return F((function(l){return 1==l.g?(r=er,a=Hs(t,n,i,e.s.retryParameters),o=e.G.networkingEngine,s=o.request(r,a),Hi(e.i,s),S(l,s.promise,2)):(u=l.h,l["return"](u.data))}))}function yp(e,t){return gn(cn(e,t))?Ge:e.split("/")[0]}function bp(e,t,n,i){this.g=e,this.type=t,this.Z=n,this.segments=i||null}function Tp(e,t,n,i){this.id=e,this.name=t,this.g=n,this.value=void 0===i?null:i}function Ep(e,t,n){return(e=e.getAttribute(t))?e.value:n||null}function wp(e,t){var n=e.getAttribute(t);if(!n)throw new Ie(2,4,4023,t);return n.value}function Sp(e,t,n){n=void 0===n?[]:n,this.Z=t,this.g=e,this.h=n}function Ap(e,t){this.name=e,this.value=t}function xp(e,t){return e.filter((function(e){return e.name==t}))}function _p(e,t){return e.filter((function(e){return wp(e,"TYPE")==t}))}function Ip(e,t){var n=xp(e,t);return n.length?n[0]:null}function kp(e,t,n){return n=void 0===n?0:n,(e=Ip(e,t))?Number(e.value):n}function Cp(e){this.h=e,this.g=0}function Lp(e){Pp(e,/[ \t]+/gm)}function Pp(e,t){t.lastIndex=e.g;var n=t.exec(e.h);return n=null==n?null:{position:n.index,length:n[0].length,results:n},e.g==e.h.length||null==n||n.position!=e.g?null:(e.g+=n.length,n.results)}function Np(e){return e.g==e.h.length?null:(e=Pp(e,/[^ \t\n]*/gm))?e[0]:null}function Dp(){this.g=0}function Rp(e,t,n){t=Ht(t),t=t.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim();var i=t.split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(i[0]))throw new Ie(2,4,4015);t=0;for(var r=!0,a=d(i),o=a.next();!o.done;o=a.next())if(o=o.value,/^#(?!EXT)/m.test(o)||r)r=!1;else{if(o=Mp(e.g++,o),--e.g,Up.includes(o.name)){t=1;break}"EXT-X-STREAM-INF"==o.name&&(r=!0)}a=[],r=!0,o=d(he(i));for(var s=o.next();!s.done;s=o.next()){var u=s.value;s=u.za;var l=u.item;if(u=u.next,/^#(?!EXT)/m.test(l)||r)r=!1;else{if(l=Mp(e.g++,l),Op.includes(l.name)){if(1!=t)throw new Ie(2,4,4017);u=i.splice(s,i.length-s),i=n,r=[],o=[],s=[],l=null,u=d(u);for(var c=u.next();!c.done;c=u.next())c=c.value,/^(#EXT)/.test(c)?(c=Mp(e.g++,c),Up.includes(c.name)?a.push(c):"EXT-X-MAP"==c.name?l=c:"EXT-X-PART"==c.name?s.push(c):"EXT-X-PRELOAD-HINT"==c.name?"PART"==Ep(c,"TYPE")?s.push(c):"MAP"==Ep(c,"TYPE")&&(c.name="EXT-X-MAP",l=c):o.push(c)):/^#(?!EXT)/m.test(c)||(c=Oe([i],[c.trim()])[0],l&&o.push(l),r.push(new Sp(c,o,s)),o=[],s=[]);return s.length&&(l&&o.push(l),r.push(new Sp("",o,s))),new bp(n,t,a,r)}a.push(l),"EXT-X-STREAM-INF"==l.name&&(l.g.push(new Ap("URI",u)),r=!0)}}return new bp(n,t,a)}function Mp(e,t){var n=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!n)throw new Ie(2,4,4016,t);var i,r=n[1],a=n[2];if(n=[],a){var o;a=new Cp(a),(o=Pp(a,/^([^,=]+)(?:,|$)/g))&&(i=o[1]);for(var s=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;o=Pp(a,s);)n.push(new Ap(o[1],o[2]||o[3]))}return new Tp(e,r,n,i)}i=np.prototype,i.configure=function(e){this.s=e},i.start=function(e,t){var n,i=this;return F((function(r){if(1==r.g)return i.o=t.isLowLatencyMode(),i.h=[e],i.G=t,S(r,ip(i),2);if(n=r.h,i.G&&cp(i,n),!i.G)throw new Ie(2,7,7001);return r["return"](i.F)}))},i.stop=function(){for(var e=d(Object.values(this.l)),t=e.next();!t.done;t=e.next())t.value.release();return this.g&&this.g.release(),this.s=this.G=null,this.h=[],this.F=null,this.l={},this.g=null,null!=this.A&&(this.A.stop(),this.A=null),this.i.destroy()},i.update=function(){var e,t=this;return F((function(n){return 1==n.g?(x(n,2),S(n,ip(t),4)):2!=n.g?I(n,0):(e=k(n),t.G&&e?(t.G.onError(e),void A(n)):n["return"]())}))},i.onExpirationUpdated=function(){},i.Jc=function(){var e,t,n=this;return F((function(i){switch(i.g){case 1:return e=0,x(i,2),S(i,ip(n),4);case 4:e=i.h,I(i,3);break;case 2:t=k(i),n.G&&(t.severity=1,n.G.onError(t));case 3:if(!n.G)return i["return"]();cp(n,e),A(i)}}))},H("shaka.dash.DashParser",np),ra.mpd=function(){return new np},ia["application/dash+xml"]=function(){return new np},ia["video/vnd.mpeg.dash.mpd"]=function(){return new np},Tp.prototype.toString=function(){function e(e){return e.name+"="+(isNaN(Number(e.value))?'"'+e.value+'"':e.value)}var t="#"+this.name,n=this.g?this.g.map(e):[];return this.value&&n.unshift(this.value),0<n.length&&(t+=":"+n.join(",")),t},Tp.prototype.getAttribute=function(e){var t=this.g.filter((function(t){return t.name==e}));return t.length?t[0]:null};var Up="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP".split(" "),Op="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP".split(" ");function Fp(){}function jp(e){try{var t=Bp(e);return Fi({uri:e,ef:e,data:t.data,headers:{"content-type":t.contentType}})}catch(n){return Ui(n)}}function Bp(t){var n=t.split(":");if(2>n.length||"data"!=n[0])throw new Ie(2,1,1004,t);if(n=n.slice(1).join(":").split(","),2>n.length)throw new Ie(2,1,1004,t);var i=n[0];t=e.decodeURIComponent(n.slice(1).join(",")),n=i.split(";"),i=n[0];var r,a=!1;return 1<n.length&&"base64"==n[n.length-1]&&(a=!0,n.pop()),r=a?en(t):Yt(t),{data:r,contentType:i}}function Gp(){var e=this;this.s=this.G=null,this.xa=1,this.l=new Map,this.A=new Map,this.ua=new Set,this.g=new Map,this.h=null,this.L="",this.W=new Dp,this.ha=0,this.B=new Sn((function(){e.Jc()})),this.j=wg,this.F=null,this.ba=0,this.H=1/0,this.R=this.Ja=0,this.D=new zi,this.ea=[],this.K=new Map,this.Ia=!1,this.o=new Map,this.O=null,this.aa=new Map,this.I=new Map,this.i=!1}function Vp(e,t){var n,i,r,a,o,s,u,l,c,d,h,f;return F((function(p){if(1==p.g)return n=xg,i=t.Cf,r=new pe(i),e.i&&t.Hf&&ve(r,new _e("_HLS_skip=YES")),S(p,yg(e,Yi([r.toString()],e.s.retryParameters),0),2);if(3!=p.g){if(a=p.h,o=Rp(e.W,a.data,a.uri),1!=o.type)throw new Ie(2,4,4017);return s=xp(o.Z,"EXT-X-DEFINE"),u=zp(e,s),l=t.stream,S(p,lg(e,t.vd,o,l.type,l.mimeType,t.Yd,u,t.Mf),3)}c=p.h,l.segmentIndex.dc(c,e.h.vb()),c.length&&(d=kp(o.Z,"EXT-X-MEDIA-SEQUENCE",0),h=t.Yd.get(d),l.segmentIndex.Db(h)),f=c[c.length-1],Ip(o.Z,"EXT-X-ENDLIST")&&(vg(e,n.Bf),e.h.ab(f.endTime)),A(p)}))}function Kp(e,t){var n,i,r,a,o,s,u,l,c,h,f,p,g,m,v,y,b,T,E,w,x,_,I,k,C,L,P;return F((function(N){switch(N.g){case 1:if(n=Rp(e.W,t,e.L),0!=n.type)throw new Ie(2,4,4022);i=xp(n.Z,"EXT-X-DEFINE");for(var D=d(i),R=D.next();!R.done;R=D.next()){var M=R.value;R=Ep(M,"NAME"),M=Ep(M,"VALUE"),R&&M&&(e.l.has(R)||e.l.set(R,M))}for(r=xp(n.Z,"EXT-X-MEDIA"),a=xp(n.Z,"EXT-X-STREAM-INF"),o=xp(n.Z,"EXT-X-IMAGE-STREAM-INF"),D=d(a),R=D.next();!R.done;R=D.next()){var U=R.value;M=Ep(U,"AUDIO"),R=Ep(U,"VIDEO");var O=Ep(U,"SUBTITLES");if(U=$p(e,U),O){var F=Be(Ge,U);e.o.set(O,F),lt(U,F)}M&&(O=je("audio",U),e.o.set(M,O)),R&&(M=je("video",U),e.o.set(R,M))}for(s=xp(n.Z,"EXT-X-SESSION-DATA"),u=d(s),l=u.next();!l.done;l=u.next())c=l.value,h=Ep(c,"DATA-ID"),f=Ep(c,"URI"),p=Ep(c,"LANGUAGE"),g=Ep(c,"VALUE"),m={id:h},f&&(m.uri=Oe([e.L],[f])[0]),p&&(m.language=p),g&&(m.value=g),v=new W("sessiondata",m),e.G&&e.G.onEvent(v);return S(N,qp(e,r),2);case 2:for(D=_p(r,"CLOSED-CAPTIONS"),D=d(D),R=D.next();!R.done;R=D.next())O=R.value,R=Jp(O),M=wp(O,"GROUP-ID"),O=wp(O,"INSTREAM-ID"),e.K.get(M)||e.K.set(M,new Map),e.K.get(M).set(O,R);return S(N,Yp(e,a),3);case 3:return y=N.h,S(N,Hp(e,r),4);case 4:return b=N.h,S(N,Wp(e,o),5);case 5:if(T=N.h,!e.G)throw new Ie(2,7,7001);if(e.Ia&&0==y.length)throw new Ie(2,4,4034);for(w=E=1/0,x=d(e.g.values()),_=x.next();!_.done;_=x.next())I=_.value,E=Math.min(E,I.cf),"text"!=I.stream.type&&(w=Math.min(w,I.Bg-I.cf));if(e.j!=wg?(e.h=new ss(0,e.s.defaultPresentationDelay?e.s.defaultPresentationDelay:e.R?e.R:3*e.ba),e.h.Oc(!1)):(e.h=new ss(null,0),e.h.Oc(!0)),ug(e),e.j!=wg)e.ha=e.H,k=xg,e.j==k.Ge&&(C=e.h.pd,isNaN(e.s.availabilityWindowOverride)||(C=e.s.availabilityWindowOverride),e.h.xe(C));else for(e.h.ab(w),e.h.offset(-E),L=d(e.g.values()),_=L.next();!_.done;_=L.next())P=_.value,P.stream.segmentIndex.offset(-E),P.stream.segmentIndex.ub(0,w);e.F={presentationTimeline:e.h,variants:y,textStreams:b,imageStreams:T,offlineSessionIds:[],minBufferTime:0},e.G.makeTextStreamsForClosedCaptions(e.F),A(N)}}))}function zp(e,t){for(var n=new Map,i=d(t),r=i.next();!r.done;r=i.next()){var a=r.value;r=Ep(a,"NAME");var o=Ep(a,"VALUE");a=Ep(a,"IMPORT"),r&&o&&n.set(r,o),a&&(r=e.l.get(a))&&n.set(a,r)}return n}function Hp(e,t){var n,i,r,a,o,s,u,l,c,h,f,p;return F((function(g){if(1==g.g)return n=_p(t,"SUBTITLES"),i=n.map((function(t){var n,i;return F((function(r){if(1==r.g)return e.s.disableText?r["return"](null):(x(r,2),S(r,Zp(e,t),4));if(2!=r.g)return n=r.h,r["return"](n.stream);if(i=k(r),e.s.hls.ignoreTextStreamFailures)return r["return"](null);throw i}))})),S(g,Promise.all(i),2);for(r=g.h,a=d(n),o=a.next();!o.done;o=a.next())if(s=o.value,u=wp(s,"GROUP-ID"),(l=e.o.get(u))&&(c=e.A.get(u)))for(h=d(c),f=h.next();!f.done;f=h.next())p=f.value,p.stream.codecs=l;return g["return"](r.filter((function(e){return e})))}))}function Wp(e,t){var n,i;return F((function(r){return 1==r.g?(n=t.map((function(t){var n,i;return F((function(r){if(1==r.g)return e.s.disableThumbnails?r["return"](null):(x(r,2),S(r,eg(e,t),4));if(2!=r.g)return n=r.h,r["return"](n.stream);if(i=k(r),e.s.hls.ignoreImageStreamFailures)return r["return"](null);throw i}))})),S(r,Promise.all(n),2)):(i=r.h,r["return"](i.filter((function(e){return e}))))}))}function qp(e,t){var n;return F((function(i){return 1==i.g?(t=t.filter((function(e){var t=Ep(e,"URI")||"";return"SUBTITLES"!=Ep(e,"TYPE")&&""!=t})),t.length?S(i,Zp(e,t[0]),2):i.C(2)):(n=t.slice(1).map((function(t){return Zp(e,t)})),S(i,Promise.all(n),0))}))}function Yp(e,t){var n,i,r;return F((function(a){return 1==a.g?(n=t.map((function(t){var n,i,r,a,o,s,u,l;return F((function(c){if(1==c.g)return n=Ep(t,"FRAME-RATE"),i=Number(Ep(t,"AVERAGE-BANDWIDTH"))||Number(wp(t,"BANDWIDTH")),r=Ep(t,"RESOLUTION"),a=d(r?r.split("x"):[null,null]),o=a.next().value,s=a.next().value,u=Ep(t,"VIDEO-RANGE"),S(c,Xp(e,t),2);if(l=c.h){for(var h=c["return"],f=l.audio,p=l.video,g=d(p),m=g.next();!m.done;m=g.next())(m=m.value.stream)&&(m.width=Number(o)||void 0,m.height=Number(s)||void 0,m.frameRate=Number(n)||void 0,m.hdr=u||void 0);for(g=e.s.disableAudio,f.length&&!g||(f=[null]),g=e.s.disableVideo,p.length&&!g||(p=[null]),g=[],f=d(f),m=f.next();!m.done;m=f.next()){m=m.value;for(var v=d(p),y=v.next();!y.done;y=v.next()){var b=y.value;y=m?m.stream:null;var T=b?b.stream:null,E=m?m.stream.drmInfos:null,w=b?b.stream.drmInfos:null;b=(b?b.vd:"")+" - "+(m?m.vd:""),y&&T&&E.length&&w.length&&!(0<Vr(E,w).length)||e.ua.has(b)||(y={id:e.xa++,language:y?y.language:"und",primary:!!y&&y.primary||!!T&&T.primary,audio:y,video:T,bandwidth:i,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},g.push(y),e.ua.add(b))}}c=h.call(c,g)}else c=c["return"]([]);return c}))})),S(a,Promise.all(n),2)):(i=a.h,r=i.reduce(De,[]),r=r.filter((function(e){return null!=e})),a["return"](r))}))}function Xp(e,t){var n,i,r,a,o,s,u,l,c,d,h,f,p,g;return F((function(m){if(1==m.g)return n=Ve,i=$p(e,t),r=Ep(t,"AUDIO"),a=Ep(t,"VIDEO"),s=(o=r||a)&&e.A.has(o)?e.A.get(o):[],u={audio:r?s:[],video:a?s:[]},c=!1,d=wp(t,"URI"),h=u.audio.find((function(e){return e&&e.vd==d})),f=Be(n.fb,i),(p=Be(n.zb,i))&&!f?l=n.zb:!s.length&&p&&f?(l=n.fb,i=[[f,p].join()]):u.audio.length&&h?(l=n.zb,c=!0):l=u.video.length?n.zb:n.fb,c?m.C(2):S(m,tg(e,t,i,l),3);if(2!=m.g&&(g=m.h),g)u[g.stream.type]=[g];else if(null===g)return m["return"](null);return Qp(u),m["return"](u)}))}function $p(e,t){var n=[];e.s.disableVideo||n.push("avc1.42E01E"),e.s.disableAudio||n.push("mp4a.40.2");var i=Ep(t,"CODECS",n.join(",")).split(/\s*,\s*/);n=new Set;var r=[];i=d(i);for(var a=i.next();!a.done;a=i.next()){a=a.value;var o=hn(a);n.has(o)||(r.push(a),n.add(o))}return r}function Jp(e){return e=Ep(e,"LANGUAGE")||"und",qe(e)}function Qp(e){e=d(e.audio.concat(e.video));for(var t=e.next();!t.done;t=e.next())if(t=t.value){var n=t.stream.codecs.split(",");n=n.filter((function(e){return"mp4a.40.34"!=e})),t.stream.codecs=n.join(",")}}function Zp(e,t){var n,i,r,a,o,s,u,l,c,d,h,f,p,g;return F((function(m){if(1==m.g){n=wp(t,"GROUP-ID"),i="";var v=wp(t,"TYPE").toLowerCase();return"subtitles"==v&&(v=Ge),r=v,r!=Ge&&n&&e.o.has(n)&&(i=e.o.get(n)),a=gg(wp(t,"URI"),e.l),e.g.has(a)?m["return"](e.g.get(a)):(o=Jp(t),s=Ep(t,"NAME"),u=t.getAttribute("DEFAULT"),l="YES"==u,v="audio"==r&&(v=Ep(t,"CHANNELS"))?parseInt(v.split("/")[0],10):null,c=v,v="audio"==r&&(!!(v=Ep(t,"CHANNELS"))&&v.includes("/JOC")),d=v,h=Ep(t,"CHARACTERISTICS"),f=Ep(t,"FORCED"),p="YES"==f,S(m,ng(e,a,i,r,o,l,s,c,null,h,p,d),2))}return g=m.h,e.A.has(n)?e.A.get(n).push(g):e.A.set(n,[g]),null==g?m["return"](null):e.g.has(a)?m["return"](e.g.get(a)):(e.g.set(a,g),m["return"](g))}))}function eg(e,t){var n,i,r,a,o,s;return F((function(u){return 1==u.g?(n=gg(wp(t,"URI"),e.l),i=Ep(t,"CODECS","jpeg")||"",e.g.has(n)?u["return"](e.g.get(n)):(r=Jp(t),a=Ep(t,"NAME"),o=Ep(t,"CHARACTERISTICS"),S(u,ng(e,n,i,"image",r,!1,a,null,null,o,!1,!1),2))):(s=u.h,null==s?u["return"](null):e.g.has(n)?u["return"](e.g.get(n)):(e.g.set(n,s),u["return"](s)))}))}function tg(e,t,n,i){var r,a,o,s;return F((function(u){if(1==u.g){if(r=gg(wp(t,"URI"),e.l),e.g.has(r))return u["return"](e.g.get(r));var l=Ep(t,"CLOSED-CAPTIONS");return a="video"==i&&l&&"NONE"!=l?e.K.get(l):null,o=je(i,n),S(u,ng(e,r,o,i,"und",!1,null,null,a,null,!1,!1),2)}return s=u.h,null==s?u["return"](null):e.g.has(r)?u["return"](e.g.get(r)):(e.g.set(r,s),u["return"](s))}))}function ng(e,t,n,i,r,a,o,s,u,l,c,f){var p,g,m,v,y,b,T,E,w,A,_,C,L,P,N,D,R,M,U,O,j,B,G,V,K,z,H,W,q,Y,$,J,Q,Z,ee,te,ne,ie,re;return F((function(F){switch(F.g){case 1:return p=Oe([e.L],[t])[0],S(F,yg(e,Yi([p],e.s.retryParameters),0),2);case 2:if(g=F.h,p=g.uri,m=Rp(e.W,g.data,p),1!=m.type)throw new Ie(2,4,4017);if(v=[],m.segments)for(y=d(m.segments),b=y.next();!b.done;b=y.next())T=b.value,E=xp(T.Z,"EXT-X-KEY"),v.push.apply(v,h(E));for(w=!1,A=[],_=new Set,C=d(v),L=C.next();!L.done;L=C.next())if(P=L.value,N=wp(P,"METHOD"),"NONE"!=N){if(w=!0,"AES-128"==N)return e.Ia=!0,F["return"](null);if(D=wp(P,"KEYFORMAT"),M=(R=Eg[D])?R(P):null){if(M.keyIds)for(U=d(M.keyIds),O=U.next();!O.done;O=U.next())j=O.value,_.add(j);A.push(M)}}if(w&&!A.length)throw new Ie(2,4,4026);return B=xp(m.Z,"EXT-X-DEFINE"),G=zp(e,B),ig(e,m),S(F,mg(e,i,n,m,G),3);case 3:return V=F.h,bg.includes(V)&&(n=""),K=new Map,z=new Map,x(F,4),S(F,lg(e,t,m,i,V,K,G,z),6);case 6:H=F.h,I(F,5);break;case 4:if(W=k(F),4035==W.code)return X("Skipping unsupported HLS stream",V,t),F["return"](null);throw W;case 5:if(q=H[0].startTime,Y=H[H.length-1].endTime,$=new Ls(H),J=i==Ge?"subtitle":void 0,Q=[],l)for(Z=d(l.split(",")),ee=Z.next();!ee.done;ee=Z.next())te=ee.value,Q.push(te);return ie=!!(ne=Ip(m.Z,"EXT-X-SERVER-CONTROL"))&&null!=ne.getAttribute("CAN-SKIP-UNTIL"),re={id:e.xa++,originalId:o,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:$,mimeType:V,codecs:n,kind:J,encrypted:w,drmInfos:A,keyIds:_,language:r,label:o,type:i,primary:a,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:Q,forced:c,channelsCount:s,audioSamplingRate:null,spatialAudio:f,closedCaptions:u,hdr:void 0,tilesLayout:void 0},F["return"]({stream:re,vd:t,Cf:p,cf:q,Bg:Y,Yd:K,Mf:z,Hf:ie})}}))}function ig(e,t){var n=Ip(t.Z,"EXT-X-PLAYLIST-TYPE"),i=Ip(t.Z,"EXT-X-ENDLIST");if(i=n&&"VOD"==n.value||i,n=n&&"EVENT"==n.value&&!i,n=!i&&!n,i)vg(e,wg);else{if(vg(e,n?Ag:Sg),i=Ip(t.Z,"EXT-X-TARGETDURATION"),!i)throw new Ie(2,4,4024,"EXT-X-TARGETDURATION");i=Number(i.value),n=Ip(t.Z,"EXT-X-PART-INF"),e.i&&n?(e.Ja=Number(wp(n,"PART-TARGET")),e.H=Math.min(e.Ja,e.H),n=Ip(t.Z,"EXT-X-SERVER-CONTROL"),e.R=n?Number(wp(n,"PART-HOLD-BACK")):0):e.H=Math.min(i,e.H),e.ba=Math.max(i,e.ba)}}function rg(e,t,n,i){if(n=Ip(n,"EXT-X-MAP"),!n)return null;var r=wp(n,"URI");return i=gg(Oe([t],[r])[0],i),t=[i,Ep(n,"BYTERANGE","")].join("-"),e.aa.has(t)||(n=ag(i,n),e.aa.set(t,n)),e.aa.get(t)}function ag(e,t){var n=0,i=null,r=Ep(t,"BYTERANGE");return r&&(n=r.split("@"),i=Number(n[0]),n=Number(n[1]),i=n+i-1),new rs((function(){return[e]}),n,i)}function og(e,t,n,i,r,a,o,s,u){var l=i.Z,c=gg(i.g,o),h=Ip(l,"EXTINF"),f=o=0,p=null,g=[];if(e.i&&i.h.length){e={},i=d(he(i.h));for(var m=i.next();!m.done;e={Fd:e.Fd},m=i.next()){m=m.value;var v=m.za;m=m.item;var y=0==v?n:g[g.length-1];v=0==v?r:y.endTime;var b=Number(Ep(m,"DURATION"));b=v+b;var T=0,E=null;"EXT-X-PRELOAD-HINT"==m.name?T=(y=Ep(m,"BYTERANGE-START"))?Number(y):0:(T=Ep(m,"BYTERANGE"),y=d(sg(y,T)),T=y.next().value,E=y.next().value),m=Ep(m,"URI"),e.Fd=Oe([s],[m])[0],g.push(new os(v,b,function(e){return function(){return[e.Fd]}}(e),T,E,t,a,0,1/0))}}else if(!h)throw new Ie(2,4,4024,"EXTINF");return o=h?r+Number(h.value.split(",")[0]):g[g.length-1].endTime,(s=Ip(l,"EXT-X-BYTERANGE"))?(p=d(sg(n,s.value)),f=p.next().value,p=p.next().value):g.length&&(f=g[0].Ba,p=g[g.length-1].va),n="","image"==u&&(n="1x1",(u=Ip(l,"EXT-X-TILES"))&&(n=wp(u,"LAYOUT"))),new os(r,o,(function(){return c.length?[c]:[]}),f,p,t,a,0,1/0,g,n)}function sg(e,t){var n=0,i=null;return t&&(n=t.split("@"),i=Number(n[0]),n=n[1]?Number(n[1]):e.va+1,i=n+i-1),[n,i]}function ug(e){if(e.h){for(var t=d(e.ea),n=t.next();!n.done;n=t.next())e.h.ec(n.value);e.ea=[]}}function lg(e,t,n,i,r,a,o,s){var u,l,c,h,f,p,g,m,v,y,b,T,E,w,A,x,_,I,k,C,L,P,N;return F((function(D){switch(D.g){case 1:if(u=n.segments,c=kp(n.Z,"EXT-X-MEDIA-SEQUENCE",0),f=(h=Ip(n.Z,"EXT-X-SKIP"))?Number(Ep(h,"SKIPPED-SEGMENTS")):0,p=c+f,e.j!=wg&&a.has(p)){g=a.get(p),D.C(2);break}if(null!=e.O){D.C(3);break}return l=rg(e,n.g,u[0].Z,o),m=e,S(D,hg(e,t,l,r,p,!1,u[0],o,i),4);case 4:m.O=D.h;case 3:g=e.O;case 2:if(v=u[0].g,Q(v.split("/").pop()),y=kp(n.Z,"EXT-X-DISCONTINUITY-SEQUENCE"),e.i&&(s.has(y)||s.set(y,p),f))for(;s.has(y+1)&&s.get(y+1)<p;)y++;b=e.I.get(y)||0,T=[],E=function(e){return he(e)},w=d(E(u)),A=w.next();case 5:if(A.done){D.C(7);break}if(x=A.value,_=x.za,I=x.item,k=T[T.length-1],C=0==_?g:k.endTime,p=c+f+_,a.set(p,C),l=rg(e,n.g,I.Z,o),L=Ip(I.Z,"EXT-X-DISCONTINUITY"),!L){D.C(8);break}return y++,s.set(y,p),S(D,cg(e,y,t,l,r,p,I,o,C,i),9);case 9:b=D.h;case 8:!e.i&&e.G.isAutoLowLatencyMode()&&(e.G.enableLowLatencyMode(),e.i=e.G.isLowLatencyMode()),P=Ip(I.Z,"EXTINF"),e.i||P?(N=og(e,l,k,I,C,b,o,n.g,i),T.push(N)):e.i||X("Low-latency HLS live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details."),A=w.next(),D.C(5);break;case 7:return e.ea.push(T),ug(e),D["return"](T)}}))}function cg(e,t,n,i,r,a,o,s,u,l){var c,d;return F((function(h){return 1==h.g?(c=0,e.I.has(t)?(c=e.I.get(t),h.C(2)):S(h,hg(e,n,i,r,a,!0,o,s,l),3)):(2!=h.g&&(d=h.h,c=u-d,e.I.set(t,c)),h["return"](c))}))}function dg(e,t){var n,i,r,a,o,s;return F((function(u){switch(u.g){case 1:return n=er,i=Hs(t.Fa(),t.Ba,t.va,e.s.retryParameters),e.s.hls.useFullSegmentsForStartTime?u["return"](yg(e,i,n)):(r=Hs(t.Fa(),t.Ba,t.Ba+2048-1,e.s.retryParameters),x(u,2),S(u,yg(e,r,n),4));case 4:return a=u.h,u["return"](a);case 2:if(o=k(u),7001==o.code)throw o;return X("Unable to fetch the starting part of HLS segment! Falling back to a full segment request, which is expensive!  Your server should support Range requests and CORS preflights.",r.uris[0]),S(u,yg(e,i,n),5);case 5:return s=u.h,u["return"](s)}}))}function hg(e,t,n,i,r,a,o,s,u){var l,c,d,h,f,p,g,m;return F((function(v){switch(v.g){case 1:if(l=og(e,n,null,o,0,0,s,"",u),e.F&&!a&&(c=e.g.get(t),d=c.Yd.get(r),void 0!=d))return v["return"](d);if(i=i.toLowerCase(),bg.includes(i))throw X("Raw formats are not yet supported.  Skipping "+i),new Ie(1,4,4035);if("video/webm"==i)throw X("WebM in HLS is not yet supported.  Skipping."),new Ie(1,4,4035);if("video/mp4"!=i&&"audio/mp4"!=i){v.C(2);break}return h=[dg(e,l)],n&&h.push(dg(e,n)),S(v,Promise.all(h),3);case 3:return f=v.h,p=f[0],g=f[1]||f[0],v["return"](fg(t,p.uri,p.data,g.data));case 2:if("video/mp2t"!=i){v.C(4);break}return S(v,dg(e,l),5);case 5:return m=v.h,v["return"](pg(t,m.uri,m.data));case 4:throw new Ie(2,4,4030,t)}}))}function fg(e,t,n,i){var r=0;if((new ua).box("moov",la).box("trak",la).box("mdia",la).X("mdhd",(function(e){r=Io(e.reader,e.version).timescale,e.parser.stop()})).parse(i,!0),!r)throw new Ie(2,4,4030,e,t);var a=0,o=!1;if((new ua).box("moof",la).box("traf",la).X("tfdt",(function(e){a=_o(e.reader,e.version).Od/r,o=!0,e.parser.stop()})).parse(n,!0),!o)throw new Ie(2,4,4030,e,t);return a}function pg(e,t,n){function i(){a.seek(o+188),s=a.ma(),71!=s&&(a.seek(o+192),s=a.ma()),71!=s&&(a.seek(o+204),s=a.ma()),71!=s&&r(),a.lf(1)}function r(){throw new Ie(2,4,4030,e,t)}var a=new aa(n,0),o=0,s=0;for(n=Math.min(a.U.byteLength-188,940);;){if(o=a.ka(),s=a.ma(),71!=s){if(0<n){--n;continue}r()}n=0;var u=a.ic();if(8191==(8191&u))i();else if(16384&u){if(u=(48&a.ma())>>4,0!=u&&2!=u||r(),3==u&&(u=a.ma(),a.skip(u)),1==a.P()>>8){a.skip(3),n=a.ma()>>6,0!=n&&1!=n||r(),0==a.ma()&&r(),n=a.ma(),u=a.ic();var l=a.ic();return(1073741824*((14&n)>>1)+((65534&u)<<14|(65534&l)>>1))/9e4}i()}else i()}}function gg(e,t){var n=String(e).replace(/%7B/g,"{").replace(/%7D/g,"}"),i=n.match(/{\$\w*}/g);if(i){i=d(i);for(var r=i.next();!r.done;r=i.next()){r=r.value;var a=r.slice(2,r.length-1),o=t.get(a);if(!o)throw new Ie(2,4,4039,a);n=n.replace(r,o)}}return n}function mg(e,t,n,i,r){var a,o,s,u,l,c,d,h,f,p,g;return F((function(m){return 1==m.g?(a=Ve,o=er,s=gg(i.segments[0].g,r),u=new pe(s),l=u.Qa.split(".").pop(),c=Tg[t],(d=c[l])?m["return"](d):t==a.oa?n&&"vtt"!=n&&"wvtt"!=n?m["return"]("application/mp4"):m["return"]("text/vtt"):t!=a.tc||n&&"jpeg"!=n?(h=Yi([s],e.s.retryParameters),h.method="HEAD",S(m,yg(e,h,o),2)):m["return"]("image/jpeg")):(f=m.h,p=f.headers["content-type"],p?m["return"](p.split(";")[0]):(g=c.mp4,m["return"](g)))}))}function vg(e,t){e.j=t,e.h&&e.h.Oc(e.j==wg),e.j!=wg||e.B.stop()}function yg(e,t,n){if(!e.D)throw new Ie(2,7,7001);return t=e.G.networkingEngine.request(n,t),Hi(e.D,t),t.promise}H("shaka.net.DataUriPlugin",Fp),Fp.parse=jp,qi("data",jp),i=Gp.prototype,i.configure=function(e){this.s=e},i.start=function(e,t){var n,i,r=this;return F((function(a){return 1==a.g?(r.G=t,r.i=t.isLowLatencyMode(),S(a,yg(r,Yi([e],r.s.retryParameters),0),2)):3!=a.g?(n=a.h,r.L=n.uri,S(a,Kp(r,n.data),3)):(i=r.ha,0<i&&r.B.S(i),a["return"](r.F))}))},i.stop=function(){this.B&&(this.B.stop(),this.B=null);var e=[];return this.D&&(e.push(this.D.destroy()),this.D=null),this.s=this.G=null,this.ua.clear(),this.F=null,this.g.clear(),this.A.clear(),this.o.clear(),this.l.clear(),Promise.all(e)},i.update=function(){var e,t,n,i=this;return F((function(r){if(1==r.g)return i.j==wg?r["return"]():(e=[],i.O=null,t=Array.from(i.g.values()),t.length?S(r,Vp(i,t[0]),2):r.C(2));for(n=1;n<t.length;n++)e.push(Vp(i,t[n]));return S(r,Promise.all(e),0)}))},i.onExpirationUpdated=function(){},i.Jc=function(){var e,t,n=this;return F((function(i){return 1==i.g?n.G?(x(i,2),S(i,n.update(),4)):i["return"]():2!=i.g?(e=n.ha,n.B.S(e),I(i,0)):(t=k(i),n.G?(t.severity=1,n.G.onError(t),n.B.S(.1),void A(i)):i["return"]())}))},H("shaka.hls.HlsParser",Gp);var bg=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"],Tg={audio:{mp4:"audio/mp4",mp4a:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",m4f:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t",aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},video:{mp4:"video/mp4",mp4v:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",m4f:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",m4f:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",ttml:"application/ttml+xml"},image:{jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",webp:"image/webp",avif:"image/avif"}},Eg={"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(e){var t=wp(e,"METHOD");return["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t)?(t=wp(e,"URI"),t=Bp(t),t=Ut(t.data),t=Fe("com.widevine.alpha",[{initDataType:"cenc",initData:t}]),(e=Ep(e,"KEYID"))&&(t.keyIds=new Set([e.toLowerCase().substr(2)])),t):null},"com.microsoft.playready":function(e){var t=wp(e,"METHOD");return["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t)?(e=wp(e,"URI"),e=Bp(e),e=Ut(e.data),t=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),e=hh(e,t),Fe("com.microsoft.playready",[{initDataType:"cenc",initData:e}])):null}},wg="VOD",Sg="EVENT",Ag="LIVE",xg={Bf:wg,uh:Sg,Ge:Ag};function _g(e,t,n,i,r,a){if(200<=n&&299>=n&&202!=n)return{uri:r||i,ef:i,data:t,headers:e,fromCache:!!e["x-shaka-from-cache"]};r=null;try{r=qt(t)}catch(o){}throw new Ie(401==n||403==n?2:1,1,1001,i,n,r,e,a)}function Ig(){}function kg(e,t,n,i){var r=new Rg;fr(t.headers).forEach((function(e,t){r.append(t,e)}));var a=new Ng,o={Je:!1,wf:!1};if(e=Cg(e,n,{body:t.body||void 0,headers:r,method:t.method,signal:a.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},o,i,t.streamDataCallback),e=new Mi(e,(function(){return o.Je=!0,a.abort(),Promise.resolve()})),t=t.retryParameters.timeout){var s=new Sn((function(){o.wf=!0,a.abort()}));s.S(t/1e3),e["finally"]((function(){s.stop()}))}return e}function Cg(e,t,n,i,r,a){var o,s,u,l,c,d,h,f,p,g,m,v,y,b;return F((function(T){switch(T.g){case 1:return o=Pg,s=Dg,d=c=0,h=Date.now(),x(T,2),S(T,o(e,n),4);case 4:return u=T.h,f=u.clone().body.getReader(),g=(p=u.headers.get("Content-Length"))?parseInt(p,10):0,m=function(e){function t(){var n,i;return F((function(o){switch(o.g){case 1:return x(o,2),S(o,f.read(),4);case 4:n=o.h,I(o,3);break;case 2:return k(o),o["return"]();case 3:if(n.done){o.C(5);break}if(c+=n.value.byteLength,!a){o.C(5);break}return S(o,a(n.value),5);case 5:i=Date.now(),(100<i-h||n.done)&&(r(i-h,c-d,g-c),d=c,h=i),n.done?e.close():(e.enqueue(n.value),t()),A(o)}}))}t()},new s({start:m}),S(T,u.arrayBuffer(),5);case 5:l=T.h,I(T,3);break;case 2:if(v=k(T),i.Je)throw new Ie(1,1,7001,e,t);if(i.wf)throw new Ie(1,1,1003,e,t);throw new Ie(1,1,1002,e,v,t);case 3:return y={},b=u.headers,b.forEach((function(e,t){y[t.trim()]=e})),T["return"](_g(y,l,u.status,e,u.url,t))}}))}function Lg(){if(!e.ReadableStream)return!1;try{new ReadableStream({})}catch(Hw){return!1}return!(!e.fetch||!e.AbortController)}ra.m3u8=function(){return new Gp},ia["application/x-mpegurl"]=function(){return new Gp},ia["application/vnd.apple.mpegurl"]=function(){return new Gp},H("shaka.net.HttpFetchPlugin",Ig),Ig.isSupported=Lg,Ig.parse=kg;var Pg=e.fetch,Ng=e.AbortController,Dg=e.ReadableStream,Rg=e.Headers;function Mg(){}function Ug(e,t,n,i){var r=new Og,a=Date.now(),o=0,s=new Promise((function(s,u){for(var l in r.open(t.method,e,!0),r.responseType="arraybuffer",r.timeout=t.retryParameters.timeout,r.withCredentials=t.allowCrossSiteCredentials,r.onabort=function(){u(new Ie(1,1,7001,e,n))},r.onload=function(t){t=t.target;var i=t.getAllResponseHeaders().trim().split("\r\n"),r={};i=d(i);for(var a=i.next();!a.done;a=i.next())a=a.value.split(": "),r[a[0].toLowerCase()]=a.slice(1).join(": ");try{var o=_g(r,t.response,t.status,e,t.responseURL,n);s(o)}catch(l){u(l)}},r.onerror=function(t){u(new Ie(1,1,1002,e,t,n))},r.ontimeout=function(){u(new Ie(1,1,1003,e,n))},r.onprogress=function(e){var t=Date.now();(100<t-a||e.lengthComputable&&e.loaded==e.total)&&(i(t-a,e.loaded-o,e.total-e.loaded),o=e.loaded,a=t)},t.headers)r.setRequestHeader(l.toLowerCase(),t.headers[l]);r.send(t.body)}));return new Mi(s,(function(){return r.abort(),Promise.resolve()}))}Lg()&&(qi("http",kg,2,!0),qi("https",kg,2,!0)),H("shaka.net.HttpXHRPlugin",Mg),Mg.parse=Ug;var Og=e.XMLHttpRequest;function Fg(){this.h=this.j=this.i=0,this.g=new Map,this.l=0}function jg(e,t){e.i+=t;var n=e.l;return e.l++,e.g.set(n,t),n}function Bg(e){var t=this;this.T=e,this.g=new Map,this.M=new ir((function(){return Vg(t)["catch"]((function(){}))})),this.h=[],this.hf=function(){},this.gf=function(){},this.uc=new Fg}function Gg(e,t,n){e.hf=t,e.gf=n}function Vg(e){var t=e.h.map((function(e){return e()}));return e.h=[],Promise.all(t)}function Kg(e,t,n,i,r,a){rr(e.M);var o=jg(e.uc,i);return i=(e.g.get(t)||Promise.resolve()).then((function(){var t,i,s,u,l,c,d;return F((function(h){if(1==h.g)return S(h,Wg(e,n),2);if(t=h.h,e.M.g)throw new Ie(2,9,7001);if(r)for(u in i=Ut(t),s=new dh(i),s.data)l=Number(u),c=s.data[l],d=s.g[l],e.gf(c,d);e.uc.close(o,t.byteLength);var f=e.uc;return e.hf(0==f.i?0:f.j/f.i,e.uc.h),h["return"](a(t))}))})),e.g.set(t,i),i}function zg(e,t,n){rr(e.M);var i=(e.g.get(t)||Promise.resolve()).then((function(){return F((function(e){return S(e,n(),0)}))}));e.g.set(t,i)}function Hg(e){return F((function(t){return 1==t.g?S(t,Promise.all(e.g.values()),2):t["return"](e.uc.h)}))}function Wg(e,t){var n,i,r,a;return F((function(o){return 1==o.g?(n=er,i=e.T.request(n,t),r=function(){return i.abort()},e.h.push(r),S(o,i.promise,2)):(a=o.h,lt(e.h,r),o["return"](a.data))}))}function qg(e,t){var n=this;this.i=e,this.h=e.objectStore(t),this.g=new Vt,e.onabort=function(e){e.preventDefault(),n.g.reject()},e.onerror=function(e){e.preventDefault(),n.g.reject()},e.oncomplete=function(){n.g.resolve()}}function Yg(e,t){return new Promise((function(n,i){var r=e.h.openCursor();r.onerror=i,r.onsuccess=function(){var e;return F((function(i){if(1==i.g)return null==r.result?(n(),i["return"]()):(e=r.result,S(i,t(e.key,e.value,e),2));e["continue"](),A(i)}))}}))}function Xg(e){this.h=e,this.g=[]}function $g(e,t){return Jg(e,t,"readwrite")}function Jg(e,t,n){n=e.h.transaction([t],n);var i=new qg(n,t);return e.g.push(i),i.promise().then((function(){lt(e.g,i)}),(function(){lt(e.g,i)})),i}function Qg(e,t,n){this.g=new Xg(e),this.i=t,this.h=n}function Zg(e){return Promise.reject(new Ie(2,9,9011,"Cannot add new value to "+e))}function em(e,t,n,i){e=$g(e.g,t),t=e.store();var r={};n=d(n);for(var a=n.next();!a.done;r={Sc:r.Sc},a=n.next())r.Sc=a.value,t["delete"](r.Sc).onsuccess=function(e){return function(){return i(e.Sc)}}(r);return e.promise()}function tm(e,t,n){var i,r,a,o,s,u,l;return F((function(c){if(1==c.g){for(i=Jg(e.g,t,"readonly"),r=i.store(),a={},o=[],s={},u=d(n),l=u.next();!l.done;s={rc:s.rc,mc:s.mc},l=u.next())s.mc=l.value,s.rc=r.get(s.mc),s.rc.onsuccess=function(e){return function(){void 0==e.rc.result&&o.push(e.mc),a[e.mc]=e.rc.result}}(s);return S(c,i.promise(),2)}if(o.length)throw new Ie(2,9,9012,"Could not find values for "+o);return c["return"](n.map((function(e){return a[e]})))}))}function nm(e){this.g=new Xg(e)}function im(){this.g=new Map}function rm(e){var t=null;if(e.g.forEach((function(e,n){e.getCells().forEach((function(e,i){e.hasFixedKeySpace()||t||(t={path:{$a:n,Ea:i},Ea:e})}))})),t)return t;throw new Ie(2,9,9013,"Could not find a cell that supports add-operations")}function am(e,t){e.g.forEach((function(e,n){e.getCells().forEach((function(e,i){t({$a:n,Ea:i},e)}))}))}function om(e,t,n){if(e=e.g.get(t),!e)throw new Ie(2,9,9013,"Could not find mechanism with name "+t);if(t=e.getCells().get(n),!t)throw new Ie(2,9,9013,"Could not find cell with name "+n);return t}function sm(e,t){e.g.forEach((function(e){t(e.getEmeSessionCell())}))}function um(e){var t=Array.from(e.g.keys());if(!t.length)throw new Ie(2,9,9e3,"No supported storage mechanisms found");return e.g.get(t[0]).getEmeSessionCell()}function lm(e){var t,n,i;return F((function(r){return 1==r.g?(t=Array.from(e.g.values()),n=0<t.length,n||(i=dm,i.forEach((function(e){(e=e())&&t.push(e)}))),S(r,Promise.all(t.map((function(e){return e.erase()}))),2)):n?r.C(0):S(r,Promise.all(t.map((function(e){return e.destroy()}))),0)}))}function cm(e,t){dm.set(e,t)}qi("http",Ug,1,!0),qi("https",Ug,1,!0),Fg.prototype.close=function(e,t){if(this.g.has(e)){var n=this.g.get(e);this.g["delete"](e),this.j+=n,this.h+=t}},Bg.prototype.destroy=function(){return this.M.destroy()},qg.prototype.abort=function(){var e=this;return F((function(t){if(1==t.g){try{e.i.abort()}catch(n){}return x(t,2),S(t,e.g,4)}if(2!=t.g)return I(t,0);k(t),A(t)}))},qg.prototype.store=function(){return this.h},qg.prototype.promise=function(){return this.g},Xg.prototype.destroy=function(){return Promise.all(this.g.map((function(e){return e.abort()})))},i=Qg.prototype,i.destroy=function(){return this.g.destroy()},i.hasFixedKeySpace=function(){return!0},i.addSegments=function(){return Zg(this.i)},i.removeSegments=function(e,t){return em(this,this.i,e,t)},i.getSegments=function(e){var t,n=this;return F((function(i){return 1==i.g?S(i,tm(n,n.i,e),2):(t=i.h,i["return"](t.map((function(e){return n.Me(e)}))))}))},i.addManifests=function(){return Zg(this.h)},i.updateManifestExpiration=function(e,t){var n=$g(this.g,this.h),i=n.store();return i.get(e).onsuccess=function(n){(n=n.target.result)&&(n.expiration=t,i.put(n,e))},n.promise()},i.removeManifests=function(e,t){return em(this,this.h,e,t)},i.getManifests=function(e){var t,n=this;return F((function(i){return 1==i.g?S(i,tm(n,n.h,e),2):(t=i.h,i["return"](Promise.all(t.map((function(e){return n.xc(e)})))))}))},i.getAllManifests=function(){var e,t,n=this;return F((function(i){return 1==i.g?(e=Jg(n.g,n.h,"readonly"),t=new Map,S(i,Yg(e,(function(e,i){var r;return F((function(a){if(1==a.g)return S(a,n.xc(i),2);r=a.h,t.set(e,r),A(a)}))})),2)):3!=i.g?S(i,e.promise(),3):i["return"](t)}))},i.Me=function(e){return e},i.xc=function(e){return Promise.resolve(e)},i.add=function(e,t){var n,i,r,a,o,s,u,l=this;return F((function(c){if(1==c.g){for(n=$g(l.g,e),i=n.store(),r=[],a={},o=d(t),s=o.next();!s.done;a={Tc:a.Tc},s=o.next())u=s.value,a.Tc=i.add(u),a.Tc.onsuccess=function(e){return function(){r.push(e.Tc.result)}}(a);return S(c,n.promise(),2)}return c["return"](r)}))},nm.prototype.destroy=function(){return this.g.destroy()},nm.prototype.getAll=function(){var e,t,n=this;return F((function(i){return 1==i.g?(e=Jg(n.g,"session-ids","readonly"),t=[],S(i,Yg(e,(function(e,n){t.push(n)})),2)):3!=i.g?S(i,e.promise(),3):i["return"](t)}))},nm.prototype.add=function(e){var t=$g(this.g,"session-ids"),n=t.store();e=d(e);for(var i=e.next();!i.done;i=e.next())n.add(i.value);return t.promise()},nm.prototype.remove=function(e){var t,n=this;return F((function(i){return 1==i.g?(t=$g(n.g,"session-ids"),S(i,Yg(t,(function(t,n,i){e.includes(n.sessionId)&&i["delete"]()})),2)):S(i,t.promise(),0)}))},im.prototype.destroy=function(){for(var e=[],t=d(this.g.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.g.clear(),Promise.all(e)},im.prototype.init=function(){var e=this;dm.forEach((function(t,n){var i=t();i&&e.g.set(n,i)}));for(var t=[],n=d(this.g.values()),i=n.next();!i.done;i=n.next())t.push(i.value.init());return Promise.all(t)},H("shaka.offline.StorageMuxer",im),im.unregister=function(e){dm["delete"](e)},im.register=cm,im.prototype.destroy=im.prototype.destroy;var dm=new Map;function hm(){Qg.apply(this,arguments)}function fm(e,t){mm(e);for(var n=d(e.streams),i=n.next();!i.done;i=n.next());return e.streams.map((function(n){return pm(n,e.startTime,t)}))}function pm(e,t,n){var i=e.initSegmentUri?gm(e.initSegmentUri):null,r=t+e.presentationTimeOffset,a=t+n;return{id:e.id,originalId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,hdr:void 0,kind:e.kind,language:e.language,label:e.label,width:e.width,height:e.height,initSegmentKey:i,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map((function(e){var n=gm(e.uri);return{startTime:t+e.startTime,endTime:t+e.endTime,dataKey:n,initSegmentKey:i,appendWindowStart:t,appendWindowEnd:a,timestampOffset:r,tilesLayout:""}})),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0}}function gm(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new Ie(2,9,9004,"Could not parse uri "+e)}function mm(e){var t=e.streams.filter((function(e){return"audio"==e.contentType}));if(e=e.streams.filter((function(e){return"video"==e.contentType})),!t.every((function(e){return e.variantIds}))||!e.every((function(e){return e.variantIds}))){for(var n=d(t),i=n.next();!i.done;i=n.next())i.value.variantIds=[];for(n=d(e),i=n.next();!i.done;i=n.next())i.value.variantIds=[];if(n=0,e.length&&!t.length){var r=n++,a=d(e);for(i=a.next();!i.done;i=a.next())i.value.variantIds.push(r)}if(!e.length&&t.length)for(r=n++,a=d(t),i=a.next();!i.done;i=a.next())i.value.variantIds.push(r);if(e.length&&t.length)for(t=d(t),i=t.next();!i.done;i=t.next())for(i=i.value,r=d(e),a=r.next();!a.done;a=r.next()){a=a.value;var o=n++;i.variantIds.push(o),a.variantIds.push(o)}}}function vm(){Qg.apply(this,arguments)}function ym(e,t,n){return{id:e.id,originalId:e.originalId,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:void 0,kind:e.kind,language:e.language,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map((function(i){return{startTime:t+i.startTime,endTime:t+i.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:t,appendWindowEnd:n,timestampOffset:t-e.presentationTimeOffset,dataKey:i.dataKey,tilesLayout:""}})),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0}}function bm(){Qg.apply(this,arguments)}function Tm(){this.o=this.j=this.i=this.h=this.g=this.l=null}function Em(){var t=new Vt,n=e.indexedDB.deleteDatabase("shaka_offline_db");return n.onblocked=function(){},n.onsuccess=function(){t.resolve()},n.onerror=function(e){t.reject(new Ie(2,9,9001,n.error)),e.preventDefault()},t}function wm(e,t,n,i){this.g=e,this.i=t,this.h=n,this.l=i,this.j=["offline:",e,"/",t,"/",n,"/",i].join("")}function Sm(e){if(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e),null==e)return null;var t=e[1];if("manifest"!=t&&"segment"!=t)return null;var n=e[2];if(!n)return null;var i=e[3];return i&&null!=t?new wm(t,n,i,Number(e[4])):null}function Am(e,t){this.h=e,this.g=t}function xm(e,t){var n=new ss(null,0);n.ab(t.duration);var i=t.streams.filter((function(e){return"audio"==e.type})),r=t.streams.filter((function(e){return"video"==e.type}));i=_m(e,i,r,n),r=t.streams.filter((function(e){return e.type==Ge})).map((function(t){return Im(e,t,n)}));var a=t.streams.filter((function(e){return"image"==e.type})).map((function(t){return Im(e,t,n)})),o=t.drmInfo?[t.drmInfo]:[];if(t.drmInfo)for(var s=d(i.values()),u=s.next();!u.done;u=s.next())u=u.value,u.audio&&u.audio.encrypted&&(u.audio.drmInfos=o),u.video&&u.video.encrypted&&(u.video.drmInfos=o);return{presentationTimeline:n,minBufferTime:2,offlineSessionIds:t.sessionIds,variants:Array.from(i.values()),textStreams:r,imageStreams:a}}function _m(e,t,n,i){for(var r=new Set,a=d(t),o=a.next();!o.done;o=a.next()){var s=d(o.value.variantIds);for(o=s.next();!o.done;o=s.next())r.add(o.value)}for(a=d(n),o=a.next();!o.done;o=a.next())for(s=d(o.value.variantIds),o=s.next();!o.done;o=s.next())r.add(o.value);for(a=new Map,r=d(r),o=r.next();!o.done;o=r.next())o=o.value,a.set(o,{id:o,language:"",primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(t=d(t),r=t.next();!r.done;r=t.next())for(r=r.value,o=Im(e,r,i),s=d(r.variantIds),r=s.next();!r.done;r=s.next())r=a.get(r.value),r.language=o.language,r.primary=r.primary||o.primary,r.audio=o;for(n=d(n),t=n.next();!t.done;t=n.next())for(r=t.value,t=Im(e,r,i),o=d(r.variantIds),r=o.next();!r.done;r=o.next())r=a.get(r.value),r.primary=r.primary||t.primary,r.video=t;return a}function Im(e,t,n){var i=t.segments.map((function(t){return km(e,t)}));return n.ec(i),{id:t.id,originalId:t.originalId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Ls(i),mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,hdr:t.hdr,kind:t.kind,encrypted:t.encrypted,drmInfos:[],keyIds:t.keyIds,language:t.language,label:t.label,type:t.type,primary:t.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:t.roles,forced:t.forced,channelsCount:t.channelsCount,audioSamplingRate:t.audioSamplingRate,spatialAudio:t.spatialAudio,closedCaptions:t.closedCaptions,tilesLayout:t.tilesLayout}}function km(e,t){var n=new wm("segment",e.h,e.g,t.dataKey);return new os(t.startTime,t.endTime,(function(){return[n.toString()]}),0,null,null!=t.initSegmentKey?Cm(e,t.initSegmentKey):null,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd,[],t.tilesLayout||"")}function Cm(e,t){var n=new wm("segment",e.h,e.g,t);return new rs((function(){return[n.toString()]}),0,null)}function Lm(){this.g=null}function Pm(){}function Nm(e){var t=Sm(e);return t&&"manifest"==t.g?(e={uri:e,ef:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}},e=Fi(e)):e=t&&"segment"==t.g?Dm(t.key(),t):Ui(new Ie(2,1,9004,e)),e}function Dm(e,t){var n=new im;return Fi(void 0).qa((function(){return n.init()})).qa((function(){return om(n,t.$a(),t.Ea())})).qa((function(e){return e.getSegments([t.key()])})).qa((function(e){return{uri:t,data:e[0].data,headers:{}}}))["finally"]((function(){return n.destroy()}))}function Rm(e,t,n){var i,r,a,o,s,u;return F((function(l){switch(l.g){case 1:i=[];for(var c=[],h=d(n),f=h.next();!f.done;f=h.next()){f=f.value;for(var p=!1,g=d(c),m=g.next();!m.done;m=g.next())if(m=m.value,Um(m.info,f)){m.sessionIds.push(f.sessionId),p=!0;break}p||c.push({info:f,sessionIds:[f.sessionId]})}r=d(c),a=r.next();case 2:if(a.done){l.C(4);break}return o=a.value,s=Mm(e,t,o),S(l,s,5);case 5:u=l.h,i=i.concat(u),a=r.next(),l.C(2);break;case 4:return l["return"](i)}}))}function Mm(e,t,n){var i,r;return F((function(a){switch(a.g){case 1:return i=new mr({Mb:t,onError:function(){},md:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),x(a,2),i.configure(e),S(a,Tr(i,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:I(a,3);break;case 2:return k(a),S(a,i.destroy(),5);case 5:return a["return"]([]);case 3:return x(a,6),S(a,wr(i),8);case 8:I(a,7);break;case 6:return k(a),S(a,i.destroy(),9);case 9:return a["return"]([]);case 7:return r=[],S(a,Promise.all(n.sessionIds.map((function(e){return F((function(t){return 1==t.g?(x(t,2),S(t,Sr(i,e),4)):2!=t.g?(r.push(e),I(t,0)):(k(t),void A(t))}))}))),10);case 10:return S(a,i.destroy(),11);case 11:return a["return"](r)}}))}function Um(e,t){function n(e,t){return e.robustness==t.robustness&&e.contentType==t.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&ct(e.audioCapabilities,t.audioCapabilities,n)&&ct(e.videoCapabilities,t.videoCapabilities,n)}function Om(e,t,n){var i=t.presentationTimeline.getDuration();return t=jm(t),{offlineUri:null,originalManifestUri:e,duration:i,size:0,expiration:1/0,tracks:t,appMetadata:n}}function Fm(e,t){var n=xm(new Am(e.$a(),e.Ea()),t),i=t.appMetadata||{};return n=jm(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:i}}function jm(e){var t=[],n=oi(e.variants);n=d(n);for(var i=n.next();!i.done;i=n.next())t.push(Qn(i.value));for(e=d(e.textStreams),n=e.next();!n.done;n=e.next())t.push(Zn(n.value));return t}function Bm(){this.g={}}function Gm(e,t,n){return n=n.endTime-n.startTime,Vm(e,t)*n}function Vm(e,t){var n=e.g[t];return null==n&&(n=0),n}function Km(e){var t=this;if(e&&e.constructor!=Zu)throw new Ie(2,9,9008);this.T=this.s=null,e?(this.s=e.s,this.T=e.Ac()):(this.s=Ku(),this.T=new Wi),this.sd=[],this.Kc=[],this.ie=[];var n=!e;this.M=new ir((function(){var e,i,r,a,o;return F((function(s){switch(s.g){case 1:return S(s,Promise.all(t.ie.map((function(e){return Vg(e)}))),2);case 2:for(e=function(){},i=[],r=d(t.Kc),a=r.next();!a.done;a=r.next())o=a.value,i.push(o.then(e,e));return S(s,Promise.all(i),3);case 3:if(!n){s.C(4);break}return S(s,t.T.destroy(),4);case 4:t.s=null,t.T=null,A(s)}}))}))}function zm(){if(An())e:{for(var e=d(dm.values()),t=e.next();!t.done;t=e.next())if(t=t.value,t=t()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}function Hm(e,t,n,i,r,a){var o,s,u,l,c,d,h,f,p,g,m;return F((function(v){switch(v.g){case 1:return uv(),s=o=null,u=new im,c=l=null,x(v,2,3),S(v,i(),5);case 5:return o=v.h,S(v,ev(e,t,o,r),6);case 6:if(d=v.h,sv(e),h=!d.presentationTimeline.Y()&&!d.presentationTimeline.Jb(),!h)throw new Ie(2,9,9005,t);return S(v,tv(e,d,(function(e){c=c||e}),r),7);case 7:if(s=v.h,sv(e),c)throw c;return S(v,Wm(d,r),8);case 8:return S(v,u.init(),9);case 9:return sv(e),S(v,rm(u),10);case 10:return l=v.h,sv(e),S(v,qm(e,l.Ea,s,d,t,n,r,a),11);case 11:if(f=v.h,sv(e),c)throw c;return S(v,l.Ea.addManifests([f]),12);case 12:return p=v.h,sv(e),g=new wm("manifest",l.path.$a,l.path.Ea,p[0]),v["return"](Fm(g,f));case 3:return C(v),e.sd=[],S(v,u.destroy(),13);case 13:if(!o){v.C(14);break}return S(v,o.stop(),14);case 14:if(!s){v.C(16);break}return S(v,s.destroy(),16);case 16:L(v,0);break;case 2:if(m=k(v),!l){v.C(18);break}return S(v,l.Ea.removeSegments(e.sd,(function(){})),18);case 18:throw c||m}}))}function Wm(e,t){var n,i,r,a,o,s,u,l,c,h,f,p,g,m,v,y,b,T,E,w,_,C,L,P,N,D,R,M,U;return F((function(O){switch(O.g){case 1:for(n={width:1/0,height:1/0},Vn(e,t.restrictions,n),Hn(e,t.offline.usePersistentLicense),i=[],r=t.preferredAudioChannelCount,a=t.preferredDecodingAttributes,o=t.preferredVideoCodecs,s=t.preferredAudioCodecs,Rn(e,o,s,r,a),u=d(e.variants),l=u.next();!l.done;l=u.next())c=l.value,i.push(Qn(c));for(h=d(e.textStreams),f=h.next();!f.done;f=h.next())p=f.value,i.push(Zn(p));for(g=d(e.imageStreams),m=g.next();!m.done;m=g.next())v=m.value,i.push(ei(v));return S(O,t.offline.trackSelectionCallback(i),2);case 2:for(y=O.h,b=e.presentationTimeline.getDuration(),T=0,E=d(y),w=E.next();!w.done;w=E.next())_=w.value,C=_.bandwidth*b/8,T+=C;return x(O,3),S(O,t.offline.downloadSizeCallback(T),5);case 5:if(L=O.h,!L)throw new Ie(2,9,9014);I(O,4);break;case 3:if(P=k(O),P instanceof Ie)throw P;throw new Ie(2,9,9015);case 4:for(N=new Set,D=new Set,R=new Set,M=d(y),w=M.next();!w.done;w=M.next())U=w.value,"variant"==U.type&&N.add(U.id),"text"==U.type&&D.add(U.id),"image"==U.type&&R.add(U.id);e.variants=e.variants.filter((function(e){return N.has(e.id)})),e.textStreams=e.textStreams.filter((function(e){return D.has(e.id)})),e.imageStreams=e.imageStreams.filter((function(e){return R.has(e.id)})),pv(e),A(O)}}))}function qm(e,t,n,i,r,a,o,s){var u,l,c,d,h,f,p,g,m,v,y,b;return F((function(T){switch(T.g){case 1:return u=Om(r,i,a),l=o.offline.progressCallback,c=function(e,t){u.size=t,l(u,e)},d=function(e,t){p&&o.offline.usePersistentLicense&&g==t&&xr(n,"cenc",e)},Gg(s,c,d),h=i.variants.some((function(e){var t=e.audio&&e.audio.encrypted;return e.video&&e.video.encrypted||t})),f=i.variants.some((function(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]).some((function(e){return e.initData&&e.initData.length}))})),p=h&&!f,g=null,p&&(m=n.i,g=gv.get(m.keySystem)),_(T),y=v=nv(e,s,t,n,i,r,a,o),S(T,Hg(s),4);case 4:if(y.size=T.h,v.expiration=n.zc(),b=Ir(n),v.sessionIds=o.offline.usePersistentLicense?b:[],h&&o.offline.usePersistentLicense&&!b.length)throw new Ie(2,9,9007);return T["return"](v);case 2:return C(T),S(T,s.destroy(),5);case 5:L(T,0)}}))}function Ym(e,t){var n,i,r,a,o,s;return F((function(u){switch(u.g){case 1:if(uv(),n=Sm(t),null==n||"manifest"!=n.g)throw new Ie(2,9,9004,t);return i=n,r=new im,_(u),S(u,r.init(),4);case 4:return S(u,om(r,i.$a(),i.Ea()),5);case 5:return a=u.h,S(u,a.getManifests([i.key()]),6);case 6:return o=u.h,s=o[0],S(u,Promise.all([$m(e,s,r),Jm(a,i,s)]),2);case 2:return C(u),S(u,r.destroy(),8);case 8:L(u,0)}}))}function Xm(e,t){for(var n=[],i=d(e.streams),r=i.next();!r.done;r=i.next())r=r.value,t&&"video"==r.type?n.push({contentType:cn(r.mimeType,r.codecs),robustness:e.drmInfo.videoRobustness}):t||"audio"!=r.type||n.push({contentType:cn(r.mimeType,r.codecs),robustness:e.drmInfo.audioRobustness});return n}function $m(e,t,n){return F((function(i){return S(i,hv(e.T,e.s.drm,n,t),0)}))}function Jm(e,t,n){function i(){}var r=dv(n);return Fm(t,n),Promise.all([e.removeSegments(r,i),e.removeManifests([t.key()],i)])}function Qm(e){var t,n,i,r,a,o,s,u,l,c;return F((function(h){switch(h.g){case 1:return uv(),t=e.T,n=e.s.drm,i=new im,r=!1,_(h),S(h,i.init(),4);case 4:a=[],sm(i,(function(e){return a.push(e)})),o=d(a),s=o.next();case 5:if(s.done){h.C(2);break}return u=s.value,S(h,u.getAll(),8);case 8:return l=h.h,S(h,Rm(n,t,l),9);case 9:return c=h.h,S(h,u.remove(c),10);case 10:c.length!=l.length&&(r=!0),s=o.next(),h.C(5);break;case 2:return C(h),S(h,i.destroy(),11);case 11:L(h,3);break;case 3:return h["return"](!r)}}))}function Zm(){var e,t,n;return F((function(i){switch(i.g){case 1:return uv(),e=[],t=new im,_(i),S(i,t.init(),4);case 4:return n=Promise.resolve(),am(t,(function(t,i){n=n.then((function(){var n;return F((function(r){if(1==r.g)return S(r,i.getAllManifests(),2);n=r.h,n.forEach((function(n,i){var r=Fm(new wm("manifest",t.$a,t.Ea,i),n);e.push(r)})),A(r)}))}))})),S(i,n,2);case 2:return C(i),S(i,t.destroy(),6);case 6:L(i,3);break;case 3:return i["return"](e)}}))}function ev(e,t,n,i){var r,a,o,s,u;return F((function(l){if(1==l.g)return r=null,a=e.T,o={networkingEngine:a,filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(e){r=e},isLowLatencyMode:function(){return!1},isAutoLowLatencyMode:function(){return!1},enableLowLatencyMode:function(){}},n.configure(i.manifest),sv(e),S(l,n.start(t,o),2);if(3!=l.g)return s=l.h,sv(e),u=fv(s),S(l,Promise.all(se(u,(function(e){return e.createSegmentIndex()}))),3);if(sv(e),r)throw r;return l["return"](s)}))}function tv(e,t,n,i){var r;return F((function(a){switch(a.g){case 1:return r=new mr({Mb:e.T,onError:n,md:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),r.configure(i.drm),S(a,yr(r,t.variants,i.offline.usePersistentLicense),2);case 2:return S(a,wr(r),3);case 3:return S(a,Ar(r),4);case 4:return a["return"](r)}}))}function nv(e,t,n,i,r,a,o,s){for(var u=new Bm,l=d(r.variants),c=l.next();!c.done;c=l.next()){var h=u;c=c.value;var f=c.audio,p=c.video;if(f&&!p&&(h.g[f.id]=f.bandwidth||c.bandwidth),!f&&p&&(h.g[p.id]=p.bandwidth||c.bandwidth),f&&p){var g=f.bandwidth||393216,m=p.bandwidth||c.bandwidth-g;0>=m&&(m=c.bandwidth),h.g[f.id]=g,h.g[p.id]=m}}for(l=d(r.textStreams),h=l.next();!h.done;h=l.next())u.g[h.value.id]=52;for(l=d(r.imageStreams),h=l.next();!h.done;h=l.next())h=h.value,u.g[h.id]=h.bandwidth||2048;for(h=new Map,h.set(null,Promise.resolve(null)),c=new Map,f=fv(r),l=new Map,f=d(f),p=f.next();!p.done;p=f.next())p=p.value,g=iv(e,t,n,u,r,p,s,h,c),l.set(p.id,g);for(e=d(r.variants),c=e.next();!c.done;c=e.next())t=c.value,t.audio&&l.get(t.audio.id).variantIds.push(t.id),t.video&&l.get(t.video.id).variantIds.push(t.id);return e=Array.from(l.values()),s=s.offline.usePersistentLicense,(t=i.i)&&s&&(t.initData=[]),{creationTime:Date.now(),originalManifestUri:a,duration:r.presentationTimeline.getDuration(),size:0,expiration:i.zc(),streams:e,sessionIds:s?Ir(i):[],drmInfo:t,appMetadata:o}}function iv(e,t,n,i,r,a,o,s,u){var l={id:a.id,originalId:a.originalId,primary:a.primary,type:a.type,mimeType:a.mimeType,codecs:a.codecs,frameRate:a.frameRate,pixelAspectRatio:a.pixelAspectRatio,hdr:a.hdr,kind:a.kind,language:a.language,label:a.label,width:a.width||null,height:a.height||null,encrypted:a.encrypted,keyIds:a.keyIds,segments:[],variantIds:[],roles:a.roles,forced:a.forced,channelsCount:a.channelsCount,audioSamplingRate:a.audioSamplingRate,spatialAudio:a.spatialAudio,closedCaptions:a.closedCaptions,tilesLayout:a.tilesLayout},c=a.id;return ov(a,r.presentationTimeline.vb(),(function(r){var d=rv(e,t,c,a.id,n,i,r.h,o,s),h=av(e,t,c,a.id,n,i,r,o,u);zg(t,c,(function(){var e,t;return F((function(n){return 1==n.g?S(n,d,2):3!=n.g?(e=n.h,S(n,h,3)):(t=n.h,l.segments.push({initSegmentKey:e,startTime:r.startTime,endTime:r.endTime,appendWindowStart:r.appendWindowStart,appendWindowEnd:r.appendWindowEnd,timestampOffset:r.timestampOffset,tilesLayout:r.tilesLayout,dataKey:t}),void A(n))}))}))})),l}function rv(e,t,n,i,r,a,o,s,u){return u.has(o)?u.get(o):(s=Hs(o.Fa(),o.Ba,o.va,s.streaming.retryParameters),t=Kg(t,n,s,.5*Vm(a,i),!0,(function(t){var n;return F((function(i){return 1==i.g?S(i,r.addSegments([{data:t}]),2):(n=i.h,e.sd.push(n[0]),i["return"](n[0]))}))})),u.set(o,t),t)}function av(e,t,n,i,r,a,o,s,u){var l=[o.Fa()[0],o.Ba,o.va].join("-");return u.has(l)?u.get(l):(s=Hs(o.Fa(),o.Ba,o.va,s.streaming.retryParameters),t=Kg(t,n,s,Gm(a,i,o),!1,(function(t){var n;return F((function(i){return 1==i.g?S(i,r.addSegments([{data:t}]),2):(n=i.h,e.sd.push(n[0]),i["return"](n[0]))}))})),u.set(l,t),t)}function ov(e,t,n){if(t=e.segmentIndex.find(t),null!=t)for(var i=e.segmentIndex.get(t);i;)n(i),i=e.segmentIndex.get(++t)}function sv(e){if(e.M.g)throw new Ie(2,9,7001)}function uv(){if(!zm())throw new Ie(2,9,9e3)}function lv(e,t){return F((function(n){return 1==n.g?(e.Kc.push(t),_(n),S(n,t,4)):2!=n.g?n["return"](n.h):(C(n),lt(e.Kc,t),L(n,0))}))}function cv(e,t){var n=t.promise;return e.Kc.push(n),t["finally"]((function(){lt(e.Kc,n)}))}function dv(e){var t=[];e=d(e.streams);for(var n=e.next();!n.done;n=e.next()){n=d(n.value.segments);for(var i=n.next();!i.done;i=n.next())i=i.value,null!=i.initSegmentKey&&t.push(i.initSegmentKey),t.push(i.dataKey)}return t}function hv(e,t,n,i){var r,a,o;return F((function(s){return 1==s.g?i.drmInfo?(r=um(n),a=i.sessionIds.map((function(e){return{sessionId:e,keySystem:i.drmInfo.keySystem,licenseUri:i.drmInfo.licenseServerUri,serverCertificate:i.drmInfo.serverCertificate,audioCapabilities:Xm(i,!1),videoCapabilities:Xm(i,!0)}})),S(s,Rm(t,e,a),2)):s["return"]():3!=s.g?(o=s.h,S(s,r.remove(o),3)):S(s,r.add(a.filter((function(e){return!o.includes(e.sessionId)}))),0)}))}function fv(e){for(var t=new Set,n=d(e.textStreams),i=n.next();!i.done;i=n.next())t.add(i.value);for(n=d(e.imageStreams),i=n.next();!i.done;i=n.next())t.add(i.value);for(e=d(e.variants),n=e.next();!n.done;n=e.next())n=n.value,n.audio&&t.add(n.audio),n.video&&t.add(n.video);return t}function pv(e){e.variants.map((function(e){return e.video}));var t=new Set(e.variants.map((function(e){return e.audio})));e=e.textStreams;for(var n=d(t),i=n.next();!i.done;i=n.next()){i=d(t);for(var r=i.next();!r.done;r=i.next());}for(t=d(e),n=t.next();!n.done;n=t.next())for(n=d(e),i=n.next();!i.done;i=n.next());}b(hm,Qg),hm.prototype.updateManifestExpiration=function(e,t){var n,i,r,a=this;return F((function(o){return n=$g(a.g,a.h),i=n.store(),r=new Vt,i.get(e).onsuccess=function(n){(n=n.target.result)?(n.expiration=t,i.put(n),r.resolve()):r.reject(new Ie(2,9,9012,"Could not find values for "+e))},S(o,Promise.all([n.promise(),r]),0)}))},hm.prototype.xc=function(e){var t,n,i,r,a,o;return F((function(s){if(1==s.g){for(t=[],n=0;n<e.periods.length;++n)i=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,r=i-e.periods[n].startTime,a=fm(e.periods[n],r),t.push(a);return S(s,Pf(t),2)}return o=s.h,s["return"]({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:null==e.expiration?1/0:e.expiration,streams:o,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata})}))},hm.prototype.Me=function(e){return{data:e.data}},b(vm,Qg),vm.prototype.xc=function(e){var t,n,i,r,a,o;return F((function(s){if(1==s.g){for(t=[],n=0;n<e.periods.length;++n){i=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,r=i-e.periods[n].startTime;for(var u=e.periods[n],l=[],c=d(u.streams),h=c.next();!h.done;h=c.next())h=h.value,0!=h.variantIds.length&&l.push(ym(h,u.startTime,u.startTime+r));a=l,t.push(a)}return S(s,Pf(t),2)}return o=s.h,s["return"]({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:null==e.expiration?1/0:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:o})}))},b(bm,Qg),bm.prototype.hasFixedKeySpace=function(){return!1},bm.prototype.addSegments=function(e){return this.add(this.i,e)},bm.prototype.addManifests=function(e){return this.add(this.h,e)},bm.prototype.xc=function(e){return null==e.expiration&&(e.expiration=1/0),Promise.resolve(e)},i=Tm.prototype,i.init=function(){var t=this,n=new Vt,i=e.indexedDB.open("shaka_offline_db",5);return i.onsuccess=function(){var e=i.result;t.l=e;var r=e.objectStoreNames;r=r.contains("manifest")&&r.contains("segment")?new hm(e,"segment","manifest"):null,t.g=r,r=e.objectStoreNames,r=r.contains("manifest-v2")&&r.contains("segment-v2")?new vm(e,"segment-v2","manifest-v2"):null,t.h=r,r=e.objectStoreNames,r=r.contains("manifest-v3")&&r.contains("segment-v3")?new vm(e,"segment-v3","manifest-v3"):null,t.i=r,r=e.objectStoreNames,r=r.contains("manifest-v5")&&r.contains("segment-v5")?new bm(e,"segment-v5","manifest-v5"):null,t.j=r,e=e.objectStoreNames.contains("session-ids")?new nm(e):null,t.o=e,n.resolve()},i.onupgradeneeded=function(){for(var e=i.result,t=d(["segment-v5","manifest-v5","session-ids"]),n=t.next();!n.done;n=t.next())n=n.value,e.objectStoreNames.contains(n)||e.createObjectStore(n,{autoIncrement:!0})},i.onerror=function(e){n.reject(new Ie(2,9,9001,i.error)),e.preventDefault()},n},i.destroy=function(){var e=this;return F((function(t){switch(t.g){case 1:if(!e.g){t.C(2);break}return S(t,e.g.destroy(),2);case 2:if(!e.h){t.C(4);break}return S(t,e.h.destroy(),4);case 4:if(!e.i){t.C(6);break}return S(t,e.i.destroy(),6);case 6:if(!e.j){t.C(8);break}return S(t,e.j.destroy(),8);case 8:if(!e.o){t.C(10);break}return S(t,e.o.destroy(),10);case 10:e.l&&e.l.close(),A(t)}}))},i.getCells=function(){var e=new Map;return this.g&&e.set("v1",this.g),this.h&&e.set("v2",this.h),this.i&&e.set("v3",this.i),this.j&&e.set("v5",this.j),e},i.getEmeSessionCell=function(){return this.o},i.erase=function(){var e=this;return F((function(t){switch(t.g){case 1:if(!e.g){t.C(2);break}return S(t,e.g.destroy(),2);case 2:if(!e.h){t.C(4);break}return S(t,e.h.destroy(),4);case 4:if(!e.i){t.C(6);break}return S(t,e.i.destroy(),6);case 6:if(!e.j){t.C(8);break}return S(t,e.j.destroy(),8);case 8:return e.l&&e.l.close(),S(t,Em(),10);case 10:return e.l=null,e.g=null,e.h=null,e.i=null,e.j=null,S(t,e.init(),0)}}))},cm("idb",(function(){return In()||!e.indexedDB?null:new Tm})),wm.prototype.$a=function(){return this.i},wm.prototype.Ea=function(){return this.h},wm.prototype.key=function(){return this.l},wm.prototype.toString=function(){return this.j},i=Lm.prototype,i.configure=function(){},i.start=function(e,t){var n,i,r,a,o,s,u,l=this;return F((function(c){switch(c.g){case 1:if(n=Sm(e),l.g=n,null==n||"manifest"!=n.g)throw new Ie(2,1,9004,e);return i=new im,_(c),S(c,i.init(),4);case 4:return S(c,om(i,n.$a(),n.Ea()),5);case 5:return r=c.h,S(c,r.getManifests([n.key()]),6);case 6:return a=c.h,o=a[0],s=new Am(n.$a(),n.Ea()),u=xm(s,o),t.makeTextStreamsForClosedCaptions(u),c["return"](u);case 2:return C(c),S(c,i.destroy(),7);case 7:L(c,0)}}))},i.stop=function(){return Promise.resolve()},i.update=function(){},i.onExpirationUpdated=function(e,t){var n,i,r,a,o,s,u,l=this;return F((function(c){switch(c.g){case 1:return n=l.g,i=new im,x(c,2,3),S(c,i.init(),5);case 5:return S(c,om(i,n.$a(),n.Ea()),6);case 6:return r=c.h,S(c,r.getManifests([n.key()]),7);case 7:if(a=c.h,o=a[0],s=o.sessionIds.includes(e),u=void 0==o.expiration||o.expiration>t,!s||!u){c.C(3);break}return S(c,r.updateManifestExpiration(n.key(),t),3);case 3:return C(c),S(c,i.destroy(),10);case 10:L(c,0);break;case 2:k(c),c.C(3)}}))},ia["application/x-offline-manifest"]=function(){return new Lm},H("shaka.offline.OfflineScheme",Pm),Pm.plugin=Nm,qi("offline",Nm),i=Km.prototype,i.destroy=function(){return this.M.destroy()},i.configure=function(e,t){return 2==arguments.length&&"string"==typeof e&&(e=Gu(e,t)),e.manifest&&e.manifest.dash&&"defaultPresentationDelay"in e.manifest.dash&&(Ce("manifest.dash.defaultPresentationDelay configuration","Please Use manifest.defaultPresentationDelay instead."),e.manifest.defaultPresentationDelay=e.manifest.dash.defaultPresentationDelay,delete e.manifest.dash.defaultPresentationDelay),zu(this.s,e)},i.getConfiguration=function(){var e=Ku();return zu(e,this.s,Ku()),e},i.Ac=function(){return this.T},i.store=function(e,t,n){var i=this,r=this.getConfiguration(),a=new Bg(this.T);this.ie.push(a),t=Hm(this,e,t||{},(function(){var t;return F((function(a){return 1==a.g?S(a,ea(e,i.T,r.manifest.retryParameters,n||null),2):(t=a.h,a["return"](Ue(t)))}))}),r,a);var o=new Mi(t,(function(){return Vg(a)}));return o["finally"]((function(){lt(i.ie,a)})),o.then=function(e){return Ce("shaka.offline.Storage.store.then","Storage operations now return a shaka.util.AbortableOperation, rather than a promise.  Please update to conform to this new API; you can use the |chain| method instead."),o.promise.then(e)},cv(this,o)},i.ng=function(){return Ce("shaka.offline.Storage.getStoreInProgress","Multiple concurrent downloads are now supported."),!1},i.remove=function(e){return lv(this,Ym(this,e))},i.Qg=function(){return lv(this,Qm(this))},i.list=function(){return lv(this,Zm())},H("shaka.offline.Storage",Km),Km.deleteAll=function(){var e;return F((function(t){return 1==t.g?(e=new im,_(t),S(t,lm(e),2)):5!=t.g?(C(t),S(t,e.destroy(),5)):L(t,0)}))},Km.prototype.list=Km.prototype.list,Km.prototype.removeEmeSessions=Km.prototype.Qg,Km.prototype.remove=Km.prototype.remove,Km.prototype.getStoreInProgress=Km.prototype.ng,Km.prototype.store=Km.prototype.store,Km.prototype.getNetworkingEngine=Km.prototype.Ac,Km.prototype.getConfiguration=Km.prototype.getConfiguration,Km.prototype.configure=Km.prototype.configure,Km.prototype.destroy=Km.prototype.destroy,Km.support=zm;var gv=(new Map).set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95").set("com.adobe.primetime","f239e769efa348509c16a903c6932efb");function mv(){}function vv(){for(var e=d(bv),t=e.next();!t.done;t=e.next()){t=t.value;try{t.Gf()}catch(n){X("Error installing polyfill!",n)}}}function yv(e,t){for(var n={priority:t||0,Gf:e},i=d(he(bv)),r=i.next();!r.done;r=i.next()){r=r.value;var a=r.za;if(r.item.priority<n.priority)return void bv.splice(a,0,n)}bv.push(n)}Hc.offline=zm,H("shaka.polyfill",mv),mv.register=yv,mv.installAll=vv;var bv=[];function Tv(){}function Ev(){if(!Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))for(var e=d(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),t=e.next();!t.done;t=e.next())wv(t.value)}function wv(e){var t="aria-"+e.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,e,{get:function(){return this.getAttribute(t)},set:function(e){null==e||void 0==e?this.removeAttribute(t):this.setAttribute(t,e)}})}function Sv(){}function Av(){gT()}function xv(){}function _v(){if(e.Document){var t=Element.prototype;t.requestFullscreen=t.requestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen||t.webkitRequestFullscreen,t=Document.prototype,t.exitFullscreen=t.exitFullscreen||t.mozCancelFullScreen||t.msExitFullscreen||t.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",Iv),document.addEventListener("webkitfullscreenerror",Iv),document.addEventListener("mozfullscreenchange",Iv),document.addEventListener("mozfullscreenerror",Iv),document.addEventListener("MSFullscreenChange",Iv),document.addEventListener("MSFullscreenError",Iv)}}function Iv(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),n=document.createEvent("Event");n.initEvent(t,e.bubbles,e.cancelable),e.target.dispatchEvent(n)}function kv(){}function Cv(){}function Lv(){}function Pv(){(In()||kn()||!navigator.mediaCapabilities)&&(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),navigator.mediaCapabilities.decodingInfo=Nv),e.shakaMediaCapabilities=navigator.mediaCapabilities}function Nv(e){var t,n,i,r,a,o,s,u,l,c,d,h,f,p,g,m;return F((function(v){switch(v.g){case 1:if(t={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:e},!e)return v["return"](t);if("media-source"==e.type){if(!An()||e.video&&(n=e.video.contentType,i=MediaSource.isTypeSupported(n),!i)||e.audio&&(r=e.audio.contentType,a=MediaSource.isTypeSupported(r),!a))return v["return"](t)}else{if("file"!=e.type)return v["return"](t);if(e.video&&(o=e.video.contentType,s=xn(o),!s)||e.audio&&(u=e.audio.contentType,l=xn(u),!l))return v["return"](t)}return e.keySystemConfiguration?(c=e.keySystemConfiguration,d=[],h=[],c.audio&&(f={robustness:c.audio.robustness||"",contentType:e.audio.contentType},d.push(f)),c.video&&(p={robustness:c.video.robustness||"",contentType:e.video.contentType},h.push(p)),g={initDataTypes:[c.initDataType],distinctiveIdentifier:c.distinctiveIdentifier,persistentState:c.persistentState,sessionTypes:c.sessionTypes},d.length&&(g.audioCapabilities=d),h.length&&(g.videoCapabilities=h),x(v,3),S(v,navigator.requestMediaKeySystemAccess(c.keySystem,[g]),5)):(t.supported=!0,v["return"](Promise.resolve(t)));case 5:m=v.h,I(v,4);break;case 3:k(v);case 4:m&&(t.supported=!0,t.keySystemAccess=m);case 2:return v["return"](t)}}))}function Dv(){}function Rv(){var t=Cn();e.MediaSource&&(e.cast&&cast.__platform__&&cast.__platform__.canDisplayType?jv():t?(Ov(),12>=t?(Mv(),Uv()):Mv()):(Ln("Tizen 2")||Ln("Tizen 3")||Ln("Tizen 4"))&&Fv()),e.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&Bv()}function Mv(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(t){for(var n=[],i=0;i<arguments.length;++i)n[i]=arguments[i];return n=e.apply(this,n),n.abort=function(){},n}}function Uv(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}function Ov(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){return"mp2t"!=t.split(/ *; */)[0].split("/")[1].toLowerCase()&&e(t)}}function Fv(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){return"opus"!=hn(t)&&e(t)}}function jv(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */);return n.shift(),n.some((function(e){return e.startsWith("codecs=")}))?cast.__platform__.canDisplayType(t):e(t)}}function Bv(){var e=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */),i=n.findIndex((function(e){return e.startsWith("codecs=")}));if(0>i)return e(t);var r=n[i].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),a=r.findIndex((function(e){return e.startsWith("vp09")}));return 0<=a&&(r[a]="vp9",n[i]='codecs="'+r.join(",")+'"',t=n.join("; ")),e(t)}}function Gv(){}function Vv(){screen.orientation||void 0!=e.orientation&&Kv()}function Kv(){function t(){switch(e.orientation){case-90:n.type="landscape-secondary",n.angle=270;break;case 0:n.type="portrait-primary",n.angle=0;break;case 90:n.type="landscape-primary",n.angle=90;break;case 180:n.type="portrait-secondary",n.angle=180}}var n=new zv;screen.orientation=n,t(),e.addEventListener("orientationchange",(function(){t();var e=new W("change",{});n.dispatchEvent(e)}))}function zv(){oe.call(this),this.type="",this.angle=0}function Hv(){}function Wv(){e.HTMLVideoElement&&e.WebKitMediaKeys&&(delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Yv,e.MediaKeys=Jv,e.MediaKeySystemAccess=$v,navigator.requestMediaKeySystemAccess=qv)}function qv(e,t){try{var n=new $v(e,t);return Promise.resolve(n)}catch(i){return Promise.reject(i)}}function Yv(e){var t=this.mediaKeys;return t&&t!=e&&Qv(t,null),delete this.mediaKeys,(this.mediaKeys=e)?Qv(e,this):Promise.resolve()}function Xv(e){if(e=Ut(e.initData),Ot(e).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=Wt(e.subarray(4),!0),e=Yt(e);var t=new Event("encrypted");t.initDataType="skd",t.initData=Mt(e),this.dispatchEvent(t)}function $v(e,t){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(var n=d(t),i=n.next();!i.done;i=n.next()){var r=i.value;if("required"==r.persistentState)i=null;else{i={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:r.initDataTypes,sessionTypes:["temporary"],label:r.label};var a=!1,o=!1;if(r.audioCapabilities)for(var s=d(r.audioCapabilities),u=s.next();!u.done;u=s.next())u=u.value,u.contentType&&(a=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,u.contentType.split(";")[0])&&(i.audioCapabilities.push(u),o=!0));if(r.videoCapabilities)for(r=d(r.videoCapabilities),u=r.next();!u.done;u=r.next())s=u.value,s.contentType&&(a=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,s.contentType.split(";")[0])&&(i.videoCapabilities.push(s),o=!0));a||(o=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),i=o?i:null}if(i)return void(this.g=i)}throw n=Error("Unsupported keySystem"),n.name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function Jv(e){this.g=new WebKitMediaKeys(e),this.h=new ar}function Qv(e,t){if(e.h.Ob(),!t)return Promise.resolve();e.h.m(t,"webkitneedkey",Xv);try{return ps(t,HTMLMediaElement.HAVE_METADATA,e.h,(function(){t.webkitSetMediaKeys(e.g)})),Promise.resolve()}catch(n){return Promise.reject(n)}}function Zv(e){oe.call(this),this.j=null,this.l=e,this.i=this.g=null,this.h=new ar,this.sessionId="",this.expiration=NaN,this.closed=new Vt,this.keyStatuses=new ty}function ey(e,t){var n=e.keyStatuses;n.size=void 0==t?0:1,n.g=t,n=new W("keystatuseschange"),e.dispatchEvent(n)}function ty(){this.size=0,this.g=void 0}function ny(){}function iy(){!e.HTMLVideoElement||!e.MSMediaKeys||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,e.MediaKeys=uy,e.MediaKeySystemAccess=oy,navigator.requestMediaKeySystemAccess=ry,HTMLMediaElement.prototype.setMediaKeys=sy)}function ry(e,t){try{var n=new oy(e,t);return Promise.resolve(n)}catch(i){return Promise.reject(i)}}function ay(e){if(e.initData){var t=new CustomEvent("encrypted");t.initDataType="cenc",t.initData=Mt(fh(e.initData)),this.dispatchEvent(t)}}function oy(e,t){this.keySystem=e;for(var n=!1,i=d(t),r=i.next();!r.done;r=i.next()){r=r.value;var a={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:r.initDataTypes,sessionTypes:["temporary"],label:r.label},o=!1;if(r.audioCapabilities)for(var s=d(r.audioCapabilities),u=s.next();!u.done;u=s.next())u=u.value,u.contentType&&(o=!0,MSMediaKeys.isTypeSupported(this.keySystem,u.contentType.split(";")[0])&&(a.audioCapabilities.push(u),n=!0));if(r.videoCapabilities)for(s=d(r.videoCapabilities),u=s.next();!u.done;u=s.next())u=u.value,u.contentType&&(o=!0,MSMediaKeys.isTypeSupported(this.keySystem,u.contentType.split(";")[0])&&(a.videoCapabilities.push(u),n=!0));if(o||(n=MSMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),"required"==r.persistentState&&(n=!1),n)return void(this.g=a)}throw n=Error("Unsupported keySystem"),n.name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function sy(e){var t=this.mediaKeys;return t&&t!=e&&ly(t,null),delete this.mediaKeys,(this.mediaKeys=e)?ly(e,this):Promise.resolve()}function uy(e){this.g=new MSMediaKeys(e),this.h=new ar}function ly(e,t){if(e.h.Ob(),!t)return Promise.resolve();e.h.m(t,"msneedkey",ay);try{return ps(t,HTMLMediaElement.HAVE_METADATA,e.h,(function(){t.msSetMediaKeys(e.g)})),Promise.resolve()}catch(n){return Promise.reject(n)}}function cy(e){oe.call(this),this.j=null,this.l=e,this.i=this.g=null,this.h=new ar,this.sessionId="",this.expiration=NaN,this.closed=new Vt,this.keyStatuses=new hy}function dy(e,t){var n=e.keyStatuses;n.size=void 0==t?0:1,n.g=t,n=new W("keystatuseschange"),e.dispatchEvent(n)}function hy(){this.size=0,this.g=void 0}function fy(){}function py(){!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=gy,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=my,e.MediaKeys=vy,e.MediaKeySystemAccess=yy)}function gy(){return Promise.reject(Error("The key system specified is not supported."))}function my(e){return null==e?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}function vy(){throw new TypeError("Illegal constructor.")}function yy(){throw this.keySystem="",new TypeError("Illegal constructor.")}function by(){}function Ty(){if(!(!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)Dy="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=wy,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Sy,e.MediaKeys=xy,e.MediaKeySystemAccess=Ay}}function Ey(e){var t=Dy;return t?t+e.charAt(0).toUpperCase()+e.slice(1):e}function wy(e,t){try{var n=new Ay(e,t);return Promise.resolve(n)}catch(i){return Promise.reject(i)}}function Sy(e){var t=this.mediaKeys;return t&&t!=e&&_y(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&_y(e,this),Promise.resolve()}function Ay(e,t){this.g=this.keySystem=e;var n=!1;"org.w3.clearkey"==e&&(this.g="webkit-org.w3.clearkey",n=!1);var i=!1,r=document.getElementsByTagName("video");r=r.length?r[0]:document.createElement("video");for(var a=d(t),o=a.next();!o.done;o=a.next()){o=o.value;var s={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:o.initDataTypes,sessionTypes:["temporary"],label:o.label},u=!1;if(o.audioCapabilities)for(var l=d(o.audioCapabilities),c=l.next();!c.done;c=l.next())c=c.value,c.contentType&&(u=!0,r.canPlayType(c.contentType.split(";")[0],this.g)&&(s.audioCapabilities.push(c),i=!0));if(o.videoCapabilities)for(l=d(o.videoCapabilities),c=l.next();!c.done;c=l.next())c=c.value,c.contentType&&(u=!0,r.canPlayType(c.contentType,this.g)&&(s.videoCapabilities.push(c),i=!0));if(u||(i=r.canPlayType("video/mp4",this.g)||r.canPlayType("video/webm",this.g)),"required"==o.persistentState&&(n?(s.persistentState="required",s.sessionTypes=["persistent-license"]):i=!1),i)return void(this.h=s)}throw n="Unsupported keySystem","org.w3.clearkey"!=e&&"com.widevine.alpha"!=e||(n="None of the requested configurations were supported."),n=Error(n),n.name="NotSupportedError",n.code=DOMException.NOT_SUPPORTED_ERR,n}function xy(e){this.l=e,this.g=null,this.h=new ar,this.i=[],this.j=new Map}function _y(e,t){e.g=t,e.h.Ob();var n=Dy;t&&(e.h.m(t,n+"needkey",(function(t){var n=new CustomEvent("encrypted");n.initDataType="cenc",n.initData=Mt(t.initData),e.g.dispatchEvent(n)})),e.h.m(t,n+"keymessage",(function(t){var n=Iy(e,t.sessionId);n&&(t=new W("message",{messageType:void 0==n.keyStatuses.g?"licenserequest":"licenserenewal",message:t.message}),n.h&&(n.h.resolve(),n.h=null),n.dispatchEvent(t))})),e.h.m(t,n+"keyadded",(function(t){(t=Iy(e,t.sessionId))&&(Py(t,"usable"),t.g&&t.g.resolve(),t.g=null)})),e.h.m(t,n+"keyerror",(function(t){var n=Iy(e,t.sessionId);n&&n.handleError(t)})))}function Iy(e,t){var n=e.j.get(t);return n||((n=e.i.shift())?(n.sessionId=t,e.j.set(t,n),n):null)}function ky(e,t,n){oe.call(this),this.j=e,this.o=!1,this.g=this.h=null,this.i=t,this.l=n,this.sessionId="",this.expiration=NaN,this.closed=new Vt,this.keyStatuses=new Ny}function Cy(e,t,n){if(e.o)return Promise.reject(Error("The session is already initialized."));e.o=!0;try{if("persistent-license"==e.l)if(n)var i=Ut(Yt("LOAD_SESSION|"+n));else{var r=Yt("PERSISTENT|");i=rn(r,t)}else i=Ut(t)}catch(o){return Promise.reject(o)}e.h=new Vt;var a=Ey("generateKeyRequest");try{e.j[a](e.i,i)}catch(o){if("InvalidStateError"!=o.name)return e.h=null,Promise.reject(o);new Sn((function(){try{e.j[a](e.i,i)}catch(t){e.h.reject(t),e.h=null}})).S(.01)}return e.h}function Ly(e,t,n){if(e.g)e.g.then((function(){return Ly(e,t,n)}))["catch"]((function(){return Ly(e,t,n)}));else{if(e.g=t,"webkit-org.w3.clearkey"==e.i){var i=Ht(n),r=JSON.parse(i);"oct"!=r.keys[0].kty&&(e.g.reject(Error("Response is not a valid JSON Web Key Set.")),e.g=null),i=en(r.keys[0].k),r=en(r.keys[0].kid)}else i=Ut(n),r=null;var a=Ey("addKey");try{e.j[a](e.i,i,r,e.sessionId)}catch(o){e.g.reject(o),e.g=null}}}function Py(e,t){var n=e.keyStatuses;n.size=void 0==t?0:1,n.g=t,n=new W("keystatuseschange"),e.dispatchEvent(n)}function Ny(){this.size=0,this.g=void 0}mv.Aria=Tv,Tv.install=Ev,yv(Ev),mv.EncryptionScheme=Sv,Sv.install=Av,yv(Av,-2),mv.Fullscreen=xv,xv.install=_v,yv(_v),mv.MathRound=kv,kv.install=Cv,yv(Cv),mv.MediaCapabilities=Lv,Lv.install=Pv,yv(Pv,-1),mv.MediaSource=Dv,Dv.install=Rv,yv(Rv),mv.Orientation=Gv,Gv.install=Vv,b(zv,oe),zv.prototype.lock=function(e){function t(e){return screen.lockOrientation?screen.lockOrientation(e):screen.mozLockOrientation?screen.mozLockOrientation(e):!!screen.msLockOrientation&&screen.msLockOrientation(e)}var n=!1;switch(e){case"natural":n=t("default");break;case"any":n=!0,this.unlock();break;default:n=t(e)}return n?Promise.resolve():(e=Error("screen.orientation.lock() is not available on this device"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,Promise.reject(e))},zv.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()},yv(Vv),mv.PatchedMediaKeysApple=Hv,Hv.install=Wv,$v.prototype.createMediaKeys=function(){var e=new Jv(this.keySystem);return Promise.resolve(e)},$v.prototype.getConfiguration=function(){return this.g},Jv.prototype.createSession=function(e){if(e=e||"temporary","temporary"!=e)throw new TypeError("Session type "+e+" is unsupported on this platform.");return new Zv(this.g,e)},Jv.prototype.setServerCertificate=function(){return Promise.resolve(!1)},b(Zv,oe),i=Zv.prototype,i.generateRequest=function(e,t){var n=this;this.g=new Vt;try{var i=this.l.createSession("video/mp4",Ut(t));this.j=i,this.sessionId=i.sessionId||"",this.h.m(this.j,"webkitkeymessage",(function(e){n.g&&(n.g.resolve(),n.g=null),e=new W("message",{messageType:void 0==n.keyStatuses.g?"license-request":"license-renewal",message:Mt(e.message)}),n.dispatchEvent(e)})),this.h.m(i,"webkitkeyadded",(function(){n.i&&(ey(n,"usable"),n.i.resolve(),n.i=null)})),this.h.m(i,"webkitkeyerror",(function(){var e=Error("EME PatchedMediaKeysApple key error");if(e.errorCode=n.j.error,null!=n.g)n.g.reject(e),n.g=null;else if(null!=n.i)n.i.reject(e),n.i=null;else switch(n.j.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:ey(n,"output-not-allowed");break;default:ey(n,"internal-error")}})),ey(this,"status-pending")}catch(r){this.g.reject(r)}return this.g},i.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},i.update=function(e){this.i=new Vt;try{this.j.update(Ut(e))}catch(t){this.i.reject(t)}return this.i},i.close=function(){try{this.j.close(),this.closed.resolve(),this.h.Ob()}catch(Hw){this.closed.reject(Hw)}return this.closed},i.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},i=ty.prototype,i.forEach=function(e){this.g&&e(this.g,Qr.value())},i.get=function(e){if(this.has(e))return this.g},i.has=function(e){var t=Qr.value();return!(!this.g||!Dt(e,t))},i.entries=function(){},i.keys=function(){},i.values=function(){},yv(Wv),mv.PatchedMediaKeysMs=ny,ny.install=iy,oy.prototype.createMediaKeys=function(){var e=new uy(this.keySystem);return Promise.resolve(e)},oy.prototype.getConfiguration=function(){return this.g},uy.prototype.createSession=function(e){if(e=e||"temporary","temporary"!=e)throw new TypeError("Session type "+e+" is unsupported on this platform.");return new cy(this.g,e)},uy.prototype.setServerCertificate=function(){return Promise.resolve(!1)},b(cy,oe),i=cy.prototype,i.generateRequest=function(e,t){var n=this;this.g=new Vt;try{this.j=this.l.createSession("video/mp4",Ut(t),null),this.h.m(this.j,"mskeymessage",(function(e){n.g&&(n.g.resolve(),n.g=null),e=new W("message",{messageType:void 0==n.keyStatuses.g?"license-request":"license-renewal",message:Mt(e.message)}),n.dispatchEvent(e)})),this.h.m(this.j,"mskeyadded",(function(){n.g?(dy(n,"usable"),n.g.resolve(),n.g=null):n.i&&(dy(n,"usable"),n.i.resolve(),n.i=null)})),this.h.m(this.j,"mskeyerror",(function(){var e=Error("EME PatchedMediaKeysMs key error");if(e.errorCode=n.j.error,null!=n.g)n.g.reject(e),n.g=null;else if(null!=n.i)n.i.reject(e),n.i=null;else switch(n.j.error.code){case MSMediaKeyError.MS_MEDIA_KEYERR_OUTPUT:case MSMediaKeyError.MS_MEDIA_KEYERR_HARDWARECHANGE:dy(n,"output-not-allowed");break;default:dy(n,"internal-error")}})),dy(this,"status-pending")}catch(i){this.g.reject(i)}return this.g},i.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},i.update=function(e){this.i=new Vt;try{this.j.update(Ut(e))}catch(t){this.i.reject(t)}return this.i},i.close=function(){try{this.j.close(),this.closed.resolve(),this.h.Ob()}catch(Hw){this.closed.reject(Hw)}return this.closed},i.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},i=hy.prototype,i.forEach=function(e){this.g&&e(this.g,Qr.value())},i.get=function(e){if(this.has(e))return this.g},i.has=function(e){var t=Qr.value();return!(!this.g||!Dt(e,t))},i.entries=function(){},i.keys=function(){},i.values=function(){},yv(iy),mv.PatchedMediaKeysNop=fy,fy.install=py,vy.prototype.createSession=function(){},vy.prototype.setServerCertificate=function(){},yy.prototype.getConfiguration=function(){},yy.prototype.createMediaKeys=function(){},yv(py,-10),mv.PatchedMediaKeysWebkit=by,by.install=Ty,Ay.prototype.createMediaKeys=function(){var e=new xy(this.g);return Promise.resolve(e)},Ay.prototype.getConfiguration=function(){return this.h},xy.prototype.createSession=function(e){if(e=e||"temporary","temporary"!=e&&"persistent-license"!=e)throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.g||document.createElement("video");return t.src||(t.src="about:blank"),e=new ky(t,this.l,e),this.i.push(e),e},xy.prototype.setServerCertificate=function(){return Promise.resolve(!1)},b(ky,oe),i=ky.prototype,i.handleError=function(e){var t=Error("EME v0.1b key error"),n=e.errorCode;n.systemCode=e.systemCode,t.errorCode=n,!e.sessionId&&this.h?(45==e.systemCode&&(t.message="Unsupported session type."),this.h.reject(t),this.h=null):e.sessionId&&this.g?(this.g.reject(t),this.g=null):(t=e.systemCode,e.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?Py(this,"output-restricted"):Py(this,1==t?"expired":"internal-error"))},i.generateRequest=function(e,t){return Cy(this,t,null)},i.load=function(e){return"persistent-license"==this.l?Cy(this,null,e):Promise.reject(Error("Not a persistent session."))},i.update=function(e){var t=new Vt;return Ly(this,t,e),t},i.close=function(){if("persistent-license"!=this.l){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=Ey("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch(t){}}return this.closed.resolve(),this.closed},i.remove=function(){return"persistent-license"!=this.l?Promise.reject(Error("Not a persistent session.")):this.close()},i=Ny.prototype,i.forEach=function(e){this.g&&e(this.g,Qr.value())},i.get=function(e){if(this.has(e))return this.g},i.has=function(e){var t=Qr.value();return!(!this.g||!Dt(e,t))},i.entries=function(){},i.keys=function(){},i.values=function(){};var Dy="";function Ry(){}function My(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;t.requestPictureInPicture&&document.exitPictureInPicture||!t.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,t.requestPictureInPicture=Oy,Object.defineProperty(t,"disablePictureInPicture",{get:jy,set:By,enumerable:!0,configurable:!0}),document.exitPictureInPicture=Fy,document.addEventListener("webkitpresentationmodechanged",Uy,!0))}}function Uy(e){if(e=e.target,"picture-in-picture"==e.webkitPresentationMode){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function Oy(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function Fy(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function jy(){return!!this.hasAttribute("disablePictureInPicture")||!this.webkitSupportsPresentationMode("picture-in-picture")}function By(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}function Gy(){}function Vy(){navigator.storage&&navigator.storage.estimate||!navigator.webkitTemporaryStorage||!navigator.webkitTemporaryStorage.queryUsageAndQuota||("storage"in navigator||(navigator.storage={}),navigator.storage.estimate=Ky)}function Ky(){return new Promise((function(e,t){navigator.webkitTemporaryStorage.queryUsageAndQuota((function(t,n){e({usage:t,quota:n})}),t)}))}function zy(){}function Hy(){if(e.HTMLMediaElement){var t=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var e=t.apply(this);return e&&e["catch"]((function(){})),e}}}function Wy(){}function qy(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;!t.getVideoPlaybackQuality&&"webkitDroppedFrameCount"in t&&(t.getVideoPlaybackQuality=Yy)}}function Yy(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}function Xy(){}function $y(){if(!e.VTTCue&&e.TextTrackCue){var t=null,n=TextTrackCue.length;if(3==n)t=Jy;else if(6==n)t=Qy;else{try{var i=!!Jy(1,2,"")}catch(r){i=!1}i&&(t=Jy)}t&&(e.VTTCue=function(e,n,i){return t(e,n,i)})}}function Jy(t,n,i){return new e.TextTrackCue(t,n,i)}function Qy(t,n,i){return new e.TextTrackCue(t+"-"+n+"-"+i,t,n,i)}function Zy(){}yv(Ty),mv.PiPWebkit=Ry,Ry.install=My,yv(My),mv.StorageEstimate=Gy,Gy.install=Vy,yv(Vy),mv.VideoPlayPromise=zy,zy.install=Hy,yv(Hy),mv.VideoPlaybackQuality=Wy,Wy.install=qy,yv(qy),mv.VTTCue=Xy,Xy.install=$y,yv($y),Zy.prototype.parseInit=function(){},Zy.prototype.parseMedia=function(e,t){var n=null,i=[],r=Ht(e).split(/\r?\n/);r=d(r);for(var a=r.next();!a.done;a=r.next())if((a=a.value)&&!/^\s+$/.test(a)&&(a=eb.exec(a))){var o=tb.exec(a[1]);o=60*parseInt(o[1],10)+parseFloat(o[2].replace(",",".")),a=new ht(o,t.segmentEnd?t.segmentEnd:o+2,a[2]),n&&(n.endTime=o,i.push(n)),n=a}return n&&i.push(n),i},H("shaka.text.LrcTextParser",Zy),Zy.prototype.parseMedia=Zy.prototype.parseMedia,Zy.prototype.parseInit=Zy.prototype.parseInit;var eb=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,tb=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;function nb(){}function ib(e,t,n,i,r,a,o,s,u,l){var c=e.parentNode;if(e.nodeType==Node.TEXT_NODE){var h=document.createElement("span");h.textContent=e.textContent,e=h}h="default"==(e.getAttribute("xml:space")||(s?"default":"preserve"));var f=Array.from(e.childNodes).every((function(e){return e.nodeType==Node.TEXT_NODE}));if(s=[],!f)for(var p=d(e.childNodes),g=p.next();!g.done;g=p.next())(g=ib(g.value,t,n,i,r,a,o,h,!0,l))&&s.push(g);p=/\S/.test(e.textContent);var m=e.hasAttribute("begin")||e.hasAttribute("end")||e.hasAttribute("dur");if(!(m||p||"br"==e.tagName||0!=s.length||u&&!h))return null;for(g=hb(e,n),p=g.start,g=g.end;c&&c.nodeType==Node.ELEMENT_NODE&&"tt"!=c.tagName;)g=db(c,n,p,g),p=g.start,g=g.end,c=c.parentNode;if(null==p&&(p=0),p+=t,g=null==g?1/0:g+t,!m&&0<s.length)for(p=1/0,g=0,t=d(s),n=t.next();!n.done;n=t.next())n=n.value,p=Math.min(p,n.startTime),g=Math.max(g,n.endTime);if("br"==e.tagName)return i=new ht(p,g,""),i.lineBreak=!0,i;if(t="",f&&(t=e.textContent,h&&(t=t.trim(),t=t.replace(/\s+/g," "))),h=new ht(p,g,t),h.nestedCues=s,l&&(h.cellResolution=l),(a=cb(e,"region",a,"")[0])&&a.getAttribute("xml:id")){var v=a.getAttribute("xml:id");h.region=o.filter((function(e){return e.id==v}))[0]}for(o=null,l=d(kb),f=l.next();!f.done&&!(o=cb(e,"backgroundImage",i,"#",f.value)[0]);f=l.next());return rb(h,e,a,o,r,u,0==s.length),h}function rb(e,t,n,i,r,a,o){if(a=a||o,"rtl"==ob(t,n,r,"direction",a)&&(e.direction="rtl"),o=ob(t,n,r,"writingMode",a),"tb"==o||"tblr"==o?e.writingMode="vertical-lr":"tbrl"==o?e.writingMode="vertical-rl":"rltb"==o||"rl"==o?e.direction="rtl":o&&(e.direction=bt),(o=ob(t,n,r,"textAlign",a))?(e.positionAlign=Ib[o],e.lineAlign=_b[o],e.textAlign=mt[o.toUpperCase()]):e.textAlign="start",(o=ob(t,n,r,"displayAlign",a))&&(e.displayAlign=yt[o.toUpperCase()]),(o=ob(t,n,r,"color",a))&&(e.color=o),(o=ob(t,n,r,"backgroundColor",a))&&(e.backgroundColor=o),(o=ob(t,n,r,"border",a))&&(e.border=o),(o=ob(t,n,r,"fontFamily",a))&&(e.fontFamily=o),(o=ob(t,n,r,"fontWeight",a))&&"bold"==o&&(e.fontWeight=700),o=ob(t,n,r,"wrapOption",a),e.wrapLine=!o||"noWrap"!=o,(o=ob(t,n,r,"lineHeight",a))&&o.match(yb)&&(e.lineHeight=o),(o=ob(t,n,r,"fontSize",a))&&(o.match(yb)||o.match(vb))&&(e.fontSize=o),(o=ob(t,n,r,"fontStyle",a))&&(e.fontStyle=kt[o.toUpperCase()]),i){o=i.getAttribute("imageType")||i.getAttribute("imagetype");var s=i.getAttribute("encoding");i=i.textContent.trim(),"PNG"==o&&"Base64"==s&&i&&(e.backgroundImage="data:image/png;base64,"+i)}(i=ob(t,n,r,"letterSpacing",a))&&i.match(yb)&&(e.letterSpacing=i),(i=ob(t,n,r,"linePadding",a))&&i.match(yb)&&(e.linePadding=i),(a=ob(t,n,r,"opacity",a))&&(e.opacity=parseFloat(a)),(n=sb(n,r,"textDecoration"))&&ab(e,n),(t=ub(t,r,"textDecoration"))&&ab(e,t)}function ab(e,t){for(var n=d(t.split(" ")),i=n.next();!i.done;i=n.next())switch(i.value){case"underline":e.textDecoration.includes("underline")||e.textDecoration.push("underline");break;case"noUnderline":e.textDecoration.includes("underline")&&lt(e.textDecoration,"underline");break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&lt(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&lt(e.textDecoration,"overline")}}function ob(e,t,n,i,r){return r=void 0===r||r,(e=ub(e,n,i))?e:r?sb(t,n,i):null}function sb(e,t,n){if(!e)return null;var i=bh(e,"http://www.w3.org/ns/ttml#styling",n);return i||lb(e,t,n)}function ub(e,t,n){var i=bh(e,"http://www.w3.org/ns/ttml#styling",n);return i||lb(e,t,n)}function lb(e,t,n){e=cb(e,"style",t,"");for(var i=null,r=0;r<e.length;r++){var a=bh(e[r],"urn:ebu:tt:style",n);a||(a=bh(e[r],"http://www.w3.org/ns/ttml#styling",n)),a||(a=ub(e[r],t,n)),a&&(i=a)}return i}function cb(e,t,n,i,r){var a=[];if(!e||1>n.length)return a;var o=e;for(e=null;o&&!(e=r?bh(o,r,t):o.getAttribute(t))&&(o=o.parentNode,o instanceof Element););if(t=e)for(t=d(t.split(" ")),r=t.next();!r.done;r=t.next())for(r=r.value,e=d(n),o=e.next();!o.done;o=e.next())if(o=o.value,i+o.getAttribute("xml:id")==r){a.push(o);break}return a}function db(e,t,n,i){return e=hb(e,t),null==n?n=e.start:null!=e.start&&(n+=e.start),null==i?i=e.end:null!=e.start&&(i+=e.start),{start:n,end:i}}function hb(e,t){var n=fb(e.getAttribute("begin"),t),i=fb(e.getAttribute("end"),t),r=fb(e.getAttribute("dur"),t);return null==i&&null!=r&&(i=n+r),{start:n,end:i}}function fb(e,t){var n=null;if(Tb.test(e)){n=Tb.exec(e);var i=Number(n[1]),r=Number(n[2]),a=Number(n[3]),o=Number(n[4]);o+=(Number(n[5])||0)/t.h,a+=o/t.frameRate,n=a+60*r+3600*i}else if(Eb.test(e))n=pb(Eb,e);else if(wb.test(e))n=pb(wb,e);else if(Sb.test(e))n=Sb.exec(e),n=Number(n[1])/t.frameRate;else if(Ab.test(e))n=Ab.exec(e),n=Number(n[1])/t.g;else if(xb.test(e))n=pb(xb,e);else if(e)throw new Ie(2,2,2001,"Could not parse cue time range in TTML");return n}function pb(e,t){var n=e.exec(t);return null==n||""==n[0]?null:(Number(n[4])||0)/1e3+(Number(n[3])||0)+60*(Number(n[2])||0)+3600*(Number(n[1])||0)}function gb(e,t,n,i){this.frameRate=Number(e)||30,this.h=Number(t)||1,this.g=Number(i),0==this.g&&(this.g=e?this.frameRate*this.h:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}En["application/x-subtitle-lrc"]=function(){return new Zy},nb.prototype.parseInit=function(){},nb.prototype.parseMedia=function(e,t){var n=Ht(e),i=[],r=new DOMParser,a=null;if(""==n)return i;try{a=r.parseFromString(n,"text/xml")}catch(T){throw new Ie(2,2,2005,"Failed to parse TTML.")}if(a){if(n=a.getElementsByTagName("parsererror")[0])throw new Ie(2,2,2005,n.textContent);var o=a.getElementsByTagName("tt")[0];if(!o)throw new Ie(2,2,2005,"TTML does not contain <tt> tag.");if(r=o.getElementsByTagName("body")[0],!r)return[];n=bh(o,"http://www.w3.org/ns/ttml#parameter","frameRate");var s=bh(o,"http://www.w3.org/ns/ttml#parameter","subFrameRate"),u=bh(o,"http://www.w3.org/ns/ttml#parameter","frameRateMultiplier"),l=bh(o,"http://www.w3.org/ns/ttml#parameter","tickRate"),c=bh(o,"http://www.w3.org/ns/ttml#parameter","cellResolution");a=o.getAttribute("xml:space")||"default";var h=bh(o,"http://www.w3.org/ns/ttml#styling","extent");if("default"!=a&&"preserve"!=a)throw new Ie(2,2,2005,"Invalid xml:space value: "+a);a="default"==a,n=new gb(n,s,u,l),c=c&&(c=/^(\d+) (\d+)$/.exec(c))?{columns:parseInt(c[1],10),rows:parseInt(c[2],10)}:null,s=(s=o.getElementsByTagName("metadata")[0])?vh(s):[],u=Array.from(o.getElementsByTagName("style")),o=Array.from(o.getElementsByTagName("region")),l=[];for(var f=d(o),p=f.next();!p.done;p=f.next()){var g=p.value;p=new Ct;var m=g.getAttribute("xml:id");if(m){p.id=m;var v,y,b=null;h&&(b=mb.exec(h)||bb.exec(h)),m=b?Number(b[1]):null,b=b?Number(b[2]):null,(v=sb(g,u,"extent"))&&(v=(y=mb.exec(v))||bb.exec(v),null!=v&&(p.width=Number(v[1]),p.height=Number(v[2]),y||(null!=m&&(p.width=100*p.width/m),null!=b&&(p.height=100*p.height/b)),p.widthUnits=y||null!=m?Lt:0,p.heightUnits=y||null!=b?Lt:0)),(g=sb(g,u,"origin"))&&(v=(y=mb.exec(g))||bb.exec(g),null!=v&&(p.viewportAnchorX=Number(v[1]),p.viewportAnchorY=Number(v[2]),y||(null!=b&&(p.viewportAnchorY=100*p.viewportAnchorY/b),null!=m&&(p.viewportAnchorX=100*p.viewportAnchorX/m)),p.viewportAnchorUnits=y||null!=m?Lt:0))}else p=null;p&&l.push(p)}if(mh(r,"p").length)throw new Ie(2,2,2001,"<p> can only be inside <div> in TTML");for(r=d(mh(r,"div")),h=r.next();!h.done;h=r.next()){if(h=h.value,mh(h,"span").length)throw new Ie(2,2,2001,"<span> can only be inside <p> in TTML");if((f=mh(h,"p"))&&f.length)for(h=d(f),f=h.next();!f.done;f=h.next())(f=ib(f.value,t.periodStart,n,s,u,o,l,a,!1,c))&&i.push(f);else(h=ib(h,t.periodStart,n,s,u,o,l,a,!1,c))&&i.push(h)}}return i},H("shaka.text.TtmlTextParser",nb),nb.prototype.parseMedia=nb.prototype.parseMedia,nb.prototype.parseInit=nb.prototype.parseInit;var mb=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,vb=/^(\d{1,2}(?:\.\d+)?|100)%$/,yb=/^(\d+px|\d+em|\d*\.?\d+c)$/,bb=/^(\d+)px (\d+)px$/,Tb=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,Eb=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,wb=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,Sb=/^(\d*(?:\.\d*)?)f$/,Ab=/^(\d*(?:\.\d*)?)t$/,xb=/^(?:(\d*(?:\.\d*)?)h)?(?:(\d*(?:\.\d*)?)m)?(?:(\d*(?:\.\d*)?)s)?(?:(\d*(?:\.\d*)?)ms)?$/,_b={left:wt,center:"center",right:"end",start:wt,end:"end"},Ib={left:"line-left",center:"center",right:"line-right"},kb=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];function Cb(){this.A=new nb}function Lb(){}function Pb(e){for(var t=d(Object.entries(At)),n=t.next();!n.done;n=t.next()){var i=d(n.value);n=i.next().value,i=i.next().value;var r=new ht(0,0,"");r.color=i,e.set(n,r)}for(t=d(Object.entries(xt)),n=t.next();!n.done;n=t.next())i=d(n.value),n=i.next().value,i=i.next().value,r=new ht(0,0,""),r.backgroundColor=i,e.set(n,r)}function Nb(e,t,n){0===n.size&&Pb(n),e=Db(e);var i=Ph("<span>"+e+"</span>","span");if(i){var r=[];if(i=i.childNodes,1==i.length){var a=i[0];if(a.nodeType==Node.TEXT_NODE||a.nodeType==Node.CDATA_SECTION_NODE)return void(t.payload=e)}for(e=d(i),i=e.next();!i.done;i=e.next())Mb(i.value,t,r,n);t.nestedCues=r}else t.payload=e}function Db(e){for(var t=[],n=-1,i="",r=0;r<e.length;r++)if("/"===e[r]){var a=e.indexOf(">",r);if(a<=r)return e;a=e.substring(r+1,a);var o=t.pop();if(!a||!o)return e;if(o===a)i+="/"+a+">";else{if(!o.startsWith("c.")||"c"!==a)return e;i+="/"+o+">"}r+=a.length+1}else"<"===e[r]?n=r+1:">"===e[r]&&0<n&&(t.push(e.substr(n,r-n)),n=-1),i+=e[r];return i}function Rb(e,t){return e&&0<e.length?e:t}function Mb(e,t,n,i){var r=t.clone();if(e.nodeType===Node.ELEMENT_NODE&&e.nodeName)for(var a=d(e.nodeName.split(/[ .]+/)),o=a.next();!o.done;o=a.next()){if(o=o.value,i.has(o)){var s=i.get(o);s&&(r.backgroundColor=Rb(s.backgroundColor,r.backgroundColor),r.color=Rb(s.color,r.color),r.fontFamily=Rb(s.fontFamily,r.fontFamily),r.fontSize=Rb(s.fontSize,r.fontSize),r.fontWeight=s.fontWeight,r.fontStyle=s.fontStyle,r.opacity=s.opacity,r.wrapLine=s.wrapLine)}switch(o){case"b":r.fontWeight=700;break;case"i":r.fontStyle="italic";break;case"u":r.textDecoration.push("underline")}}if(Eh(e))for(a=!0,i=d(e.textContent.split("\n")),e=i.next();!e.done;e=i.next())e=e.value,a||(a=t.clone(),a.lineBreak=!0,n.push(a)),0<e.length&&(a=r.clone(),a.payload=e,n.push(a)),a=!1;else for(t=d(e.childNodes),e=t.next();!e.done;e=t.next())Mb(e.value,r,n,i)}function Ub(e,t,n){var i;(i=/^align:(start|middle|center|end|left|right)$/.exec(t))?(t=i[1],e.textAlign="middle"==t?gt:mt[t.toUpperCase()]):(i=/^vertical:(lr|rl)$/.exec(t))?e.writingMode="lr"==i[1]?"vertical-lr":"vertical-rl":(i=/^size:([\d.]+)%$/.exec(t))?e.size=Number(i[1]):(i=/^position:([\d.]+)%(?:,(line-left|line-right|center|start|end))?$/.exec(t))?(e.position=Number(i[1]),i[2]&&(t=i[2],e.positionAlign="line-left"==t||"start"==t?"line-left":"line-right"==t||"end"==t?"line-right":"center")):(i=/^region:(.*)$/.exec(t))?(t=Ob(n,i[1]))&&(e.region=t):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=St[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=Et,e.line=Number(n[1]),n[2]&&(e.lineAlign=St[n[2].toUpperCase()]))}function Ob(e,t){var n=e.filter((function(e){return e.id==t}));return n.length?n[0]:null}function Fb(e){if(e=Pp(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g),null==e)return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}function jb(){this.g=null}function Bb(e,t,n){var i,r,a;return(new ua).box("payl",da((function(e){i=Ht(e)}))).box("iden",da((function(e){r=Ht(e)}))).box("sttg",da((function(e){a=Ht(e)}))).parse(e),i?Gb(i,r,a,t,n):null}function Gb(e,t,n,i,r){if(i=new ht(i,r,""),Nb(e,i,new Map),t&&(i.id=t),n)for(e=new Cp(n),t=Np(e);t;)Ub(i,t,[]),Lp(e),t=Np(e);return i}function Vb(){}function Kb(e){if(e=Pp(e,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g),null==e)return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:Number(e[4])/1e3+n+60*t+3600*(Number(e[1])||0)}function zb(){this.A=new Lb}function Hb(e){var t="WEBVTT\n\n";if(""==e)return t;e=e.replace(/\r+/g,""),e=e.trim(),e=d(e.split("\n\n"));for(var n=e.next();!n.done;n=e.next())n=n.value.split(/\n/),n[0].match(/\d+/)&&n.shift(),n[0]=n[0].replace(/,/g,"."),t+=n.join("\n")+"\n\n";return t}function Wb(){}function qb(e,t){var n=t.Fontname;if(n&&(e.fontFamily=n),(n=t.Fontsize)&&(e.fontSize=n+"px"),(n=t.PrimaryColour)&&(n=Yb(n))&&(e.color=n),(n=t.BackColour)&&(n=Yb(n))&&(e.backgroundColor=n),t.Bold&&(e.fontWeight=700),t.Italic&&(e.fontStyle="italic"),t.Underline&&e.textDecoration.push("underline"),(n=t.Spacing)&&(e.letterSpacing=n+"px"),n=t.Alignment)switch(parseInt(n,10)){case 1:e.displayAlign=vt,e.textAlign="start";break;case 2:e.displayAlign=vt,e.textAlign=gt;break;case 3:e.displayAlign=vt,e.textAlign="end";break;case 5:e.displayAlign="before",e.textAlign="start";break;case 6:e.displayAlign="before",e.textAlign=gt;break;case 7:e.displayAlign="before",e.textAlign="end";break;case 9:e.displayAlign="center",e.textAlign="start";break;case 10:e.displayAlign="center",e.textAlign=gt;break;case 11:e.displayAlign="center",e.textAlign="end"}(n=t.AlphaLevel)&&(e.opacity=parseFloat(n))}function Yb(e){return e=parseInt(e.replace("&H",""),16),0<=e?"rgba("+(255&e)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null}function Xb(e){return e=tT.exec(e),3600*(e[1]?parseInt(e[1].replace(":",""),10):0)+60*parseInt(e[2],10)+parseFloat(e[3])}En["application/ttml+xml"]=function(){return new nb},Cb.prototype.parseInit=function(e){var t=!1;if((new ua).box("moov",la).box("trak",la).box("mdia",la).box("minf",la).box("stbl",la).X("stsd",ca).box("stpp",(function(e){t=!0,e.parser.stop()})).parse(e),!t)throw new Ie(2,2,2007)},Cb.prototype.parseMedia=function(e,t){var n=this,i=!1,r=[];if((new ua).box("mdat",da((function(e){i=!0,r=r.concat(n.A.parseMedia(e,t))}))).parse(e,!1),!i)throw new Ie(2,2,2007);return r},H("shaka.text.Mp4TtmlParser",Cb),Cb.prototype.parseMedia=Cb.prototype.parseMedia,Cb.prototype.parseInit=Cb.prototype.parseInit,En['application/mp4; codecs="stpp"']=function(){return new Cb},En['application/mp4; codecs="stpp.ttml.im1t"']=function(){return new Cb},En['application/mp4; codecs="stpp.TTML.im1t"']=function(){return new Cb},Lb.prototype.parseInit=function(){},Lb.prototype.parseMedia=function(e,t){var n=Ht(e);n=n.replace(/\r\n|\r(?=[^\n]|$)/gm,"\n");var i=n.split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(i[0]))throw new Ie(2,2,2e3);if(n=t.periodStart,i[0].includes("X-TIMESTAMP-MAP")){var r=i[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),a=i[0].match(/MPEGTS:(\d+)/m);if(r&&a){if(n=Fb(new Cp(r[1])),null==n)throw new Ie(2,2,2e3);for(a=Number(a[1]),r=t.segmentStart;95443.7176888889<=r;)r-=95443.7176888889,a+=8589934592;n=t.periodStart+a/9e4-n}}a=[],r=d(i[0].split("\n"));for(var o=r.next();!o.done;o=r.next())if(o=o.value,/^Region:/.test(o)){o=new Cp(o);var s=new Ct;Np(o),Lp(o);for(var u=Np(o);u;){var l=s,c=u;(u=/^id=(.*)$/.exec(c))?l.id=u[1]:(u=/^width=(\d{1,2}|100)%$/.exec(c))?l.width=Number(u[1]):(u=/^lines=(\d+)$/.exec(c))?(l.height=Number(u[1]),l.heightUnits=2):(u=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(c))?(l.regionAnchorX=Number(u[1]),l.regionAnchorY=Number(u[2])):(u=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(c))?(l.viewportAnchorX=Number(u[1]),l.viewportAnchorY=Number(u[2])):/^scroll=up$/.exec(c)&&(l.scroll="up"),Lp(o),u=Np(o)}a.push(s)}for(r=new Map,Pb(r),o=[],i=d(i.slice(1)),s=i.next();!s.done;s=i.next()){if(s=s.value.split("\n"),(1!=s.length||s[0])&&!/^NOTE($|[ \t])/.test(s[0])&&"STYLE"==s[0]&&s[1].includes("::cue")){l="global",(u=s[1].match(/\((.*)\)/))&&(l=u.pop()),u=s.slice(2,-1),s[1].includes("}")&&(c=/\{(.*?)\}/.exec(s[1]))&&(u=c[1].split(";")),c=new ht(0,0,"");for(var h=!1,f=0;f<u.length;f++){var p=/^\s*([^:]+):\s*(.*)/.exec(u[f]);if(p){var g=p[2].trim().replace(";","");switch(p[1].trim()){case"background-color":h=!0,c.backgroundColor=g;break;case"color":h=!0,c.color=g;break;case"font-family":h=!0,c.fontFamily=g;break;case"font-size":h=!0,c.fontSize=g;break;case"font-weight":700<=parseInt(g,10)&&(h=!0,c.fontWeight=700);break;case"font-style":switch(g){case"normal":h=!0,c.fontStyle=It;break;case"italic":h=!0,c.fontStyle="italic";break;case"oblique":h=!0,c.fontStyle="oblique"}break;case"opacity":h=!0,c.opacity=parseFloat(g);break;case"white-space":h=!0,c.wrapLine="noWrap"!=g}}}h&&r.set(l,c)}if(f=n,1==s.length&&!s[0]||/^NOTE($|[ \t])/.test(s[0])||"STYLE"==s[0])s=null;else{if(l=null,s[0].includes("--\x3e")||(l=s[0],s.splice(0,1)),u=new Cp(s[0]),c=Fb(u),p=Pp(u,/[ \t]+--\x3e[ \t]+/g),h=Fb(u),null==c||null==p||null==h)throw new Ie(2,2,2001,"Could not parse cue time range in WebVTT");for(c+=f,h+=f,f=s.slice(1).join("\n").trim(),r.has("global")?(s=r.get("global").clone(),s.startTime=c,s.endTime=h,s.payload=""):s=new ht(c,h,""),Nb(f,s,r),Lp(u),c=Np(u);c;)Ub(s,c,a),Lp(u),c=Np(u);null!=l&&(s.id=l)}s&&o.push(s)}return o},H("shaka.text.VttTextParser",Lb),Lb.prototype.parseMedia=Lb.prototype.parseMedia,Lb.prototype.parseInit=Lb.prototype.parseInit,En["text/vtt"]=function(){return new Lb},En['text/vtt; codecs="vtt"']=function(){return new Lb},En['text/vtt; codecs="wvtt"']=function(){return new Lb},jb.prototype.parseInit=function(e){var t=this,n=!1;if((new ua).box("moov",la).box("trak",la).box("mdia",la).X("mdhd",(function(e){e=Io(e.reader,e.version),t.g=e.timescale})).box("minf",la).box("stbl",la).X("stsd",ca).box("wvtt",(function(){n=!0})).parse(e),!this.g)throw new Ie(2,2,2008);if(!n)throw new Ie(2,2,2008)},jb.prototype.parseMedia=function(e,t){if(!this.g)throw new Ie(2,2,2008);var n,i=0,r=[],a=[],o=!1,s=!1,u=!1,l=null;if((new ua).box("moof",la).box("traf",la).X("tfdt",(function(e){o=!0,i=_o(e.reader,e.version).Od})).X("tfhd",(function(e){l=xo(e.reader,e.flags).Pe})).X("trun",(function(e){s=!0,r=ko(e.reader,e.version,e.flags).mf})).box("mdat",da((function(e){u=!0,n=e}))).parse(e,!1),!u&&!o&&!s)throw new Ie(2,2,2008);for(var c=i,h=new aa(n,0),f=d(r),p=f.next();!p.done;p=f.next()){p=p.value;var g=p.le||l,m=p.rd?i+p.rd:c;c=m+(g||0);var v=0;do{var y=h.P();v+=y;var b=h.P(),T=null;"vttc"==fa(b)?8<y&&(T=h.xb(y-8)):h.skip(y-8),g&&T&&(y=Bb(T,t.periodStart+m/this.g,t.periodStart+c/this.g),a.push(y))}while(p.sampleSize&&v<p.sampleSize)}return a.filter(Me)},H("shaka.text.Mp4VttParser",jb),jb.prototype.parseMedia=jb.prototype.parseMedia,jb.prototype.parseInit=jb.prototype.parseInit,En['application/mp4; codecs="wvtt"']=function(){return new jb},Vb.prototype.parseInit=function(){},Vb.prototype.parseMedia=function(e){var t=Ht(e).replace(/\r+/g,"");if(t=t.trim(),e=[],""==t)return e;t=d(t.split("\n\n"));for(var n=t.next();!n.done;n=t.next()){n=n.value.split("\n");var i=new Cp(n[0]),r=Kb(i),a=Pp(i,/,/g);if(i=Kb(i),null==r||null==a||null==i)throw new Ie(2,2,2001,"Could not parse cue time range in SubViewer");e.push(new ht(r,i,n.slice(1).join("\n").trim()))}return e},H("shaka.text.SbvTextParser",Vb),Vb.prototype.parseMedia=Vb.prototype.parseMedia,Vb.prototype.parseInit=Vb.prototype.parseInit,En["text/x-subviewer"]=function(){return new Vb},zb.prototype.parseInit=function(){},zb.prototype.parseMedia=function(e,t){var n=Ht(e);return n=Hb(n),n=Ut(Yt(n)),this.A.parseMedia(n,t)},H("shaka.text.SrtTextParser",zb),zb.srt2webvtt=Hb,zb.prototype.parseMedia=zb.prototype.parseMedia,zb.prototype.parseInit=zb.prototype.parseInit,En["text/srt"]=function(){return new zb},Wb.prototype.parseInit=function(){},Wb.prototype.parseMedia=function(e){var t="",n="";e=Ht(e).split(/\r?\n\s*\r?\n/),e=d(e);for(var i=e.next();!i.done;i=e.next()){var r=Qb.exec(i.value);r&&(i=r[1],r=r[2],"V4 Styles"==i||"V4+ Styles"==i?t=r:"Events"==i&&(n=r))}e=[],i=null,t=d(t.split(/\r?\n/));for(var a=t.next();!a.done;a=t.next())if(r=a.value,!/^\s*;/.test(r)&&(a=Zb.exec(r)))if(r=a[1].trim(),a=a[2].trim(),"Format"==r)i=a.split(eT);else if("Style"==r){r=a.split(eT),a={};for(var o=0;o<i.length&&o<r.length;o++)a[i[o]]=r[o];e.push(a)}for(i=[],t=null,r={},n=d(n.split(/\r?\n/)),a=n.next();!a.done;r={Ld:r.Ld},a=n.next())if(a=a.value,!/^\s*;/.test(a)&&(o=Zb.exec(a)))if(a=o[1].trim(),o=o[2].trim(),"Format"==a)t=o.split(eT);else if("Dialogue"==a){o=o.split(eT),a={};for(var s=0;s<t.length&&s<o.length;s++)a[t[s]]=o[s];s=Xb(a.Start);var u=Xb(a.End);o=new ht(s,u,o.slice(t.length-1).join(",").replace(/\\N/g,"\n").replace(/\{[^}]+\}/g,"")),r.Ld=a.Style,(a=e.find(function(e){return function(t){return t.Name==e.Ld}}(r)))&&qb(o,a),i.push(o)}return i},H("shaka.text.SsaTextParser",Wb),Wb.prototype.parseMedia=Wb.prototype.parseMedia,Wb.prototype.parseInit=Wb.prototype.parseInit;var $b,Jb,Qb=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,Zb=/^\s*([^:]+):\s*(.*)/,eT=/\s*,\s*/,tT=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;
/*
 @license
 EME Encryption Scheme Polyfill
 Copyright 2019 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/
function nT(){}function iT(){$b?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?($b=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=rT):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function rT(e,t){var n,i=this;return F((function(r){return 1==r.g?(console.assert(i==navigator,'bad "this" for requestMediaKeySystemAccess'),S(r,$b.call(i,e,t),2)):(n=r.h,fT(n)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=$b,r["return"](n)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=aT,r["return"](aT.call(i,e,t))))}))}function aT(e,t){var n,i,r,a,o,s,u,l,c,h,f=this;return F((function(p){if(1==p.g){for(console.assert(f==navigator,'bad "this" for requestMediaKeySystemAccess'),n=hT(e),i=[],r=d(t),a=r.next();!a.done;a=r.next())o=a.value,s=oT(o.videoCapabilities,n),u=oT(o.audioCapabilities,n),o.videoCapabilities&&o.videoCapabilities.length&&!s.length||o.audioCapabilities&&o.audioCapabilities.length&&!u.length||(l=Object.assign({},o),l.videoCapabilities=s,l.audioCapabilities=u,i.push(l));if(!i.length)throw c=Error("Unsupported keySystem or supportedConfigurations."),c.name="NotSupportedError",c.code=DOMException.NOT_SUPPORTED_ERR,c;return S(p,$b.call(f,e,i),2)}return h=p.h,p["return"](new dT(h,n))}))}function oT(e,t){return e?e.filter((function(e){return!e.encryptionScheme||e.encryptionScheme==t})):e}function sT(){}function uT(){Jb?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?(Jb=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=lT):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function lT(e){var t,n,i=this;return F((function(r){return 1==r.g?(console.assert(i==navigator.mediaCapabilities,'bad "this" for decodingInfo'),S(r,Jb.call(i,e),2)):(t=r.h,e.keySystemConfiguration?(n=t.keySystemAccess)&&fT(n)?(console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=Jb,r["return"](t)):(console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=cT,r["return"](cT.call(i,e))):r["return"](t))}))}function cT(e){var t,n,i,r,a,o,s,u,l,c=this;return F((function(d){switch(d.g){case 1:return console.assert(c==navigator.mediaCapabilities,'bad "this" for decodingInfo'),t=null,e.keySystemConfiguration&&(n=e.keySystemConfiguration,i=n.keySystem,r=n.audio&&n.audio.encryptionScheme,a=n.video&&n.video.encryptionScheme,t=hT(i),o={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},r&&r!=t||a&&a!=t)?d["return"](o):S(d,Jb.call(c,e),2);case 2:if(s=d.h,s.keySystemAccess){s.keySystemAccess=new dT(s.keySystemAccess,t),d.C(3);break}if(!e.keySystemConfiguration){d.C(3);break}var h=e.keySystemConfiguration,f=[],p=[];return h.audio&&f.push({robustness:h.audio.robustness||"",contentType:e.audio.contentType}),h.video&&p.push({robustness:h.video.robustness||"",contentType:e.video.contentType}),h={initDataTypes:h.initDataType?[h.initDataType]:[],distinctiveIdentifier:h.distinctiveIdentifier,persistentState:h.persistentState,sessionTypes:h.sessionTypes},f.length&&(h.audioCapabilities=f),p.length&&(h.videoCapabilities=p),u=h,l=s,S(d,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[u]),5);case 5:l.keySystemAccess=d.h;case 3:return d["return"](s)}}))}function dT(e,t){this.h=e,this.g=t,this.keySystem=e.keySystem}function hT(e){return e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.adobe")||e.startsWith("org.w3")?"cenc":e.startsWith("com.apple")?"cbcs-1-9":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function fT(e){e=e.getConfiguration();var t=e.audioCapabilities&&e.audioCapabilities[0];return!(!(e=e.videoCapabilities&&e.videoCapabilities[0]||t)||void 0===e.encryptionScheme)}function pT(){}function gT(){iT(),uT()}En["text/x-ssa"]=function(){return new Wb},H("EmeEncryptionSchemePolyfill",nT),nT.install=iT,H("McEncryptionSchemePolyfill",sT),sT.install=uT,dT.prototype.getConfiguration=function(){var e=this.h.getConfiguration();if(e.videoCapabilities)for(var t=d(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.g;if(e.audioCapabilities)for(t=d(e.audioCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.g;return e},dT.prototype.createMediaKeys=function(){return this.h.createMediaKeys()},H("EncryptionSchemePolyfills",pT),pT.install=gT,"undefined"!==typeof n&&n.exports&&(n.exports=pT);
/*
 @license
 Copyright 2013 Ali Al Dallal

 Licensed under the MIT license.

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to deal
 in the Software without restriction, including without limitation the rights
 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:

 The above copyright notice and this permission notice shall be included in
 all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 SOFTWARE.
*/
for(var mT={ach:{u:"Lwo",v:"Acholi"},ady:{u:"Адыгэбзэ",v:"Adyghe"},af:{u:"Afrikaans",v:"Afrikaans"},"af-NA":{u:"Afrikaans (Namibia)",v:"Afrikaans (Namibia)"},"af-ZA":{u:"Afrikaans (South Africa)",v:"Afrikaans (South Africa)"},ak:{u:"Tɕɥi",v:"Akan"},ar:{u:"العربية",v:"Arabic"},"ar-AR":{u:"العربية",v:"Arabic"},"ar-MA":{u:"العربية",v:"Arabic (Morocco)"},"ar-SA":{u:"العربية (السعودية)",v:"Arabic (Saudi Arabia)"},"ay-BO":{u:"Aymar aru",v:"Aymara"},az:{u:"Azərbaycan dili",v:"Azerbaijani"},"az-AZ":{u:"Azərbaycan dili",v:"Azerbaijani"},"be-BY":{u:"Беларуская",v:"Belarusian"},bg:{u:"Български",v:"Bulgarian"},"bg-BG":{u:"Български",v:"Bulgarian"},bn:{u:"বাংলা",v:"Bengali"},"bn-IN":{u:"বাংলা (ভারত)",v:"Bengali (India)"},"bn-BD":{u:"বাংলা(বাংলাদেশ)",v:"Bengali (Bangladesh)"},"bs-BA":{u:"Bosanski",v:"Bosnian"},ca:{u:"Català",v:"Catalan"},"ca-ES":{u:"Català",v:"Catalan"},cak:{u:"Maya Kaqchikel",v:"Kaqchikel"},"ck-US":{u:"ᏣᎳᎩ (tsalagi)",v:"Cherokee"},cs:{u:"Čeština",v:"Czech"},"cs-CZ":{u:"Čeština",v:"Czech"},cy:{u:"Cymraeg",v:"Welsh"},"cy-GB":{u:"Cymraeg",v:"Welsh"},da:{u:"Dansk",v:"Danish"},"da-DK":{u:"Dansk",v:"Danish"},de:{u:"Deutsch",v:"German"},"de-AT":{u:"Deutsch (Österreich)",v:"German (Austria)"},"de-DE":{u:"Deutsch (Deutschland)",v:"German (Germany)"},"de-CH":{u:"Deutsch (Schweiz)",v:"German (Switzerland)"},dsb:{u:"Dolnoserbšćina",v:"Lower Sorbian"},el:{u:"Ελληνικά",v:"Greek"},"el-GR":{u:"Ελληνικά",v:"Greek (Greece)"},en:{u:"English",v:"English"},"en-GB":{u:"English (UK)",v:"English (UK)"},"en-AU":{u:"English (Australia)",v:"English (Australia)"},"en-CA":{u:"English (Canada)",v:"English (Canada)"},"en-IE":{u:"English (Ireland)",v:"English (Ireland)"},"en-IN":{u:"English (India)",v:"English (India)"},"en-PI":{u:"English (Pirate)",v:"English (Pirate)"},"en-UD":{u:"English (Upside Down)",v:"English (Upside Down)"},"en-US":{u:"English (US)",v:"English (US)"},"en-ZA":{u:"English (South Africa)",v:"English (South Africa)"},"en@pirate":{u:"English (Pirate)",v:"English (Pirate)"},eo:{u:"Esperanto",v:"Esperanto"},"eo-EO":{u:"Esperanto",v:"Esperanto"},es:{u:"Español",v:"Spanish"},"es-AR":{u:"Español (Argentine)",v:"Spanish (Argentina)"},"es-419":{u:"Español (Latinoamérica)",v:"Spanish (Latin America)"},"es-CL":{u:"Español (Chile)",v:"Spanish (Chile)"},"es-CO":{u:"Español (Colombia)",v:"Spanish (Colombia)"},"es-EC":{u:"Español (Ecuador)",v:"Spanish (Ecuador)"},"es-ES":{u:"Español (España)",v:"Spanish (Spain)"},"es-LA":{u:"Español (Latinoamérica)",v:"Spanish (Latin America)"},"es-NI":{u:"Español (Nicaragua)",v:"Spanish (Nicaragua)"},"es-MX":{u:"Español (México)",v:"Spanish (Mexico)"},"es-US":{u:"Español (Estados Unidos)",v:"Spanish (United States)"},"es-VE":{u:"Español (Venezuela)",v:"Spanish (Venezuela)"},et:{u:"eesti keel",v:"Estonian"},"et-EE":{u:"Eesti (Estonia)",v:"Estonian (Estonia)"},eu:{u:"Euskara",v:"Basque"},"eu-ES":{u:"Euskara",v:"Basque"},fa:{u:"فارسی",v:"Persian"},"fa-IR":{u:"فارسی",v:"Persian"},"fb-LT":{u:"Leet Speak",v:"Leet"},ff:{u:"Fulah",v:"Fulah"},fi:{u:"Suomi",v:"Finnish"},"fi-FI":{u:"Suomi",v:"Finnish"},"fo-FO":{u:"Føroyskt",v:"Faroese"},fr:{u:"Français",v:"French"},"fr-CA":{u:"Français (Canada)",v:"French (Canada)"},"fr-FR":{u:"Français (France)",v:"French (France)"},"fr-BE":{u:"Français (Belgique)",v:"French (Belgium)"},"fr-CH":{u:"Français (Suisse)",v:"French (Switzerland)"},"fy-NL":{u:"Frysk",v:"Frisian (West)"},ga:{u:"Gaeilge",v:"Irish"},"ga-IE":{u:"Gaeilge (Gaelic)",v:"Irish (Gaelic)"},gl:{u:"Galego",v:"Galician"},"gl-ES":{u:"Galego",v:"Galician"},"gn-PY":{u:"Avañe'ẽ",v:"Guarani"},"gu-IN":{u:"ગુજરાતી",v:"Gujarati"},"gx-GR":{u:"Ἑλληνική ἀρχαία",v:"Classical Greek"},he:{u:"עברית‏",v:"Hebrew"},"he-IL":{u:"עברית‏",v:"Hebrew"},hi:{u:"हिन्दी",v:"Hindi"},"hi-IN":{u:"हिन्दी",v:"Hindi"},hr:{u:"Hrvatski",v:"Croatian"},"hr-HR":{u:"Hrvatski",v:"Croatian"},hsb:{u:"Hornjoserbšćina",v:"Upper Sorbian"},ht:{u:"Kreyòl",v:"Haitian Creole"},hu:{u:"Magyar",v:"Hungarian"},"hu-HU":{u:"Magyar",v:"Hungarian"},"hy-AM":{u:"Հայերեն",v:"Armenian"},id:{u:"Bahasa Indonesia",v:"Indonesian"},"id-ID":{u:"Bahasa Indonesia",v:"Indonesian"},is:{u:"Íslenska",v:"Icelandic"},"is-IS":{u:"Íslenska (Iceland)",v:"Icelandic (Iceland)"},it:{u:"Italiano",v:"Italian"},"it-IT":{u:"Italiano",v:"Italian"},ja:{u:"日本語",v:"Japanese"},"ja-JP":{u:"日本語",v:"Japanese"},"jv-ID":{u:"Basa Jawa",v:"Javanese"},"ka-GE":{u:"ქართული",v:"Georgian"},"kk-KZ":{u:"Қазақша",v:"Kazakh"},km:{u:"ភាសាខ្មែរ",v:"Khmer"},"km-KH":{u:"ភាសាខ្មែរ",v:"Khmer"},kab:{u:"Taqbaylit",v:"Kabyle"},kn:{u:"ಕನ್ನಡ",v:"Kannada"},"kn-IN":{u:"ಕನ್ನಡ (India)",v:"Kannada (India)"},ko:{u:"한국어",v:"Korean"},"ko-KR":{u:"한국어 (韩国)",v:"Korean (Korea)"},ku:{u:"Kurdî",v:"Kurdish"},"ku-TR":{u:"Kurdî",v:"Kurdish"},la:{u:"Latin",v:"Latin"},"la-VA":{u:"Latin",v:"Latin"},lb:{u:"Lëtzebuergesch",v:"Luxembourgish"},"li-NL":{u:"Lèmbörgs",v:"Limburgish"},lt:{u:"Lietuvių",v:"Lithuanian"},"lt-LT":{u:"Lietuvių",v:"Lithuanian"},lv:{u:"Latviešu",v:"Latvian"},"lv-LV":{u:"Latviešu",v:"Latvian"},mai:{u:"मैथिली, মৈথিলী",v:"Maithili"},"mg-MG":{u:"Malagasy",v:"Malagasy"},mk:{u:"Македонски",v:"Macedonian"},"mk-MK":{u:"Македонски (Македонски)",v:"Macedonian (Macedonian)"},ml:{u:"മലയാളം",v:"Malayalam"},"ml-IN":{u:"മലയാളം",v:"Malayalam"},"mn-MN":{u:"Монгол",v:"Mongolian"},mr:{u:"मराठी",v:"Marathi"},"mr-IN":{u:"मराठी",v:"Marathi"},ms:{u:"Bahasa Melayu",v:"Malay"},"ms-MY":{u:"Bahasa Melayu",v:"Malay"},mt:{u:"Malti",v:"Maltese"},"mt-MT":{u:"Malti",v:"Maltese"},my:{u:"ဗမာစကာ",v:"Burmese"},nb:{u:"Norsk (bokmål)",v:"Norwegian (bokmal)"},"nb-NO":{u:"Norsk (bokmål)",v:"Norwegian (bokmal)"},ne:{u:"नेपाली",v:"Nepali"},"ne-NP":{u:"नेपाली",v:"Nepali"},nl:{u:"Nederlands",v:"Dutch"},"nl-BE":{u:"Nederlands (België)",v:"Dutch (Belgium)"},"nl-NL":{u:"Nederlands (Nederland)",v:"Dutch (Netherlands)"},"nn-NO":{u:"Norsk (nynorsk)",v:"Norwegian (nynorsk)"},no:{u:"Norsk",v:"Norwegian"},oc:{u:"Occitan",v:"Occitan"},"or-IN":{u:"ଓଡ଼ିଆ",v:"Oriya"},pa:{u:"ਪੰਜਾਬੀ",v:"Punjabi"},"pa-IN":{u:"ਪੰਜਾਬੀ (ਭਾਰਤ ਨੂੰ)",v:"Punjabi (India)"},pl:{u:"Polski",v:"Polish"},"pl-PL":{u:"Polski",v:"Polish"},"ps-AF":{u:"پښتو",v:"Pashto"},pt:{u:"Português",v:"Portuguese"},"pt-BR":{u:"Português (Brasil)",v:"Portuguese (Brazil)"},"pt-PT":{u:"Português (Portugal)",v:"Portuguese (Portugal)"},"qu-PE":{u:"Qhichwa",v:"Quechua"},"rm-CH":{u:"Rumantsch",v:"Romansh"},ro:{u:"Română",v:"Romanian"},"ro-RO":{u:"Română",v:"Romanian"},ru:{u:"Русский",v:"Russian"},"ru-RU":{u:"Русский",v:"Russian"},"sa-IN":{u:"संस्कृतम्",v:"Sanskrit"},"se-NO":{u:"Davvisámegiella",v:"Northern Sámi"},"si-LK":{u:"පළාත",v:"Sinhala (Sri Lanka)"},sk:{u:"Slovenčina",v:"Slovak"},"sk-SK":{u:"Slovenčina (Slovakia)",v:"Slovak (Slovakia)"},sl:{u:"Slovenščina",v:"Slovenian"},"sl-SI":{u:"Slovenščina",v:"Slovenian"},"so-SO":{u:"Soomaaliga",v:"Somali"},sq:{u:"Shqip",v:"Albanian"},"sq-AL":{u:"Shqip",v:"Albanian"},sr:{u:"Српски",v:"Serbian"},"sr-RS":{u:"Српски (Serbia)",v:"Serbian (Serbia)"},su:{u:"Basa Sunda",v:"Sundanese"},sv:{u:"Svenska",v:"Swedish"},"sv-SE":{u:"Svenska",v:"Swedish"},sw:{u:"Kiswahili",v:"Swahili"},"sw-KE":{u:"Kiswahili",v:"Swahili (Kenya)"},ta:{u:"தமிழ்",v:"Tamil"},"ta-IN":{u:"தமிழ்",v:"Tamil"},te:{u:"తెలుగు",v:"Telugu"},"te-IN":{u:"తెలుగు",v:"Telugu"},tg:{u:"забо́ни тоҷикӣ́",v:"Tajik"},"tg-TJ":{u:"тоҷикӣ",v:"Tajik"},th:{u:"ภาษาไทย",v:"Thai"},"th-TH":{u:"ภาษาไทย (ประเทศไทย)",v:"Thai (Thailand)"},tl:{u:"Filipino",v:"Filipino"},"tl-PH":{u:"Filipino",v:"Filipino"},tlh:{u:"tlhIngan-Hol",v:"Klingon"},tr:{u:"Türkçe",v:"Turkish"},"tr-TR":{u:"Türkçe",v:"Turkish"},"tt-RU":{u:"татарча",v:"Tatar"},uk:{u:"Українська",v:"Ukrainian"},"uk-UA":{u:"Українська",v:"Ukrainian"},ur:{u:"اردو",v:"Urdu"},"ur-PK":{u:"اردو",v:"Urdu"},uz:{u:"O'zbek",v:"Uzbek"},"uz-UZ":{u:"O'zbek",v:"Uzbek"},vi:{u:"Tiếng Việt",v:"Vietnamese"},"vi-VN":{u:"Tiếng Việt",v:"Vietnamese"},"xh-ZA":{u:"isiXhosa",v:"Xhosa"},yi:{u:"ייִדיש",v:"Yiddish"},"yi-DE":{u:"ייִדיש (German)",v:"Yiddish (German)"},zh:{u:"中文",v:"Chinese"},"zh-HANS":{u:"中文简体",v:"Chinese Simplified"},"zh-HANT":{u:"中文繁體",v:"Chinese Traditional"},"zh-CN":{u:"中文（中国）",v:"Chinese Simplified (China)"},"zh-HK":{u:"中文（香港）",v:"Chinese Traditional (Hong Kong)"},"zh-SG":{u:"中文（新加坡）",v:"Chinese Simplified (Singapore)"},"zh-TW":{u:"中文（台灣）",v:"Chinese Traditional (Taiwan)"},"zu-ZA":{u:"isiZulu",v:"Zulu"}},vT=d(Object.keys(mT)),yT=vT.next();!yT.done;yT=vT.next()){var bT=yT.value;mT[bT.toLowerCase()]=mT[bT]}function TT(e,t){var n=this;this.parent=e,this.controls=t,this.eventManager=new ar,this.localization=this.controls.Xa,this.player=this.controls.ac(),this.video=this.controls.wb(),this.adManager=this.player.cd(),this.ad=t.getAd(),this.eventManager.m(this.adManager,"ad-started",(function(e){n.ad=e.ad})),this.eventManager.m(this.adManager,"ad-stopped",(function(){n.ad=null}))}function ET(e){return wT(e,"shaka-back-to-overflow-button")}function wT(e,t){var n=e.getElementsByClassName(t);return n.length?n[0]:null}function ST(e){e&&(e=wT(e,"shaka-chosen-item"))&&e.parentElement.focus()}function AT(){var e=Cu("i");return e.classList.add("material-icons-round"),e.classList.add("shaka-chosen-item"),e.textContent="done",e.ariaHidden="true",e}function xT(e,t){e&&(t?e.classList.remove("shaka-hidden"):e.classList.add("shaka-hidden"))}function _T(e,t){var n=Math.floor(e/3600),i=Math.floor(e/60%60),r=Math.floor(e%60);return 10>r&&(r="0"+r),r=i+":"+r,t&&(10>i&&(r="0"+r),r=n+":"+r),r}function IT(e,t){TT.call(this,e,t);var n=this;this.i=Cu("div"),this.i.classList.add("shaka-ad-counter"),this.parent.appendChild(this.i),this.h=Cu("span"),this.h.classList.add("shaka-ad-counter-span"),this.i.appendChild(this.h),this.g=new Sn((function(){var e=Math.round(n.ad.getRemainingTime()),t=n.ad.getDuration();-1!=e&&-1!=t&&(0<e?(e=_T(t-e,!1)+" / "+_T(t,!1),1<n.ad.getSequenceLength()?n.h.textContent=e:(t=n.localization.resolve("AD_TIME"),n.h.textContent=t.replace("[AD_TIME]",e))):(n.g.stop(),n.h.textContent=""))})),this.eventManager.m(this.localization,"locale-updated",(function(){})),this.eventManager.m(this.localization,"locale-changed",(function(){})),this.eventManager.m(this.adManager,"ad-started",(function(){n.g.Ca(),n.g.na(.5)})),this.eventManager.m(this.adManager,"ad-stopped",(function(){n.g.stop(),n.h.textContent=""})),this.ad&&(this.g.Ca(),this.g.na(.5))}function kT(e,t){TT.call(this,e,t);var n=this;this.g=Cu("div"),this.g.classList.add("shaka-ad-position"),xT(this.g,!1),this.parent.appendChild(this.g),this.h=Cu("span"),this.h.classList.add("shaka-ad-position-span"),this.g.appendChild(this.h),this.eventManager.m(this.localization,"locale-updated",(function(){n.ad&&CT(n)})),this.eventManager.m(this.localization,"locale-changed",(function(){n.ad&&CT(n)})),this.eventManager.m(this.adManager,"ad-started",(function(){CT(n)})),this.eventManager.m(this.adManager,"ad-stopped",(function(){n.h.textContent="",xT(n.g,!1)})),this.ad&&CT(this)}function CT(e){var t=e.ad.getSequenceLength();if(1<t){var n=e.ad.getPositionInSequence();e.h.textContent=e.localization.resolve("AD_PROGRESS").replace("[AD_ON]",String(n)).replace("[NUM_ADS]",String(t)),xT(e.g,!0)}}function LT(e,t){TT.call(this,e,t);var n=this;this.button=Lu(),this.parent.appendChild(this.button),this.eventManager.m(this.localization,"locale-updated",(function(){n.g()})),this.eventManager.m(this.localization,"locale-changed",(function(){n.g()})),this.eventManager.m(this.video,"play",(function(){n.g(),n.h()})),this.eventManager.m(this.video,"pause",(function(){n.g(),n.h()})),this.eventManager.m(this.video,"seeking",(function(){n.g(),n.h()})),this.eventManager.m(this.adManager,"ad-paused",(function(){n.g(),n.h()})),this.eventManager.m(this.adManager,"ad-resumed",(function(){n.g(),n.h()})),this.eventManager.m(this.adManager,"ad-started",(function(){n.g(),n.h()})),this.eventManager.m(this.button,"click",(function(){n.ad?zT(n.controls):KT(n.controls)})),this.ad&&(this.g(),this.h())}function PT(e,t){LT.call(this,e,t),this.button.classList.add("shaka-play-button"),this.button.classList.add("shaka-no-propagation"),this.h(),this.g()}function NT(e,t,n,i){TT.call(this,e,t);var r=this;this.container=Cu("div"),this.container.classList.add("shaka-range-container"),this.container.classList.add.apply(this.container.classList,h(n)),this.g=!1,this.bar=document.createElement("input"),this.l=new Sn((function(){r.onChangeEnd(),r.g=!1})),this.bar.classList.add("shaka-range-element"),this.bar.classList.add.apply(this.bar.classList,h(i)),this.bar.type="range",this.bar.step="any",this.bar.min="0",this.bar.max="1",this.bar.value="0",this.container.appendChild(this.bar),this.parent.appendChild(this.container),this.eventManager.m(this.bar,"mousedown",(function(){r.controls.Kb()&&(r.g=!0,r.onChangeStart())})),this.eventManager.m(this.bar,"touchstart",(function(e){r.controls.Kb()&&(r.g=!0,DT(r,e),r.onChangeStart())})),this.eventManager.m(this.bar,"input",(function(){r.onChange()})),this.eventManager.m(this.bar,"touchmove",(function(e){r.g&&(DT(r,e),r.onChange())})),this.eventManager.m(this.bar,"touchend",(function(e){r.g&&(r.g=!1,DT(r,e),r.onChangeEnd())})),this.eventManager.m(this.bar,"mouseup",(function(){r.g&&(r.g=!1,r.onChangeEnd())}))}function DT(e,t){t.preventDefault();var n=t.changedTouches[0],i=e.bar.getBoundingClientRect(),r=parseFloat(e.bar.min),a=parseFloat(e.bar.max);n=r+(a-r)/i.width*(n.clientX-i.left),n<r?n=r:n>a&&(n=a),e.bar.value=n}function RT(e,t){NT.call(this,e,t,["shaka-seek-bar-container"],["shaka-seek-bar","shaka-no-propagation","shaka-show-controls-on-mouse-over"]);var n=this;this.j=Cu("div"),this.j.classList.add("shaka-ad-markers"),this.container.insertBefore(this.j,this.container.childNodes[0]),this.s=this.controls.s,this.h=new Sn((function(){n.video.currentTime=n.getValue()})),this.o=new Sn((function(){MT(n)})),this.A=!1,this.i=[],this.eventManager.m(this.localization,"locale-updated",(function(){return FT(n)})),this.eventManager.m(this.localization,"locale-changed",(function(){return FT(n)})),this.eventManager.m(this.adManager,"ad-started",(function(){xT(n.container,!1)})),this.eventManager.m(this.adManager,"ad-stopped",(function(){OT(n)&&xT(n.container,!0)})),this.eventManager.m(this.adManager,"ad-cue-points-changed",(function(e){n.i=e.cuepoints,UT(n)})),this.eventManager.m(this.player,"unloading",(function(){n.i=[],UT(n)})),this.setValue(this.video.currentTime),this.update(),FT(this),this.ad&&xT(this.container,!1)}function MT(e){if(e.i.length){for(var t=e.player.Ka(),n=t.end-t.start,i=["to right"],r=[],a=e.s.seekBarColors.adBreaks,o=!1,s=d(e.i),u=s.next();!u.done;u=s.next())if(u=u.value,-1!=u.start||u.end||(o=!0),u.start>=t.start&&u.start<t.end&&!(u.end&&u.end>t.end)){var l=(u.start-t.start)/n||0,c=l+.01;u.end&&(c=(u.end-t.start)/n||0),r.push({start:l,end:c})}for(t=d(r),u=t.next();!u.done;u=t.next())n=u.value,i.push("transparent "+100*n.start+"%"),i.push(a+" "+100*n.start+"%"),i.push(a+" "+100*n.end+"%"),i.push("transparent "+100*n.end+"%");o&&(i.push("transparent 99%"),i.push(a+" 99%")),e.j.style.background="linear-gradient("+i.join(",")+")"}else e.j.style.background="transparent"}function UT(e){MT(e);var t=e.player.Ka();t=t.end-t.start,e.player.Y()&&5<t&&e.o.na(1)}function OT(e){var t=e.player.Ka();return t=t.end-t.start,!(e.player.Y()&&5>t)&&null==e.ad}function FT(e){e.bar.ariaLabel=e.localization.resolve("SEEK")}function jT(){}function BT(e,t,n,i){oe.call(this);var r=this;this.W=!0,this.s=i,this.A=new Rd(n,e,this.s.castReceiverAppId),this.tb=!0,this.g=this.A.wb(),this.B=n,this.D=this.A.ac(),this.Ia=e,this.j=t,this.sb=this.D.cd(),this.l=this.o=null,this.ba=!1,this.H=[],this.Xb=[],this.Bb=!1,this.ea=new Sn((function(){r.j.style.cursor="none",r.Bb=!1,nE(r)})),this.ua=new Sn((function(){r.i.removeAttribute("shown"),r.I.S(2)})),this.I=new Sn((function(){for(var e=d(r.H),t=e.next();!t.done;t=e.next())xT(t.value,!1)})),this.eb=new Sn((function(){r.Kb()&&aE(r)})),this.K=null,this.R=[],this.Xa=uE(),this.h=new ar,this.configure(this.s),QT(this),this.xa=new Set,iE(this),this.eb.na(.125),this.h.m(this.Xa,"locale-changed",(function(e){r.sb.setLocale(e.locales[0])}))}function GT(e){for(var t=d(e.R),n=t.next();!n.done;n=t.next())n.value.release();e.R=[]}function VT(e,t){lE.set(e,t)}function KT(e){e.W&&e.g.duration&&(e.D.Ie(),e.g.paused&&!e.ba?e.g.play():e.g.pause())}function zT(e){e.o&&e.o.isPaused()?e.o.play():e.o&&e.o.pause()}function HT(e){e.i=Cu("div"),e.i.classList.add("shaka-controls-container"),e.j.appendChild(e.i),e.j.setAttribute("shaka-controls","true"),e.h.m(e.i,"touchstart",(function(t){e.g.duration&&(e.Kb()?e.K=Date.now():(eE(e,t),t.preventDefault()))}),{passive:!1}),e.h.m(e.i,"click",(function(){e.W&&(e.Xc()?e.I.Ca():e.o?zT(e):KT(e))})),e.h.m(e.i,"dblclick",(function(){e.s.doubleClickForFullscreen&&document.fullscreenEnabled&&e.Be()}))}function WT(e){var t=Cu("div");t.classList.add("shaka-play-button-container"),e.i.appendChild(t),e.Ab=new PT(t,e),e.R.push(e.Ab)}function qT(e){var t=Cu("div");t.classList.add("shaka-scrim-container"),e.i.appendChild(t)}function YT(e){e.L=Cu("div"),e.L.classList.add("shaka-ad-controls"),xT(e.L,null!=e.o),e.O.appendChild(e.L);var t=new kT(e.L,e);e.R.push(t),t=new IT(e.L,e),e.R.push(t)}function XT(e){e.ha=Cu("div"),e.ha.classList.add("shaka-spinner-container"),e.j.appendChild(e.ha);var t=Cu("div");t.classList.add("shaka-spinner"),e.ha.appendChild(t),e=document.createElementNS("http://www.w3.org/2000/svg","svg"),e.classList.add("shaka-spinner-svg"),e.setAttribute("viewBox","0 0 30 30"),t.appendChild(e),t=document.createElementNS("http://www.w3.org/2000/svg","circle"),t.classList.add("shaka-spinner-path"),t.setAttribute("cx","15"),t.setAttribute("cy","15"),t.setAttribute("r","14.5"),t.setAttribute("fill","none"),t.setAttribute("stroke-width","1"),t.setAttribute("stroke-miterlimit","10"),e.appendChild(t)}function $T(e){e.O=Cu("div"),e.O.classList.add("shaka-bottom-controls"),e.O.classList.add("shaka-no-propagation"),e.i.appendChild(e.O),e.h.m(e.O,"click",(function(){e.Fc()})),YT(e),e.Ja=Cu("div"),e.Ja.classList.add("shaka-controls-button-panel"),e.Ja.classList.add("shaka-show-controls-on-mouse-over"),e.O.appendChild(e.Ja);for(var t={},n=d(e.s.controlPanelElements),i=n.next();!i.done;t={nc:t.nc},i=n.next())i=i.value,lE.get(i)?(i=lE.get(i).create(e.Ja,e),"function"!=typeof i.release&&(Ce("shaka.extern.IUIElement","Please update UI elements to have a release() method."),t.nc=i,t.nc.release=function(e){return function(){e.nc.destroy&&e.nc.destroy()}}(t)),e.R.push(i)):X("Unrecognized control panel element requested:",i)}function JT(e){if(e.s.addSeekBar)e.l=cE.create(e.O,e),e.R.push(e.l);else{e=d(e.H);for(var t=e.next();!t.done;t=e.next())t.value.classList.add("shaka-low-position")}}function QT(t){t.h.m(t.D,"buffering",(function(){t.W&&xT(t.ha,t.D.Hc())})),t.W&&xT(t.ha,t.D.Hc()),t.h.m(e,"keydown",(function(e){oE(t,e)})),t.h.m(e,"click",(function(){return t.Fc()})),t.h.m(t.g,"play",(function(){nE(t)})),t.h.m(t.g,"pause",(function(){nE(t)})),t.h.m(t.j,"mousemove",(function(e){eE(t,e)})),t.h.m(t.j,"touchmove",(function(e){eE(t,e)}),{passive:!0}),t.h.m(t.j,"touchend",(function(e){eE(t,e)}),{passive:!0}),t.h.m(t.j,"mouseleave",(function(){t.K||t.ea.Ca()})),t.h.m(t.A,"caststatuschanged",(function(){iE(t)})),t.h.m(t.j,"keydown",(function(e){var n=document.activeElement,i=!(!n||!n.classList)&&n.classList.contains("shaka-volume-bar"),r=n&&n.classList&&n.classList.contains("shaka-seek-bar");if(t.i.contains(n)&&eE(t,e),t.s.enableKeyboardPlaybackControls)switch(e.key){case"ArrowLeft":t.l&&!i&&(e.preventDefault(),rE(t,t.l.getValue()-5));break;case"ArrowRight":t.l&&!i&&(e.preventDefault(),rE(t,t.l.getValue()+5));break;case"Home":t.l&&rE(t,t.D.Ka().start);break;case"End":t.l&&rE(t,t.D.Ka().end);break;case" ":r&&(t.o?zT(t):KT(t))}})),t.h.m(t.j,"keyup",(function(e){t.xa["delete"](e.key)})),t.h.m(t.sb,"ad-started",(function(e){t.o=e.ad,t.uf()})),t.h.m(t.sb,"ad-stopped",(function(){t.o=null,t.Xe()})),screen.orientation&&t.h.m(screen.orientation,"change",(function(){return F((function(e){return S(e,ZT(t),0)}))})),t.h.m(document,"fullscreenchange",(function(){t.o&&t.o.resize(t.B.offsetWidth,t.B.offsetHeight)}))}function ZT(e){return F((function(t){return e.g&&0!=e.g.readyState&&!e.A.ra()&&e.s.enableFullscreenOnRotation?screen.orientation.type.includes("landscape")&&!document.fullscreenElement?S(t,e.j.requestFullscreen({navigationUI:"hide"}),0):screen.orientation.type.includes("portrait")&&document.fullscreenElement?S(t,document.exitFullscreen(),0):t.C(0):t["return"]()}))}function eE(e,t){"mousemove"==t.type&&(e.i.classList.remove("shaka-keyboard-navigation"),nE(e)),"touchstart"==t.type||"touchmove"==t.type||"touchend"==t.type||"keyup"==t.type?e.K=Date.now():e.K+1e3<Date.now()&&(e.K=null),e.K&&"mousemove"==t.type||(e.j.style.cursor="",e.Bb=!0,e.I.stop(),e.Kb()||(aE(e),nE(e)),e.ea.stop(),"touchend"!=t.type&&"keyup"!=t.type&&e.K||e.ea.S(3))}function tE(t){return!!e.matchMedia("hover: hover").matches&&t.Xb.some((function(e){return e.matches(":hover")}))}function nE(e){var t=!!e.o&&e.o.isPaused(),n=e.g.paused&&!e.ba,i=e.i.classList.contains("shaka-keyboard-navigation");t||!e.o&&n||e.Bb||i||tE(e)?(aE(e),e.i.setAttribute("shown","true"),e.ua.stop()):e.ua.S(e.s.fadeDelay)}function iE(e){var t=e.A.ra();e.dispatchEvent(new W("caststatuschanged",{Dg:t})),t?e.i.setAttribute("casting","true"):e.i.removeAttribute("casting")}function rE(e,t){e.l.changeTo(t),e.Kb()&&aE(e)}function aE(e){if(e.l)if(e.l.setValue(e.g.currentTime),e.l.update(),e.l.isShowing())for(var t=d(e.H),n=t.next();!n.done;n=t.next())n.value.classList.remove("shaka-low-position");else for(t=d(e.H),n=t.next();!n.done;n=t.next())n.value.classList.add("shaka-low-position");e.dispatchEvent(new W("timeandseekrangeupdated"))}function oE(t,n){t.xa.add(n.key);var i=t.Xc();"Tab"==n.key&&(t.i.classList.add("shaka-keyboard-navigation"),nE(t),t.h.m(e,"mousedown",(function(){t.h.Ra(e,"mousedown")}))),"Escape"==n.key&&t.I.Ca(),i&&t.xa.has("Tab")&&sE(t,n)}function sE(e,t){var n=e.H.filter((function(e){return!e.classList.contains("shaka-hidden")}));if(n.length){var i=n[0];if(i.childNodes.length){for(n=i.firstElementChild;n&&n.classList.contains("shaka-hidden");)n=n.nextElementSibling;for(i=i.lastElementChild;i&&i.classList.contains("shaka-hidden");)i=i.previousElementSibling;var r=document.activeElement;e.xa.has("Shift")?r==n&&(t.preventDefault(),i.focus()):r==i&&(t.preventDefault(),n.focus())}}}function uE(){var e=new Ze("en");return e.ia("ar",new Map([["AD_DURATION","مدة الإعلان"],["AD_PROGRESS","الإعلان [AD_ON] من [NUM_ADS]"],["AD_TIME","الإعلان: [AD_TIME]"],["AUTO_QUALITY","تلقائي"],["BACK","رجوع"],["CAPTIONS","الترجمة والشرح"],["CAST","إرسال..."],["ENTER_LOOP_MODE","تكرار الفيديو الحالي"],["ENTER_PICTURE_IN_PICTURE",'الدخول في وضع "نافذة ضمن نافذة"'],["EXIT_FULL_SCREEN","إنهاء وضع ملء الشاشة"],["EXIT_LOOP_MODE","إيقاف تكرار الفيديو الحالي"],["EXIT_PICTURE_IN_PICTURE",'الخروج من وضع "نافذة ضمن نافذة"'],["FAST_FORWARD","تقديم سريع"],["FULL_SCREEN","ملء الشاشة"],["LANGUAGE","اللغة"],["LIVE","مباشر"],["LOOP","تكرار"],["MORE_SETTINGS","مزيد من الإعدادات"],["MULTIPLE_LANGUAGES","لغات متعددة"],["MUTE","كتم الصوت"],["NOT_APPLICABLE","غير سارٍ"],["OFF","إيقاف"],["ON","تشغيل"],["PAUSE","إيقاف مؤقت"],["PICTURE_IN_PICTURE","نافذة ضمن النافذة"],["PLAY","التشغيل"],["PLAYBACK_RATE","سرعة التشغيل"],["RESOLUTION","درجة الدقة"],["REWIND","ترجيع"],["SEEK","البحث بالتمرير"],["SKIP_AD","تخطّي الإعلان"],["SKIP_TO_LIVE","الانتقال إلى بث مباشر"],["UNDETERMINED_LANGUAGE","غير محدد"],["UNMUTE","إعادة الصوت"],["UNRECOGNIZED_LANGUAGE","غير معروف"],["VOLUME","مستوى الصوت"]])),e.ia("de",new Map([["AD_DURATION","Dauer der Werbeanzeige"],["AD_PROGRESS","Werbung [AD_ON] von [NUM_ADS]"],["AD_TIME","Werbeanzeige: [AD_TIME]"],["AUTO_QUALITY","Automatisch"],["BACK","Zurück"],["CAPTIONS","Untertitel"],["CAST","Streamen..."],["ENTER_LOOP_MODE","In Endlosschleife spielen"],["ENTER_PICTURE_IN_PICTURE","Bild-im-Bild-Modus aktivieren"],["EXIT_FULL_SCREEN","Vollbildmodus beenden"],["EXIT_LOOP_MODE","Endlosschleife stoppen"],["EXIT_PICTURE_IN_PICTURE","Bild-im-Bild-Modus beenden"],["FAST_FORWARD","Vorspulen"],["FULL_SCREEN","Vollbildmodus"],["LANGUAGE","Sprache"],["LIVE","Live"],["LOOP","Schleife"],["MORE_SETTINGS","Weitere Einstellungen"],["MULTIPLE_LANGUAGES","Mehrere Sprachen"],["MUTE","Stummschalten"],["NOT_APPLICABLE","Nicht zutreffend"],["OFF","Aus"],["ON","Ein"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Bild im Bild"],["PLAY","Wiedergabe"],["PLAYBACK_RATE","Geschwindigkeit"],["RESOLUTION","Auflösung"],["REWIND","Zurückspulen"],["SEEK","Suche"],["SKIP_AD","Überspringen"],["SKIP_TO_LIVE","Zum Live-Videostream wechseln"],["UNDETERMINED_LANGUAGE","Unbestimmt"],["UNMUTE","Stummschaltung aufheben"],["UNRECOGNIZED_LANGUAGE","Unbekannt"],["VOLUME","Lautstärke"]])),e.ia("en",new Map([["AD_DURATION","Ad duration"],["AD_PROGRESS","Ad [AD_ON] of [NUM_ADS]"],["AD_TIME","Ad: [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY","Auto"],["BACK","Back"],["CAPTIONS","Captions"],["CAST","Cast..."],["ENTER_LOOP_MODE","Loop the current video"],["ENTER_PICTURE_IN_PICTURE","Enter Picture-in-Picture"],["EXIT_FULL_SCREEN","Exit full screen"],["EXIT_LOOP_MODE","Stop looping the current video"],["EXIT_PICTURE_IN_PICTURE","Exit Picture-in-Picture"],["FAST_FORWARD","Fast-forward"],["FULL_SCREEN","Full screen"],["LANGUAGE","Language"],["LIVE","Live"],["LOOP","Loop"],["MORE_SETTINGS","More settings"],["MULTIPLE_LANGUAGES","Multiple languages"],["MUTE","Mute"],["NOT_APPLICABLE","Not applicable"],["OFF","Off"],["ON","On"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-Picture"],["PLAY","Play"],["PLAYBACK_RATE","Playback speed"],["REPLAY","Replay"],["RESOLUTION","Resolution"],["REWIND","Rewind"],["SEEK","Seek"],["SKIP_AD","Skip Ad"],["SKIP_TO_LIVE","Skip ahead to live"],["SUBTITLE_FORCED","Forced"],["UNDETERMINED_LANGUAGE","Undetermined"],["UNMUTE","Unmute"],["UNRECOGNIZED_LANGUAGE","Unrecognized"],["VOLUME","Volume"]])),e.ia("en-GB",new Map([["AD_DURATION","Ad duration"],["AD_PROGRESS","Ad [AD_ON] of [NUM_ADS]"],["AD_TIME","Ad: [AD_TIME]"],["AUTO_QUALITY","Auto"],["BACK","Back"],["CAPTIONS","Captions"],["CAST","Cast..."],["ENTER_LOOP_MODE","Loop the current video"],["ENTER_PICTURE_IN_PICTURE","Enter picture-in-picture"],["EXIT_FULL_SCREEN","Exit full screen"],["EXIT_LOOP_MODE","Stop looping the current video"],["EXIT_PICTURE_IN_PICTURE","Exit picture-in-picture"],["FAST_FORWARD","Fast-forward"],["FULL_SCREEN","Full screen"],["LANGUAGE","Language"],["LIVE","Live"],["LOOP","Loop"],["MORE_SETTINGS","More settings"],["MULTIPLE_LANGUAGES","Multiple languages"],["MUTE","Mute"],["NOT_APPLICABLE","Not applicable"],["OFF","Off"],["ON","On"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-picture"],["PLAY","Play"],["PLAYBACK_RATE","Playback speed"],["RESOLUTION","Resolution"],["REWIND","Rewind"],["SEEK","Seek"],["SKIP_AD","Skip ad"],["SKIP_TO_LIVE","Skip ahead to live"],["UNDETERMINED_LANGUAGE","Undetermined"],["UNMUTE","Unmute"],["UNRECOGNIZED_LANGUAGE","Unrecognised"],["VOLUME","volume"]])),e.ia("es",new Map([["AD_DURATION","Duración del anuncio"],["AD_PROGRESS","Anuncio [AD_ON] de [NUM_ADS]"],["AD_TIME","Anuncio: [AD_TIME]"],["AUTO_QUALITY","Automático"],["BACK","Atrás"],["CAPTIONS","Subtítulos"],["CAST","Enviar..."],["ENTER_LOOP_MODE","Reproducir en bucle el vídeo actual"],["ENTER_PICTURE_IN_PICTURE","Activar el modo imagen en imagen"],["EXIT_FULL_SCREEN","Salir del modo de pantalla completa"],["EXIT_LOOP_MODE","Dejar de reproducir en bucle el vídeo actual"],["EXIT_PICTURE_IN_PICTURE","Salir del modo imagen en imagen"],["FAST_FORWARD","Avanzar rápidamente"],["FULL_SCREEN","Pantalla completa"],["LANGUAGE","Idioma"],["LIVE","En directo"],["LOOP","Reproducir en bucle"],["MORE_SETTINGS","Más ajustes"],["MULTIPLE_LANGUAGES","Varios idiomas"],["MUTE","Silenciar"],["NOT_APPLICABLE","No aplicable"],["OFF","Desactivado"],["ON","Activado"],["PAUSE","Pausar"],["PICTURE_IN_PICTURE","Imagen en imagen"],["PLAY","Reproducir"],["PLAYBACK_RATE","Velocidad de reproducción"],["RESOLUTION","Resolución"],["REWIND","Rebobinar"],["SEEK","Buscar"],["SKIP_AD","Saltar anuncio"],["SKIP_TO_LIVE","Ir al vídeo en directo"],["SUBTITLE_FORCED","Forzado"],["UNDETERMINED_LANGUAGE","Sin especificar"],["UNMUTE","Activar sonido"],["UNRECOGNIZED_LANGUAGE","No reconocida"],["VOLUME","Volumen"]])),e.ia("es-419",new Map([["AD_DURATION","Duración del anuncio"],["AD_PROGRESS","Anuncio [AD_ON] de [NUM_ADS]"],["AD_TIME","Anuncio: [AD_TIME]"],["AUTO_QUALITY","Automático"],["BACK","Atrás"],["CAPTIONS","Subtítulos"],["CAST","Transmitir..."],["ENTER_LOOP_MODE","Repetir indefinidamente el video actual"],["ENTER_PICTURE_IN_PICTURE","Ingresar al modo de pantalla en pantalla"],["EXIT_FULL_SCREEN","Salir de pantalla completa"],["EXIT_LOOP_MODE","Detener la repetición indefinida del video actual"],["EXIT_PICTURE_IN_PICTURE","Salir del modo de pantalla en pantalla"],["FAST_FORWARD","Avanzar"],["FULL_SCREEN","Pantalla completa"],["LANGUAGE","Idioma"],["LIVE","En directo"],["LOOP","Repetir indefinidamente"],["MORE_SETTINGS","Más opciones de configuración"],["MULTIPLE_LANGUAGES","Varios idiomas"],["MUTE","Silenciar"],["NOT_APPLICABLE","No aplicable"],["OFF","Desactivado"],["ON","Activado"],["PAUSE","Detener"],["PICTURE_IN_PICTURE","Pantalla en pantalla"],["PLAY","Reproducir"],["PLAYBACK_RATE","Velocidad de reproducción"],["RESOLUTION","Resolución"],["REWIND","Retroceder"],["SEEK","Buscar"],["SKIP_AD","Omitir anuncio"],["SKIP_TO_LIVE","Adelantar hasta la transmisión en vivo"],["SUBTITLE_FORCED","Forzado"],["UNDETERMINED_LANGUAGE","Sin especificar"],["UNMUTE","Dejar de silenciar"],["UNRECOGNIZED_LANGUAGE","No reconocida"],["VOLUME","Volumen"]])),e.ia("fr",new Map([["AD_DURATION","Durée de l'annonce"],["AD_PROGRESS","Annonce [AD_ON] sur [NUM_ADS]"],["AD_TIME","Annonce : [AD_TIME]"],["AUTO_QUALITY","Automatique"],["BACK","Retour"],["CAPTIONS","Sous-titres"],["CAST","Caster…"],["ENTER_LOOP_MODE","Lire en boucle la vidéo en cours"],["ENTER_PICTURE_IN_PICTURE","Utiliser le mode Picture-in-Picture"],["EXIT_FULL_SCREEN","Quitter le mode plein écran"],["EXIT_LOOP_MODE","Arrêter la lecture en boucle de la vidéo en cours"],["EXIT_PICTURE_IN_PICTURE","Quitter le mode PIP (Picture-in-picture)"],["FAST_FORWARD","Avance rapide"],["FULL_SCREEN","Plein écran"],["LANGUAGE","Langue"],["LIVE","En direct"],["LOOP","Répéter"],["MORE_SETTINGS","Plus de paramètres"],["MULTIPLE_LANGUAGES","Plusieurs langues"],["MUTE","Couper le son"],["NOT_APPLICABLE","Non applicable"],["OFF","Désactivée"],["ON","Activée"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-Picture"],["PLAY","Visionner"],["PLAYBACK_RATE","Vitesse de lecture"],["RESOLUTION","Résolution"],["REWIND","Retour arrière"],["SEEK","Chercher"],["SKIP_AD","Passer l'annonce"],["SKIP_TO_LIVE","Accéder à la partie la plus récente du direct"],["UNDETERMINED_LANGUAGE","Langue indéterminée"],["UNMUTE","Réactiver le son"],["UNRECOGNIZED_LANGUAGE","Non reconnu"],["VOLUME","Volume"]])),e.ia("it",new Map([["AD_DURATION","Durata dell'annuncio"],["AD_PROGRESS","Annuncio [AD_ON] di [NUM_ADS]"],["AD_TIME","Annuncio: [AD_TIME]"],["AUTO_QUALITY","Automatica"],["BACK","Indietro"],["CAPTIONS","Sottotitoli"],["CAST","Trasmetti..."],["ENTER_LOOP_MODE","Riproduci in loop il video corrente"],["ENTER_PICTURE_IN_PICTURE","Attiva Picture in picture"],["EXIT_FULL_SCREEN","Esci da schermo intero"],["EXIT_LOOP_MODE","Interrompi riproduzione in loop del video corrente"],["EXIT_PICTURE_IN_PICTURE","Esci da Picture in picture"],["FAST_FORWARD","Avanti veloce"],["FULL_SCREEN","Schermo intero"],["LANGUAGE","Lingua"],["LIVE","Dal vivo"],["LOOP","Riproduci in loop"],["MORE_SETTINGS","Altre impostazioni"],["MULTIPLE_LANGUAGES","Più lingue"],["MUTE","Disattiva audio"],["NOT_APPLICABLE","Non applicabile"],["OFF","Disattivo"],["ON","Attivo"],["PAUSE","Metti in pausa"],["PICTURE_IN_PICTURE","Picture in picture"],["PLAY","Riproduci"],["PLAYBACK_RATE","Velocità di riproduzione"],["RESOLUTION","Risoluzione"],["REWIND","Riavvolgi"],["SEEK","Cerca"],["SKIP_AD","Salta annuncio"],["SKIP_TO_LIVE","Passa alla trasmissione dal vivo"],["UNDETERMINED_LANGUAGE","Indeterminata"],["UNMUTE","Riattiva audio"],["UNRECOGNIZED_LANGUAGE","Non riconosciuto"],["VOLUME","Volume"]])),e.ia("ja",new Map([["AD_DURATION","広告再生時間"],["AD_PROGRESS","[AD_ON] 番目の広告（全 [NUM_ADS] 個）"],["AD_TIME","広告: [AD_TIME]"],["AUTO_QUALITY","自動"],["BACK","戻る"],["CAPTIONS","字幕"],["CAST","キャスト..."],["ENTER_LOOP_MODE","現在の動画をループ再生"],["ENTER_PICTURE_IN_PICTURE","ピクチャー イン ピクチャーを開始"],["EXIT_FULL_SCREEN","全画面表示を終了"],["EXIT_LOOP_MODE","現在の動画のループ再生を停止"],["EXIT_PICTURE_IN_PICTURE","ピクチャー イン ピクチャーを終了"],["FAST_FORWARD","早送り"],["FULL_SCREEN","全画面表示"],["LANGUAGE","言語"],["LIVE","ライブ"],["LOOP","ループ"],["MORE_SETTINGS","詳細設定"],["MULTIPLE_LANGUAGES","多言語"],["MUTE","ミュート"],["NOT_APPLICABLE","該当なし"],["OFF","オフ"],["ON","オン"],["PAUSE","一時停止"],["PICTURE_IN_PICTURE","ピクチャー イン ピクチャー"],["PLAY","再生"],["PLAYBACK_RATE","再生速度"],["RESOLUTION","解像度"],["REWIND","巻き戻し"],["SEEK","シーク再生"],["SKIP_AD","広告をスキップ"],["SKIP_TO_LIVE","ライブ配信までスキップ"],["UNDETERMINED_LANGUAGE","不明"],["UNMUTE","ミュートを解除"],["UNRECOGNIZED_LANGUAGE","不明"],["VOLUME","音量"]])),e.ia("ko",new Map([["AD_DURATION","광고 기간"],["AD_PROGRESS","광고 [AD_ON]/[NUM_ADS]"],["AD_TIME","광고: [AD_TIME]"],["AUTO_QUALITY","자동"],["BACK","뒤로"],["CAPTIONS","자막"],["CAST","전송..."],["ENTER_LOOP_MODE","현재 동영상 반복 재생"],["ENTER_PICTURE_IN_PICTURE","PIP 모드 시작"],["EXIT_FULL_SCREEN","전체화면 닫기"],["EXIT_LOOP_MODE","현재 동영상 반복 재생 중지"],["EXIT_PICTURE_IN_PICTURE","PIP 모드 종료"],["FAST_FORWARD","빨리 감기"],["FULL_SCREEN","전체화면"],["LANGUAGE","언어"],["LIVE","실시간"],["LOOP","반복 재생"],["MORE_SETTINGS","설정 더보기"],["MULTIPLE_LANGUAGES","여러 언어"],["MUTE","음소거"],["NOT_APPLICABLE","해당 사항 없음"],["OFF","사용 안함"],["ON","사용"],["PAUSE","일시중지"],["PICTURE_IN_PICTURE","PIP 모드"],["PLAY","재생"],["PLAYBACK_RATE","재생 속도"],["RESOLUTION","해상도"],["REWIND","되감기"],["SEEK","찾기"],["SKIP_AD","광고 건너뛰기"],["SKIP_TO_LIVE","라이브 동영상으로 건너뛰기"],["UNDETERMINED_LANGUAGE","미정"],["UNMUTE","음소거 해제"],["UNRECOGNIZED_LANGUAGE","알 수 없음"],["VOLUME","볼륨"]])),e.ia("nl",new Map([["AD_DURATION","Advertentieduur"],["AD_PROGRESS","Advertentie [AD_ON] van [NUM_ADS]"],["AD_TIME","Advertentie: [AD_TIME]"],["AUTO_QUALITY","Automatisch"],["BACK","Terug"],["CAPTIONS","Ondertiteling"],["CAST","Casten..."],["ENTER_LOOP_MODE","De huidige video lussen"],["ENTER_PICTURE_IN_PICTURE","Scherm-in-scherm openen"],["EXIT_FULL_SCREEN","Volledig scherm sluiten"],["EXIT_LOOP_MODE","De huidige video niet meer lussen"],["EXIT_PICTURE_IN_PICTURE","Scherm-in-scherm afsluiten"],["FAST_FORWARD","Vooruitspoelen"],["FULL_SCREEN","Volledig scherm"],["LANGUAGE","Taal"],["LIVE","Live"],["LOOP","Lussen"],["MORE_SETTINGS","Meer instellingen"],["MULTIPLE_LANGUAGES","Meerdere talen"],["MUTE","Dempen"],["NOT_APPLICABLE","Niet van toepassing"],["OFF","Uit"],["ON","Aan"],["PAUSE","Onderbreken"],["PICTURE_IN_PICTURE","Scherm-in-scherm"],["PLAY","Afspelen"],["PLAYBACK_RATE","Afspeelsnelheid"],["RESOLUTION","Resolutie"],["REWIND","Terugspoelen"],["SEEK","Zoeken"],["SKIP_AD","Advertentie overslaan"],["SKIP_TO_LIVE","Doorgaan naar live"],["UNDETERMINED_LANGUAGE","Onbepaald"],["UNMUTE","Dempen opheffen"],["UNRECOGNIZED_LANGUAGE","Onbekend"],["VOLUME","Volume"]])),e.ia("pl",new Map([["AD_DURATION","Czas trwania reklamy"],["AD_PROGRESS","Reklama [AD_ON] z [NUM_ADS]"],["AD_TIME","Reklama: [AD_TIME]"],["AUTO_QUALITY","Automatycznie"],["BACK","Wstecz"],["CAPTIONS","Napisy"],["CAST","Przesyłaj..."],["ENTER_LOOP_MODE","Odtwarzaj bieżący film w pętli"],["ENTER_PICTURE_IN_PICTURE","Włącz tryb obrazu w obrazie"],["EXIT_FULL_SCREEN","Zamknij pełny ekran"],["EXIT_LOOP_MODE","Wyłącz odtwarzanie bieżącego filmu w pętli"],["EXIT_PICTURE_IN_PICTURE","Wyłącz tryb obrazu w obrazie"],["FAST_FORWARD","Przewiń do przodu"],["FULL_SCREEN","Pełny ekran"],["LANGUAGE","Język"],["LIVE","Na żywo"],["LOOP","Odtwarzaj w pętli"],["MORE_SETTINGS","Więcej ustawień"],["MULTIPLE_LANGUAGES","Wiele języków"],["MUTE","Wycisz"],["NOT_APPLICABLE","Nie dotyczy"],["OFF","Wyłączone"],["ON","Włączone"],["PAUSE","Wstrzymaj"],["PICTURE_IN_PICTURE","Obraz w obrazie"],["PLAY","Odtwórz"],["PLAYBACK_RATE","Szybkość odtwarzania"],["RESOLUTION","Rozdzielczość"],["REWIND","Przewiń do tyłu"],["SEEK","Szukaj"],["SKIP_AD","Pomiń reklamę"],["SKIP_TO_LIVE","Przejdź do transmisji na żywo"],["UNDETERMINED_LANGUAGE","Nie określono"],["UNMUTE","Wyłącz wyciszenie"],["UNRECOGNIZED_LANGUAGE","Nierozpoznany"],["VOLUME","Głośność"]])),e.ia("pt-BR",new Map([["AD_DURATION","Duração do anúncio"],["AD_PROGRESS","Anúncio [AD_ON] de [NUM_ADS]"],["AD_TIME","Anúncio: [AD_TIME]"],["AUTO_QUALITY","Automática"],["BACK","Voltar"],["CAPTIONS","Legendas"],["CAST","Transmitir..."],["ENTER_LOOP_MODE","Repetir o vídeo atual"],["ENTER_PICTURE_IN_PICTURE","Entrar no modo picture-in-picture"],["EXIT_FULL_SCREEN","Sair do modo tela cheia"],["EXIT_LOOP_MODE","Parar repetição do vídeo atual"],["EXIT_PICTURE_IN_PICTURE","Sair de picture-in-picture"],["FAST_FORWARD","Avançar"],["FULL_SCREEN","Tela cheia"],["LANGUAGE","Idioma"],["LIVE","Ao vivo"],["LOOP","Repetir"],["MORE_SETTINGS","Mais definições"],["MULTIPLE_LANGUAGES","Vários idiomas"],["MUTE","Desativar som"],["NOT_APPLICABLE","Não relevante"],["OFF","Desativado"],["ON","Ativado"],["PAUSE","Pausar"],["PICTURE_IN_PICTURE","Picture-in-picture"],["PLAY","Reproduzir"],["PLAYBACK_RATE","Velocidade da reprodução"],["RESOLUTION","Resolução"],["REWIND","Retroceder"],["SEEK","Procurar"],["SKIP_AD","Pular anúncio"],["SKIP_TO_LIVE","Pular para transmissão ao vivo"],["UNDETERMINED_LANGUAGE","Indeterminado"],["UNMUTE","Ativar som"],["UNRECOGNIZED_LANGUAGE","Não reconhecido"],["VOLUME","Volume"]])),e.ia("ru",new Map([["AD_DURATION","Продолжительность объявления"],["AD_PROGRESS","Объявление [AD_ON] из [NUM_ADS]"],["AD_TIME","Объявление: [AD_TIME]"],["AUTO_QUALITY","Авто"],["BACK","Назад"],["CAPTIONS","Титры"],["CAST","Транслировать..."],["ENTER_LOOP_MODE","Зациклить текущее видео"],["ENTER_PICTURE_IN_PICTURE",'Перейти в режим "Картинка в картинке"'],["EXIT_FULL_SCREEN","Обычный режим"],["EXIT_LOOP_MODE","Отменить зацикливание текущего видео"],["EXIT_PICTURE_IN_PICTURE",'Выйти из режима "Картинка в картинке"'],["FAST_FORWARD","Перемотка вперед"],["FULL_SCREEN","Полноэкранный режим"],["LANGUAGE","Язык"],["LIVE","Прямой эфир"],["LOOP","Зациклить"],["MORE_SETTINGS","Дополнительные настройки"],["MULTIPLE_LANGUAGES","Несколько языков"],["MUTE","Отключить звук"],["NOT_APPLICABLE","Неприменимо"],["OFF","Включить"],["ON","Отключить"],["PAUSE","Пауза"],["PICTURE_IN_PICTURE","Картинка в картинке"],["PLAY","Воспроизвести"],["PLAYBACK_RATE","Скорость воспроизведения"],["RESOLUTION","Разрешение"],["REWIND","Перемотать назад"],["SEEK","Перемотка"],["SKIP_AD","Пропустить"],["SKIP_TO_LIVE","Пропустить и перейти к прямой трансляции"],["UNDETERMINED_LANGUAGE","Не указано"],["UNMUTE","Включить звук"],["UNRECOGNIZED_LANGUAGE","Не распознано"],["VOLUME","Громкость"]])),e.ia("th",new Map([["AD_DURATION","ระยะเวลาโฆษณา"],["AD_PROGRESS","โฆษณา [AD_ON] จาก [NUM_ADS] รายการ"],["AD_TIME","โฆษณา: [AD_TIME]"],["AUTO_QUALITY","อัตโนมัติ"],["BACK","กลับ"],["CAPTIONS","คำบรรยาย"],["CAST","แคสต์..."],["ENTER_LOOP_MODE","วนซ้ำวิดีโอปัจจุบัน"],["ENTER_PICTURE_IN_PICTURE","เข้าสู่การแสดงภาพซ้อนภาพ"],["EXIT_FULL_SCREEN","ออกจากการแสดงแบบเต็มหน้าจอ"],["EXIT_LOOP_MODE","หยุดวนซ้ำวิดีโอปัจจุบัน"],["EXIT_PICTURE_IN_PICTURE","ออกจากการแสดงภาพซ้อนภาพ"],["FAST_FORWARD","กรอไปข้างหน้า"],["FULL_SCREEN","เต็มหน้าจอ"],["LANGUAGE","ภาษา"],["LIVE","สด"],["LOOP","ลูป"],["MORE_SETTINGS","การตั้งค่าเพิ่มเติม"],["MULTIPLE_LANGUAGES","หลายภาษา"],["MUTE","ปิดเสียง"],["NOT_APPLICABLE","ไม่เกี่ยวข้อง"],["OFF","ปิด"],["ON","เปิด"],["PAUSE","หยุดชั่วคราว"],["PICTURE_IN_PICTURE","การแสดงภาพซ้อนภาพ"],["PLAY","เล่น"],["PLAYBACK_RATE","ความเร็วในการเล่น"],["RESOLUTION","ความละเอียด"],["REWIND","กรอกลับ"],["SEEK","ค้นหา"],["SKIP_AD","ข้ามโฆษณา"],["SKIP_TO_LIVE","ข้ามไปที่การถ่ายทอดสด"],["UNDETERMINED_LANGUAGE","ไม่กำหนด"],["UNMUTE","เปิดเสียง"],["UNRECOGNIZED_LANGUAGE","ที่ไม่รู้จัก"],["VOLUME","ระดับเสียง"]])),e.ia("tr",new Map([["AD_DURATION","Reklam süresi"],["AD_PROGRESS","[AD_ON]/[NUM_ADS] reklam"],["AD_TIME","Reklam: [AD_TIME]"],["AUTO_QUALITY","Otomatik"],["BACK","Geri"],["CAPTIONS","Altyazılar"],["CAST","Yayınla..."],["ENTER_LOOP_MODE","Mevcut videoyu döngüye al"],["ENTER_PICTURE_IN_PICTURE","Pencere içinde Pencere moduna gir"],["EXIT_FULL_SCREEN","Tam ekrandan çık"],["EXIT_LOOP_MODE","Mevcut videonun döngüsünü durdur"],["EXIT_PICTURE_IN_PICTURE","Pencere İçinde Pencereden Çık"],["FAST_FORWARD","İleri sar"],["FULL_SCREEN","Tam ekran"],["LANGUAGE","Dil"],["LIVE","Canlı"],["LOOP","Döngü"],["MORE_SETTINGS","Daha fazla ayar"],["MULTIPLE_LANGUAGES","Birden çok dil"],["MUTE","Sesi kapat"],["NOT_APPLICABLE","Geçerli değil"],["OFF","Kapalı"],["ON","Açık"],["PAUSE","Duraklat"],["PICTURE_IN_PICTURE","Pencere İçinde Pencere"],["PLAY","Oynat"],["PLAYBACK_RATE","Çalma hızı"],["RESOLUTION","Çözünürlük"],["REWIND","Geri sar"],["SEEK","Ara"],["SKIP_AD","Reklamı Atla"],["SKIP_TO_LIVE","Canlı yayına atla"],["UNDETERMINED_LANGUAGE","Belirsiz"],["UNMUTE","Sesi aç"],["UNRECOGNIZED_LANGUAGE","Tanınmayan"],["VOLUME","Ses"]])),e.ia("zh",new Map([["AD_DURATION","广告持续时间"],["AD_PROGRESS","广告 [AD_ON]/[NUM_ADS]"],["AD_TIME","广告：[AD_TIME]"],["AUTO_QUALITY","自动"],["BACK","返回"],["CAPTIONS","字幕"],["CAST","投射…"],["ENTER_LOOP_MODE","循环播放当前视频"],["ENTER_PICTURE_IN_PICTURE","进入“画中画”模式"],["EXIT_FULL_SCREEN","退出全屏模式"],["EXIT_LOOP_MODE","停止循环播放当前视频"],["EXIT_PICTURE_IN_PICTURE","退出“画中画”模式"],["FAST_FORWARD","快进"],["FULL_SCREEN","全屏"],["LANGUAGE","语言"],["LIVE","直播"],["LOOP","循环播放"],["MORE_SETTINGS","更多设置"],["MULTIPLE_LANGUAGES","多种语言"],["MUTE","静音"],["NOT_APPLICABLE","不适用"],["OFF","关闭"],["ON","开启"],["PAUSE","暂停"],["PICTURE_IN_PICTURE","画中画"],["PLAY","播放"],["PLAYBACK_RATE","播放速度"],["RESOLUTION","分辨率"],["REWIND","快退"],["SEEK","进度"],["SKIP_AD","跳过广告"],["SKIP_TO_LIVE","跳至当前直播"],["UNDETERMINED_LANGUAGE","未确定"],["UNMUTE","取消静音"],["UNRECOGNIZED_LANGUAGE","无法识别"],["VOLUME","音量"]])),e.ia("zh-TW",new Map([["AD_DURATION","廣告長度"],["AD_PROGRESS","廣告 [AD_ON]/[NUM_ADS]"],["AD_TIME","廣告：[AD_TIME]"],["AUTO_QUALITY","自動"],["BACK","返回"],["CAPTIONS","字幕"],["CAST","投放..."],["ENTER_LOOP_MODE","循環播放目前的影片"],["ENTER_PICTURE_IN_PICTURE","進入子母畫面"],["EXIT_FULL_SCREEN","退出全螢幕模式"],["EXIT_LOOP_MODE","停止循環播放目前的影片"],["EXIT_PICTURE_IN_PICTURE","離開子母畫面"],["FAST_FORWARD","快轉"],["FULL_SCREEN","全螢幕"],["LANGUAGE","語言"],["LIVE","直播"],["LOOP","循環播放"],["MORE_SETTINGS","顯示更多設定"],["MULTIPLE_LANGUAGES","多種語言"],["MUTE","靜音"],["NOT_APPLICABLE","不適用"],["OFF","關閉"],["ON","開啟"],["PAUSE","暫停"],["PICTURE_IN_PICTURE","子母畫面"],["PLAY","播放"],["PLAYBACK_RATE","播放速度"],["RESOLUTION","解析度"],["REWIND","倒轉"],["SEEK","搜尋"],["SKIP_AD","略過廣告"],["SKIP_TO_LIVE","跳至当前直播"],["UNDETERMINED_LANGUAGE","不明"],["UNMUTE","取消靜音"],["UNRECOGNIZED_LANGUAGE","無法辨識"],["VOLUME","音量"]])),e.Ke(navigator.languages||[]),e}TT.prototype.release=function(){this.eventManager.release(),this.ad=this.adManager=this.video=this.player=this.localization=this.eventManager=this.controls=this.parent=null},H("shaka.ui.Element",TT),TT.prototype.release=TT.prototype.release,b(IT,TT),IT.prototype.release=function(){this.g.stop(),this.g=null,TT.prototype.release.call(this)},H("shaka.ui.AdCounter",IT),b(kT,TT),H("shaka.ui.AdPosition",kT),b(LT,TT),LT.prototype.isPaused=function(){if(this.ad)var e=this.ad.isPaused();else e=this.controls,e=e.g.paused&&!e.ba;return e},LT.prototype.g=function(){},LT.prototype.h=function(){},H("shaka.ui.PlayButton",LT),b(PT,LT),PT.prototype.h=function(){this.isPaused()?this.button.setAttribute("icon","play"):this.button.setAttribute("icon","pause")},PT.prototype.g=function(){var e=this.isPaused()?"PLAY":"PAUSE";this.button.ariaLabel=this.localization.resolve(e)},H("shaka.ui.BigPlayButton",PT),b(NT,TT),i=NT.prototype,i.release=function(){this.l&&(this.l.stop(),this.l=null),TT.prototype.release.call(this)},i.setRange=function(e,t){this.bar.min=e,this.bar.max=t},i.onChangeStart=function(){},i.onChange=function(){},i.onChangeEnd=function(){},i.changeTo=function(e){this.g||(this.g=!0,this.onChangeStart());var t=parseFloat(this.bar.min),n=parseFloat(this.bar.max);this.bar.value=e>n?n:e<t?t:e,this.onChange(),this.l.S(.5)},i.getValue=function(){return parseFloat(this.bar.value)},i.setValue=function(e){this.g||(this.bar.value=e)},H("shaka.ui.RangeElement",NT),NT.prototype.setValue=NT.prototype.setValue,NT.prototype.getValue=NT.prototype.getValue,NT.prototype.changeTo=NT.prototype.changeTo,NT.prototype.onChangeEnd=NT.prototype.onChangeEnd,NT.prototype.onChange=NT.prototype.onChange,NT.prototype.onChangeStart=NT.prototype.onChangeStart,NT.prototype.setRange=NT.prototype.setRange,b(RT,NT),i=RT.prototype,i.release=function(){this.h&&(this.h.stop(),this.h=null,this.o.stop(),this.o=null),NT.prototype.release.call(this)},i.onChangeStart=function(){this.A=!this.video.paused,this.controls.we(!0),this.video.pause()},i.onChange=function(){this.video.duration&&(this.update(),this.h.S(.125))},i.onChangeEnd=function(){this.h.Ca(),this.controls.we(!1),this.A&&this.video.play()},i.isShowing=function(){return!this.container.classList.contains("shaka-hidden")},i.update=function(){var e=this.s.seekBarColors,t=this.getValue(),n=this.video.buffered.length,i=n?this.video.buffered.start(0):0,r=n?this.video.buffered.end(n-1):0,a=this.player.Ka(),o=a.end-a.start;this.setRange(a.start,a.end),OT(this)?(xT(this.container,!0),0==n?this.container.style.background=e.base:(n=(Math.max(i,a.start)-a.start)/o||0,r=(Math.min(r,a.end)-a.start)/o||0,t=(Math.min(Math.max(t,a.start),a.end)-a.start)/o||0,this.container.style.background="linear-gradient("+["to right",(this.s.showUnbufferedStart?e.base:e.played)+" "+100*n+"%",e.played+" "+100*n+"%",e.played+" "+100*t+"%",e.buffered+" "+100*t+"%",e.buffered+" "+100*r+"%",e.base+" "+100*r+"%"].join()+")")):xT(this.container,!1)},H("shaka.ui.SeekBar",RT),jT.prototype.create=function(e,t){return new RT(e,t)},RT.Factory=jT,b(BT,oe),i=BT.prototype,i.destroy=function(){var e=this;return F((function(t){switch(t.g){case 1:if(document.pictureInPictureElement!=e.B){t.C(2);break}return S(t,document.exitPictureInPicture(),2);case 2:if(e.h&&(e.h.release(),e.h=null),e.ea&&(e.ea.stop(),e.ea=null),e.ua&&(e.ua.stop(),e.ua=null),e.I&&(e.I.stop(),e.I=null),e.eb&&(e.eb.stop(),e.eb=null),GT(e),e.i&&(e.j.removeChild(e.i),e.i=null),!e.A){t.C(4);break}return S(t,e.A.destroy(),5);case 5:e.A=null;case 4:if(!e.Ia){t.C(6);break}return S(t,e.Ia.destroy(),7);case 7:e.Ia=null;case 6:e.D=null,e.B=null,e.g=null,e.Xa=null,e.xa.clear(),A(t)}}))},i.Ff=function(e){this.tb=e,iE(this)},i.zg=function(){nE(this)},i.configure=function(e){this.s=e,this.A.Le(e.castReceiverAppId),this.l&&(this.l=null),this.Ab&&(this.Ab=null),this.i?(Pu(this.i),GT(this)):(HT(this),this.aa=Cu("div"),this.aa.classList.add("shaka-client-side-ad-container"),xT(this.aa,!1),this.j.appendChild(this.aa)),this.j.classList.add("shaka-video-container"),this.B.classList.add("shaka-video"),qT(this),this.s.addBigPlayButton&&WT(this),this.ha||XT(this),this.pb=Cu("div"),this.pb.classList.add("shaka-server-side-ad-container"),this.i.appendChild(this.pb),$T(this),this.H=Array.from(this.j.getElementsByClassName("shaka-settings-menu")),this.H.push.apply(this.H,h(Array.from(this.j.getElementsByClassName("shaka-overflow-menu")))),JT(this),this.Xb=Array.from(this.j.getElementsByClassName("shaka-show-controls-on-mouse-over")),nE(this),e=d(this.j.getElementsByClassName("shaka-no-propagation"));for(var t=e.next();!t.done;t=e.next()){t=t.value;var n=function(e){return e.stopPropagation()};this.h.m(t,"click",n),this.h.m(t,"dblclick",n)}},i.re=function(e){(this.W=e)?(this.j.setAttribute("shaka-controls","true"),this.B.tabIndex=-1,this.B.controls=!1):this.j.removeAttribute("shaka-controls"),nE(this)},i.rf=function(e){this.B.controls=e,this.B.tabIndex=e?0:-1,e&&this.re(!1)},i.getAd=function(){return this.o},i.Rf=function(){return this.A},i.dg=function(){return this.Xa},i.sg=function(){return this.j},i.wb=function(){return this.g},i.cg=function(){return this.B},i.ac=function(){return this.D},i.ag=function(){return this.Ia},i.Wf=function(){return this.i},i.lg=function(){return this.pb},i.Tf=function(){return this.aa},i.Uf=function(){return this.s},i.yg=function(){return this.ba},i.we=function(e){this.ba=e},i.wg=function(){return this.tb},i.Ue=function(){return this.l?this.l.getValue():this.g.currentTime},i.sf=function(e){this.K=e},i.Xc=function(){return this.H.some((function(e){return!e.classList.contains("shaka-hidden")}))},i.Fc=function(){this.I.Ca()},i.Be=function(){var e,t=this;return F((function(n){switch(n.g){case 1:if(document.fullscreenElement)return screen.orientation&&screen.orientation.unlock(),S(n,document.exitFullscreen(),0);if(x(n,4),!document.pictureInPictureElement){n.C(6);break}return S(n,document.exitPictureInPicture(),6);case 6:return S(n,t.j.requestFullscreen({navigationUI:"hide"}),8);case 8:if(!t.s.forceLandscapeOnFullscreen||!screen.orientation){n.C(9);break}return x(n,10),S(n,screen.orientation.lock("landscape"),12);case 12:I(n,9,4);break;case 10:k(n,4);case 9:I(n,0);break;case 4:e=k(n),t.dispatchEvent(new W("error",{detail:e})),n.C(0)}}))},i.uf=function(){xT(this.L,!0),xT(this.aa,!0),this.i.setAttribute("ad-active","true")},i.Xe=function(){xT(this.L,!1),xT(this.aa,!1),this.i.removeAttribute("ad-active")},i.Kb=function(){return!!this.W&&(null!=this.i.getAttribute("shown")||null!=this.i.getAttribute("casting"))},H("shaka.ui.Controls",BT),BT.prototype.isOpaque=BT.prototype.Kb,BT.prototype.hideAdUI=BT.prototype.Xe,BT.prototype.showAdUI=BT.prototype.uf,BT.prototype.toggleFullScreen=BT.prototype.Be,BT.prototype.hideSettingsMenus=BT.prototype.Fc,BT.prototype.anySettingsMenusAreOpen=BT.prototype.Xc,BT.prototype.setLastTouchEventTime=BT.prototype.sf,BT.prototype.getDisplayTime=BT.prototype.Ue,BT.prototype.isCastAllowed=BT.prototype.wg,BT.prototype.setSeeking=BT.prototype.we,BT.prototype.isSeeking=BT.prototype.yg,BT.prototype.getConfig=BT.prototype.Uf,BT.prototype.getClientSideAdContainer=BT.prototype.Tf,BT.prototype.getServerSideAdContainer=BT.prototype.lg,BT.prototype.getControlsContainer=BT.prototype.Wf,BT.prototype.getLocalPlayer=BT.prototype.ag,BT.prototype.getPlayer=BT.prototype.ac,BT.prototype.getLocalVideo=BT.prototype.cg,BT.prototype.getVideo=BT.prototype.wb,BT.prototype.getVideoContainer=BT.prototype.sg,BT.prototype.getLocalization=BT.prototype.dg,BT.prototype.getCastProxy=BT.prototype.Rf,BT.prototype.getAd=BT.prototype.getAd,BT.prototype.setEnabledNativeControls=BT.prototype.rf,BT.prototype.setEnabledShakaControls=BT.prototype.re,BT.prototype.configure=BT.prototype.configure,BT.prototype.loadComplete=BT.prototype.zg,BT.prototype.allowCast=BT.prototype.Ff,BT.registerSeekBar=function(e){cE=e},BT.registerElement=VT,BT.prototype.destroy=BT.prototype.destroy;var lE=new Map,cE=new jT;function dE(e,t){TT.call(this,e,t);var n=this;this.s=this.controls.s,this.j=this.controls.i,this.i=[],this.h=Lu(),this.h.classList.add("shaka-overflow-menu-button"),this.h.classList.add("shaka-no-propagation"),this.h.classList.add("material-icons-round"),this.h.textContent="more_vert",this.parent.appendChild(this.h),this.g=Cu("div"),this.g.classList.add("shaka-overflow-menu"),this.g.classList.add("shaka-no-propagation"),this.g.classList.add("shaka-show-controls-on-mouse-over"),this.g.classList.add("shaka-hidden"),this.j.appendChild(this.g),fE(this);for(var i=d(this.controls.j.getElementsByClassName("shaka-back-to-overflow-button")),r=i.next();!r.done;r=i.next())this.eventManager.m(r.value,"click",(function(){n.controls.Fc(),xT(n.g,!0),n.g.childNodes.length&&n.g.childNodes[0].focus(),nE(n.controls)}));this.eventManager.m(this.localization,"locale-updated",(function(){gE(n)})),this.eventManager.m(this.localization,"locale-changed",(function(){gE(n)})),this.eventManager.m(this.adManager,"ad-started",(function(){xT(n.h,!1)})),this.eventManager.m(this.adManager,"ad-stopped",(function(){xT(n.h,!0)})),this.eventManager.m(this.controls,"submenuopen",(function(){xT(n.g,!1)})),this.eventManager.m(this.g,"touchstart",(function(e){n.controls.sf(Date.now()),e.stopPropagation()})),this.eventManager.m(this.h,"click",(function(){pE(n)})),gE(this),this.ad&&xT(this.h,!1)}function hE(e,t){vE.set(e,t)}function fE(e){for(var t=d(e.s.overflowMenuButtons),n=t.next();!n.done;n=t.next())n=n.value,vE.get(n)?(n=vE.get(n),e.i.push(n.create(e.g,e.controls))):X("Unrecognized overflow menu element requested:",n)}function pE(e){if(e.controls.Xc())e.controls.Fc();else{xT(e.g,!0),nE(e.controls);var t=function(e){return 0==e.classList.contains("shaka-hidden")};le(e.g.childNodes,t)&&ce(e.g.childNodes,t)[0].focus()}}function gE(e){e.h.ariaLabel=e.localization.resolve("MORE_SETTINGS")}function mE(){}b(dE,TT),dE.prototype.release=function(){this.j=null;for(var e=d(this.i),t=e.next();!t.done;t=e.next())t.value.release();this.i=[],TT.prototype.release.call(this)},H("shaka.ui.OverflowMenu",dE),dE.registerElement=hE,mE.prototype.create=function(e,t){return new dE(e,t)},VT("overflow_menu",new mE);var vE=new Map;function yE(t,n){TT.call(this,t,n);var i=this;this.g=Lu(),this.g.classList.add("shaka-airplay-button"),this.g.ariaPressed="false",this.h=Cu("i"),this.h.classList.add("material-icons-round"),this.h.textContent="airplay",this.g.appendChild(this.h),e.WebKitPlaybackTargetAvailabilityEvent||this.g.classList.add("shaka-hidden");var r=Cu("label");r.classList.add("shaka-overflow-button-label"),r.classList.add("shaka-overflow-menu-only"),this.j=Cu("span"),r.appendChild(this.j),this.i=Cu("span"),this.i.classList.add("shaka-current-selection-span"),r.appendChild(this.i),this.g.appendChild(r),this.parent.appendChild(this.g),TE(this),bE(this),this.eventManager.m(this.localization,"locale-updated",(function(){TE(i)})),this.eventManager.m(this.localization,"locale-changed",(function(){TE(i)})),this.eventManager.m(this.g,"click",(function(){i.controls.wb().webkitShowPlaybackTargetPicker()})),r=this.controls.wb(),this.eventManager.m(r,"webkitplaybacktargetavailabilitychanged",(function(e){var t=i.player.Ve()==Vc;xT(i.g,"available"==e.availability&&t)})),this.eventManager.m(r,"webkitcurrentplaybacktargetiswirelesschanged",(function(){bE(i)}))}function bE(e){var t=e.controls.wb();e.g.ariaPressed=t&&t.webkitCurrentPlaybackTargetIsWireless?"true":"false"}function TE(e){e.g.ariaLabel=e.localization.resolve("AIRPLAY"),e.j.textContent=e.localization.resolve("AIRPLAY")}function EE(){}function wE(e,t,n){this.h=e,this.s=SE(this),t.dataset.shakaPlayerContainer="",t.ui=this,this.Sd()&&t.classList.add("shaka-mobile"),this.g=new BT(e,t,n,this.s),this.configure({}),n.controls||e.ze(t),t.ui=this,n.ui=this}function SE(t){var n={controlPanelElements:"play_pause time_and_duration spacer mute volume fullscreen overflow_menu".split(" "),overflowMenuButtons:"captions quality language picture_in_picture cast playback_rate".split(" "),addSeekBar:!0,addBigPlayButton:!1,castReceiverAppId:"",clearBufferOnQualityChange:!0,showUnbufferedStart:!1,seekBarColors:{base:"rgba(255, 255, 255, 0.3)",buffered:"rgba(255, 255, 255, 0.54)",played:"rgb(255, 255, 255)",adBreaks:"rgb(255, 204, 0)"},volumeBarColors:{base:"rgba(255, 255, 255, 0.54)",level:"rgb(255, 255, 255)"},trackLabelFormat:IE,fadeDelay:0,doubleClickForFullscreen:!0,enableKeyboardPlaybackControls:!0,enableFullscreenOnRotation:!0,forceLandscapeOnFullscreen:!0};return e.WebKitPlaybackTargetAvailabilityEvent&&n.overflowMenuButtons.push("airplay"),t.Sd()&&(n.addBigPlayButton=!0,n.controlPanelElements=n.controlPanelElements.filter((function(e){return"play_pause"!=e&&"volume"!=e}))),n}function AE(){var e,t,n,i,r,a,o,s,u,l,c,h,f;return F((function(p){switch(p.g){case 1:if(vv(),!tl())return xE("shaka-ui-load-failed",kE),p["return"]();if(e=document.querySelectorAll("[data-shaka-player-container]"),t=document.querySelectorAll("[data-shaka-player]"),!t.length&&!e.length){p.C(2);break}if(t.length&&!e.length){for(n=d(t),i=n.next();!i.done;i=n.next())r=i.value,r.ui||(a=document.createElement("div"),o=r.parentElement,o.replaceChild(a,r),a.appendChild(r),_E(a,r));p.C(2);break}s=d(e),u=s.next();case 4:if(u.done){p.C(2);break}if(l=u.value,l.ui){p.C(5);break}for(c=null,h=d(t),i=h.next();!i.done;i=h.next())if(f=i.value,f.parentElement==l){c=f;break}return c||(c=document.createElement("video"),c.setAttribute("playsinline",""),l.appendChild(c)),x(p,7),S(p,_E(l,c),9);case 9:I(p,5);break;case 7:return k(p),xE("shaka-ui-load-failed",CE),p["return"]();case 5:u=s.next(),p.C(4);break;case 2:xE("shaka-ui-loaded"),A(p)}}))}function xE(e,t){var n=null;void 0!=t&&(n={reasonCode:t}),n=new CustomEvent(e,{detail:n}),document.dispatchEvent(n)}function _E(e,t){var n,i,r,a,o,s,u,l;return F((function(c){switch(c.g){case 1:n=new Zu(t),i=new wE(n,e,t),r="",e.dataset&&e.dataset.shakaPlayerCastReceiverId?r=e.dataset.shakaPlayerCastReceiverId:t.dataset&&t.dataset.shakaPlayerCastReceiverId&&(r=t.dataset.shakaPlayerCastReceiverId),r.length&&i.configure({castReceiverAppId:r}),t.controls&&i.g.rf(!0),(a=t.getAttribute("src"))&&(o=document.createElement("source"),o.setAttribute("src",a),t.appendChild(o),t.removeAttribute("src")),s=d(t.querySelectorAll("source")),u=s.next();case 2:if(u.done){c.C(0);break}return l=u.value,x(c,5),S(c,i.g.ac().load(l.getAttribute("src")),7);case 7:c.C(0);break;case 5:k(c);case 3:u=s.next(),c.C(2)}}))}b(yE,TT),H("shaka.ui.AirPlayButton",yE),EE.prototype.create=function(e,t){return new yE(e,t)},hE("airplay",new EE),VT("airplay",new EE),i=wE.prototype,i.destroy=function(){var e=this;return F((function(t){return 1==t.g?e.g?S(t,e.g.destroy(),2):t.C(2):4!=t.g?(e.g=null,e.h?S(t,e.h.destroy(),4):t.C(4)):(e.h=null,void A(t))}))},i.Sd=function(){return!!/(?:iPhone|iPad|iPod|Android)/.test(navigator.userAgent)||kn()&&1<navigator.maxTouchPoints},i.getConfiguration=function(){var e=SE(this);return Bu(e,this.s,SE(this),{},""),e},i.configure=function(e,t){2==arguments.length&&"string"==typeof e&&(e=Gu(e,t)),Bu(this.s,e,SE(this),{},""),this.s.castReceiverAppId&&!this.s.overflowMenuButtons.includes("cast")&&this.s.overflowMenuButtons.push("cast"),this.g.configure(this.s),this.g.dispatchEvent(new W("uiupdated"))},i.Vf=function(){return this.g},i.$g=function(e){this.g.re(e)},H("shaka.ui.Overlay",wE),wE.prototype.setEnabled=wE.prototype.$g,wE.prototype.getControls=wE.prototype.Vf,wE.prototype.configure=wE.prototype.configure,wE.prototype.getConfiguration=wE.prototype.getConfiguration,wE.prototype.isMobile=wE.prototype.Sd,wE.prototype.destroy=wE.prototype.destroy;var IE=0;wE.TrackLabelFormat={LANGUAGE:IE,ROLE:1,LANGUAGE_ROLE:2,LABEL:3};var kE=0,CE=1;function LE(e,t,n,i,r,a,o){function s(e,t){return e+": "+t}function u(e){return"variant"==e.type?e.audioRoles?e.audioRoles.join(", "):void 0:e.roles.join(", ")}var l=e.find((function(e){return 1==e.active})),c=ET(t);Pu(t),t.appendChild(c),c=new Map;for(var h=d(e),f=h.next();!f.done;f=h.next())f=f.value,c.has(f.language)||c.set(f.language,new Set),c.get(f.language).add(u(f));for(c=new Set,l=l?s(l.language,u(l)):"",h={},e=d(e),f=e.next();!f.done;h={Va:h.Va},f=e.next()){h.Va=f.value,f=h.Va.language;var p=h.Va.forced,g=a.resolve(it.Af),m=u(h.Va),v=s(f,m);if(!c.has(v)){c.add(v);var y=Lu();y.addEventListener("click",function(e){return function(){n(e.Va)}}(h));var b=Cu("span");switch(y.appendChild(b),b.textContent=PE(f,a),o){case IE:p&&(b.textContent+=" ("+g+")");break;case 1:m?b.textContent=m:(X("Track #"+h.Va.id+" does not have a role, but the UI is configured to only show role."),b.textContent="?"),p&&(b.textContent+=" ("+g+")");break;case 2:m&&(b.textContent+=": "+m),p&&(b.textContent+=" ("+g+")");break;case 3:h.Va.label?b.textContent=h.Va.label:(X("Track #"+h.Va.id+" does not have a label, but the UI is configured to only show labels."),b.textContent="?")}i&&v==l&&(y.appendChild(AT()),b.classList.add("shaka-chosen-item"),y.ariaSelected="true",r.textContent=b.textContent),t.appendChild(y)}}}function PE(e,t){if(!e&&!t)return"";switch(e){case"mul":return t.resolve("MULTIPLE_LANGUAGES");case"und":return t.resolve("UNDETERMINED_LANGUAGE");case"zxx":return t.resolve("NOT_APPLICABLE")}var n=Xe(e);return e in mT?mT[e].u:n in mT?mT[n].u+" ("+e+")":t.resolve("UNRECOGNIZED_LANGUAGE")+" ("+e+")"}function NE(e,t,n){TT.call(this,e,t);var i=this;DE(this,n),RE(this),this.eventManager.m(this.button,"click",(function(){i.controls.dispatchEvent(new W("submenuopen")),xT(i.menu,!0),ST(i.menu)}))}function DE(e,t){e.button=Lu(),e.icon=Cu("i"),e.icon.classList.add("material-icons-round"),e.icon.textContent=t,e.button.appendChild(e.icon);var n=Cu("label");n.classList.add("shaka-overflow-button-label"),e.nameSpan=Cu("span"),n.appendChild(e.nameSpan),e.currentSelection=Cu("span"),e.currentSelection.classList.add("shaka-current-selection-span"),n.appendChild(e.currentSelection),e.button.appendChild(n),e.parent.appendChild(e.button)}function RE(e){e.menu=Cu("div"),e.menu.classList.add("shaka-no-propagation"),e.menu.classList.add("shaka-show-controls-on-mouse-over"),e.menu.classList.add("shaka-settings-menu"),e.menu.classList.add("shaka-hidden"),e.backButton=Lu(),e.backButton.classList.add("shaka-back-to-overflow-button"),e.menu.appendChild(e.backButton);var t=Cu("i");t.classList.add("material-icons-round"),t.textContent="arrow_back",e.backButton.appendChild(t),e.backSpan=Cu("span"),e.backButton.appendChild(e.backSpan),e.controls.i.appendChild(e.menu)}function ME(e,t){NE.call(this,e,t,"language");var n=this;this.button.classList.add("shaka-language-button"),this.menu.classList.add("shaka-audio-languages"),this.eventManager.m(this.localization,"locale-updated",(function(){OE(n)})),this.eventManager.m(this.localization,"locale-changed",(function(){OE(n)})),this.eventManager.m(this.player,"trackschanged",(function(){var e=0<n.player.Gb().length;xT(n.button,e),UE(n)})),this.eventManager.m(this.player,"variantchanged",(function(){UE(n)})),OE(this),UE(this)}function UE(e){var t=e.player.Gb();LE(t,e.menu,(function(t){e.player.td(t.language,t.roles[0])}),!0,e.currentSelection,e.localization,e.controls.s.trackLabelFormat),ST(e.menu),e.controls.dispatchEvent(new W("languageselectionupdated"))}function OE(e){e.backButton.ariaLabel=e.localization.resolve("BACK"),e.button.ariaLabel=e.localization.resolve("LANGUAGE"),e.nameSpan.textContent=e.localization.resolve("LANGUAGE"),e.backSpan.textContent=e.localization.resolve("LANGUAGE")}function FE(){}function jE(e,t){TT.call(this,e,t);var n=this;this.h=this.controls.A,this.g=Lu(),this.g.classList.add("shaka-cast-button"),this.g.ariaPressed="false",this.i=Cu("i"),this.i.classList.add("material-icons-round"),this.i.textContent="cast",this.g.appendChild(this.i);var i=Cu("label");i.classList.add("shaka-overflow-button-label"),i.classList.add("shaka-overflow-menu-only"),this.l=Cu("span"),i.appendChild(this.l),this.j=Cu("span"),this.j.classList.add("shaka-current-selection-span"),i.appendChild(this.j),this.g.appendChild(i),this.parent.appendChild(this.g),KE(this),GE(this),this.eventManager.m(this.localization,"locale-updated",(function(){KE(n)})),this.eventManager.m(this.localization,"locale-changed",(function(){KE(n)})),this.eventManager.m(this.g,"click",(function(){BE(n)})),this.eventManager.m(this.controls,"caststatuschanged",(function(){GE(n)}))}function BE(e){var t;F((function(n){return 1==n.g?e.h.ra()?(e.h.vf(),n.C(0)):(x(n,3),e.g.disabled=!0,S(n,e.h.cast(),5)):3!=n.g?(e.g.disabled=!1,I(n,0)):(t=k(n),e.g.disabled=!1,8004!=t.code&&e.controls.dispatchEvent(new W("error",{detail:t})),void A(n))}))}function GE(e){var t=e.h.He()&&e.controls.tb,n=e.h.ra();xT(e.g,t),e.i.textContent=n?"cast_connected":"cast",t&&(e.g.ariaPressed=n?"true":"false"),VE(e)}function VE(e){e.j.textContent=e.h.ra()?e.h.qd():e.localization.resolve("OFF")}function KE(e){e.g.ariaLabel=e.localization.resolve("CAST"),e.l.textContent=e.localization.resolve("CAST"),VE(e)}function zE(){}function HE(e,t){TT.call(this,e,t);var n=this;this.g=Lu(),this.g.classList.add("material-icons-round"),this.g.classList.add("shaka-fast-forward-button"),this.g.textContent="fast_forward",this.parent.appendChild(this.g),WE(this),this.eventManager.m(this.localization,"locale-updated",(function(){WE(n)})),this.eventManager.m(this.localization,"locale-changed",(function(){WE(n)})),this.eventManager.m(this.g,"click",(function(){if(n.video.duration){var e=n.player.Bc();n.player.De(0>e||4<e?1:2*e)}}))}function WE(e){e.g.ariaLabel=e.localization.resolve("FAST_FORWARD")}function qE(){}function YE(e,t){TT.call(this,e,t);var n=this;this.g=Lu(),this.g.classList.add("shaka-fullscreen-button"),this.g.classList.add("material-icons-round"),document.fullscreenEnabled||this.g.classList.add("shaka-hidden"),this.g.textContent="fullscreen",this.parent.appendChild(this.g),XE(this),this.eventManager.m(this.localization,"locale-updated",(function(){XE(n)})),this.eventManager.m(this.localization,"locale-changed",(function(){XE(n)})),this.eventManager.m(this.g,"click",(function(){return F((function(e){return S(e,n.controls.Be(),0)}))})),this.eventManager.m(document,"fullscreenchange",(function(){n.g.textContent=document.fullscreenElement?"fullscreen_exit":"fullscreen",XE(n)}))}function XE(e){e.g.ariaLabel=e.localization.resolve(document.fullscreenElement?"EXIT_FULL_SCREEN":"FULL_SCREEN")}function $E(){}function JE(e,t){TT.call(this,e,t);var n=this;this.g=Lu(),this.g.classList.add("shaka-loop-button"),this.i=Cu("i"),this.i.classList.add("material-icons-round"),this.i.textContent="repeat",this.g.appendChild(this.i);var i=Cu("label");i.classList.add("shaka-overflow-button-label"),i.classList.add("shaka-overflow-menu-only"),this.l=Cu("span"),this.l.textContent=this.localization.resolve("LOOP"),i.appendChild(this.l),this.j=Cu("span"),this.j.classList.add("shaka-current-selection-span"),i.appendChild(this.j),this.g.appendChild(i),QE(this),this.parent.appendChild(this.g),this.eventManager.m(this.localization,"locale-updated",(function(){QE(n)})),this.eventManager.m(this.localization,"locale-changed",(function(){QE(n)})),this.eventManager.m(this.g,"click",(function(){n.video.loop=!n.video.loop,n.h.Ca(),n.h.na(1)})),this.o=this.video.loop,this.h=new Sn((function(){n.o!=n.video.loop&&(QE(n),n.o=n.video.loop)})),this.h.na(1)}function QE(e){e.l.textContent=e.localization.resolve("LOOP"),e.j.textContent=e.localization.resolve(e.video.loop?"ON":"OFF"),e.i.textContent=e.video.loop?"repeat_on":"repeat",e.g.ariaLabel=e.localization.resolve(e.video.loop?"EXIT_LOOP_MODE":"ENTER_LOOP_MODE")}function ZE(){}function ew(e,t){TT.call(this,e,t);var n=this;this.g=Lu(),this.g.classList.add("shaka-mute-button"),this.g.classList.add("material-icons-round"),this.parent.appendChild(this.g),tw(this),nw(this),this.eventManager.m(this.localization,"locale-updated",(function(){tw(n)})),this.eventManager.m(this.localization,"locale-changed",(function(){tw(n)})),this.eventManager.m(this.g,"click",(function(){n.ad?n.ad.setMuted(!n.ad.isMuted()):n.video.muted=!n.video.muted})),this.eventManager.m(this.video,"volumechange",(function(){tw(n),nw(n)})),this.eventManager.m(this.adManager,"ad-volume-changed",(function(){tw(n),nw(n)})),this.eventManager.m(this.adManager,"ad-muted",(function(){tw(n),nw(n)})),this.eventManager.m(this.adManager,"ad-stopped",(function(){n.ad=null,tw(n),nw(n)}))}function tw(e){var t=e.ad?e.ad.isMuted()?"UNMUTE":"MUTE":e.video.muted?"UNMUTE":"MUTE";e.g.ariaLabel=e.localization.resolve(t)}function nw(e){var t=e.ad?e.ad.isMuted()?"volume_off":"volume_up":e.video.muted?"volume_off":"volume_up";e.g.textContent=t}function iw(){}function rw(e,t){TT.call(this,e,t);var n=this;this.l=this.controls.B,this.g=Lu(),this.g.classList.add("shaka-pip-button"),this.i=Cu("i"),this.i.classList.add("material-icons-round"),this.i.textContent="picture_in_picture_alt",this.g.appendChild(this.i);var i=Cu("label");i.classList.add("shaka-overflow-button-label"),i.classList.add("shaka-overflow-menu-only"),this.j=Cu("span"),this.j.textContent=this.localization.resolve("PICTURE_IN_PICTURE"),i.appendChild(this.j),this.h=Cu("span"),this.h.classList.add("shaka-current-selection-span"),i.appendChild(this.h),this.g.appendChild(i),ow(this),this.parent.appendChild(this.g),document.pictureInPictureEnabled&&!this.video.disablePictureInPicture||xT(this.g,!1),this.eventManager.m(this.localization,"locale-updated",(function(){ow(n)})),this.eventManager.m(this.localization,"locale-changed",(function(){ow(n)})),this.eventManager.m(this.g,"click",(function(){aw(n)})),this.eventManager.m(this.l,"enterpictureinpicture",(function(){n.i.textContent="branding_watermark",n.g.ariaLabel=n.localization.resolve("EXIT_PICTURE_IN_PICTURE"),n.h.textContent=n.localization.resolve("ON")})),this.eventManager.m(this.l,"leavepictureinpicture",(function(){n.i.textContent="picture_in_picture_alt",n.g.ariaLabel=n.localization.resolve("ENTER_PICTURE_IN_PICTURE"),n.h.textContent=n.localization.resolve("OFF")})),this.eventManager.m(this.controls,"caststatuschanged",(function(e){e.newStatus?document.pictureInPictureEnabled&&!n.video.disablePictureInPicture&&xT(n.g,!1):document.pictureInPictureEnabled&&!n.video.disablePictureInPicture&&xT(n.g,!0)})),this.eventManager.m(this.player,"trackschanged",(function(){sw(n)}))}function aw(e){var t;F((function(n){return 1==n.g?(x(n,2),document.pictureInPictureElement?S(n,document.exitPictureInPicture(),5):(document.fullscreenElement&&document.exitFullscreen(),S(n,e.video.requestPictureInPicture(),5))):2!=n.g?I(n,0):(t=k(n),e.controls.dispatchEvent(new W("error",{detail:t})),void A(n))}))}function ow(e){e.j.textContent=e.localization.resolve("PICTURE_IN_PICTURE"),e.g.ariaLabel=e.localization.resolve(document.pictureInPictureElement?"EXIT_PICTURE_IN_PICTURE":"ENTER_PICTURE_IN_PICTURE"),e.h.textContent=e.localization.resolve(document.pictureInPictureElement?"ON":"OFF")}function sw(e){F((function(t){return!document.pictureInPictureEnabled||e.video.disablePictureInPicture?(xT(e.g,!1),t.C(0)):e.player&&e.player.Ze()?(xT(e.g,!1),document.pictureInPictureElement?S(t,document.exitPictureInPicture(),0):t.C(0)):(xT(e.g,!0),t.C(0))}))}function uw(){}function lw(e,t){NE.call(this,e,t,"slow_motion_video");var n=this;this.button.classList.add("shaka-playbackrate-button"),this.menu.classList.add("shaka-playback-rates"),this.eventManager.m(this.localization,"locale-updated",(function(){cw(n)})),this.eventManager.m(this.localization,"locale-changed",(function(){cw(n)})),this.eventManager.m(this.player,"ratechange",(function(){dw(n,n.player.Bc())})),this.g=new Map([["0.5x",.5],["0.75x",.75],["1x",1],["1.25x",1.25],["1.5x",1.5],["1.75x",1.75],["2x",2]]),cw(this),hw(this),dw(this,this.player.Bc())}function cw(e){e.backButton.ariaLabel=e.localization.resolve("BACK"),e.button.ariaLabel=e.localization.resolve("PLAYBACK_RATE"),e.nameSpan.textContent=e.localization.resolve("PLAYBACK_RATE"),e.backSpan.textContent=e.localization.resolve("PLAYBACK_RATE")}function dw(e,t){var n=wT(e.menu,"material-icons-round shaka-chosen-item");if(n){var i=n.parentElement;i.removeAttribute("aria-selected"),i.getElementsByTagName("span")[0].classList.remove("shaka-chosen-item"),i.removeChild(n)}(n=Array.from(e.menu.querySelectorAll("span")).find((function(n){return e.g.get(n.textContent)==t})))&&(i=n.parentElement,i.appendChild(AT()),i.ariaSelected="true",n.classList.add("shaka-chosen-item")),e.currentSelection.textContent=t+"x"}function hw(e){for(var t={},n=d(e.g.keys()),i=n.next();!i.done;t={pc:t.pc},i=n.next()){t.pc=i.value,i=Lu();var r=Cu("span");r.textContent=t.pc,i.appendChild(r),e.eventManager.m(i,"click",function(t){return function(){e.video.playbackRate=e.g.get(t.pc),e.video.defaultPlaybackRate=e.g.get(t.pc)}}(t)),e.menu.appendChild(i)}ST(e.menu)}function fw(){}function pw(e,t){TT.call(this,e,t);var n=this;this.g=Lu(),this.g.classList.add("shaka-current-time"),gw(this,"0:00"),this.parent.appendChild(this.g),this.eventManager.m(this.g,"click",(function(){n.player.Y()&&(n.video.currentTime=n.player.Ka().end)})),this.eventManager.m(this.controls,"timeandseekrangeupdated",(function(){var e=n.controls.ba,t=n.controls.Ue(),i=n.video.duration,r=n.player.Ka(),a=r.end-r.start;n.player.Y()?(t=Math.max(0,Math.floor(r.end-t)),i=3600<=a,1<=t||e?(gw(n,"- "+_T(t,i)),n.g.disabled=!1):(gw(n,n.localization.resolve("LIVE")),n.g.disabled=!0)):(e=3600<=i,t=_T(t,e),i&&(t+=" / "+_T(i,e)),gw(n,t),n.g.disabled=!0)})),this.eventManager.m(this.player,"trackschanged",(function(){n.player.Y()&&(n.g.ariaLabel=n.localization.resolve("SKIP_TO_LIVE"))}))}function gw(e,t){t!=e.g.textContent&&(e.g.textContent=t)}function mw(){}function vw(e,t){NE.call(this,e,t,"settings");var n=this;this.button.classList.add("shaka-resolution-button"),this.menu.classList.add("shaka-resolutions"),this.eventManager.m(this.localization,"locale-updated",(function(){bw(n)})),this.eventManager.m(this.localization,"locale-changed",(function(){bw(n)})),this.eventManager.m(this.player,"variantchanged",(function(){yw(n)})),this.eventManager.m(this.player,"trackschanged",(function(){yw(n)})),this.eventManager.m(this.player,"abrstatuschanged",(function(){yw(n)})),yw(this),bw(this)}function yw(e){var t=e.player.Gb();if(t.length&&!t[0].height)xT(e.menu,!1),xT(e.button,!1);else{xT(e.button,!0),t.sort((function(e,t){return t.height-e.height}));var n=t.find((function(e){return e.active}));n&&(t=t.filter((function(e){return e.language==n.language&&e.channelsCount==n.channelsCount}))),t=t.filter((function(e,n){return t.findIndex((function(t){return t.height==e.height}))==n}));var i=ET(e.menu);Pu(e.menu),e.menu.appendChild(i),i=e.player.getConfiguration().abr.enabled;for(var r={},a=d(t),o=a.next();!o.done;r={sc:r.sc},o=a.next()){r.sc=o.value,o=Lu(),o.classList.add("explicit-resolution"),e.eventManager.m(o,"click",function(t){return function(){var n=t.sc;e.player.configure({abr:{enabled:!1}}),e.player.pe(n,e.controls.s.clearBufferOnQualityChange)}}(r));var s=Cu("span");s.textContent=r.sc.height+"p",o.appendChild(s),i||r.sc!=n||(o.ariaSelected="true",o.appendChild(AT()),s.classList.add("shaka-chosen-item"),e.currentSelection.textContent=s.textContent),e.menu.appendChild(o)}r=Lu(),r.classList.add("shaka-enable-abr-button"),e.eventManager.m(r,"click",(function(){e.player.configure({abr:{enabled:!0}}),yw(e)})),e.g=Cu("span"),e.g.classList.add("shaka-auto-span"),e.g.textContent=e.localization.resolve("AUTO_QUALITY"),r.appendChild(e.g),i&&(r.ariaSelected="true",r.appendChild(AT()),e.g.classList.add("shaka-chosen-item"),e.currentSelection.textContent=e.localization.resolve("AUTO_QUALITY")),e.menu.appendChild(r),ST(e.menu),e.controls.dispatchEvent(new W("resolutionselectionupdated"))}}function bw(e){e.button.ariaLabel=e.localization.resolve("RESOLUTION"),e.backButton.ariaLabel=e.localization.resolve("RESOLUTION"),e.backSpan.textContent=e.localization.resolve("RESOLUTION"),e.nameSpan.textContent=e.localization.resolve("RESOLUTION"),e.g.textContent=e.localization.resolve("AUTO_QUALITY"),e.player.getConfiguration().abr.enabled&&(e.currentSelection.textContent=e.localization.resolve("AUTO_QUALITY"))}function Tw(){}function Ew(e,t){TT.call(this,e,t);var n=this;this.g=Lu(),this.g.classList.add("material-icons-round"),this.g.classList.add("shaka-rewind-button"),this.g.textContent="fast_rewind",this.parent.appendChild(this.g),ww(this),this.eventManager.m(this.localization,"locale-updated",(function(){ww(n)})),this.eventManager.m(this.localization,"locale-changed",(function(){ww(n)})),this.eventManager.m(this.g,"click",(function(){if(n.video.duration){var e=n.player.Bc();n.player.De(0<e||-4>e?-1:2*e)}}))}function ww(e){e.g.ariaLabel=e.localization.resolve("REWIND")}function Sw(){}function Aw(e,t){TT.call(this,e,t);var n=this;this.j=Cu("div"),this.j.classList.add("shaka-skip-ad-container"),this.parent.appendChild(this.j),this.h=Cu("div"),this.h.classList.add("shaka-skip-ad-counter"),xT(this.h,!1),this.j.appendChild(this.h),this.g=Lu(),this.g.classList.add("shaka-skip-ad-button"),this.g.disabled=!0,xT(this.g,!1),this.g.classList.add("shaka-no-propagation"),this.j.appendChild(this.g),xw(this),this.i=new Sn((function(){var e=Math.round(n.ad.getTimeUntilSkippable());0<e?n.h.textContent=e:(n.i.stop(),xT(n.h,!1))})),this.eventManager.m(this.localization,"locale-updated",(function(){xw(n)})),this.eventManager.m(this.localization,"locale-changed",(function(){xw(n)})),this.eventManager.m(this.adManager,"ad-started",(function(){_w(n)})),this.eventManager.m(this.adManager,"ad-skip-state-changed",(function(){n.ad.canSkipNow()&&(n.g.disabled=!1,n.i.stop(),xT(n.h,!1))})),this.eventManager.m(this.adManager,"ad-stopped",(function(){n.i.stop(),n.g.disabled=!0,xT(n.g,!1),xT(n.h,!1)})),this.eventManager.m(this.g,"click",(function(){n.ad.skip()})),this.ad&&_w(this)}function xw(e){e.g.textContent=e.localization.resolve("SKIP_AD")}function _w(e){e.ad.isSkippable()&&(xT(e.g,!0),xT(e.h,!0),e.h.textContent="",e.i.Ca(),e.i.na(.5))}function Iw(e,t){LT.call(this,e,t),this.button.classList.add("shaka-small-play-button"),this.button.classList.add("material-icons-round"),this.h(),this.g()}function kw(){}function Cw(e,t){TT.call(this,e,t);var n=Cu("div");n.classList.add("shaka-spacer"),n.ariaHidden="true",this.parent.appendChild(n)}function Lw(){}function Pw(e,t){NE.call(this,e,t,"closed_caption");var n=this;this.button.classList.add("shaka-caption-button"),this.menu.classList.add("shaka-text-languages"),this.player&&this.player.Lb()?this.button.ariaPressed="true":this.button.ariaPressed="false",Nw(this),this.eventManager.m(this.localization,"locale-updated",(function(){Uw(n),Rw(n)})),this.eventManager.m(this.localization,"locale-changed",(function(){Uw(n),Rw(n)})),this.eventManager.m(this.player,"texttrackvisibility",(function(){Dw(n)})),this.eventManager.m(this.player,"textchanged",(function(){Rw(n)})),this.eventManager.m(this.player,"trackschanged",(function(){Ow(n)})),Dw(this),Uw(this),Rw(this),Ow(this)}function Nw(e){var t=Lu();t.ariaSelected="true",e.menu.appendChild(t),t.appendChild(AT()),e.g=Cu("span"),e.g.classList.add("shaka-auto-span"),t.appendChild(e.g)}function Dw(e){e.player.Lb()?(e.icon.classList.add("shaka-captions-on"),e.icon.classList.remove("shaka-captions-off"),e.button.ariaPressed="true"):(e.icon.classList.add("shaka-captions-off"),e.icon.classList.remove("shaka-captions-on"),e.button.ariaPressed="false"),e.controls.dispatchEvent(new W("captionselectionupdated"))}function Rw(e){var t=e.player.jb();LE(t,e.menu,(function(t){return Mw(e,t)}),e.player.Lb(),e.currentSelection,e.localization,e.controls.s.trackLabelFormat),t=Lu(),t.classList.add("shaka-turn-captions-off-button"),e.eventManager.m(t,"click",(function(){e.player.ye(!1),Rw(e)})),t.appendChild(e.g),e.menu.appendChild(t),e.player.Lb()||(t.ariaSelected="true",t.appendChild(AT()),e.g.classList.add("shaka-chosen-item"),e.currentSelection.textContent=e.localization.resolve("OFF")),ST(e.menu),e.controls.dispatchEvent(new W("captionselectionupdated"))}function Mw(e,t){return F((function(n){return e.player.oe(t),S(n,e.player.ye(!0),0)}))}function Uw(e){e.button.ariaLabel=e.localization.resolve("CAPTIONS"),e.backButton.ariaLabel=e.localization.resolve("BACK"),e.nameSpan.textContent=e.localization.resolve("CAPTIONS"),e.backSpan.textContent=e.localization.resolve("CAPTIONS"),e.g.textContent=e.localization.resolve("OFF")}function Ow(e){var t=0<e.player.jb().length;xT(e.button,t),Rw(e)}function Fw(){}function jw(e,t){NT.call(this,e,t,["shaka-volume-bar-container"],["shaka-volume-bar"]);var n=this;this.s=this.controls.s,this.eventManager.m(this.video,"volumechange",(function(){return Bw(n)})),this.eventManager.m(this.adManager,"ad-volume-changed",(function(){return Gw(n)})),this.eventManager.m(this.adManager,"ad-muted",(function(){return Gw(n)})),this.eventManager.m(this.adManager,"ad-stopped",(function(){return Bw(n)})),this.eventManager.m(this.localization,"locale-updated",(function(){return Kw(n)})),this.eventManager.m(this.localization,"locale-changed",(function(){return Kw(n)})),Bw(this),Kw(this),this.ad&&this.onChange()}function Bw(e){e.video.muted?e.setValue(0):e.setValue(e.video.volume),Vw(e)}function Gw(e){var t=e.ad.getVolume();e.setValue(t),Vw(e)}function Vw(e){var t=e.s.volumeBarColors,n=["to right"];n.push(t.level+100*e.getValue()+"%"),n.push(t.base+100*e.getValue()+"%"),n.push(t.base+"100%"),e.container.style.background="linear-gradient("+n.join(",")+")"}function Kw(e){e.bar.ariaLabel=e.localization.resolve("VOLUME")}function zw(){}wE.FailReasonCode={NO_BROWSER_SUPPORT:kE,PLAYER_FAILED_TO_LOAD:CE},"complete"==document.readyState?F((function(e){if(1==e.g)return S(e,Promise.resolve(),2);AE(),A(e)})):e.addEventListener("load",AE),b(NE,TT),H("shaka.ui.SettingsMenu",NE),b(ME,NE),H("shaka.ui.AudioLanguageSelection",ME),FE.prototype.create=function(e,t){return new ME(e,t)},hE("language",new FE),b(jE,TT),H("shaka.ui.CastButton",jE),zE.prototype.create=function(e,t){return new jE(e,t)},hE("cast",new zE),VT("cast",new zE),b(HE,TT),H("shaka.ui.FastForwardButton",HE),qE.prototype.create=function(e,t){return new HE(e,t)},VT("fast_forward",new qE),b(YE,TT),H("shaka.ui.FullscreenButton",YE),$E.prototype.create=function(e,t){return new YE(e,t)},VT("fullscreen",new $E),b(JE,TT),JE.prototype.release=function(){this.h.stop(),this.h=null,TT.prototype.release.call(this)},H("shaka.ui.LoopButton",JE),ZE.prototype.create=function(e,t){return new JE(e,t)},hE("loop",new ZE),VT("loop",new ZE),b(ew,TT),H("shaka.ui.MuteButton",ew),iw.prototype.create=function(e,t){return new ew(e,t)},VT("mute",new iw),b(rw,TT),H("shaka.ui.PipButton",rw),uw.prototype.create=function(e,t){return new rw(e,t)},hE("picture_in_picture",new uw),VT("picture_in_picture",new uw),b(lw,NE),H("shaka.ui.PlaybackRateSelection",lw),fw.prototype.create=function(e,t){return new lw(e,t)},hE("playback_rate",new fw),b(pw,TT),H("shaka.ui.PresentationTimeTracker",pw),mw.prototype.create=function(e,t){return new pw(e,t)},VT("time_and_duration",new mw),b(vw,NE),H("shaka.ui.ResolutionSelection",vw),Tw.prototype.create=function(e,t){return new vw(e,t)},hE("quality",new Tw),b(Ew,TT),H("shaka.ui.RewindButton",Ew),Sw.prototype.create=function(e,t){return new Ew(e,t)},VT("rewind",new Sw),b(Aw,TT),Aw.prototype.release=function(){this.i.stop(),this.i=null,TT.prototype.release.call(this)},H("shaka.ui.SkipAdButton",Aw),b(Iw,LT),Iw.prototype.h=function(){this.button.textContent=this.video.ended?"replay":this.isPaused()?"play_arrow":"pause"},Iw.prototype.g=function(){if(this.video.ended)this.button.ariaLabel=this.localization.resolve("REPLAY");else{var e=this.isPaused()?"PLAY":"PAUSE";this.button.ariaLabel=this.localization.resolve(e)}},H("shaka.ui.SmallPlayButton",Iw),kw.prototype.create=function(e,t){return new Iw(e,t)},VT("play_pause",new kw),b(Cw,TT),H("shaka.ui.Spacer",Cw),Lw.prototype.create=function(e,t){return new Cw(e,t)},VT("spacer",new Lw),b(Pw,NE),H("shaka.ui.TextSelection",Pw),Fw.prototype.create=function(e,t){return new Pw(e,t)},hE("captions",new Fw),b(jw,NT),jw.prototype.onChange=function(){this.ad?this.ad.setVolume(this.getValue()):(this.video.volume=this.getValue(),this.video.muted=0==this.video.volume)},H("shaka.ui.VolumeBar",jw),zw.prototype.create=function(e,t){return new jw(e,t)},VT("volume",new zw)}.call(i,n,n,void 0),i.shaka)t[r]=i.shaka[r]})()}).call(this,n("c8ba"))},8707:function(e,t,n){
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
var i=n("b639"),r=i.Buffer;function a(e,t){for(var n in e)t[n]=e[n]}function o(e,t,n){return r(e,t,n)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=i:(a(i,t),t.Buffer=o),o.prototype=Object.create(r.prototype),a(r,o),o.from=function(e,t,n){if("number"===typeof e)throw new TypeError("Argument must not be a number");return r(e,t,n)},o.alloc=function(e,t,n){if("number"!==typeof e)throw new TypeError("Argument must be a number");var i=r(e);return void 0!==t?"string"===typeof n?i.fill(t,n):i.fill(t):i.fill(0),i},o.allocUnsafe=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return r(e)},o.allocUnsafeSlow=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return i.SlowBuffer(e)}},9152:function(e,t){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
t.read=function(e,t,n,i,r){var a,o,s=8*r-i-1,u=(1<<s)-1,l=u>>1,c=-7,d=n?r-1:0,h=n?-1:1,f=e[t+d];for(d+=h,a=f&(1<<-c)-1,f>>=-c,c+=s;c>0;a=256*a+e[t+d],d+=h,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=i;c>0;o=256*o+e[t+d],d+=h,c-=8);if(0===a)a=1-l;else{if(a===u)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,i),a-=l}return(f?-1:1)*o*Math.pow(2,a-i)},t.write=function(e,t,n,i,r,a){var o,s,u,l=8*a-r-1,c=(1<<l)-1,d=c>>1,h=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:a-1,p=i?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),t+=o+d>=1?h/u:h*Math.pow(2,1-d),t*u>=2&&(o++,u/=2),o+d>=c?(s=0,o=c):o+d>=1?(s=(t*u-1)*Math.pow(2,r),o+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,r),o=0));r>=8;e[n+f]=255&s,f+=p,s/=256,r-=8);for(o=o<<r|s,l+=r;l>0;e[n+f]=255&o,f+=p,o/=256,l-=8);e[n+f-p]|=128*g}},"966d":function(e,t,n){"use strict";(function(t){function n(e,n,i,r){if("function"!==typeof e)throw new TypeError('"callback" argument must be a function');var a,o,s=arguments.length;switch(s){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick((function(){e.call(null,n)}));case 3:return t.nextTick((function(){e.call(null,n,i)}));case 4:return t.nextTick((function(){e.call(null,n,i,r)}));default:a=new Array(s-1),o=0;while(o<a.length)a[o++]=arguments[o];return t.nextTick((function(){e.apply(null,a)}))}}"undefined"===typeof t||!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports={nextTick:n}:e.exports=t}).call(this,n("4362"))},"96c1":function(e,t,n){var i=n("9b12").isArray;e.exports={copyOptions:function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n},ensureFlagExists:function(e,t){e in t&&"boolean"===typeof t[e]||(t[e]=!1)},ensureSpacesExists:function(e){(!("spaces"in e)||"number"!==typeof e.spaces&&"string"!==typeof e.spaces)&&(e.spaces=0)},ensureAlwaysArrayExists:function(e){"alwaysArray"in e&&("boolean"===typeof e.alwaysArray||i(e.alwaysArray))||(e.alwaysArray=!1)},ensureKeyExists:function(e,t){e+"Key"in t&&"string"===typeof t[e+"Key"]||(t[e+"Key"]=t.compact?"_"+e:e)},checkFnExists:function(e,t){return e+"Fn"in t}}},9734:function(e,t,n){},"9b12":function(e,t){e.exports={isArray:function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)}}},a8f0:function(e,t,n){var i=n("b639"),r=i.Buffer;function a(e,t){for(var n in e)t[n]=e[n]}function o(e,t,n){return r(e,t,n)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=i:(a(i,t),t.Buffer=o),a(r,o),o.from=function(e,t,n){if("number"===typeof e)throw new TypeError("Argument must not be a number");return r(e,t,n)},o.alloc=function(e,t,n){if("number"!==typeof e)throw new TypeError("Argument must be a number");var i=r(e);return void 0!==t?"string"===typeof n?i.fill(t,n):i.fill(t):i.fill(0),i},o.allocUnsafe=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return r(e)},o.allocUnsafeSlow=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return i.SlowBuffer(e)}},ac7c:function(e,t,n){"use strict";n("6ca7"),n("ec29");var i=n("9d26"),r=n("c37a"),a=n("fe09");t["a"]=a["a"].extend({name:"v-checkbox",props:{indeterminate:Boolean,indeterminateIcon:{type:String,default:"$checkboxIndeterminate"},offIcon:{type:String,default:"$checkboxOff"},onIcon:{type:String,default:"$checkboxOn"}},data(){return{inputIndeterminate:this.indeterminate}},computed:{classes(){return{...r["a"].options.computed.classes.call(this),"v-input--selection-controls":!0,"v-input--checkbox":!0,"v-input--indeterminate":this.inputIndeterminate}},computedIcon(){return this.inputIndeterminate?this.indeterminateIcon:this.isActive?this.onIcon:this.offIcon},validationState(){if(!this.isDisabled||this.inputIndeterminate)return this.hasError&&this.shouldValidate?"error":this.hasSuccess?"success":null!==this.hasColor?this.computedColor:void 0}},watch:{indeterminate(e){this.$nextTick(()=>this.inputIndeterminate=e)},inputIndeterminate(e){this.$emit("update:indeterminate",e)},isActive(){this.indeterminate&&(this.inputIndeterminate=!1)}},methods:{genCheckbox(){const{title:e,...t}=this.attrs$;return this.$createElement("div",{staticClass:"v-input--selection-controls__input"},[this.$createElement(i["a"],this.setTextColor(this.validationState,{props:{dense:this.dense,dark:this.dark,light:this.light}}),this.computedIcon),this.genInput("checkbox",{...t,"aria-checked":this.inputIndeterminate?"mixed":this.isActive.toString()}),this.genRipple(this.setTextColor(this.rippleState))])},genDefaultSlot(){return[this.genCheckbox(),this.genLabel()]}}})},ad71:function(e,t,n){"use strict";(function(t,i){var r=n("966d");e.exports=w;var a,o=n("e3db");w.ReadableState=E;n("faa1").EventEmitter;var s=function(e,t){return e.listeners(t).length},u=n("429b"),l=n("a8f0").Buffer,c=t.Uint8Array||function(){};function d(e){return l.from(e)}function h(e){return l.isBuffer(e)||e instanceof c}var f=Object.create(n("3a7c"));f.inherits=n("3fb5");var p=n(1),g=void 0;g=p&&p.debuglog?p.debuglog("stream"):function(){};var m,v=n("5e1a"),y=n("4681");f.inherits(w,u);var b=["error","close","destroy","pause","resume"];function T(e,t,n){if("function"===typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?o(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}function E(e,t){a=a||n("b19a"),e=e||{};var i=t instanceof a;this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var r=e.highWaterMark,o=e.readableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i&&(o||0===o)?o:s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new v,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(m||(m=n("7d72").StringDecoder),this.decoder=new m(e.encoding),this.encoding=e.encoding)}function w(e){if(a=a||n("b19a"),!(this instanceof w))return new w(e);this._readableState=new E(e,this),this.readable=!0,e&&("function"===typeof e.read&&(this._read=e.read),"function"===typeof e.destroy&&(this._destroy=e.destroy)),u.call(this)}function S(e,t,n,i,r){var a,o=e._readableState;null===t?(o.reading=!1,L(e,o)):(r||(a=x(o,t)),a?e.emit("error",a):o.objectMode||t&&t.length>0?("string"===typeof t||o.objectMode||Object.getPrototypeOf(t)===l.prototype||(t=d(t)),i?o.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):A(e,o,t,!0):o.ended?e.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!n?(t=o.decoder.write(t),o.objectMode||0!==t.length?A(e,o,t,!1):D(e,o)):A(e,o,t,!1))):i||(o.reading=!1));return _(o)}function A(e,t,n,i){t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&P(e)),D(e,t)}function x(e,t){var n;return h(t)||"string"===typeof t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function _(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}Object.defineProperty(w.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),w.prototype.destroy=y.destroy,w.prototype._undestroy=y.undestroy,w.prototype._destroy=function(e,t){this.push(null),t(e)},w.prototype.push=function(e,t){var n,i=this._readableState;return i.objectMode?n=!0:"string"===typeof e&&(t=t||i.defaultEncoding,t!==i.encoding&&(e=l.from(e,t),t=""),n=!0),S(this,e,t,!1,n)},w.prototype.unshift=function(e){return S(this,e,null,!0,!1)},w.prototype.isPaused=function(){return!1===this._readableState.flowing},w.prototype.setEncoding=function(e){return m||(m=n("7d72").StringDecoder),this._readableState.decoder=new m(e),this._readableState.encoding=e,this};var I=8388608;function k(e){return e>=I?e=I:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function C(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=k(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function L(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,P(e)}}function P(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(g("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?r.nextTick(N,e):N(e))}function N(e){g("emit readable"),e.emit("readable"),j(e)}function D(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(R,e,t))}function R(e,t){var n=t.length;while(!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark){if(g("maybeReadMore read 0"),e.read(0),n===t.length)break;n=t.length}t.readingMore=!1}function M(e){return function(){var t=e._readableState;g("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&s(e,"data")&&(t.flowing=!0,j(e))}}function U(e){g("readable nexttick read 0"),e.read(0)}function O(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r.nextTick(F,e,t))}function F(e,t){t.reading||(g("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),j(e),t.flowing&&!t.reading&&e.read(0)}function j(e){var t=e._readableState;g("flow",t.flowing);while(t.flowing&&null!==e.read());}function B(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=G(e,t.buffer,t.decoder),n);var n}function G(e,t,n){var i;return e<t.head.data.length?(i=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):i=e===t.head.data.length?t.shift():n?V(e,t):K(e,t),i}function V(e,t){var n=t.head,i=1,r=n.data;e-=r.length;while(n=n.next){var a=n.data,o=e>a.length?a.length:e;if(o===a.length?r+=a:r+=a.slice(0,e),e-=o,0===e){o===a.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=a.slice(o));break}++i}return t.length-=i,r}function K(e,t){var n=l.allocUnsafe(e),i=t.head,r=1;i.data.copy(n),e-=i.data.length;while(i=i.next){var a=i.data,o=e>a.length?a.length:e;if(a.copy(n,n.length-e,0,o),e-=o,0===e){o===a.length?(++r,i.next?t.head=i.next:t.head=t.tail=null):(t.head=i,i.data=a.slice(o));break}++r}return t.length-=r,n}function z(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,r.nextTick(H,t,e))}function H(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function W(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1}w.prototype.read=function(e){g("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return g("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?z(this):P(this),null;if(e=C(e,t),0===e&&t.ended)return 0===t.length&&z(this),null;var i,r=t.needReadable;return g("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&(r=!0,g("length less than watermark",r)),t.ended||t.reading?(r=!1,g("reading or ended",r)):r&&(g("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=C(n,t))),i=e>0?B(e,t):null,null===i?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&z(this)),null!==i&&this.emit("data",i),i},w.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},w.prototype.pipe=function(e,t){var n=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=e;break;case 1:a.pipes=[a.pipes,e];break;default:a.pipes.push(e);break}a.pipesCount+=1,g("pipe count=%d opts=%j",a.pipesCount,t);var o=(!t||!1!==t.end)&&e!==i.stdout&&e!==i.stderr,u=o?c:E;function l(e,t){g("onunpipe"),e===n&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,f())}function c(){g("onend"),e.end()}a.endEmitted?r.nextTick(u):n.once("end",u),e.on("unpipe",l);var d=M(n);e.on("drain",d);var h=!1;function f(){g("cleanup"),e.removeListener("close",y),e.removeListener("finish",b),e.removeListener("drain",d),e.removeListener("error",v),e.removeListener("unpipe",l),n.removeListener("end",c),n.removeListener("end",E),n.removeListener("data",m),h=!0,!a.awaitDrain||e._writableState&&!e._writableState.needDrain||d()}var p=!1;function m(t){g("ondata"),p=!1;var i=e.write(t);!1!==i||p||((1===a.pipesCount&&a.pipes===e||a.pipesCount>1&&-1!==W(a.pipes,e))&&!h&&(g("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,p=!0),n.pause())}function v(t){g("onerror",t),E(),e.removeListener("error",v),0===s(e,"error")&&e.emit("error",t)}function y(){e.removeListener("finish",b),E()}function b(){g("onfinish"),e.removeListener("close",y),E()}function E(){g("unpipe"),n.unpipe(e)}return n.on("data",m),T(e,"error",v),e.once("close",y),e.once("finish",b),e.emit("pipe",n),a.flowing||(g("pipe resume"),n.resume()),e},w.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var i=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<r;a++)i[a].emit("unpipe",this,n);return this}var o=W(t.pipes,e);return-1===o||(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},w.prototype.on=function(e,t){var n=u.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var i=this._readableState;i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&P(this):r.nextTick(U,this))}return n},w.prototype.addListener=w.prototype.on,w.prototype.resume=function(){var e=this._readableState;return e.flowing||(g("resume"),e.flowing=!0,O(this,e)),this},w.prototype.pause=function(){return g("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(g("pause"),this._readableState.flowing=!1,this.emit("pause")),this},w.prototype.wrap=function(e){var t=this,n=this._readableState,i=!1;for(var r in e.on("end",(function(){if(g("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(r){if(g("wrapped data"),n.decoder&&(r=n.decoder.write(r)),(!n.objectMode||null!==r&&void 0!==r)&&(n.objectMode||r&&r.length)){var a=t.push(r);a||(i=!0,e.pause())}})),e)void 0===this[r]&&"function"===typeof e[r]&&(this[r]=function(t){return function(){return e[t].apply(e,arguments)}}(r));for(var a=0;a<b.length;a++)e.on(b[a],this.emit.bind(this,b[a]));return this._read=function(t){g("wrapped _read",t),i&&(i=!1,e.resume())},this},Object.defineProperty(w.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),w._fromList=B}).call(this,n("c8ba"),n("4362"))},b19a:function(e,t,n){"use strict";var i=n("966d"),r=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=d;var a=Object.create(n("3a7c"));a.inherits=n("3fb5");var o=n("ad71"),s=n("dc14");a.inherits(d,o);for(var u=r(s.prototype),l=0;l<u.length;l++){var c=u[l];d.prototype[c]||(d.prototype[c]=s.prototype[c])}function d(e){if(!(this instanceof d))return new d(e);o.call(this,e),s.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",h)}function h(){this.allowHalfOpen||this._writableState.ended||i.nextTick(f,this)}function f(e){e.end()}Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(d.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),d.prototype._destroy=function(e,t){this.push(null),this.end(),i.nextTick(t,e)}},b639:function(e,t,n){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var i=n("1fb5"),r=n("9152"),a=n("e3db");function o(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"===typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}function s(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=l.prototype):(null===e&&(e=new l(t)),e.length=t),e}function l(e,t,n){if(!l.TYPED_ARRAY_SUPPORT&&!(this instanceof l))return new l(e,t,n);if("number"===typeof e){if("string"===typeof t)throw new Error("If encoding is specified then the first argument must be a string");return f(this,e)}return c(this,e,t,n)}function c(e,t,n,i){if("number"===typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&t instanceof ArrayBuffer?m(e,t,n,i):"string"===typeof t?p(e,t,n):v(e,t)}function d(e){if("number"!==typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function h(e,t,n,i){return d(t),t<=0?u(e,t):void 0!==n?"string"===typeof i?u(e,t).fill(n,i):u(e,t).fill(n):u(e,t)}function f(e,t){if(d(t),e=u(e,t<0?0:0|y(t)),!l.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function p(e,t,n){if("string"===typeof n&&""!==n||(n="utf8"),!l.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|T(t,n);e=u(e,i);var r=e.write(t,n);return r!==i&&(e=e.slice(0,r)),e}function g(e,t){var n=t.length<0?0:0|y(t.length);e=u(e,n);for(var i=0;i<n;i+=1)e[i]=255&t[i];return e}function m(e,t,n,i){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,n):new Uint8Array(t,n,i),l.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=l.prototype):e=g(e,t),e}function v(e,t){if(l.isBuffer(t)){var n=0|y(t.length);return e=u(e,n),0===e.length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!==typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!==typeof t.length||te(t.length)?u(e,0):g(e,t);if("Buffer"===t.type&&a(t.data))return g(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function y(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function b(e){return+e!=e&&(e=0),l.alloc(+e)}function T(e,t){if(l.isBuffer(e))return e.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!==typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return $(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Z(e).length;default:if(i)return $(e).length;t=(""+t).toLowerCase(),i=!0}}function E(e,t,n){var i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";e||(e="utf8");while(1)switch(e){case"hex":return O(this,t,n);case"utf8":case"utf-8":return N(this,t,n);case"ascii":return M(this,t,n);case"latin1":case"binary":return U(this,t,n);case"base64":return P(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function w(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function S(e,t,n,i,r){if(0===e.length)return-1;if("string"===typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(r)return-1;n=e.length-1}else if(n<0){if(!r)return-1;n=0}if("string"===typeof t&&(t=l.from(t,i)),l.isBuffer(t))return 0===t.length?-1:A(e,t,n,i,r);if("number"===typeof t)return t&=255,l.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):A(e,[t],n,i,r);throw new TypeError("val must be string, number or Buffer")}function A(e,t,n,i,r){var a,o=1,s=e.length,u=t.length;if(void 0!==i&&(i=String(i).toLowerCase(),"ucs2"===i||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;o=2,s/=2,u/=2,n/=2}function l(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(r){var c=-1;for(a=n;a<s;a++)if(l(e,a)===l(t,-1===c?0:a-c)){if(-1===c&&(c=a),a-c+1===u)return c*o}else-1!==c&&(a-=a-c),c=-1}else for(n+u>s&&(n=s-u),a=n;a>=0;a--){for(var d=!0,h=0;h<u;h++)if(l(e,a+h)!==l(t,h)){d=!1;break}if(d)return a}return-1}function x(e,t,n,i){n=Number(n)||0;var r=e.length-n;i?(i=Number(i),i>r&&(i=r)):i=r;var a=t.length;if(a%2!==0)throw new TypeError("Invalid hex string");i>a/2&&(i=a/2);for(var o=0;o<i;++o){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))return o;e[n+o]=s}return o}function _(e,t,n,i){return ee($(t,e.length-n),e,n,i)}function I(e,t,n,i){return ee(J(t),e,n,i)}function k(e,t,n,i){return I(e,t,n,i)}function C(e,t,n,i){return ee(Z(t),e,n,i)}function L(e,t,n,i){return ee(Q(t,e.length-n),e,n,i)}function P(e,t,n){return 0===t&&n===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,n))}function N(e,t,n){n=Math.min(e.length,n);var i=[],r=t;while(r<n){var a,o,s,u,l=e[r],c=null,d=l>239?4:l>223?3:l>191?2:1;if(r+d<=n)switch(d){case 1:l<128&&(c=l);break;case 2:a=e[r+1],128===(192&a)&&(u=(31&l)<<6|63&a,u>127&&(c=u));break;case 3:a=e[r+1],o=e[r+2],128===(192&a)&&128===(192&o)&&(u=(15&l)<<12|(63&a)<<6|63&o,u>2047&&(u<55296||u>57343)&&(c=u));break;case 4:a=e[r+1],o=e[r+2],s=e[r+3],128===(192&a)&&128===(192&o)&&128===(192&s)&&(u=(15&l)<<18|(63&a)<<12|(63&o)<<6|63&s,u>65535&&u<1114112&&(c=u))}null===c?(c=65533,d=1):c>65535&&(c-=65536,i.push(c>>>10&1023|55296),c=56320|1023&c),i.push(c),r+=d}return R(i)}t.Buffer=l,t.SlowBuffer=b,t.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:o(),t.kMaxLength=s(),l.poolSize=8192,l._augment=function(e){return e.__proto__=l.prototype,e},l.from=function(e,t,n){return c(null,e,t,n)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(e,t,n){return h(null,e,t,n)},l.allocUnsafe=function(e){return f(null,e)},l.allocUnsafeSlow=function(e){return f(null,e)},l.isBuffer=function(e){return!(null==e||!e._isBuffer)},l.compare=function(e,t){if(!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,i=t.length,r=0,a=Math.min(n,i);r<a;++r)if(e[r]!==t[r]){n=e[r],i=t[r];break}return n<i?-1:i<n?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var i=l.allocUnsafe(t),r=0;for(n=0;n<e.length;++n){var o=e[n];if(!l.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,r),r+=o.length}return i},l.byteLength=T,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)w(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)w(this,t,t+3),w(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)w(this,t,t+7),w(this,t+1,t+6),w(this,t+2,t+5),w(this,t+3,t+4);return this},l.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?N(this,0,e):E.apply(this,arguments)},l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},l.prototype.compare=function(e,t,n,i,r){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),t<0||n>e.length||i<0||r>this.length)throw new RangeError("out of range index");if(i>=r&&t>=n)return 0;if(i>=r)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,i>>>=0,r>>>=0,this===e)return 0;for(var a=r-i,o=n-t,s=Math.min(a,o),u=this.slice(i,r),c=e.slice(t,n),d=0;d<s;++d)if(u[d]!==c[d]){a=u[d],o=c[d];break}return a<o?-1:o<a?1:0},l.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},l.prototype.indexOf=function(e,t,n){return S(this,e,t,n,!0)},l.prototype.lastIndexOf=function(e,t,n){return S(this,e,t,n,!1)},l.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"===typeof t)i=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-t;if((void 0===n||n>r)&&(n=r),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var a=!1;;)switch(i){case"hex":return x(this,e,t,n);case"utf8":case"utf-8":return _(this,e,t,n);case"ascii":return I(this,e,t,n);case"latin1":case"binary":return k(this,e,t,n);case"base64":return C(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),a=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var D=4096;function R(e){var t=e.length;if(t<=D)return String.fromCharCode.apply(String,e);var n="",i=0;while(i<t)n+=String.fromCharCode.apply(String,e.slice(i,i+=D));return n}function M(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;++r)i+=String.fromCharCode(127&e[r]);return i}function U(e,t,n){var i="";n=Math.min(e.length,n);for(var r=t;r<n;++r)i+=String.fromCharCode(e[r]);return i}function O(e,t,n){var i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);for(var r="",a=t;a<n;++a)r+=X(e[a]);return r}function F(e,t,n){for(var i=e.slice(t,n),r="",a=0;a<i.length;a+=2)r+=String.fromCharCode(i[a]+256*i[a+1]);return r}function j(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function B(e,t,n,i,r,a){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<a)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function G(e,t,n,i){t<0&&(t=65535+t+1);for(var r=0,a=Math.min(e.length-n,2);r<a;++r)e[n+r]=(t&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function V(e,t,n,i){t<0&&(t=4294967295+t+1);for(var r=0,a=Math.min(e.length-n,4);r<a;++r)e[n+r]=t>>>8*(i?r:3-r)&255}function K(e,t,n,i,r,a){if(n+i>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function z(e,t,n,i,a){return a||K(e,t,n,4,34028234663852886e22,-34028234663852886e22),r.write(e,t,n,i,23,4),n+4}function H(e,t,n,i,a){return a||K(e,t,n,8,17976931348623157e292,-17976931348623157e292),r.write(e,t,n,i,52,8),n+8}l.prototype.slice=function(e,t){var n,i=this.length;if(e=~~e,t=void 0===t?i:~~t,e<0?(e+=i,e<0&&(e=0)):e>i&&(e=i),t<0?(t+=i,t<0&&(t=0)):t>i&&(t=i),t<e&&(t=e),l.TYPED_ARRAY_SUPPORT)n=this.subarray(e,t),n.__proto__=l.prototype;else{var r=t-e;n=new l(r,void 0);for(var a=0;a<r;++a)n[a]=this[a+e]}return n},l.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||j(e,t,this.length);var i=this[e],r=1,a=0;while(++a<t&&(r*=256))i+=this[e+a]*r;return i},l.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||j(e,t,this.length);var i=this[e+--t],r=1;while(t>0&&(r*=256))i+=this[e+--t]*r;return i},l.prototype.readUInt8=function(e,t){return t||j(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return t||j(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return t||j(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return t||j(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUInt32BE=function(e,t){return t||j(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||j(e,t,this.length);var i=this[e],r=1,a=0;while(++a<t&&(r*=256))i+=this[e+a]*r;return r*=128,i>=r&&(i-=Math.pow(2,8*t)),i},l.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||j(e,t,this.length);var i=t,r=1,a=this[e+--i];while(i>0&&(r*=256))a+=this[e+--i]*r;return r*=128,a>=r&&(a-=Math.pow(2,8*t)),a},l.prototype.readInt8=function(e,t){return t||j(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){t||j(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(e,t){t||j(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(e,t){return t||j(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return t||j(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return t||j(e,4,this.length),r.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return t||j(e,4,this.length),r.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return t||j(e,8,this.length),r.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return t||j(e,8,this.length),r.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,n,i){if(e=+e,t|=0,n|=0,!i){var r=Math.pow(2,8*n)-1;B(this,e,t,n,r,0)}var a=1,o=0;this[t]=255&e;while(++o<n&&(a*=256))this[t+o]=e/a&255;return t+n},l.prototype.writeUIntBE=function(e,t,n,i){if(e=+e,t|=0,n|=0,!i){var r=Math.pow(2,8*n)-1;B(this,e,t,n,r,0)}var a=n-1,o=1;this[t+a]=255&e;while(--a>=0&&(o*=256))this[t+a]=e/o&255;return t+n},l.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},l.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):G(this,e,t,!0),t+2},l.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):G(this,e,t,!1),t+2},l.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):V(this,e,t,!0),t+4},l.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):V(this,e,t,!1),t+4},l.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t|=0,!i){var r=Math.pow(2,8*n-1);B(this,e,t,n,r-1,-r)}var a=0,o=1,s=0;this[t]=255&e;while(++a<n&&(o*=256))e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},l.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t|=0,!i){var r=Math.pow(2,8*n-1);B(this,e,t,n,r-1,-r)}var a=n-1,o=1,s=0;this[t+a]=255&e;while(--a>=0&&(o*=256))e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},l.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):G(this,e,t,!0),t+2},l.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):G(this,e,t,!1),t+2},l.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):V(this,e,t,!0),t+4},l.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||B(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):V(this,e,t,!1),t+4},l.prototype.writeFloatLE=function(e,t,n){return z(this,e,t,!0,n)},l.prototype.writeFloatBE=function(e,t,n){return z(this,e,t,!1,n)},l.prototype.writeDoubleLE=function(e,t,n){return H(this,e,t,!0,n)},l.prototype.writeDoubleBE=function(e,t,n){return H(this,e,t,!1,n)},l.prototype.copy=function(e,t,n,i){if(n||(n=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);var r,a=i-n;if(this===e&&n<t&&t<i)for(r=a-1;r>=0;--r)e[r+t]=this[r+n];else if(a<1e3||!l.TYPED_ARRAY_SUPPORT)for(r=0;r<a;++r)e[r+t]=this[r+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+a),t);return a},l.prototype.fill=function(e,t,n,i){if("string"===typeof e){if("string"===typeof t?(i=t,t=0,n=this.length):"string"===typeof n&&(i=n,n=this.length),1===e.length){var r=e.charCodeAt(0);r<256&&(e=r)}if(void 0!==i&&"string"!==typeof i)throw new TypeError("encoding must be a string");if("string"===typeof i&&!l.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"===typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var a;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"===typeof e)for(a=t;a<n;++a)this[a]=e;else{var o=l.isBuffer(e)?e:$(new l(e,i).toString()),s=o.length;for(a=0;a<n-t;++a)this[a+t]=o[a%s]}return this};var W=/[^+\/0-9A-Za-z-_]/g;function q(e){if(e=Y(e).replace(W,""),e.length<2)return"";while(e.length%4!==0)e+="=";return e}function Y(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function X(e){return e<16?"0"+e.toString(16):e.toString(16)}function $(e,t){var n;t=t||1/0;for(var i=e.length,r=null,a=[],o=0;o<i;++o){if(n=e.charCodeAt(o),n>55295&&n<57344){if(!r){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===i){(t-=3)>-1&&a.push(239,191,189);continue}r=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(t-=3)>-1&&a.push(239,191,189);if(r=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function J(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function Q(e,t){for(var n,i,r,a=[],o=0;o<e.length;++o){if((t-=2)<0)break;n=e.charCodeAt(o),i=n>>8,r=n%256,a.push(r),a.push(i)}return a}function Z(e){return i.toByteArray(q(e))}function ee(e,t,n,i){for(var r=0;r<i;++r){if(r+n>=t.length||r>=e.length)break;t[r+n]=e[r]}return r}function te(e){return e!==e}}).call(this,n("c8ba"))},b7d1:function(e,t,n){(function(t){function n(e,t){if(i("noDeprecation"))return e;var n=!1;function r(){if(!n){if(i("throwDeprecation"))throw new Error(t);i("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}return r}function i(e){try{if(!t.localStorage)return!1}catch(i){return!1}var n=t.localStorage[e];return null!=n&&"true"===String(n).toLowerCase()}e.exports=n}).call(this,n("c8ba"))},bbab:function(e,t,n){},c2ae:function(e,t,n){e.exports=n("e372").PassThrough},c51a:function(e,t,n){var i=n("844f"),r=n("078a"),a=n("cef9"),o=n("493b");e.exports={xml2js:i,xml2json:r,js2xml:a,json2xml:o}},cef9:function(e,t,n){var i,r,a=n("96c1"),o=n("9b12").isArray;function s(e){var t=a.copyOptions(e);return a.ensureFlagExists("ignoreDeclaration",t),a.ensureFlagExists("ignoreInstruction",t),a.ensureFlagExists("ignoreAttributes",t),a.ensureFlagExists("ignoreText",t),a.ensureFlagExists("ignoreComment",t),a.ensureFlagExists("ignoreCdata",t),a.ensureFlagExists("ignoreDoctype",t),a.ensureFlagExists("compact",t),a.ensureFlagExists("indentText",t),a.ensureFlagExists("indentCdata",t),a.ensureFlagExists("indentAttributes",t),a.ensureFlagExists("indentInstruction",t),a.ensureFlagExists("fullTagEmptyElement",t),a.ensureFlagExists("noQuotesForNativeAttributes",t),a.ensureSpacesExists(t),"number"===typeof t.spaces&&(t.spaces=Array(t.spaces+1).join(" ")),a.ensureKeyExists("declaration",t),a.ensureKeyExists("instruction",t),a.ensureKeyExists("attributes",t),a.ensureKeyExists("text",t),a.ensureKeyExists("comment",t),a.ensureKeyExists("cdata",t),a.ensureKeyExists("doctype",t),a.ensureKeyExists("type",t),a.ensureKeyExists("name",t),a.ensureKeyExists("elements",t),a.checkFnExists("doctype",t),a.checkFnExists("instruction",t),a.checkFnExists("cdata",t),a.checkFnExists("comment",t),a.checkFnExists("text",t),a.checkFnExists("instructionName",t),a.checkFnExists("elementName",t),a.checkFnExists("attributeName",t),a.checkFnExists("attributeValue",t),a.checkFnExists("attributes",t),a.checkFnExists("fullTagEmptyElement",t),t}function u(e,t,n){return(!n&&e.spaces?"\n":"")+Array(t+1).join(e.spaces)}function l(e,t,n){if(t.ignoreAttributes)return"";"attributesFn"in t&&(e=t.attributesFn(e,r,i));var a,o,s,l,c=[];for(a in e)e.hasOwnProperty(a)&&null!==e[a]&&void 0!==e[a]&&(l=t.noQuotesForNativeAttributes&&"string"!==typeof e[a]?"":'"',o=""+e[a],o=o.replace(/"/g,"&quot;"),s="attributeNameFn"in t?t.attributeNameFn(a,o,r,i):a,c.push(t.spaces&&t.indentAttributes?u(t,n+1,!1):" "),c.push(s+"="+l+("attributeValueFn"in t?t.attributeValueFn(o,a,r,i):o)+l));return e&&Object.keys(e).length&&t.spaces&&t.indentAttributes&&c.push(u(t,n,!1)),c.join("")}function c(e,t,n){return i=e,r="xml",t.ignoreDeclaration?"":"<?xml"+l(e[t.attributesKey],t,n)+"?>"}function d(e,t,n){if(t.ignoreInstruction)return"";var a;for(a in e)if(e.hasOwnProperty(a))break;var o="instructionNameFn"in t?t.instructionNameFn(a,e[a],r,i):a;if("object"===typeof e[a])return i=e,r=o,"<?"+o+l(e[a][t.attributesKey],t,n)+"?>";var s=e[a]?e[a]:"";return"instructionFn"in t&&(s=t.instructionFn(s,a,r,i)),"<?"+o+(s?" "+s:"")+"?>"}function h(e,t){return t.ignoreComment?"":"\x3c!--"+("commentFn"in t?t.commentFn(e,r,i):e)+"--\x3e"}function f(e,t){return t.ignoreCdata?"":"<![CDATA["+("cdataFn"in t?t.cdataFn(e,r,i):e.replace("]]>","]]]]><![CDATA[>"))+"]]>"}function p(e,t){return t.ignoreDoctype?"":"<!DOCTYPE "+("doctypeFn"in t?t.doctypeFn(e,r,i):e)+">"}function g(e,t){return t.ignoreText?"":(e=""+e,e=e.replace(/&amp;/g,"&"),e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"textFn"in t?t.textFn(e,r,i):e)}function m(e,t){var n;if(e.elements&&e.elements.length)for(n=0;n<e.elements.length;++n)switch(e.elements[n][t.typeKey]){case"text":if(t.indentText)return!0;break;case"cdata":if(t.indentCdata)return!0;break;case"instruction":if(t.indentInstruction)return!0;break;case"doctype":case"comment":case"element":return!0;default:return!0}return!1}function v(e,t,n){i=e,r=e.name;var a=[],o="elementNameFn"in t?t.elementNameFn(e.name,e):e.name;a.push("<"+o),e[t.attributesKey]&&a.push(l(e[t.attributesKey],t,n));var s=e[t.elementsKey]&&e[t.elementsKey].length||e[t.attributesKey]&&"preserve"===e[t.attributesKey]["xml:space"];return s||(s="fullTagEmptyElementFn"in t?t.fullTagEmptyElementFn(e.name,e):t.fullTagEmptyElement),s?(a.push(">"),e[t.elementsKey]&&e[t.elementsKey].length&&(a.push(y(e[t.elementsKey],t,n+1)),i=e,r=e.name),a.push(t.spaces&&m(e,t)?"\n"+Array(n+1).join(t.spaces):""),a.push("</"+o+">")):a.push("/>"),a.join("")}function y(e,t,n,i){return e.reduce((function(e,r){var a=u(t,n,i&&!e);switch(r.type){case"element":return e+a+v(r,t,n);case"comment":return e+a+h(r[t.commentKey],t);case"doctype":return e+a+p(r[t.doctypeKey],t);case"cdata":return e+(t.indentCdata?a:"")+f(r[t.cdataKey],t);case"text":return e+(t.indentText?a:"")+g(r[t.textKey],t);case"instruction":var o={};return o[r[t.nameKey]]=r[t.attributesKey]?r:r[t.instructionKey],e+(t.indentInstruction?a:"")+d(o,t,n)}}),"")}function b(e,t,n){var i;for(i in e)if(e.hasOwnProperty(i))switch(i){case t.parentKey:case t.attributesKey:break;case t.textKey:if(t.indentText||n)return!0;break;case t.cdataKey:if(t.indentCdata||n)return!0;break;case t.instructionKey:if(t.indentInstruction||n)return!0;break;case t.doctypeKey:case t.commentKey:return!0;default:return!0}return!1}function T(e,t,n,a,o){i=e,r=t;var s="elementNameFn"in n?n.elementNameFn(t,e):t;if("undefined"===typeof e||null===e||""===e)return"fullTagEmptyElementFn"in n&&n.fullTagEmptyElementFn(t,e)||n.fullTagEmptyElement?"<"+s+"></"+s+">":"<"+s+"/>";var c=[];if(t){if(c.push("<"+s),"object"!==typeof e)return c.push(">"+g(e,n)+"</"+s+">"),c.join("");e[n.attributesKey]&&c.push(l(e[n.attributesKey],n,a));var d=b(e,n,!0)||e[n.attributesKey]&&"preserve"===e[n.attributesKey]["xml:space"];if(d||(d="fullTagEmptyElementFn"in n?n.fullTagEmptyElementFn(t,e):n.fullTagEmptyElement),!d)return c.push("/>"),c.join("");c.push(">")}return c.push(E(e,n,a+1,!1)),i=e,r=t,t&&c.push((o?u(n,a,!1):"")+"</"+s+">"),c.join("")}function E(e,t,n,i){var r,a,s,l=[];for(a in e)if(e.hasOwnProperty(a))for(s=o(e[a])?e[a]:[e[a]],r=0;r<s.length;++r){switch(a){case t.declarationKey:l.push(c(s[r],t,n));break;case t.instructionKey:l.push((t.indentInstruction?u(t,n,i):"")+d(s[r],t,n));break;case t.attributesKey:case t.parentKey:break;case t.textKey:l.push((t.indentText?u(t,n,i):"")+g(s[r],t));break;case t.cdataKey:l.push((t.indentCdata?u(t,n,i):"")+f(s[r],t));break;case t.doctypeKey:l.push(u(t,n,i)+p(s[r],t));break;case t.commentKey:l.push(u(t,n,i)+h(s[r],t));break;default:l.push(u(t,n,i)+T(s[r],a,t,n,b(s[r],t)))}i=i&&!l.length}return l.join("")}e.exports=function(e,t){t=s(t);var n=[];return i=e,r="_root_",t.compact?n.push(E(e,t,0,!0)):(e[t.declarationKey]&&n.push(c(e[t.declarationKey],t,0)),e[t.elementsKey]&&e[t.elementsKey].length&&n.push(y(e[t.elementsKey],t,0,!n.length))),n.join("")}},d17b:function(e,t,n){e.exports=n("e372").Transform},d485:function(e,t,n){e.exports=a;var i=n("faa1").EventEmitter,r=n("3fb5");function a(){i.call(this)}r(a,i),a.Readable=n("e372"),a.Writable=n("2c63"),a.Duplex=n("0960"),a.Transform=n("d17b"),a.PassThrough=n("c2ae"),a.Stream=a,a.prototype.pipe=function(e,t){var n=this;function r(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function a(){n.readable&&n.resume&&n.resume()}n.on("data",r),e.on("drain",a),e._isStdio||t&&!1===t.end||(n.on("end",s),n.on("close",u));var o=!1;function s(){o||(o=!0,e.end())}function u(){o||(o=!0,"function"===typeof e.destroy&&e.destroy())}function l(e){if(c(),0===i.listenerCount(this,"error"))throw e}function c(){n.removeListener("data",r),e.removeListener("drain",a),n.removeListener("end",s),n.removeListener("close",u),n.removeListener("error",l),e.removeListener("error",l),n.removeListener("end",c),n.removeListener("close",c),e.removeListener("close",c)}return n.on("error",l),e.on("error",l),n.on("end",c),n.on("close",c),e.on("close",c),e.emit("pipe",n),e}},dc14:function(e,t,n){"use strict";(function(t,i){var r=n("966d");function a(e){var t=this;this.next=null,this.entry=null,this.finish=function(){U(t,e)}}e.exports=b;var o,s=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?setImmediate:r.nextTick;b.WritableState=y;var u=Object.create(n("3a7c"));u.inherits=n("3fb5");var l={deprecate:n("b7d1")},c=n("429b"),d=n("a8f0").Buffer,h=i.Uint8Array||function(){};function f(e){return d.from(e)}function p(e){return d.isBuffer(e)||e instanceof h}var g,m=n("4681");function v(){}function y(e,t){o=o||n("b19a"),e=e||{};var i=t instanceof o;this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var r=e.highWaterMark,s=e.writableHighWaterMark,u=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i&&(s||0===s)?s:u,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var l=!1===e.decodeStrings;this.decodeStrings=!l,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){I(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function b(e){if(o=o||n("b19a"),!g.call(b,this)&&!(this instanceof o))return new b(e);this._writableState=new y(e,this),this.writable=!0,e&&("function"===typeof e.write&&(this._write=e.write),"function"===typeof e.writev&&(this._writev=e.writev),"function"===typeof e.destroy&&(this._destroy=e.destroy),"function"===typeof e.final&&(this._final=e.final)),c.call(this)}function T(e,t){var n=new Error("write after end");e.emit("error",n),r.nextTick(t,n)}function E(e,t,n,i){var a=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):"string"===typeof n||void 0===n||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),r.nextTick(i,o),a=!1),a}function w(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!==typeof t||(t=d.from(t,n)),t}function S(e,t,n,i,r,a){if(!n){var o=w(t,i,r);i!==o&&(n=!0,r="buffer",i=o)}var s=t.objectMode?1:i.length;t.length+=s;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:i,encoding:r,isBuf:n,callback:a,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else A(e,t,!1,s,i,r,a);return u}function A(e,t,n,i,r,a,o){t.writelen=i,t.writecb=o,t.writing=!0,t.sync=!0,n?e._writev(r,t.onwrite):e._write(r,a,t.onwrite),t.sync=!1}function x(e,t,n,i,a){--t.pendingcb,n?(r.nextTick(a,i),r.nextTick(R,e,t),e._writableState.errorEmitted=!0,e.emit("error",i)):(a(i),e._writableState.errorEmitted=!0,e.emit("error",i),R(e,t))}function _(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function I(e,t){var n=e._writableState,i=n.sync,r=n.writecb;if(_(n),t)x(e,n,i,t,r);else{var a=P(n);a||n.corked||n.bufferProcessing||!n.bufferedRequest||L(e,n),i?s(k,e,n,a,r):k(e,n,a,r)}}function k(e,t,n,i){n||C(e,t),t.pendingcb--,i(),R(e,t)}function C(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function L(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var i=t.bufferedRequestCount,r=new Array(i),o=t.corkedRequestsFree;o.entry=n;var s=0,u=!0;while(n)r[s]=n,n.isBuf||(u=!1),n=n.next,s+=1;r.allBuffers=u,A(e,t,!0,t.length,r,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new a(t),t.bufferedRequestCount=0}else{while(n){var l=n.chunk,c=n.encoding,d=n.callback,h=t.objectMode?1:l.length;if(A(e,t,!1,h,l,c,d),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function P(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function N(e,t){e._final((function(n){t.pendingcb--,n&&e.emit("error",n),t.prefinished=!0,e.emit("prefinish"),R(e,t)}))}function D(e,t){t.prefinished||t.finalCalled||("function"===typeof e._final?(t.pendingcb++,t.finalCalled=!0,r.nextTick(N,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function R(e,t){var n=P(t);return n&&(D(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),n}function M(e,t,n){t.ending=!0,R(e,t),n&&(t.finished?r.nextTick(n):e.once("finish",n)),t.ended=!0,e.writable=!1}function U(e,t,n){var i=e.entry;e.entry=null;while(i){var r=i.callback;t.pendingcb--,r(n),i=i.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}u.inherits(b,c),y.prototype.getBuffer=function(){var e=this.bufferedRequest,t=[];while(e)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(y.prototype,"buffer",{get:l.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]?(g=Function.prototype[Symbol.hasInstance],Object.defineProperty(b,Symbol.hasInstance,{value:function(e){return!!g.call(this,e)||this===b&&(e&&e._writableState instanceof y)}})):g=function(e){return e instanceof this},b.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},b.prototype.write=function(e,t,n){var i=this._writableState,r=!1,a=!i.objectMode&&p(e);return a&&!d.isBuffer(e)&&(e=f(e)),"function"===typeof t&&(n=t,t=null),a?t="buffer":t||(t=i.defaultEncoding),"function"!==typeof n&&(n=v),i.ended?T(this,n):(a||E(this,i,e,n))&&(i.pendingcb++,r=S(this,i,a,e,t,n)),r},b.prototype.cork=function(){var e=this._writableState;e.corked++},b.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||L(this,e))},b.prototype.setDefaultEncoding=function(e){if("string"===typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(b.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),b.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},b.prototype._writev=null,b.prototype.end=function(e,t,n){var i=this._writableState;"function"===typeof e?(n=e,e=null,t=null):"function"===typeof t&&(n=t,t=null),null!==e&&void 0!==e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||M(this,i,n)},Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),b.prototype.destroy=m.destroy,b.prototype._undestroy=m.undestroy,b.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,n("4362"),n("c8ba"))},e372:function(e,t,n){t=e.exports=n("ad71"),t.Stream=t,t.Readable=t,t.Writable=n("dc14"),t.Duplex=n("b19a"),t.Transform=n("27bf"),t.PassThrough=n("780f")},e3db:function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},e95f:function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,r=t.attrs;return[n("span",e._g(e._b({},"span",r,!1),i),[e._t("default"),e._v(" "+e._s(e.timeAgo)+" ")],2)]}}],null,!0)},[n("span",[e._v(e._s(e.formattedDate))])])},r=[],a=n("40d3"),o={name:"ExpandableDate",props:["date"],computed:{timeAgo(){return a["a"].timeAgo(this.date)},formattedDate(){return a["a"].formatFullDate(this.date)}}},s=o,u=n("2877"),l=n("6544"),c=n.n(l),d=(n("9734"),n("4ad4")),h=n("a9ad"),f=n("16b7"),p=n("b848"),g=n("f573"),m=n("f2e7"),v=n("80d2"),y=n("d9bd"),b=n("58df"),T=Object(b["a"])(h["a"],f["a"],p["a"],g["a"],m["a"]).extend({name:"v-tooltip",props:{closeDelay:{type:[Number,String],default:0},disabled:Boolean,openDelay:{type:[Number,String],default:0},openOnHover:{type:Boolean,default:!0},tag:{type:String,default:"span"},transition:String},data:()=>({calculatedMinWidth:0,closeDependents:!1}),computed:{calculatedLeft(){const{activator:e,content:t}=this.dimensions,n=!this.bottom&&!this.left&&!this.top&&!this.right,i=!1!==this.attach?e.offsetLeft:e.left;let r=0;return this.top||this.bottom||n?r=i+e.width/2-t.width/2:(this.left||this.right)&&(r=i+(this.right?e.width:-t.width)+(this.right?10:-10)),this.nudgeLeft&&(r-=parseInt(this.nudgeLeft)),this.nudgeRight&&(r+=parseInt(this.nudgeRight)),this.calcXOverflow(r,this.dimensions.content.width)+"px"},calculatedTop(){const{activator:e,content:t}=this.dimensions,n=!1!==this.attach?e.offsetTop:e.top;let i=0;return this.top||this.bottom?i=n+(this.bottom?e.height:-t.height)+(this.bottom?10:-10):(this.left||this.right)&&(i=n+e.height/2-t.height/2),this.nudgeTop&&(i-=parseInt(this.nudgeTop)),this.nudgeBottom&&(i+=parseInt(this.nudgeBottom)),!1===this.attach&&(i+=this.pageYOffset),this.calcYOverflow(i)+"px"},classes(){return{"v-tooltip--top":this.top,"v-tooltip--right":this.right,"v-tooltip--bottom":this.bottom,"v-tooltip--left":this.left,"v-tooltip--attached":""===this.attach||!0===this.attach||"attach"===this.attach}},computedTransition(){return this.transition?this.transition:this.isActive?"scale-transition":"fade-transition"},offsetY(){return this.top||this.bottom},offsetX(){return this.left||this.right},styles(){return{left:this.calculatedLeft,maxWidth:Object(v["h"])(this.maxWidth),minWidth:Object(v["h"])(this.minWidth),top:this.calculatedTop,zIndex:this.zIndex||this.activeZIndex}}},beforeMount(){this.$nextTick(()=>{this.value&&this.callActivate()})},mounted(){"v-slot"===Object(v["t"])(this,"activator",!0)&&Object(y["b"])("v-tooltip's activator slot must be bound, try '<template #activator=\"data\"><v-btn v-on=\"data.on>'",this)},methods:{activate(){this.updateDimensions(),requestAnimationFrame(this.startTransition)},deactivate(){this.runDelay("close")},genActivatorListeners(){const e=d["a"].options.methods.genActivatorListeners.call(this);return e.focus=e=>{this.getActivator(e),this.runDelay("open")},e.blur=e=>{this.getActivator(e),this.runDelay("close")},e.keydown=e=>{e.keyCode===v["x"].esc&&(this.getActivator(e),this.runDelay("close"))},e},genActivatorAttributes(){return{"aria-haspopup":!0,"aria-expanded":String(this.isActive)}},genTransition(){const e=this.genContent();return this.computedTransition?this.$createElement("transition",{props:{name:this.computedTransition}},[e]):e},genContent(){return this.$createElement("div",this.setBackgroundColor(this.color,{staticClass:"v-tooltip__content",class:{[this.contentClass]:!0,menuable__content__active:this.isActive,"v-tooltip__content--fixed":this.activatorFixed},style:this.styles,attrs:this.getScopeIdAttrs(),directives:[{name:"show",value:this.isContentActive}],ref:"content"}),this.getContentSlot())}},render(e){return e(this.tag,{staticClass:"v-tooltip",class:this.classes},[this.showLazyContent(()=>[this.genTransition()]),this.genActivator()])}}),E=Object(u["a"])(s,i,r,!1,null,null,null);t["a"]=E.exports;c()(E,{VTooltip:T})},e9e4:function(e,t,n){
/*! @name mux.js @version 5.14.1 @license Apache-2.0 */
(function(t,n){e.exports=n()})(0,(function(){"use strict";var e=function(){this.init=function(){var e={};this.on=function(t,n){e[t]||(e[t]=[]),e[t]=e[t].concat(n)},this.off=function(t,n){var i;return!!e[t]&&(i=e[t].indexOf(n),e[t]=e[t].slice(),e[t].splice(i,1),i>-1)},this.trigger=function(t){var n,i,r,a;if(n=e[t],n)if(2===arguments.length)for(r=n.length,i=0;i<r;++i)n[i].call(this,arguments[1]);else{for(a=[],i=arguments.length,i=1;i<arguments.length;++i)a.push(arguments[i]);for(r=n.length,i=0;i<r;++i)n[i].apply(this,a)}},this.dispose=function(){e={}}}};e.prototype.pipe=function(e){return this.on("data",(function(t){e.push(t)})),this.on("done",(function(t){e.flush(t)})),this.on("partialdone",(function(t){e.partialFlush(t)})),this.on("endedtimeline",(function(t){e.endTimeline(t)})),this.on("reset",(function(t){e.reset(t)})),e},e.prototype.push=function(e){this.trigger("data",e)},e.prototype.flush=function(e){this.trigger("done",e)},e.prototype.partialFlush=function(e){this.trigger("partialdone",e)},e.prototype.endTimeline=function(e){this.trigger("endedtimeline",e)},e.prototype.reset=function(e){this.trigger("reset",e)};var t,n,i,r,a,o,s,u=e,l=9e4;t=function(e){return e*l},n=function(e,t){return e*t},i=function(e){return e/l},r=function(e,t){return e/t},a=function(e,n){return t(r(e,n))},o=function(e,t){return n(i(e),t)},s=function(e,t,n){return i(n?e:e-t)};var c,d={ONE_SECOND_IN_TS:l,secondsToVideoTs:t,secondsToAudioTs:n,videoTsToSeconds:i,audioTsToSeconds:r,audioTsToVideoTs:a,videoTsToAudioTs:o,metadataTsToSeconds:s},h=d.ONE_SECOND_IN_TS,f=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];c=function(e){var t,n=0;c.prototype.init.call(this),this.skipWarn_=function(e,t){this.trigger("log",{level:"warn",message:"adts skiping bytes "+e+" to "+t+" in frame "+n+" outside syncword"})},this.push=function(i){var r,a,o,s,u,l=0;if(e||(n=0),"audio"===i.type){var c;t&&t.length?(o=t,t=new Uint8Array(o.byteLength+i.data.byteLength),t.set(o),t.set(i.data,o.byteLength)):t=i.data;while(l+7<t.length)if(255===t[l]&&240===(246&t[l+1])){if("number"===typeof c&&(this.skipWarn_(c,l),c=null),a=2*(1&~t[l+1]),r=(3&t[l+3])<<11|t[l+4]<<3|(224&t[l+5])>>5,s=1024*(1+(3&t[l+6])),u=s*h/f[(60&t[l+2])>>>2],t.byteLength-l<r)break;this.trigger("data",{pts:i.pts+n*u,dts:i.dts+n*u,sampleCount:s,audioobjecttype:1+(t[l+2]>>>6&3),channelcount:(1&t[l+2])<<2|(192&t[l+3])>>>6,samplerate:f[(60&t[l+2])>>>2],samplingfrequencyindex:(60&t[l+2])>>>2,samplesize:16,data:t.subarray(l+7+a,l+r)}),n++,l+=r}else"number"!==typeof c&&(c=l),l++;"number"===typeof c&&(this.skipWarn_(c,l),c=null),t=t.subarray(l)}},this.flush=function(){n=0,this.trigger("done")},this.reset=function(){t=void 0,this.trigger("reset")},this.endTimeline=function(){t=void 0,this.trigger("endedtimeline")}},c.prototype=new u;var p,g=c;p=function(e){var t=e.byteLength,n=0,i=0;this.length=function(){return 8*t},this.bitsAvailable=function(){return 8*t+i},this.loadWord=function(){var r=e.byteLength-t,a=new Uint8Array(4),o=Math.min(4,t);if(0===o)throw new Error("no bytes available");a.set(e.subarray(r,r+o)),n=new DataView(a.buffer).getUint32(0),i=8*o,t-=o},this.skipBits=function(e){var r;i>e?(n<<=e,i-=e):(e-=i,r=Math.floor(e/8),e-=8*r,t-=r,this.loadWord(),n<<=e,i-=e)},this.readBits=function(e){var r=Math.min(i,e),a=n>>>32-r;return i-=r,i>0?n<<=r:t>0&&this.loadWord(),r=e-r,r>0?a<<r|this.readBits(r):a},this.skipLeadingZeros=function(){var e;for(e=0;e<i;++e)if(0!==(n&2147483648>>>e))return n<<=e,i-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var m,v,y,b=p;v=function(){var e,t,n=0;v.prototype.init.call(this),this.push=function(i){var r;t?(r=new Uint8Array(t.byteLength+i.data.byteLength),r.set(t),r.set(i.data,t.byteLength),t=r):t=i.data;for(var a=t.byteLength;n<a-3;n++)if(1===t[n+2]){e=n+5;break}while(e<a)switch(t[e]){case 0:if(0!==t[e-1]){e+=2;break}if(0!==t[e-2]){e++;break}n+3!==e-2&&this.trigger("data",t.subarray(n+3,e-2));do{e++}while(1!==t[e]&&e<a);n=e-2,e+=3;break;case 1:if(0!==t[e-1]||0!==t[e-2]){e+=3;break}this.trigger("data",t.subarray(n+3,e-2)),n=e-2,e+=3;break;default:e+=3;break}t=t.subarray(n),e-=n,n=0},this.reset=function(){t=null,n=0,this.trigger("reset")},this.flush=function(){t&&t.byteLength>3&&this.trigger("data",t.subarray(n+3)),t=null,n=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},v.prototype=new u,y={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},m=function(){var e,t,n,i,r,a,o,s=new v;m.prototype.init.call(this),e=this,this.push=function(e){"video"===e.type&&(t=e.trackId,n=e.pts,i=e.dts,s.push(e))},s.on("data",(function(o){var s={trackId:t,pts:n,dts:i,data:o,nalUnitTypeCode:31&o[0]};switch(s.nalUnitTypeCode){case 5:s.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:s.nalUnitType="sei_rbsp",s.escapedRBSP=r(o.subarray(1));break;case 7:s.nalUnitType="seq_parameter_set_rbsp",s.escapedRBSP=r(o.subarray(1)),s.config=a(s.escapedRBSP);break;case 8:s.nalUnitType="pic_parameter_set_rbsp";break;case 9:s.nalUnitType="access_unit_delimiter_rbsp";break}e.trigger("data",s)})),s.on("done",(function(){e.trigger("done")})),s.on("partialdone",(function(){e.trigger("partialdone")})),s.on("reset",(function(){e.trigger("reset")})),s.on("endedtimeline",(function(){e.trigger("endedtimeline")})),this.flush=function(){s.flush()},this.partialFlush=function(){s.partialFlush()},this.reset=function(){s.reset()},this.endTimeline=function(){s.endTimeline()},o=function(e,t){var n,i,r=8,a=8;for(n=0;n<e;n++)0!==a&&(i=t.readExpGolomb(),a=(r+i+256)%256),r=0===a?r:a},r=function(e){var t,n,i=e.byteLength,r=[],a=1;while(a<i-2)0===e[a]&&0===e[a+1]&&3===e[a+2]?(r.push(a+2),a+=2):a++;if(0===r.length)return e;t=i-r.length,n=new Uint8Array(t);var o=0;for(a=0;a<t;o++,a++)o===r[0]&&(o++,r.shift()),n[a]=e[o];return n},a=function(e){var t,n,i,r,a,s,u,l,c,d,h,f,p,g=0,m=0,v=0,T=0,E=[1,1];if(t=new b(e),n=t.readUnsignedByte(),r=t.readUnsignedByte(),i=t.readUnsignedByte(),t.skipUnsignedExpGolomb(),y[n]&&(a=t.readUnsignedExpGolomb(),3===a&&t.skipBits(1),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(1),t.readBoolean()))for(h=3!==a?8:12,p=0;p<h;p++)t.readBoolean()&&o(p<6?16:64,t);if(t.skipUnsignedExpGolomb(),s=t.readUnsignedExpGolomb(),0===s)t.readUnsignedExpGolomb();else if(1===s)for(t.skipBits(1),t.skipExpGolomb(),t.skipExpGolomb(),u=t.readUnsignedExpGolomb(),p=0;p<u;p++)t.skipExpGolomb();if(t.skipUnsignedExpGolomb(),t.skipBits(1),l=t.readUnsignedExpGolomb(),c=t.readUnsignedExpGolomb(),d=t.readBits(1),0===d&&t.skipBits(1),t.skipBits(1),t.readBoolean()&&(g=t.readUnsignedExpGolomb(),m=t.readUnsignedExpGolomb(),v=t.readUnsignedExpGolomb(),T=t.readUnsignedExpGolomb()),t.readBoolean()&&t.readBoolean()){switch(f=t.readUnsignedByte(),f){case 1:E=[1,1];break;case 2:E=[12,11];break;case 3:E=[10,11];break;case 4:E=[16,11];break;case 5:E=[40,33];break;case 6:E=[24,11];break;case 7:E=[20,11];break;case 8:E=[32,11];break;case 9:E=[80,33];break;case 10:E=[18,11];break;case 11:E=[15,11];break;case 12:E=[64,33];break;case 13:E=[160,99];break;case 14:E=[4,3];break;case 15:E=[3,2];break;case 16:E=[2,1];break;case 255:E=[t.readUnsignedByte()<<8|t.readUnsignedByte(),t.readUnsignedByte()<<8|t.readUnsignedByte()];break}E&&(E[0],E[1])}return{profileIdc:n,levelIdc:i,profileCompatibility:r,width:16*(l+1)-2*g-2*m,height:(2-d)*(c+1)*16-2*v-2*T,sarRatio:E}}},m.prototype=new u;var T,E,w,S,A,x,_,I,k,C,L,P,N,D,R,M,U,O,F,j,B,G,V,K,z,H,W,q,Y,X,$,J,Q,Z,ee,te,ne={H264Stream:m,NalByteStream:v},ie={Adts:g,h264:ne},re=Math.pow(2,32)-1;(function(){var e;if(V={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!==typeof Uint8Array){for(e in V)V.hasOwnProperty(e)&&(V[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);K=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),H=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),z=new Uint8Array([0,0,0,1]),W=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),q=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),Y={video:W,audio:q},J=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),$=new Uint8Array([0,0,0,0,0,0,0,0]),Q=new Uint8Array([0,0,0,0,0,0,0,0]),Z=Q,ee=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),te=Q,X=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),T=function(e){var t,n,i,r=[],a=0;for(t=1;t<arguments.length;t++)r.push(arguments[t]);t=r.length;while(t--)a+=r[t].byteLength;for(n=new Uint8Array(a+8),i=new DataView(n.buffer,n.byteOffset,n.byteLength),i.setUint32(0,n.byteLength),n.set(e,4),t=0,a=8;t<r.length;t++)n.set(r[t],a),a+=r[t].byteLength;return n},E=function(){return T(V.dinf,T(V.dref,J))},w=function(e){return T(V.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))},S=function(){return T(V.ftyp,K,z,K,H)},M=function(e){return T(V.hdlr,Y[e])},A=function(e){return T(V.mdat,e)},R=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.samplerate&&(t[12]=e.samplerate>>>24&255,t[13]=e.samplerate>>>16&255,t[14]=e.samplerate>>>8&255,t[15]=255&e.samplerate),T(V.mdhd,t)},D=function(e){return T(V.mdia,R(e),M(e.type),_(e))},x=function(e){return T(V.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},_=function(e){return T(V.minf,"video"===e.type?T(V.vmhd,X):T(V.smhd,$),E(),O(e))},I=function(e,t){var n=[],i=t.length;while(i--)n[i]=j(t[i]);return T.apply(null,[V.moof,x(e)].concat(n))},k=function(e){var t=e.length,n=[];while(t--)n[t]=P(e[t]);return T.apply(null,[V.moov,L(4294967295)].concat(n).concat(C(e)))},C=function(e){var t=e.length,n=[];while(t--)n[t]=B(e[t]);return T.apply(null,[V.mvex].concat(n))},L=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return T(V.mvhd,t)},U=function(e){var t,n,i=e.samples||[],r=new Uint8Array(4+i.length);for(n=0;n<i.length;n++)t=i[n].flags,r[n+4]=t.dependsOn<<4|t.isDependedOn<<2|t.hasRedundancy;return T(V.sdtp,r)},O=function(e){return T(V.stbl,F(e),T(V.stts,te),T(V.stsc,Z),T(V.stsz,ee),T(V.stco,Q))},function(){var e,t;F=function(n){return T(V.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===n.type?e(n):t(n))},e=function(e){var t,n,i=e.sps||[],r=e.pps||[],a=[],o=[];for(t=0;t<i.length;t++)a.push((65280&i[t].byteLength)>>>8),a.push(255&i[t].byteLength),a=a.concat(Array.prototype.slice.call(i[t]));for(t=0;t<r.length;t++)o.push((65280&r[t].byteLength)>>>8),o.push(255&r[t].byteLength),o=o.concat(Array.prototype.slice.call(r[t]));if(n=[V.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),T(V.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([i.length],a,[r.length],o))),T(V.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],e.sarRatio){var s=e.sarRatio[0],u=e.sarRatio[1];n.push(T(V.pasp,new Uint8Array([(4278190080&s)>>24,(16711680&s)>>16,(65280&s)>>8,255&s,(4278190080&u)>>24,(16711680&u)>>16,(65280&u)>>8,255&u])))}return T.apply(null,n)},t=function(e){return T(V.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),w(e))}}(),N=function(e){var t=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]);return T(V.tkhd,t)},j=function(e){var t,n,i,r,a,o,s;return t=T(V.tfhd,new Uint8Array([0,0,0,58,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),o=Math.floor(e.baseMediaDecodeTime/(re+1)),s=Math.floor(e.baseMediaDecodeTime%(re+1)),n=T(V.tfdt,new Uint8Array([1,0,0,0,o>>>24&255,o>>>16&255,o>>>8&255,255&o,s>>>24&255,s>>>16&255,s>>>8&255,255&s])),a=92,"audio"===e.type?(i=G(e,a),T(V.traf,t,n,i)):(r=U(e),i=G(e,r.length+a),T(V.traf,t,n,i,r))},P=function(e){return e.duration=e.duration||4294967295,T(V.trak,N(e),D(e))},B=function(e){var t=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==e.type&&(t[t.length-1]=0),T(V.trex,t)},function(){var e,t,n;n=function(e,t){var n=0,i=0,r=0,a=0;return e.length&&(void 0!==e[0].duration&&(n=1),void 0!==e[0].size&&(i=2),void 0!==e[0].flags&&(r=4),void 0!==e[0].compositionTimeOffset&&(a=8)),[0,0,n|i|r|a,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},t=function(e,t){var i,r,a,o,s,u;for(o=e.samples||[],t+=20+16*o.length,a=n(o,t),r=new Uint8Array(a.length+16*o.length),r.set(a),i=a.length,u=0;u<o.length;u++)s=o[u],r[i++]=(4278190080&s.duration)>>>24,r[i++]=(16711680&s.duration)>>>16,r[i++]=(65280&s.duration)>>>8,r[i++]=255&s.duration,r[i++]=(4278190080&s.size)>>>24,r[i++]=(16711680&s.size)>>>16,r[i++]=(65280&s.size)>>>8,r[i++]=255&s.size,r[i++]=s.flags.isLeading<<2|s.flags.dependsOn,r[i++]=s.flags.isDependedOn<<6|s.flags.hasRedundancy<<4|s.flags.paddingValue<<1|s.flags.isNonSyncSample,r[i++]=61440&s.flags.degradationPriority,r[i++]=15&s.flags.degradationPriority,r[i++]=(4278190080&s.compositionTimeOffset)>>>24,r[i++]=(16711680&s.compositionTimeOffset)>>>16,r[i++]=(65280&s.compositionTimeOffset)>>>8,r[i++]=255&s.compositionTimeOffset;return T(V.trun,r)},e=function(e,t){var i,r,a,o,s,u;for(o=e.samples||[],t+=20+8*o.length,a=n(o,t),i=new Uint8Array(a.length+8*o.length),i.set(a),r=a.length,u=0;u<o.length;u++)s=o[u],i[r++]=(4278190080&s.duration)>>>24,i[r++]=(16711680&s.duration)>>>16,i[r++]=(65280&s.duration)>>>8,i[r++]=255&s.duration,i[r++]=(4278190080&s.size)>>>24,i[r++]=(16711680&s.size)>>>16,i[r++]=(65280&s.size)>>>8,i[r++]=255&s.size;return T(V.trun,i)},G=function(n,i){return"audio"===n.type?e(n,i):t(n,i)}}();var ae,oe,se,ue,le,ce,de={ftyp:S,mdat:A,moof:I,moov:k,initSegment:function(e){var t,n=S(),i=k(e);return t=new Uint8Array(n.byteLength+i.byteLength),t.set(n),t.set(i,n.byteLength),t}},he=function(e){return e>>>0},fe=function(e){return("00"+e.toString(16)).slice(-2)},pe={toUnsigned:he,toHexString:fe},ge=function(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),t+=String.fromCharCode(e[2]),t+=String.fromCharCode(e[3]),t},me=ge,ve=pe.toUnsigned,ye=function e(t,n){var i,r,a,o,s,u=[];if(!n.length)return null;for(i=0;i<t.byteLength;)r=ve(t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3]),a=me(t.subarray(i+4,i+8)),o=r>1?i+r:t.byteLength,a===n[0]&&(1===n.length?u.push(t.subarray(i+8,o)):(s=e(t.subarray(i+8,o),n.slice(1)),s.length&&(u=u.concat(s)))),i=o;return u},be=ye,Te=function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:n.getUint32(4)},r=1&i.flags[2],a=2&i.flags[2],o=8&i.flags[2],s=16&i.flags[2],u=32&i.flags[2],l=65536&i.flags[0],c=131072&i.flags[0];return t=8,r&&(t+=4,i.baseDataOffset=n.getUint32(12),t+=4),a&&(i.sampleDescriptionIndex=n.getUint32(t),t+=4),o&&(i.defaultSampleDuration=n.getUint32(t),t+=4),s&&(i.defaultSampleSize=n.getUint32(t),t+=4),u&&(i.defaultSampleFlags=n.getUint32(t)),l&&(i.durationIsEmpty=!0),!r&&c&&(i.baseDataOffsetIsMoof=!0),i},Ee=Te,we=function(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}},Se=we,Ae=function(e){var t,n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},i=new DataView(e.buffer,e.byteOffset,e.byteLength),r=1&n.flags[2],a=4&n.flags[2],o=1&n.flags[1],s=2&n.flags[1],u=4&n.flags[1],l=8&n.flags[1],c=i.getUint32(4),d=8;r&&(n.dataOffset=i.getInt32(d),d+=4),a&&c&&(t={flags:Se(e.subarray(d,d+4))},d+=4,o&&(t.duration=i.getUint32(d),d+=4),s&&(t.size=i.getUint32(d),d+=4),l&&(1===n.version?t.compositionTimeOffset=i.getInt32(d):t.compositionTimeOffset=i.getUint32(d),d+=4),n.samples.push(t),c--);while(c--)t={},o&&(t.duration=i.getUint32(d),d+=4),s&&(t.size=i.getUint32(d),d+=4),u&&(t.flags=Se(e.subarray(d,d+4)),d+=4),l&&(1===n.version?t.compositionTimeOffset=i.getInt32(d):t.compositionTimeOffset=i.getUint32(d),d+=4),n.samples.push(t);return n},xe=Ae,_e=pe.toUnsigned,Ie=function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4)),baseMediaDecodeTime:_e(e[4]<<24|e[5]<<16|e[6]<<8|e[7])};return 1===t.version&&(t.baseMediaDecodeTime*=Math.pow(2,32),t.baseMediaDecodeTime+=_e(e[8]<<24|e[9]<<16|e[10]<<8|e[11])),t},ke=Ie,Ce=pe.toUnsigned,Le=pe.toHexString;ae=function(e){var t={},n=be(e,["moov","trak"]);return n.reduce((function(e,t){var n,i,r,a,o;return n=be(t,["tkhd"])[0],n?(i=n[0],r=0===i?12:20,a=Ce(n[r]<<24|n[r+1]<<16|n[r+2]<<8|n[r+3]),o=be(t,["mdia","mdhd"])[0],o?(i=o[0],r=0===i?12:20,e[a]=Ce(o[r]<<24|o[r+1]<<16|o[r+2]<<8|o[r+3]),e):null):null}),t)},oe=function(e,t){var n,i,r;return n=be(t,["moof","traf"]),i=[].concat.apply([],n.map((function(t){return be(t,["tfhd"]).map((function(n){var i,r,a;return i=Ce(n[4]<<24|n[5]<<16|n[6]<<8|n[7]),r=e[i]||9e4,a=be(t,["tfdt"]).map((function(e){var t,n;return t=e[0],n=Ce(e[4]<<24|e[5]<<16|e[6]<<8|e[7]),1===t&&(n*=Math.pow(2,32),n+=Ce(e[8]<<24|e[9]<<16|e[10]<<8|e[11])),n}))[0],a="number"!==typeof a||isNaN(a)?1/0:a,a/r}))}))),r=Math.min.apply(null,i),isFinite(r)?r:0},se=function(e,t){var n,i=be(t,["moof","traf"]),r=0,a=0;if(i&&i.length){var o=be(i[0],["tfhd"])[0],s=be(i[0],["trun"])[0],u=be(i[0],["tfdt"])[0];if(o){var l=Ee(o);n=l.trackId}if(u){var c=ke(u);r=c.baseMediaDecodeTime}if(s){var d=xe(s);d.samples&&d.samples.length&&(a=d.samples[0].compositionTimeOffset||0)}}var h=e[n]||9e4;return(r+a)/h},ue=function(e){var t=be(e,["moov","trak"]),n=[];return t.forEach((function(e){var t=be(e,["mdia","hdlr"]),i=be(e,["tkhd"]);t.forEach((function(e,t){var r,a,o,s=me(e.subarray(8,12)),u=i[t];"vide"===s&&(r=new DataView(u.buffer,u.byteOffset,u.byteLength),a=r.getUint8(0),o=0===a?r.getUint32(12):r.getUint32(20),n.push(o))}))})),n},ce=function(e){var t=e[0],n=0===t?12:20;return Ce(e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3])},le=function(e){var t=be(e,["moov","trak"]),n=[];return t.forEach((function(e){var t,i,r={},a=be(e,["tkhd"])[0];a&&(t=new DataView(a.buffer,a.byteOffset,a.byteLength),i=t.getUint8(0),r.id=0===i?t.getUint32(12):t.getUint32(20));var o=be(e,["mdia","hdlr"])[0];if(o){var s=me(o.subarray(8,12));r.type="vide"===s?"video":"soun"===s?"audio":s}var u=be(e,["mdia","minf","stbl","stsd"])[0];if(u){var l=u.subarray(8);r.codec=me(l.subarray(4,8));var c,d,h=be(l,[r.codec])[0];h&&(/^[asm]vc[1-9]$/i.test(r.codec)?(c=h.subarray(78),d=me(c.subarray(4,8)),"avcC"===d&&c.length>11?(r.codec+=".",r.codec+=Le(c[9]),r.codec+=Le(c[10]),r.codec+=Le(c[11])):r.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(r.codec)?(c=h.subarray(28),d=me(c.subarray(4,8)),"esds"===d&&c.length>20&&0!==c[19]?(r.codec+="."+Le(c[19]),r.codec+="."+Le(c[20]>>>2&63).replace(/^0/,"")):r.codec="mp4a.40.2"):r.codec=r.codec.toLowerCase())}var f=be(e,["mdia","mdhd"])[0];f&&(r.timescale=ce(f)),n.push(r)})),n};var Pe,Ne={findBox:be,parseType:me,timescale:ae,startTime:oe,compositionStartTime:se,videoTrackIds:ue,tracks:le,getTimescaleFromMediaHeader:ce},De=function(e){var t,n,i=[],r=[];for(r.byteLength=0,r.nalCount=0,r.duration=0,i.byteLength=0,t=0;t<e.length;t++)n=e[t],"access_unit_delimiter_rbsp"===n.nalUnitType?(i.length&&(i.duration=n.dts-i.dts,r.byteLength+=i.byteLength,r.nalCount+=i.length,r.duration+=i.duration,r.push(i)),i=[n],i.byteLength=n.data.byteLength,i.pts=n.pts,i.dts=n.dts):("slice_layer_without_partitioning_rbsp_idr"===n.nalUnitType&&(i.keyFrame=!0),i.duration=n.dts-i.dts,i.byteLength+=n.data.byteLength,i.push(n));return r.length&&(!i.duration||i.duration<=0)&&(i.duration=r[r.length-1].duration),r.byteLength+=i.byteLength,r.nalCount+=i.length,r.duration+=i.duration,r.push(i),r},Re=function(e){var t,n,i=[],r=[];for(i.byteLength=0,i.nalCount=0,i.duration=0,i.pts=e[0].pts,i.dts=e[0].dts,r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=e[0].pts,r.dts=e[0].dts,t=0;t<e.length;t++)n=e[t],n.keyFrame?(i.length&&(r.push(i),r.byteLength+=i.byteLength,r.nalCount+=i.nalCount,r.duration+=i.duration),i=[n],i.nalCount=n.length,i.byteLength=n.byteLength,i.pts=n.pts,i.dts=n.dts,i.duration=n.duration):(i.duration+=n.duration,i.nalCount+=n.length,i.byteLength+=n.byteLength,i.push(n));return r.length&&i.duration<=0&&(i.duration=r[r.length-1].duration),r.byteLength+=i.byteLength,r.nalCount+=i.nalCount,r.duration+=i.duration,r.push(i),r},Me=function(e){var t;return!e[0][0].keyFrame&&e.length>1&&(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[0][0].dts=t.dts,e[0][0].pts=t.pts,e[0][0].duration+=t.duration),e},Ue=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},Oe=function(e,t){var n=Ue();return n.dataOffset=t,n.compositionTimeOffset=e.pts-e.dts,n.duration=e.duration,n.size=4*e.length,n.size+=e.byteLength,e.keyFrame&&(n.flags.dependsOn=2,n.flags.isNonSyncSample=0),n},Fe=function(e,t){var n,i,r,a,o,s=t||0,u=[];for(n=0;n<e.length;n++)for(a=e[n],i=0;i<a.length;i++)o=a[i],r=Oe(o,s),s+=r.size,u.push(r);return u},je=function(e){var t,n,i,r,a,o,s=0,u=e.byteLength,l=e.nalCount,c=u+4*l,d=new Uint8Array(c),h=new DataView(d.buffer);for(t=0;t<e.length;t++)for(r=e[t],n=0;n<r.length;n++)for(a=r[n],i=0;i<a.length;i++)o=a[i],h.setUint32(s,o.data.byteLength),s+=4,d.set(o.data,s),s+=o.data.byteLength;return d},Be=function(e,t){var n,i=t||0,r=[];return n=Oe(e,i),r.push(n),r},Ge=function(e){var t,n,i=0,r=e.byteLength,a=e.length,o=r+4*a,s=new Uint8Array(o),u=new DataView(s.buffer);for(t=0;t<e.length;t++)n=e[t],u.setUint32(i,n.data.byteLength),i+=4,s.set(n.data,i),i+=n.data.byteLength;return s},Ve={groupNalsIntoFrames:De,groupFramesIntoGops:Re,extendFirstKeyFrame:Me,generateSampleTable:Fe,concatenateNalData:je,generateSampleTableForFrame:Be,concatenateNalDataForFrame:Ge},Ke=[33,16,5,32,164,27],ze=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],He=function(e){var t=[];while(e--)t.push(0);return t},We=function(e){return Object.keys(e).reduce((function(t,n){return t[n]=new Uint8Array(e[n].reduce((function(e,t){return e.concat(t)}),[])),t}),{})},qe=function(){if(!Pe){var e={96e3:[Ke,[227,64],He(154),[56]],88200:[Ke,[231],He(170),[56]],64e3:[Ke,[248,192],He(240),[56]],48e3:[Ke,[255,192],He(268),[55,148,128],He(54),[112]],44100:[Ke,[255,192],He(268),[55,163,128],He(84),[112]],32e3:[Ke,[255,192],He(268),[55,234],He(226),[112]],24e3:[Ke,[255,192],He(268),[55,255,128],He(268),[111,112],He(126),[224]],16e3:[Ke,[255,192],He(268),[55,255,128],He(268),[111,255],He(269),[223,108],He(195),[1,192]],12e3:[ze,He(268),[3,127,248],He(268),[6,255,240],He(268),[13,255,224],He(268),[27,253,128],He(259),[56]],11025:[ze,He(268),[3,127,248],He(268),[6,255,240],He(268),[13,255,224],He(268),[27,255,192],He(268),[55,175,128],He(108),[112]],8e3:[ze,He(268),[3,121,16],He(47),[7]]};Pe=We(e)}return Pe},Ye=function(e){var t,n,i=0;for(t=0;t<e.length;t++)n=e[t],i+=n.data.byteLength;return i},Xe=function(e,t,n,i){var r,a,o,s,u=0,l=0,c=0,h=0;if(t.length&&(r=d.audioTsToVideoTs(e.baseMediaDecodeTime,e.samplerate),u=Math.ceil(d.ONE_SECOND_IN_TS/(e.samplerate/1024)),n&&i&&(l=r-Math.max(n,i),c=Math.floor(l/u),h=c*u),!(c<1||h>d.ONE_SECOND_IN_TS/2))){for(a=qe()[e.samplerate],a||(a=t[0].data),o=0;o<c;o++)s=t[0],t.splice(0,0,{data:a,dts:s.dts-u,pts:s.pts-u});return e.baseMediaDecodeTime-=Math.floor(d.videoTsToAudioTs(h,e.samplerate)),h}},$e=function(e,t,n){return t.minSegmentDts>=n?e:(t.minSegmentDts=1/0,e.filter((function(e){return e.dts>=n&&(t.minSegmentDts=Math.min(t.minSegmentDts,e.dts),t.minSegmentPts=t.minSegmentDts,!0)})))},Je=function(e){var t,n,i=[];for(t=0;t<e.length;t++)n=e[t],i.push({size:n.data.byteLength,duration:1024});return i},Qe=function(e){var t,n,i=0,r=new Uint8Array(Ye(e));for(t=0;t<e.length;t++)n=e[t],r.set(n.data,i),i+=n.data.byteLength;return r},Ze={prefixWithSilence:Xe,trimAdtsFramesByEarliestDts:$e,generateSampleTable:Je,concatenateFrameData:Qe},et=d.ONE_SECOND_IN_TS,tt=function(e,t){"number"===typeof t.pts&&(void 0===e.timelineStartInfo.pts&&(e.timelineStartInfo.pts=t.pts),void 0===e.minSegmentPts?e.minSegmentPts=t.pts:e.minSegmentPts=Math.min(e.minSegmentPts,t.pts),void 0===e.maxSegmentPts?e.maxSegmentPts=t.pts:e.maxSegmentPts=Math.max(e.maxSegmentPts,t.pts)),"number"===typeof t.dts&&(void 0===e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=t.dts),void 0===e.minSegmentDts?e.minSegmentDts=t.dts:e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),void 0===e.maxSegmentDts?e.maxSegmentDts=t.dts:e.maxSegmentDts=Math.max(e.maxSegmentDts,t.dts))},nt=function(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts},it=function(e,t){var n,i,r=e.minSegmentDts;return t||(r-=e.timelineStartInfo.dts),n=e.timelineStartInfo.baseMediaDecodeTime,n+=r,n=Math.max(0,n),"audio"===e.type&&(i=e.samplerate/et,n*=i,n=Math.floor(n)),n},rt={clearDtsInfo:nt,calculateTrackBaseMediaDecodeTime:it,collectDtsInfo:tt},at=4,ot=128,st=function(e){var t=0,n={payloadType:-1,payloadSize:0},i=0,r=0;while(t<e.byteLength){if(e[t]===ot)break;while(255===e[t])i+=255,t++;i+=e[t++];while(255===e[t])r+=255,t++;if(r+=e[t++],!n.payload&&i===at){var a=String.fromCharCode(e[t+3],e[t+4],e[t+5],e[t+6]);if("GA94"===a){n.payloadType=i,n.payloadSize=r,n.payload=e.subarray(t,t+r);break}n.payload=void 0}t+=r,i=0,r=0}return n},ut=function(e){return 181!==e.payload[0]||49!==(e.payload[1]<<8|e.payload[2])||"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])||3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1)},lt=function(e,t){var n,i,r,a,o=[];if(!(64&t[0]))return o;for(i=31&t[0],n=0;n<i;n++)r=3*n,a={type:3&t[r+2],pts:e},4&t[r+2]&&(a.ccData=t[r+3]<<8|t[r+4],o.push(a));return o},ct=function(e){var t,n,i=e.byteLength,r=[],a=1;while(a<i-2)0===e[a]&&0===e[a+1]&&3===e[a+2]?(r.push(a+2),a+=2):a++;if(0===r.length)return e;t=i-r.length,n=new Uint8Array(t);var o=0;for(a=0;a<t;o++,a++)o===r[0]&&(o++,r.shift()),n[a]=e[o];return n},dt={parseSei:st,parseUserData:ut,parseCaptionPackets:lt,discardEmulationPreventionBytes:ct,USER_DATA_REGISTERED_ITU_T_T35:at},ht=function e(t){t=t||{},e.prototype.init.call(this),this.parse708captions_="boolean"!==typeof t.parse708captions||t.parse708captions,this.captionPackets_=[],this.ccStreams_=[new At(0,0),new At(0,1),new At(1,0),new At(1,1)],this.parse708captions_&&(this.cc708Stream_=new yt({captionServices:t.captionServices})),this.reset(),this.ccStreams_.forEach((function(e){e.on("data",this.trigger.bind(this,"data")),e.on("partialdone",this.trigger.bind(this,"partialdone")),e.on("done",this.trigger.bind(this,"done"))}),this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};ht.prototype=new u,ht.prototype.push=function(e){var t,n,i;if("sei_rbsp"===e.nalUnitType&&(t=dt.parseSei(e.escapedRBSP),t.payload&&t.payloadType===dt.USER_DATA_REGISTERED_ITU_T_T35&&(n=dt.parseUserData(t),n)))if(e.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));i=dt.parseCaptionPackets(e.pts,n),this.captionPackets_=this.captionPackets_.concat(i),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts}},ht.prototype.flushCCStreams=function(e){this.ccStreams_.forEach((function(t){return"flush"===e?t.flush():t.partialFlush()}),this)},ht.prototype.flushStream=function(e){this.captionPackets_.length?(this.captionPackets_.forEach((function(e,t){e.presortIndex=t})),this.captionPackets_.sort((function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts})),this.captionPackets_.forEach((function(e){e.type<2?this.dispatchCea608Packet(e):this.dispatchCea708Packet(e)}),this),this.captionPackets_.length=0,this.flushCCStreams(e)):this.flushCCStreams(e)},ht.prototype.flush=function(){return this.flushStream("flush")},ht.prototype.partialFlush=function(){return this.flushStream("partialFlush")},ht.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach((function(e){e.reset()}))},ht.prototype.dispatchCea608Packet=function(e){this.setsTextOrXDSActive(e)?this.activeCea608Channel_[e.type]=null:this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},ht.prototype.setsChannel1Active=function(e){return 4096===(30720&e.ccData)},ht.prototype.setsChannel2Active=function(e){return 6144===(30720&e.ccData)},ht.prototype.setsTextOrXDSActive=function(e){return 256===(28928&e.ccData)||4138===(30974&e.ccData)||6186===(30974&e.ccData)},ht.prototype.dispatchCea708Packet=function(e){this.parse708captions_&&this.cc708Stream_.push(e)};var ft={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},pt=function(e){var t=ft[e]||e;return 4096&e&&e===t?"":String.fromCharCode(t)},gt=function(e){return 32<=e&&e<=127||160<=e&&e<=255},mt=function(e){this.windowNum=e,this.reset()};mt.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},mt.prototype.getText=function(){return this.rows.join("\n")},mt.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},mt.prototype.newLine=function(e){this.rows.length>=this.virtualRowCount&&"function"===typeof this.beforeRowOverflow&&this.beforeRowOverflow(e),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);while(this.rows.length>this.virtualRowCount)this.rows.shift(),this.rowIdx--},mt.prototype.isEmpty=function(){return 0===this.rows.length||1===this.rows.length&&""===this.rows[0]},mt.prototype.addText=function(e){this.rows[this.rowIdx]+=e},mt.prototype.backspace=function(){if(!this.isEmpty()){var e=this.rows[this.rowIdx];this.rows[this.rowIdx]=e.substr(0,e.length-1)}};var vt=function(e,t,n){this.serviceNum=e,this.text="",this.currentWindow=new mt(-1),this.windows=[],this.stream=n,"string"===typeof t&&this.createTextDecoder(t)};vt.prototype.init=function(e,t){this.startPts=e;for(var n=0;n<8;n++)this.windows[n]=new mt(n),"function"===typeof t&&(this.windows[n].beforeRowOverflow=t)},vt.prototype.setCurrentWindow=function(e){this.currentWindow=this.windows[e]},vt.prototype.createTextDecoder=function(e){if("undefined"===typeof TextDecoder)this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(e)}catch(t){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+e+" encoding. "+t})}};var yt=function e(t){t=t||{},e.prototype.init.call(this);var n,i=this,r=t.captionServices||{},a={};Object.keys(r).forEach((function(e){n=r[e],/^SERVICE/.test(e)&&(a[e]=n.encoding)})),this.serviceEncodings=a,this.current708Packet=null,this.services={},this.push=function(e){3===e.type?(i.new708Packet(),i.add708Bytes(e)):(null===i.current708Packet&&i.new708Packet(),i.add708Bytes(e))}};yt.prototype=new u,yt.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},yt.prototype.add708Bytes=function(e){var t=e.ccData,n=t>>>8,i=255&t;this.current708Packet.ptsVals.push(e.pts),this.current708Packet.data.push(n),this.current708Packet.data.push(i)},yt.prototype.push708Packet=function(){var e=this.current708Packet,t=e.data,n=null,i=null,r=0,a=t[r++];for(e.seq=a>>6,e.sizeCode=63&a;r<t.length;r++)a=t[r++],n=a>>5,i=31&a,7===n&&i>0&&(a=t[r++],n=a),this.pushServiceBlock(n,r,i),i>0&&(r+=i-1)},yt.prototype.pushServiceBlock=function(e,t,n){var i,r=t,a=this.current708Packet.data,o=this.services[e];for(o||(o=this.initService(e,r));r<t+n&&r<a.length;r++)i=a[r],gt(i)?r=this.handleText(r,o):24===i?r=this.multiByteCharacter(r,o):16===i?r=this.extendedCommands(r,o):128<=i&&i<=135?r=this.setCurrentWindow(r,o):152<=i&&i<=159?r=this.defineWindow(r,o):136===i?r=this.clearWindows(r,o):140===i?r=this.deleteWindows(r,o):137===i?r=this.displayWindows(r,o):138===i?r=this.hideWindows(r,o):139===i?r=this.toggleWindows(r,o):151===i?r=this.setWindowAttributes(r,o):144===i?r=this.setPenAttributes(r,o):145===i?r=this.setPenColor(r,o):146===i?r=this.setPenLocation(r,o):143===i?o=this.reset(r,o):8===i?o.currentWindow.backspace():12===i?o.currentWindow.clearText():13===i?o.currentWindow.pendingNewLine=!0:14===i?o.currentWindow.clearText():141===i&&r++},yt.prototype.extendedCommands=function(e,t){var n=this.current708Packet.data,i=n[++e];return gt(i)&&(e=this.handleText(e,t,{isExtended:!0})),e},yt.prototype.getPts=function(e){return this.current708Packet.ptsVals[Math.floor(e/2)]},yt.prototype.initService=function(e,t){var n,i="SERVICE"+e,r=this;return i in this.serviceEncodings&&(n=this.serviceEncodings[i]),this.services[e]=new vt(e,n,r),this.services[e].init(this.getPts(t),(function(t){r.flushDisplayed(t,r.services[e])})),this.services[e]},yt.prototype.handleText=function(e,t,n){var i,r,a=n&&n.isExtended,o=n&&n.isMultiByte,s=this.current708Packet.data,u=a?4096:0,l=s[e],c=s[e+1],d=t.currentWindow;return t.textDecoder_&&!a?(o?(r=[l,c],e++):r=[l],i=t.textDecoder_.decode(new Uint8Array(r))):i=pt(u|l),d.pendingNewLine&&!d.isEmpty()&&d.newLine(this.getPts(e)),d.pendingNewLine=!1,d.addText(i),e},yt.prototype.multiByteCharacter=function(e,t){var n=this.current708Packet.data,i=n[e+1],r=n[e+2];return gt(i)&&gt(r)&&(e=this.handleText(++e,t,{isMultiByte:!0})),e},yt.prototype.setCurrentWindow=function(e,t){var n=this.current708Packet.data,i=n[e],r=7&i;return t.setCurrentWindow(r),e},yt.prototype.defineWindow=function(e,t){var n=this.current708Packet.data,i=n[e],r=7&i;t.setCurrentWindow(r);var a=t.currentWindow;return i=n[++e],a.visible=(32&i)>>5,a.rowLock=(16&i)>>4,a.columnLock=(8&i)>>3,a.priority=7&i,i=n[++e],a.relativePositioning=(128&i)>>7,a.anchorVertical=127&i,i=n[++e],a.anchorHorizontal=i,i=n[++e],a.anchorPoint=(240&i)>>4,a.rowCount=15&i,i=n[++e],a.columnCount=63&i,i=n[++e],a.windowStyle=(56&i)>>3,a.penStyle=7&i,a.virtualRowCount=a.rowCount+1,e},yt.prototype.setWindowAttributes=function(e,t){var n=this.current708Packet.data,i=n[e],r=t.currentWindow.winAttr;return i=n[++e],r.fillOpacity=(192&i)>>6,r.fillRed=(48&i)>>4,r.fillGreen=(12&i)>>2,r.fillBlue=3&i,i=n[++e],r.borderType=(192&i)>>6,r.borderRed=(48&i)>>4,r.borderGreen=(12&i)>>2,r.borderBlue=3&i,i=n[++e],r.borderType+=(128&i)>>5,r.wordWrap=(64&i)>>6,r.printDirection=(48&i)>>4,r.scrollDirection=(12&i)>>2,r.justify=3&i,i=n[++e],r.effectSpeed=(240&i)>>4,r.effectDirection=(12&i)>>2,r.displayEffect=3&i,e},yt.prototype.flushDisplayed=function(e,t){for(var n=[],i=0;i<8;i++)t.windows[i].visible&&!t.windows[i].isEmpty()&&n.push(t.windows[i].getText());t.endPts=e,t.text=n.join("\n\n"),this.pushCaption(t),t.startPts=e},yt.prototype.pushCaption=function(e){""!==e.text&&(this.trigger("data",{startPts:e.startPts,endPts:e.endPts,text:e.text,stream:"cc708_"+e.serviceNum}),e.text="",e.startPts=e.endPts)},yt.prototype.displayWindows=function(e,t){var n=this.current708Packet.data,i=n[++e],r=this.getPts(e);this.flushDisplayed(r,t);for(var a=0;a<8;a++)i&1<<a&&(t.windows[a].visible=1);return e},yt.prototype.hideWindows=function(e,t){var n=this.current708Packet.data,i=n[++e],r=this.getPts(e);this.flushDisplayed(r,t);for(var a=0;a<8;a++)i&1<<a&&(t.windows[a].visible=0);return e},yt.prototype.toggleWindows=function(e,t){var n=this.current708Packet.data,i=n[++e],r=this.getPts(e);this.flushDisplayed(r,t);for(var a=0;a<8;a++)i&1<<a&&(t.windows[a].visible^=1);return e},yt.prototype.clearWindows=function(e,t){var n=this.current708Packet.data,i=n[++e],r=this.getPts(e);this.flushDisplayed(r,t);for(var a=0;a<8;a++)i&1<<a&&t.windows[a].clearText();return e},yt.prototype.deleteWindows=function(e,t){var n=this.current708Packet.data,i=n[++e],r=this.getPts(e);this.flushDisplayed(r,t);for(var a=0;a<8;a++)i&1<<a&&t.windows[a].reset();return e},yt.prototype.setPenAttributes=function(e,t){var n=this.current708Packet.data,i=n[e],r=t.currentWindow.penAttr;return i=n[++e],r.textTag=(240&i)>>4,r.offset=(12&i)>>2,r.penSize=3&i,i=n[++e],r.italics=(128&i)>>7,r.underline=(64&i)>>6,r.edgeType=(56&i)>>3,r.fontStyle=7&i,e},yt.prototype.setPenColor=function(e,t){var n=this.current708Packet.data,i=n[e],r=t.currentWindow.penColor;return i=n[++e],r.fgOpacity=(192&i)>>6,r.fgRed=(48&i)>>4,r.fgGreen=(12&i)>>2,r.fgBlue=3&i,i=n[++e],r.bgOpacity=(192&i)>>6,r.bgRed=(48&i)>>4,r.bgGreen=(12&i)>>2,r.bgBlue=3&i,i=n[++e],r.edgeRed=(48&i)>>4,r.edgeGreen=(12&i)>>2,r.edgeBlue=3&i,e},yt.prototype.setPenLocation=function(e,t){var n=this.current708Packet.data,i=n[e],r=t.currentWindow.penLoc;return t.currentWindow.pendingNewLine=!0,i=n[++e],r.row=15&i,i=n[++e],r.column=63&i,e},yt.prototype.reset=function(e,t){var n=this.getPts(e);return this.flushDisplayed(n,t),this.initService(t.serviceNum,e)};var bt={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Tt=function(e){return null===e?"":(e=bt[e]||e,String.fromCharCode(e))},Et=14,wt=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],St=function(){var e=[],t=Et+1;while(t--)e.push("");return e},At=function e(t,n){e.prototype.init.call(this),this.field_=t||0,this.dataChannel_=n||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,n,i,r,a;if(t=32639&e.ccData,t!==this.lastControlCode_){if(4096===(61440&t)?this.lastControlCode_=t:t!==this.PADDING_&&(this.lastControlCode_=null),i=t>>>8,r=255&t,t!==this.PADDING_)if(t===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(t===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(e.pts),this.flushDisplayed(e.pts),n=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=n,this.startPts_=e.pts;else if(t===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(e.pts);else if(t===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(e.pts);else if(t===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(e.pts);else if(t===this.CARRIAGE_RETURN_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts;else if(t===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(t===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(e.pts),this.displayed_=St();else if(t===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=St();else if(t===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(e.pts),this.displayed_=St()),this.mode_="paintOn",this.startPts_=e.pts;else if(this.isSpecialCharacter(i,r))i=(3&i)<<8,a=Tt(i|r),this[this.mode_](e.pts,a),this.column_++;else if(this.isExtCharacter(i,r))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),i=(3&i)<<8,a=Tt(i|r),this[this.mode_](e.pts,a),this.column_++;else if(this.isMidRowCode(i,r))this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14===(14&r)&&this.addFormatting(e.pts,["i"]),1===(1&r)&&this.addFormatting(e.pts,["u"]);else if(this.isOffsetControlCode(i,r))this.column_+=3&r;else if(this.isPAC(i,r)){var o=wt.indexOf(7968&t);"rollUp"===this.mode_&&(o-this.rollUpRows_+1<0&&(o=this.rollUpRows_-1),this.setRollUp(e.pts,o)),o!==this.row_&&(this.clearFormatting(e.pts),this.row_=o),1&r&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16===(16&t)&&(this.column_=4*((14&t)>>1)),this.isColorPAC(r)&&14===(14&r)&&this.addFormatting(e.pts,["i"])}else this.isNormalChar(i)&&(0===r&&(r=null),a=Tt(i),a+=Tt(r),this[this.mode_](e.pts,a),this.column_+=a.length)}else this.lastControlCode_=null}};At.prototype=new u,At.prototype.flushDisplayed=function(e){var t=this.displayed_.map((function(e,t){try{return e.trim()}catch(n){return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+t+"."}),""}}),this).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},At.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=St(),this.nonDisplayed_=St(),this.lastControlCode_=null,this.column_=0,this.row_=Et,this.rollUpRows_=2,this.formatting_=[]},At.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},At.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&t>=48&&t<=63},At.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&t>=32&&t<=63},At.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&t>=32&&t<=47},At.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&t>=33&&t<=35},At.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&t>=64&&t<=127},At.prototype.isColorPAC=function(e){return e>=64&&e<=79||e>=96&&e<=127},At.prototype.isNormalChar=function(e){return e>=32&&e<=127},At.prototype.setRollUp=function(e,t){if("rollUp"!==this.mode_&&(this.row_=Et,this.mode_="rollUp",this.flushDisplayed(e),this.nonDisplayed_=St(),this.displayed_=St()),void 0!==t&&t!==this.row_)for(var n=0;n<this.rollUpRows_;n++)this.displayed_[t-n]=this.displayed_[this.row_-n],this.displayed_[this.row_-n]="";void 0===t&&(t=this.row_),this.topRow_=t-this.rollUpRows_+1},At.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var n=t.reduce((function(e,t){return e+"<"+t+">"}),"");this[this.mode_](e,n)},At.prototype.clearFormatting=function(e){if(this.formatting_.length){var t=this.formatting_.reverse().reduce((function(e,t){return e+"</"+t+">"}),"");this.formatting_=[],this[this.mode_](e,t)}},At.prototype.popOn=function(e,t){var n=this.nonDisplayed_[this.row_];n+=t,this.nonDisplayed_[this.row_]=n},At.prototype.rollUp=function(e,t){var n=this.displayed_[this.row_];n+=t,this.displayed_[this.row_]=n},At.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.row_+1;e<Et+1;e++)this.displayed_[e]="";for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]=""},At.prototype.paintOn=function(e,t){var n=this.displayed_[this.row_];n+=t,this.displayed_[this.row_]=n};var xt={CaptionStream:ht,Cea608Stream:At,Cea708Stream:yt},_t={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},It=8589934592,kt=4294967296,Ct="shared",Lt=function(e,t){var n=1;e>t&&(n=-1);while(Math.abs(t-e)>kt)e+=n*It;return e},Pt=function e(t){var n,i;e.prototype.init.call(this),this.type_=t||Ct,this.push=function(e){this.type_!==Ct&&e.type!==this.type_||(void 0===i&&(i=e.dts),e.dts=Lt(e.dts,i),e.pts=Lt(e.pts,i),n=e.dts,this.trigger("data",e))},this.flush=function(){i=n,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){i=void 0,n=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};Pt.prototype=new u;var Nt,Dt={TimestampRolloverStream:Pt,handleRollover:Lt},Rt=function(e,t,n){var i,r="";for(i=t;i<n;i++)r+="%"+("00"+e[i].toString(16)).slice(-2);return r},Mt=function(e,t,n){return decodeURIComponent(Rt(e,t,n))},Ut=function(e,t,n){return unescape(Rt(e,t,n))},Ot=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},Ft={TXXX:function(e){var t;if(3===e.data[0]){for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=Mt(e.data,1,t),e.value=Mt(e.data,t+1,e.data.length).replace(/\0*$/,"");break}e.data=e.value}},WXXX:function(e){var t;if(3===e.data[0])for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=Mt(e.data,1,t),e.url=Mt(e.data,t+1,e.data.length);break}},PRIV:function(e){var t;for(t=0;t<e.data.length;t++)if(0===e.data[t]){e.owner=Ut(e.data,0,t);break}e.privateData=e.data.subarray(t+1),e.data=e.privateData}};Nt=function(e){var t,n={descriptor:e&&e.descriptor},i=0,r=[],a=0;if(Nt.prototype.init.call(this),this.dispatchType=_t.METADATA_STREAM_TYPE.toString(16),n.descriptor)for(t=0;t<n.descriptor.length;t++)this.dispatchType+=("00"+n.descriptor[t].toString(16)).slice(-2);this.push=function(e){var t,n,o,s,u,l;if("timed-metadata"===e.type)if(e.dataAlignmentIndicator&&(a=0,r.length=0),0===r.length&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0)))this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});else if(r.push(e),a+=e.data.byteLength,1===r.length&&(i=Ot(e.data.subarray(6,10)),i+=10),!(a<i)){for(t={data:new Uint8Array(i),frames:[],pts:r[0].pts,dts:r[0].dts},u=0;u<i;)t.data.set(r[0].data.subarray(0,i-u),u),u+=r[0].data.byteLength,a-=r[0].data.byteLength,r.shift();n=10,64&t.data[5]&&(n+=4,n+=Ot(t.data.subarray(10,14)),i-=Ot(t.data.subarray(16,20)));do{if(o=Ot(t.data.subarray(n+4,n+8)),o<1)return void this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping metadata parsing."});if(l=String.fromCharCode(t.data[n],t.data[n+1],t.data[n+2],t.data[n+3]),s={id:l,data:t.data.subarray(n+10,n+o+10)},s.key=s.id,Ft[s.id]&&(Ft[s.id](s),"com.apple.streaming.transportStreamTimestamp"===s.owner)){var c=s.data,d=(1&c[3])<<30|c[4]<<22|c[5]<<14|c[6]<<6|c[7]>>>2;d*=4,d+=3&c[7],s.timeStamp=d,void 0===t.pts&&void 0===t.dts&&(t.pts=s.timeStamp,t.dts=s.timeStamp),this.trigger("timestamp",s)}t.frames.push(s),n+=10,n+=o}while(n<i);this.trigger("data",t)}}},Nt.prototype=new u;var jt,Bt,Gt,Vt=Nt,Kt=Dt.TimestampRolloverStream,zt=188,Ht=71;jt=function(){var e=new Uint8Array(zt),t=0;jt.prototype.init.call(this),this.push=function(n){var i,r=0,a=zt;t?(i=new Uint8Array(n.byteLength+t),i.set(e.subarray(0,t)),i.set(n,t),t=0):i=n;while(a<i.byteLength)i[r]!==Ht||i[a]!==Ht?(r++,a++):(this.trigger("data",i.subarray(r,a)),r+=zt,a+=zt);r<i.byteLength&&(e.set(i.subarray(r),0),t=i.byteLength-r)},this.flush=function(){t===zt&&e[0]===Ht&&(this.trigger("data",e),t=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){t=0,this.trigger("reset")}},jt.prototype=new u,Bt=function(){var e,t,n,i;Bt.prototype.init.call(this),i=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,e=function(e,i){var r=0;i.payloadUnitStartIndicator&&(r+=e[r]+1),"pat"===i.type?t(e.subarray(r),i):n(e.subarray(r),i)},t=function(e,t){t.section_number=e[7],t.last_section_number=e[8],i.pmtPid=(31&e[10])<<8|e[11],t.pmtPid=i.pmtPid},n=function(e,t){var n,r,a,o;if(1&e[5]){i.programMapTable={video:null,audio:null,"timed-metadata":{}},n=(15&e[1])<<8|e[2],r=3+n-4,a=(15&e[10])<<8|e[11],o=12+a;while(o<r){var s=e[o],u=(31&e[o+1])<<8|e[o+2];s===_t.H264_STREAM_TYPE&&null===i.programMapTable.video?i.programMapTable.video=u:s===_t.ADTS_STREAM_TYPE&&null===i.programMapTable.audio?i.programMapTable.audio=u:s===_t.METADATA_STREAM_TYPE&&(i.programMapTable["timed-metadata"][u]=s),o+=5+((15&e[o+3])<<8|e[o+4])}t.programMapTable=i.programMapTable}},this.push=function(t){var n={},i=4;if(n.payloadUnitStartIndicator=!!(64&t[1]),n.pid=31&t[1],n.pid<<=8,n.pid|=t[2],(48&t[3])>>>4>1&&(i+=t[i]+1),0===n.pid)n.type="pat",e(t.subarray(i),n),this.trigger("data",n);else if(n.pid===this.pmtPid){n.type="pmt",e(t.subarray(i),n),this.trigger("data",n);while(this.packetsWaitingForPmt.length)this.processPes_.apply(this,this.packetsWaitingForPmt.shift())}else void 0===this.programMapTable?this.packetsWaitingForPmt.push([t,i,n]):this.processPes_(t,i,n)},this.processPes_=function(e,t,n){n.pid===this.programMapTable.video?n.streamType=_t.H264_STREAM_TYPE:n.pid===this.programMapTable.audio?n.streamType=_t.ADTS_STREAM_TYPE:n.streamType=this.programMapTable["timed-metadata"][n.pid],n.type="pes",n.data=e.subarray(t),this.trigger("data",n)}},Bt.prototype=new u,Bt.STREAM_TYPES={h264:27,adts:15},Gt=function(){var e,t=this,n=!1,i={data:[],size:0},r={data:[],size:0},a={data:[],size:0},o=function(e,t){var n,i=e[0]<<16|e[1]<<8|e[2];t.data=new Uint8Array,1===i&&(t.packetLength=6+(e[4]<<8|e[5]),t.dataAlignmentIndicator=0!==(4&e[6]),n=e[7],192&n&&(t.pts=(14&e[9])<<27|(255&e[10])<<20|(254&e[11])<<12|(255&e[12])<<5|(254&e[13])>>>3,t.pts*=4,t.pts+=(6&e[13])>>>1,t.dts=t.pts,64&n&&(t.dts=(14&e[14])<<27|(255&e[15])<<20|(254&e[16])<<12|(255&e[17])<<5|(254&e[18])>>>3,t.dts*=4,t.dts+=(6&e[18])>>>1)),t.data=e.subarray(9+e[8]))},s=function(e,n,i){var r,a=new Uint8Array(e.size),s={type:n},u=0,l=0,c=!1;if(e.data.length&&!(e.size<9)){for(s.trackId=e.data[0].pid,u=0;u<e.data.length;u++)r=e.data[u],a.set(r.data,l),l+=r.data.byteLength;o(a,s),c="video"===n||s.packetLength<=e.size,(i||c)&&(e.size=0,e.data.length=0),c&&t.trigger("data",s)}};Gt.prototype.init.call(this),this.push=function(o){({pat:function(){},pes:function(){var e,t;switch(o.streamType){case _t.H264_STREAM_TYPE:e=i,t="video";break;case _t.ADTS_STREAM_TYPE:e=r,t="audio";break;case _t.METADATA_STREAM_TYPE:e=a,t="timed-metadata";break;default:return}o.payloadUnitStartIndicator&&s(e,t,!0),e.data.push(o),e.size+=o.data.byteLength},pmt:function(){var i={type:"metadata",tracks:[]};e=o.programMapTable,null!==e.video&&i.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.video,codec:"avc",type:"video"}),null!==e.audio&&i.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.audio,codec:"adts",type:"audio"}),n=!0,t.trigger("data",i)}})[o.type]()},this.reset=function(){i.size=0,i.data.length=0,r.size=0,r.data.length=0,this.trigger("reset")},this.flushStreams_=function(){s(i,"video"),s(r,"audio"),s(a,"timed-metadata")},this.flush=function(){if(!n&&e){var i={type:"metadata",tracks:[]};null!==e.video&&i.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.video,codec:"avc",type:"video"}),null!==e.audio&&i.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.audio,codec:"adts",type:"audio"}),t.trigger("data",i)}n=!1,this.flushStreams_(),this.trigger("done")}},Gt.prototype=new u;var Wt={PAT_PID:0,MP2T_PACKET_LENGTH:zt,TransportPacketStream:jt,TransportParseStream:Bt,ElementaryStream:Gt,TimestampRolloverStream:Kt,CaptionStream:xt.CaptionStream,Cea608Stream:xt.Cea608Stream,Cea708Stream:xt.Cea708Stream,MetadataStream:Vt};for(var qt in _t)_t.hasOwnProperty(qt)&&(Wt[qt]=_t[qt]);var Yt,Xt=Wt,$t=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],Jt=function(e,t){var n=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9],i=e[t+5],r=(16&i)>>4;return n=n>=0?n:0,r?n+20:n+10},Qt=function e(t,n){return t.length-n<10||t[n]!=="I".charCodeAt(0)||t[n+1]!=="D".charCodeAt(0)||t[n+2]!=="3".charCodeAt(0)?n:(n+=Jt(t,n),e(t,n))},Zt=function(e){var t=Qt(e,0);return e.length>=t+2&&255===(255&e[t])&&240===(240&e[t+1])&&16===(22&e[t+1])},en=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},tn=function(e,t,n){var i,r="";for(i=t;i<n;i++)r+="%"+("00"+e[i].toString(16)).slice(-2);return r},nn=function(e,t,n){return unescape(tn(e,t,n))},rn=function(e,t){var n=(224&e[t+5])>>5,i=e[t+4]<<3,r=6144&e[t+3];return r|i|n},an=function(e,t){return e[t]==="I".charCodeAt(0)&&e[t+1]==="D".charCodeAt(0)&&e[t+2]==="3".charCodeAt(0)?"timed-metadata":!0&e[t]&&240===(240&e[t+1])?"audio":null},on=function(e){var t=0;while(t+5<e.length){if(255===e[t]&&240===(246&e[t+1]))return $t[(60&e[t+2])>>>2];t++}return null},sn=function(e){var t,n,i,r;t=10,64&e[5]&&(t+=4,t+=en(e.subarray(10,14)));do{if(n=en(e.subarray(t+4,t+8)),n<1)return null;if(r=String.fromCharCode(e[t],e[t+1],e[t+2],e[t+3]),"PRIV"===r){i=e.subarray(t+10,t+n+10);for(var a=0;a<i.byteLength;a++)if(0===i[a]){var o=nn(i,0,a);if("com.apple.streaming.transportStreamTimestamp"===o){var s=i.subarray(a+1),u=(1&s[3])<<30|s[4]<<22|s[5]<<14|s[6]<<6|s[7]>>>2;return u*=4,u+=3&s[7],u}break}}t+=10,t+=n}while(t<e.byteLength);return null},un={isLikelyAacData:Zt,parseId3TagSize:Jt,parseAdtsSize:rn,parseType:an,parseSampleRate:on,parseAacTimestamp:sn};Yt=function(){var e=new Uint8Array,t=0;Yt.prototype.init.call(this),this.setTimestamp=function(e){t=e},this.push=function(n){var i,r,a,o,s=0,u=0;e.length?(o=e.length,e=new Uint8Array(n.byteLength+o),e.set(e.subarray(0,o)),e.set(n,o)):e=n;while(e.length-u>=3)if(e[u]!=="I".charCodeAt(0)||e[u+1]!=="D".charCodeAt(0)||e[u+2]!=="3".charCodeAt(0))if(255!==(255&e[u])||240!==(240&e[u+1]))u++;else{if(e.length-u<7)break;if(s=un.parseAdtsSize(e,u),u+s>e.length)break;a={type:"audio",data:e.subarray(u,u+s),pts:t,dts:t},this.trigger("data",a),u+=s}else{if(e.length-u<10)break;if(s=un.parseId3TagSize(e,u),u+s>e.length)break;r={type:"timed-metadata",data:e.subarray(u,u+s)},this.trigger("data",r),u+=s}i=e.length-u,e=i>0?e.subarray(u):new Uint8Array},this.reset=function(){e=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){e=new Uint8Array,this.trigger("endedtimeline")}},Yt.prototype=new u;var ln,cn,dn,hn,fn=Yt,pn=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],gn=pn,mn=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],vn=mn,yn=ne.H264Stream,bn=un.isLikelyAacData,Tn=d.ONE_SECOND_IN_TS,En=function(e,t){t.stream=e,this.trigger("log",t)},wn=function(e,t){for(var n=Object.keys(t),i=0;i<n.length;i++){var r=n[i];"headOfPipeline"!==r&&t[r].on&&t[r].on("log",En.bind(e,r))}},Sn=function(e,t){var n;if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},An=function(e,t,n,i,r,a){var o=n-t,s=i-t,u=r-n;return{start:{dts:e,pts:e+o},end:{dts:e+s,pts:e+u},prependedContentDuration:a,baseMediaDecodeTime:e}};cn=function(e,t){var n,i=[],r=0,a=0,o=1/0;t=t||{},n=t.firstSequenceNumber||0,cn.prototype.init.call(this),this.push=function(t){rt.collectDtsInfo(e,t),e&&gn.forEach((function(n){e[n]=t[n]})),i.push(t)},this.setEarliestDts=function(e){r=e},this.setVideoBaseMediaDecodeTime=function(e){o=e},this.setAudioAppendStart=function(e){a=e},this.flush=function(){var s,u,l,c,h,f,p;0!==i.length?(s=Ze.trimAdtsFramesByEarliestDts(i,e,r),e.baseMediaDecodeTime=rt.calculateTrackBaseMediaDecodeTime(e,t.keepOriginalTimestamps),p=Ze.prefixWithSilence(e,s,a,o),e.samples=Ze.generateSampleTable(s),l=de.mdat(Ze.concatenateFrameData(s)),i=[],u=de.moof(n,[e]),c=new Uint8Array(u.byteLength+l.byteLength),n++,c.set(u),c.set(l,u.byteLength),rt.clearDtsInfo(e),h=Math.ceil(1024*Tn/e.samplerate),s.length&&(f=s.length*h,this.trigger("segmentTimingInfo",An(d.audioTsToVideoTs(e.baseMediaDecodeTime,e.samplerate),s[0].dts,s[0].pts,s[0].dts+f,s[0].pts+f,p||0)),this.trigger("timingInfo",{start:s[0].pts,end:s[0].pts+f})),this.trigger("data",{track:e,boxes:c}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")},this.reset=function(){rt.clearDtsInfo(e),i=[],this.trigger("reset")}},cn.prototype=new u,ln=function(e,t){var n,i,r,a=[],o=[];t=t||{},n=t.firstSequenceNumber||0,ln.prototype.init.call(this),delete e.minPTS,this.gopCache_=[],this.push=function(t){rt.collectDtsInfo(e,t),"seq_parameter_set_rbsp"!==t.nalUnitType||i||(i=t.config,e.sps=[t.data],vn.forEach((function(t){e[t]=i[t]}),this)),"pic_parameter_set_rbsp"!==t.nalUnitType||r||(r=t.data,e.pps=[t.data]),a.push(t)},this.flush=function(){var i,r,s,u,l,c,d,h,f=0;while(a.length){if("access_unit_delimiter_rbsp"===a[0].nalUnitType)break;a.shift()}if(0===a.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(i=Ve.groupNalsIntoFrames(a),s=Ve.groupFramesIntoGops(i),s[0][0].keyFrame||(r=this.getGopForFusion_(a[0],e),r?(f=r.duration,s.unshift(r),s.byteLength+=r.byteLength,s.nalCount+=r.nalCount,s.pts=r.pts,s.dts=r.dts,s.duration+=r.duration):s=Ve.extendFirstKeyFrame(s)),o.length){var p;if(p=t.alignGopsAtEnd?this.alignGopsAtEnd_(s):this.alignGopsAtStart_(s),!p)return this.gopCache_.unshift({gop:s.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),a=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");rt.clearDtsInfo(e),s=p}rt.collectDtsInfo(e,s),e.samples=Ve.generateSampleTable(s),l=de.mdat(Ve.concatenateNalData(s)),e.baseMediaDecodeTime=rt.calculateTrackBaseMediaDecodeTime(e,t.keepOriginalTimestamps),this.trigger("processedGopsInfo",s.map((function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}}))),d=s[0],h=s[s.length-1],this.trigger("segmentTimingInfo",An(e.baseMediaDecodeTime,d.dts,d.pts,h.dts+h.duration,h.pts+h.duration,f)),this.trigger("timingInfo",{start:s[0].pts,end:s[s.length-1].pts+s[s.length-1].duration}),this.gopCache_.unshift({gop:s.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),a=[],this.trigger("baseMediaDecodeTime",e.baseMediaDecodeTime),this.trigger("timelineStartInfo",e.timelineStartInfo),u=de.moof(n,[e]),c=new Uint8Array(u.byteLength+l.byteLength),n++,c.set(u),c.set(l,u.byteLength),this.trigger("data",{track:e,boxes:c}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),a=[],this.gopCache_.length=0,o.length=0,this.trigger("reset")},this.resetStream_=function(){rt.clearDtsInfo(e),i=void 0,r=void 0},this.getGopForFusion_=function(t){var n,i,r,a,o,s=45e3,u=1e4,l=1/0;for(o=0;o<this.gopCache_.length;o++)a=this.gopCache_[o],r=a.gop,e.pps&&Sn(e.pps[0],a.pps[0])&&e.sps&&Sn(e.sps[0],a.sps[0])&&(r.dts<e.timelineStartInfo.dts||(n=t.dts-r.dts-r.duration,n>=-u&&n<=s&&(!i||l>n)&&(i=a,l=n)));return i?i.gop:null},this.alignGopsAtStart_=function(e){var t,n,i,r,a,s,u,l;a=e.byteLength,s=e.nalCount,u=e.duration,t=n=0;while(t<o.length&&n<e.length){if(i=o[t],r=e[n],i.pts===r.pts)break;r.pts>i.pts?t++:(n++,a-=r.byteLength,s-=r.nalCount,u-=r.duration)}return 0===n?e:n===e.length?null:(l=e.slice(n),l.byteLength=a,l.duration=u,l.nalCount=s,l.pts=l[0].pts,l.dts=l[0].dts,l)},this.alignGopsAtEnd_=function(e){var t,n,i,r,a,s,u;t=o.length-1,n=e.length-1,a=null,s=!1;while(t>=0&&n>=0){if(i=o[t],r=e[n],i.pts===r.pts){s=!0;break}i.pts>r.pts?t--:(t===o.length-1&&(a=n),n--)}if(!s&&null===a)return null;if(u=s?n:a,0===u)return e;var l=e.slice(u),c=l.reduce((function(e,t){return e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e}),{byteLength:0,duration:0,nalCount:0});return l.byteLength=c.byteLength,l.duration=c.duration,l.nalCount=c.nalCount,l.pts=l[0].pts,l.dts=l[0].dts,l},this.alignGopsWith=function(e){o=e}},ln.prototype=new u,hn=function(e,t){this.numberOfTracks=0,this.metadataStream=t,e=e||{},"undefined"!==typeof e.remux?this.remuxTracks=!!e.remux:this.remuxTracks=!0,"boolean"===typeof e.keepOriginalTimestamps?this.keepOriginalTimestamps=e.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,hn.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):(this.pendingTracks.push(e.track),this.pendingBytes+=e.boxes.byteLength,"video"===e.track.type&&(this.videoTrack=e.track,this.pendingBoxes.push(e.boxes)),void("audio"===e.track.type&&(this.audioTrack=e.track,this.pendingBoxes.unshift(e.boxes))))}},hn.prototype=new u,hn.prototype.flush=function(e){var t,n,i,r,a=0,o={captions:[],captionStreams:{},metadata:[],info:{}},s=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(s=this.videoTrack.timelineStartInfo.pts,vn.forEach((function(e){o.info[e]=this.videoTrack[e]}),this)):this.audioTrack&&(s=this.audioTrack.timelineStartInfo.pts,gn.forEach((function(e){o.info[e]=this.audioTrack[e]}),this)),this.videoTrack||this.audioTrack){for(1===this.pendingTracks.length?o.type=this.pendingTracks[0].type:o.type="combined",this.emittedTracks+=this.pendingTracks.length,i=de.initSegment(this.pendingTracks),o.initSegment=new Uint8Array(i.byteLength),o.initSegment.set(i),o.data=new Uint8Array(this.pendingBytes),r=0;r<this.pendingBoxes.length;r++)o.data.set(this.pendingBoxes[r],a),a+=this.pendingBoxes[r].byteLength;for(r=0;r<this.pendingCaptions.length;r++)t=this.pendingCaptions[r],t.startTime=d.metadataTsToSeconds(t.startPts,s,this.keepOriginalTimestamps),t.endTime=d.metadataTsToSeconds(t.endPts,s,this.keepOriginalTimestamps),o.captionStreams[t.stream]=!0,o.captions.push(t);for(r=0;r<this.pendingMetadata.length;r++)n=this.pendingMetadata[r],n.cueTime=d.metadataTsToSeconds(n.pts,s,this.keepOriginalTimestamps),o.metadata.push(n);for(o.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",o),r=0;r<o.captions.length;r++)t=o.captions[r],this.trigger("caption",t);for(r=0;r<o.metadata.length;r++)n=o.metadata[r],this.trigger("id3Frame",n)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},hn.prototype.setRemux=function(e){this.remuxTracks=e},dn=function(e){var t,n,i=this,r=!0;dn.prototype.init.call(this),e=e||{},this.baseMediaDecodeTime=e.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var r={};this.transmuxPipeline_=r,r.type="aac",r.metadataStream=new Xt.MetadataStream,r.aacStream=new fn,r.audioTimestampRolloverStream=new Xt.TimestampRolloverStream("audio"),r.timedMetadataTimestampRolloverStream=new Xt.TimestampRolloverStream("timed-metadata"),r.adtsStream=new g,r.coalesceStream=new hn(e,r.metadataStream),r.headOfPipeline=r.aacStream,r.aacStream.pipe(r.audioTimestampRolloverStream).pipe(r.adtsStream),r.aacStream.pipe(r.timedMetadataTimestampRolloverStream).pipe(r.metadataStream).pipe(r.coalesceStream),r.metadataStream.on("timestamp",(function(e){r.aacStream.setTimestamp(e.timeStamp)})),r.aacStream.on("data",(function(a){"timed-metadata"!==a.type&&"audio"!==a.type||r.audioSegmentStream||(n=n||{timelineStartInfo:{baseMediaDecodeTime:i.baseMediaDecodeTime},codec:"adts",type:"audio"},r.coalesceStream.numberOfTracks++,r.audioSegmentStream=new cn(n,e),r.audioSegmentStream.on("log",i.getLogTrigger_("audioSegmentStream")),r.audioSegmentStream.on("timingInfo",i.trigger.bind(i,"audioTimingInfo")),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream),i.trigger("trackinfo",{hasAudio:!!n,hasVideo:!!t}))})),r.coalesceStream.on("data",this.trigger.bind(this,"data")),r.coalesceStream.on("done",this.trigger.bind(this,"done")),wn(this,r)},this.setupTsPipeline=function(){var r={};this.transmuxPipeline_=r,r.type="ts",r.metadataStream=new Xt.MetadataStream,r.packetStream=new Xt.TransportPacketStream,r.parseStream=new Xt.TransportParseStream,r.elementaryStream=new Xt.ElementaryStream,r.timestampRolloverStream=new Xt.TimestampRolloverStream,r.adtsStream=new g,r.h264Stream=new yn,r.captionStream=new Xt.CaptionStream(e),r.coalesceStream=new hn(e,r.metadataStream),r.headOfPipeline=r.packetStream,r.packetStream.pipe(r.parseStream).pipe(r.elementaryStream).pipe(r.timestampRolloverStream),r.timestampRolloverStream.pipe(r.h264Stream),r.timestampRolloverStream.pipe(r.adtsStream),r.timestampRolloverStream.pipe(r.metadataStream).pipe(r.coalesceStream),r.h264Stream.pipe(r.captionStream).pipe(r.coalesceStream),r.elementaryStream.on("data",(function(a){var o;if("metadata"===a.type){o=a.tracks.length;while(o--)t||"video"!==a.tracks[o].type?n||"audio"!==a.tracks[o].type||(n=a.tracks[o],n.timelineStartInfo.baseMediaDecodeTime=i.baseMediaDecodeTime):(t=a.tracks[o],t.timelineStartInfo.baseMediaDecodeTime=i.baseMediaDecodeTime);t&&!r.videoSegmentStream&&(r.coalesceStream.numberOfTracks++,r.videoSegmentStream=new ln(t,e),r.videoSegmentStream.on("log",i.getLogTrigger_("videoSegmentStream")),r.videoSegmentStream.on("timelineStartInfo",(function(t){n&&!e.keepOriginalTimestamps&&(n.timelineStartInfo=t,r.audioSegmentStream.setEarliestDts(t.dts-i.baseMediaDecodeTime))})),r.videoSegmentStream.on("processedGopsInfo",i.trigger.bind(i,"gopInfo")),r.videoSegmentStream.on("segmentTimingInfo",i.trigger.bind(i,"videoSegmentTimingInfo")),r.videoSegmentStream.on("baseMediaDecodeTime",(function(e){n&&r.audioSegmentStream.setVideoBaseMediaDecodeTime(e)})),r.videoSegmentStream.on("timingInfo",i.trigger.bind(i,"videoTimingInfo")),r.h264Stream.pipe(r.videoSegmentStream).pipe(r.coalesceStream)),n&&!r.audioSegmentStream&&(r.coalesceStream.numberOfTracks++,r.audioSegmentStream=new cn(n,e),r.audioSegmentStream.on("log",i.getLogTrigger_("audioSegmentStream")),r.audioSegmentStream.on("timingInfo",i.trigger.bind(i,"audioTimingInfo")),r.audioSegmentStream.on("segmentTimingInfo",i.trigger.bind(i,"audioSegmentTimingInfo")),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream)),i.trigger("trackinfo",{hasAudio:!!n,hasVideo:!!t})}})),r.coalesceStream.on("data",this.trigger.bind(this,"data")),r.coalesceStream.on("id3Frame",(function(e){e.dispatchType=r.metadataStream.dispatchType,i.trigger("id3Frame",e)})),r.coalesceStream.on("caption",this.trigger.bind(this,"caption")),r.coalesceStream.on("done",this.trigger.bind(this,"done")),wn(this,r)},this.setBaseMediaDecodeTime=function(i){var r=this.transmuxPipeline_;e.keepOriginalTimestamps||(this.baseMediaDecodeTime=i),n&&(n.timelineStartInfo.dts=void 0,n.timelineStartInfo.pts=void 0,rt.clearDtsInfo(n),r.audioTimestampRolloverStream&&r.audioTimestampRolloverStream.discontinuity()),t&&(r.videoSegmentStream&&(r.videoSegmentStream.gopCache_=[]),t.timelineStartInfo.dts=void 0,t.timelineStartInfo.pts=void 0,rt.clearDtsInfo(t),r.captionStream.reset()),r.timestampRolloverStream&&r.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(e){n&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},this.setRemux=function(t){var n=this.transmuxPipeline_;e.remux=t,n&&n.coalesceStream&&n.coalesceStream.setRemux(t)},this.alignGopsWith=function(e){t&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},this.getLogTrigger_=function(e){var t=this;return function(n){n.stream=e,t.trigger("log",n)}},this.push=function(e){if(r){var t=bn(e);t&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():t||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),r=!1}this.transmuxPipeline_.headOfPipeline.push(e)},this.flush=function(){r=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},dn.prototype=new u;var xn,_n={Transmuxer:dn,VideoSegmentStream:ln,AudioSegmentStream:cn,AUDIO_PROPERTIES:gn,VIDEO_PROPERTIES:vn,generateSegmentTimingInfo:An},In=dt.discardEmulationPreventionBytes,kn=xt.CaptionStream,Cn=function(e,t){for(var n=e,i=0;i<t.length;i++){var r=t[i];if(n<r.size)return r;n-=r.size}return null},Ln=function(e,t,n){var i,r,a,o,s=new DataView(e.buffer,e.byteOffset,e.byteLength),u={logs:[],seiNals:[]};for(r=0;r+4<e.length;r+=a)if(a=s.getUint32(r),r+=4,!(a<=0))switch(31&e[r]){case 6:var l=e.subarray(r+1,r+1+a),c=Cn(r,t);if(i={nalUnitType:"sei_rbsp",size:a,data:l,escapedRBSP:In(l),trackId:n},c)i.pts=c.pts,i.dts=c.dts,o=c;else{if(!o){u.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+r+" for trackId "+n+". See mux.js#223."});break}i.pts=o.pts,i.dts=o.dts}u.seiNals.push(i);break}return u},Pn=function(e,t,n){var i=t,r=n.defaultSampleDuration||0,a=n.defaultSampleSize||0,o=n.trackId,s=[];return e.forEach((function(e){var t=xe(e),n=t.samples;n.forEach((function(e){void 0===e.duration&&(e.duration=r),void 0===e.size&&(e.size=a),e.trackId=o,e.dts=i,void 0===e.compositionTimeOffset&&(e.compositionTimeOffset=0),e.pts=i+e.compositionTimeOffset,i+=e.duration})),s=s.concat(n)})),s},Nn=function(e,t){var n=be(e,["moof","traf"]),i=be(e,["mdat"]),r={},a=[];return i.forEach((function(e,t){var i=n[t];a.push({mdat:e,traf:i})})),a.forEach((function(e){var n,i,a=e.mdat,o=e.traf,s=be(o,["tfhd"]),u=Ee(s[0]),l=u.trackId,c=be(o,["tfdt"]),d=c.length>0?ke(c[0]).baseMediaDecodeTime:0,h=be(o,["trun"]);t===l&&h.length>0&&(n=Pn(h,d,u),i=Ln(a,n,l),r[l]||(r[l]={seiNals:[],logs:[]}),r[l].seiNals=r[l].seiNals.concat(i.seiNals),r[l].logs=r[l].logs.concat(i.logs))})),r},Dn=function(e,t,n){var i;if(null===t)return null;i=Nn(e,t);var r=i[t]||{};return{seiNals:r.seiNals,logs:r.logs,timescale:n}},Rn=function(){var e,t,n,i,r,a,o=!1;this.isInitialized=function(){return o},this.init=function(t){e=new kn,o=!0,a=!!t&&t.isPartial,e.on("data",(function(e){e.startTime=e.startPts/i,e.endTime=e.endPts/i,r.captions.push(e),r.captionStreams[e.stream]=!0})),e.on("log",(function(e){r.logs.push(e)}))},this.isNewInit=function(e,t){return!(e&&0===e.length||t&&"object"===typeof t&&0===Object.keys(t).length)&&(n!==e[0]||i!==t[n])},this.parse=function(e,a,o){var s;if(!this.isInitialized())return null;if(!a||!o)return null;if(this.isNewInit(a,o))n=a[0],i=o[n];else if(null===n||!i)return t.push(e),null;while(t.length>0){var u=t.shift();this.parse(u,a,o)}return s=Dn(e,n,i),s&&s.logs&&(r.logs=r.logs.concat(s.logs)),null!==s&&s.seiNals?(this.pushNals(s.seiNals),this.flushStream(),r):r.logs.length?{logs:r.logs,captions:[],captionStreams:[]}:null},this.pushNals=function(t){if(!this.isInitialized()||!t||0===t.length)return null;t.forEach((function(t){e.push(t)}))},this.flushStream=function(){if(!this.isInitialized())return null;a?e.partialFlush():e.flush()},this.clearParsedCaptions=function(){r.captions=[],r.captionStreams={},r.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;e.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){t=[],n=null,i=null,r?this.clearParsedCaptions():r={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},Mn=Rn,Un={generator:de,probe:Ne,Transmuxer:_n.Transmuxer,AudioSegmentStream:_n.AudioSegmentStream,VideoSegmentStream:_n.VideoSegmentStream,CaptionParser:Mn};xn=function(e,t){var n,i=0,r=16384,a=function(e,t){var n,i=e.position+t;i<e.bytes.byteLength||(n=new Uint8Array(2*i),n.set(e.bytes.subarray(0,e.position),0),e.bytes=n,e.view=new DataView(e.bytes.buffer))},o=xn.widthBytes||new Uint8Array("width".length),s=xn.heightBytes||new Uint8Array("height".length),u=xn.videocodecidBytes||new Uint8Array("videocodecid".length);if(!xn.widthBytes){for(n=0;n<"width".length;n++)o[n]="width".charCodeAt(n);for(n=0;n<"height".length;n++)s[n]="height".charCodeAt(n);for(n=0;n<"videocodecid".length;n++)u[n]="videocodecid".charCodeAt(n);xn.widthBytes=o,xn.heightBytes=s,xn.videocodecidBytes=u}switch(this.keyFrame=!1,e){case xn.VIDEO_TAG:this.length=16,r*=6;break;case xn.AUDIO_TAG:this.length=13,this.keyFrame=!0;break;case xn.METADATA_TAG:this.length=29,this.keyFrame=!0;break;default:throw new Error("Unknown FLV tag type")}this.bytes=new Uint8Array(r),this.view=new DataView(this.bytes.buffer),this.bytes[0]=e,this.position=this.length,this.keyFrame=t,this.pts=0,this.dts=0,this.writeBytes=function(e,t,n){var i,r=t||0;n=n||e.byteLength,i=r+n,a(this,n),this.bytes.set(e.subarray(r,i),this.position),this.position+=n,this.length=Math.max(this.length,this.position)},this.writeByte=function(e){a(this,1),this.bytes[this.position]=e,this.position++,this.length=Math.max(this.length,this.position)},this.writeShort=function(e){a(this,2),this.view.setUint16(this.position,e),this.position+=2,this.length=Math.max(this.length,this.position)},this.negIndex=function(e){return this.bytes[this.length-e]},this.nalUnitSize=function(){return 0===i?0:this.length-(i+4)},this.startNalUnit=function(){if(i>0)throw new Error("Attempted to create new NAL wihout closing the old one");i=this.length,this.length+=4,this.position=this.length},this.endNalUnit=function(e){var t,n;this.length===i+4?this.length-=4:i>0&&(t=i+4,n=this.length-t,this.position=i,this.view.setUint32(this.position,n),this.position=this.length,e&&e.push(this.bytes.subarray(t,t+n))),i=0},this.writeMetaDataDouble=function(e,t){var n;if(a(this,2+e.length+9),this.view.setUint16(this.position,e.length),this.position+=2,"width"===e)this.bytes.set(o,this.position),this.position+=5;else if("height"===e)this.bytes.set(s,this.position),this.position+=6;else if("videocodecid"===e)this.bytes.set(u,this.position),this.position+=12;else for(n=0;n<e.length;n++)this.bytes[this.position]=e.charCodeAt(n),this.position++;this.position++,this.view.setFloat64(this.position,t),this.position+=8,this.length=Math.max(this.length,this.position),++i},this.writeMetaDataBoolean=function(e,t){var n;for(a(this,2),this.view.setUint16(this.position,e.length),this.position+=2,n=0;n<e.length;n++)a(this,1),this.bytes[this.position]=e.charCodeAt(n),this.position++;a(this,2),this.view.setUint8(this.position,1),this.position++,this.view.setUint8(this.position,t?1:0),this.position++,this.length=Math.max(this.length,this.position),++i},this.finalize=function(){var e,n;switch(this.bytes[0]){case xn.VIDEO_TAG:this.bytes[11]=7|(this.keyFrame||t?16:32),this.bytes[12]=t?0:1,e=this.pts-this.dts,this.bytes[13]=(16711680&e)>>>16,this.bytes[14]=(65280&e)>>>8,this.bytes[15]=(255&e)>>>0;break;case xn.AUDIO_TAG:this.bytes[11]=175,this.bytes[12]=t?0:1;break;case xn.METADATA_TAG:this.position=11,this.view.setUint8(this.position,2),this.position++,this.view.setUint16(this.position,10),this.position+=2,this.bytes.set([111,110,77,101,116,97,68,97,116,97],this.position),this.position+=10,this.bytes[this.position]=8,this.position++,this.view.setUint32(this.position,i),this.position=this.length,this.bytes.set([0,0,9],this.position),this.position+=3,this.length=this.position;break}return n=this.length-11,this.bytes[1]=(16711680&n)>>>16,this.bytes[2]=(65280&n)>>>8,this.bytes[3]=(255&n)>>>0,this.bytes[4]=(16711680&this.dts)>>>16,this.bytes[5]=(65280&this.dts)>>>8,this.bytes[6]=(255&this.dts)>>>0,this.bytes[7]=(4278190080&this.dts)>>>24,this.bytes[8]=0,this.bytes[9]=0,this.bytes[10]=0,a(this,4),this.view.setUint32(this.length,this.length),this.length+=4,this.position+=4,this.bytes=this.bytes.subarray(0,this.length),this.frameTime=xn.frameTime(this.bytes),this}},xn.AUDIO_TAG=8,xn.VIDEO_TAG=9,xn.METADATA_TAG=18,xn.isAudioFrame=function(e){return xn.AUDIO_TAG===e[0]},xn.isVideoFrame=function(e){return xn.VIDEO_TAG===e[0]},xn.isMetaData=function(e){return xn.METADATA_TAG===e[0]},xn.isKeyFrame=function(e){return xn.isVideoFrame(e)?23===e[11]:!!xn.isAudioFrame(e)||!!xn.isMetaData(e)},xn.frameTime=function(e){var t=e[4]<<16;return t|=e[5]<<8,t|=e[6]<<0,t|=e[7]<<24,t};var On=xn,Fn=function e(t){this.numberOfTracks=0,this.metadataStream=t.metadataStream,this.videoTags=[],this.audioTags=[],this.videoTrack=null,this.audioTrack=null,this.pendingCaptions=[],this.pendingMetadata=[],this.pendingTracks=0,this.processedTracks=0,e.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):("video"===e.track.type&&(this.videoTrack=e.track,this.videoTags=e.tags,this.pendingTracks++),void("audio"===e.track.type&&(this.audioTrack=e.track,this.audioTags=e.tags,this.pendingTracks++)))}};Fn.prototype=new u,Fn.prototype.flush=function(e){var t,n,i,r,a={tags:{},captions:[],captionStreams:{},metadata:[]};if(this.pendingTracks<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(0===this.pendingTracks&&(this.processedTracks++,this.processedTracks<this.numberOfTracks))return}if(this.processedTracks+=this.pendingTracks,this.pendingTracks=0,!(this.processedTracks<this.numberOfTracks)){for(this.videoTrack?r=this.videoTrack.timelineStartInfo.pts:this.audioTrack&&(r=this.audioTrack.timelineStartInfo.pts),a.tags.videoTags=this.videoTags,a.tags.audioTags=this.audioTags,i=0;i<this.pendingCaptions.length;i++)n=this.pendingCaptions[i],n.startTime=n.startPts-r,n.startTime/=9e4,n.endTime=n.endPts-r,n.endTime/=9e4,a.captionStreams[n.stream]=!0,a.captions.push(n);for(i=0;i<this.pendingMetadata.length;i++)t=this.pendingMetadata[i],t.cueTime=t.pts-r,t.cueTime/=9e4,a.metadata.push(t);a.metadata.dispatchType=this.metadataStream.dispatchType,this.videoTrack=null,this.audioTrack=null,this.videoTags=[],this.audioTags=[],this.pendingCaptions.length=0,this.pendingMetadata.length=0,this.pendingTracks=0,this.processedTracks=0,this.trigger("data",a),this.trigger("done")}};var jn,Bn,Gn,Vn,Kn,zn,Hn=Fn,Wn=function(){var e=this;this.list=[],this.push=function(e){this.list.push({bytes:e.bytes,dts:e.dts,pts:e.pts,keyFrame:e.keyFrame,metaDataTag:e.metaDataTag})},Object.defineProperty(this,"length",{get:function(){return e.list.length}})},qn=Wn,Yn=ne.H264Stream;Vn=function(e,t){"number"===typeof t.pts&&(void 0===e.timelineStartInfo.pts?e.timelineStartInfo.pts=t.pts:e.timelineStartInfo.pts=Math.min(e.timelineStartInfo.pts,t.pts)),"number"===typeof t.dts&&(void 0===e.timelineStartInfo.dts?e.timelineStartInfo.dts=t.dts:e.timelineStartInfo.dts=Math.min(e.timelineStartInfo.dts,t.dts))},Kn=function(e,t){var n=new On(On.METADATA_TAG);return n.dts=t,n.pts=t,n.writeMetaDataDouble("videocodecid",7),n.writeMetaDataDouble("width",e.width),n.writeMetaDataDouble("height",e.height),n},zn=function(e,t){var n,i=new On(On.VIDEO_TAG,!0);for(i.dts=t,i.pts=t,i.writeByte(1),i.writeByte(e.profileIdc),i.writeByte(e.profileCompatibility),i.writeByte(e.levelIdc),i.writeByte(255),i.writeByte(225),i.writeShort(e.sps[0].length),i.writeBytes(e.sps[0]),i.writeByte(e.pps.length),n=0;n<e.pps.length;++n)i.writeShort(e.pps[n].length),i.writeBytes(e.pps[n]);return i},Gn=function(e){var t,n=[],i=[];Gn.prototype.init.call(this),this.push=function(t){Vn(e,t),e&&(e.audioobjecttype=t.audioobjecttype,e.channelcount=t.channelcount,e.samplerate=t.samplerate,e.samplingfrequencyindex=t.samplingfrequencyindex,e.samplesize=t.samplesize,e.extraData=e.audioobjecttype<<11|e.samplingfrequencyindex<<7|e.channelcount<<3),t.pts=Math.round(t.pts/90),t.dts=Math.round(t.dts/90),n.push(t)},this.flush=function(){var r,a,o,s=new qn;if(0!==n.length){o=-1/0;while(n.length)r=n.shift(),i.length&&r.pts>=i[0]&&(o=i.shift(),this.writeMetaDataTags(s,o)),(e.extraData!==t||r.pts-o>=1e3)&&(this.writeMetaDataTags(s,r.pts),t=e.extraData,o=r.pts),a=new On(On.AUDIO_TAG),a.pts=r.pts,a.dts=r.dts,a.writeBytes(r.data),s.push(a.finalize());i.length=0,t=null,this.trigger("data",{track:e,tags:s.list}),this.trigger("done","AudioSegmentStream")}else this.trigger("done","AudioSegmentStream")},this.writeMetaDataTags=function(t,n){var i;i=new On(On.METADATA_TAG),i.pts=n,i.dts=n,i.writeMetaDataDouble("audiocodecid",10),i.writeMetaDataBoolean("stereo",2===e.channelcount),i.writeMetaDataDouble("audiosamplerate",e.samplerate),i.writeMetaDataDouble("audiosamplesize",16),t.push(i.finalize()),i=new On(On.AUDIO_TAG,!0),i.pts=n,i.dts=n,i.view.setUint16(i.position,e.extraData),i.position+=2,i.length=Math.max(i.length,i.position),t.push(i.finalize())},this.onVideoKeyFrame=function(e){i.push(e)}},Gn.prototype=new u,Bn=function(e){var t,n,i=[];Bn.prototype.init.call(this),this.finishFrame=function(i,r){if(r){if(t&&e&&e.newMetadata&&(r.keyFrame||0===i.length)){var a=Kn(t,r.dts).finalize(),o=zn(e,r.dts).finalize();a.metaDataTag=o.metaDataTag=!0,i.push(a),i.push(o),e.newMetadata=!1,this.trigger("keyframe",r.dts)}r.endNalUnit(),i.push(r.finalize()),n=null}},this.push=function(t){Vn(e,t),t.pts=Math.round(t.pts/90),t.dts=Math.round(t.dts/90),i.push(t)},this.flush=function(){var r,a=new qn;while(i.length){if("access_unit_delimiter_rbsp"===i[0].nalUnitType)break;i.shift()}if(0!==i.length){while(i.length)r=i.shift(),"seq_parameter_set_rbsp"===r.nalUnitType?(e.newMetadata=!0,t=r.config,e.width=t.width,e.height=t.height,e.sps=[r.data],e.profileIdc=t.profileIdc,e.levelIdc=t.levelIdc,e.profileCompatibility=t.profileCompatibility,n.endNalUnit()):"pic_parameter_set_rbsp"===r.nalUnitType?(e.newMetadata=!0,e.pps=[r.data],n.endNalUnit()):"access_unit_delimiter_rbsp"===r.nalUnitType?(n&&this.finishFrame(a,n),n=new On(On.VIDEO_TAG),n.pts=r.pts,n.dts=r.dts):("slice_layer_without_partitioning_rbsp_idr"===r.nalUnitType&&(n.keyFrame=!0),n.endNalUnit()),n.startNalUnit(),n.writeBytes(r.data);n&&this.finishFrame(a,n),this.trigger("data",{track:e,tags:a.list}),this.trigger("done","VideoSegmentStream")}else this.trigger("done","VideoSegmentStream")}},Bn.prototype=new u,jn=function(e){var t,n,i,r,a,o,s,u,l,c,d,h,f=this;jn.prototype.init.call(this),e=e||{},this.metadataStream=new Xt.MetadataStream,e.metadataStream=this.metadataStream,t=new Xt.TransportPacketStream,n=new Xt.TransportParseStream,i=new Xt.ElementaryStream,r=new Xt.TimestampRolloverStream("video"),a=new Xt.TimestampRolloverStream("audio"),o=new Xt.TimestampRolloverStream("timed-metadata"),s=new g,u=new Yn,h=new Hn(e),t.pipe(n).pipe(i),i.pipe(r).pipe(u),i.pipe(a).pipe(s),i.pipe(o).pipe(this.metadataStream).pipe(h),d=new Xt.CaptionStream(e),u.pipe(d).pipe(h),i.on("data",(function(e){var t,n,i;if("metadata"===e.type){t=e.tracks.length;while(t--)"video"===e.tracks[t].type?n=e.tracks[t]:"audio"===e.tracks[t].type&&(i=e.tracks[t]);n&&!l&&(h.numberOfTracks++,l=new Bn(n),u.pipe(l).pipe(h)),i&&!c&&(h.numberOfTracks++,c=new Gn(i),s.pipe(c).pipe(h),l&&l.on("keyframe",c.onVideoKeyFrame))}})),this.push=function(e){t.push(e)},this.flush=function(){t.flush()},this.resetCaptions=function(){d.reset()},h.on("data",(function(e){f.trigger("data",e)})),h.on("done",(function(){f.trigger("done")}))},jn.prototype=new u;var Xn=jn,$n=function(e,t,n){var i,r,a,o=new Uint8Array(9),s=new DataView(o.buffer);return e=e||0,t=void 0===t||t,n=void 0===n||n,s.setUint8(0,70),s.setUint8(1,76),s.setUint8(2,86),s.setUint8(3,1),s.setUint8(4,(t?4:0)|(n?1:0)),s.setUint32(5,o.byteLength),e<=0?(r=new Uint8Array(o.byteLength+4),r.set(o),r.set([0,0,0,0],o.byteLength),r):(i=new On(On.METADATA_TAG),i.pts=i.dts=0,i.writeMetaDataDouble("duration",e),a=i.finalize().length,r=new Uint8Array(o.byteLength+a),r.set(o),r.set(s.byteLength,a),r)},Jn=$n,Qn={tag:On,Transmuxer:Xn,getFlvHeader:Jn},Zn=Xt,ei=d.ONE_SECOND_IN_TS,ti=function e(t,n){var i=[],r=0,a=0,o=0,s=1/0,u=null,l=null;n=n||{},e.prototype.init.call(this),this.push=function(e){rt.collectDtsInfo(t,e),t&&gn.forEach((function(n){t[n]=e[n]})),i.push(e)},this.setEarliestDts=function(e){a=e},this.setVideoBaseMediaDecodeTime=function(e){s=e},this.setAudioAppendStart=function(e){o=e},this.processFrames_=function(){var e,c,d,h,f;0!==i.length&&(e=Ze.trimAdtsFramesByEarliestDts(i,t,a),0!==e.length&&(t.baseMediaDecodeTime=rt.calculateTrackBaseMediaDecodeTime(t,n.keepOriginalTimestamps),Ze.prefixWithSilence(t,e,o,s),t.samples=Ze.generateSampleTable(e),d=de.mdat(Ze.concatenateFrameData(e)),i=[],c=de.moof(r,[t]),r++,t.initSegment=de.initSegment([t]),h=new Uint8Array(c.byteLength+d.byteLength),h.set(c),h.set(d,c.byteLength),rt.clearDtsInfo(t),null===u&&(l=u=e[0].pts),l+=e.length*(1024*ei/t.samplerate),f={start:u},this.trigger("timingInfo",f),this.trigger("data",{track:t,boxes:h})))},this.flush=function(){this.processFrames_(),this.trigger("timingInfo",{start:u,end:l}),this.resetTiming_(),this.trigger("done","AudioSegmentStream")},this.partialFlush=function(){this.processFrames_(),this.trigger("partialdone","AudioSegmentStream")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline","AudioSegmentStream")},this.resetTiming_=function(){rt.clearDtsInfo(t),u=null,l=null},this.reset=function(){this.resetTiming_(),i=[],this.trigger("reset")}};ti.prototype=new u;var ni=ti,ii=function e(t,n){var i,r,a,o=0,s=[],u=[],l=null,c=null,d=!0;n=n||{},e.prototype.init.call(this),this.push=function(e){rt.collectDtsInfo(t,e),"undefined"===typeof t.timelineStartInfo.dts&&(t.timelineStartInfo.dts=e.dts),"seq_parameter_set_rbsp"!==e.nalUnitType||i||(i=e.config,t.sps=[e.data],vn.forEach((function(e){t[e]=i[e]}),this)),"pic_parameter_set_rbsp"!==e.nalUnitType||r||(r=e.data,t.pps=[e.data]),s.push(e)},this.processNals_=function(e){var i;s=u.concat(s);while(s.length){if("access_unit_delimiter_rbsp"===s[0].nalUnitType)break;s.shift()}if(0!==s.length){var r=Ve.groupNalsIntoFrames(s);if(r.length)if(u=r[r.length-1],e&&(r.pop(),r.duration-=u.duration,r.nalCount-=u.length,r.byteLength-=u.byteLength),r.length){if(this.trigger("timelineStartInfo",t.timelineStartInfo),d){if(a=Ve.groupFramesIntoGops(r),!a[0][0].keyFrame){if(a=Ve.extendFirstKeyFrame(a),!a[0][0].keyFrame)return s=[].concat.apply([],r).concat(u),void(u=[]);r=[].concat.apply([],a),r.duration=a.duration}d=!1}for(null===l&&(l=r[0].pts,c=l),c+=r.duration,this.trigger("timingInfo",{start:l,end:c}),i=0;i<r.length;i++){var h=r[i];t.samples=Ve.generateSampleTableForFrame(h);var f=de.mdat(Ve.concatenateNalDataForFrame(h));rt.clearDtsInfo(t),rt.collectDtsInfo(t,h),t.baseMediaDecodeTime=rt.calculateTrackBaseMediaDecodeTime(t,n.keepOriginalTimestamps);var p=de.moof(o,[t]);o++,t.initSegment=de.initSegment([t]);var g=new Uint8Array(p.byteLength+f.byteLength);g.set(p),g.set(f,p.byteLength),this.trigger("data",{track:t,boxes:g,sequence:o,videoFrameDts:h.dts,videoFramePts:h.pts})}s=[]}else s=[]}},this.resetTimingAndConfig_=function(){i=void 0,r=void 0,l=null,c=null},this.partialFlush=function(){this.processNals_(!0),this.trigger("partialdone","VideoSegmentStream")},this.flush=function(){this.processNals_(!1),this.resetTimingAndConfig_(),this.trigger("done","VideoSegmentStream")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline","VideoSegmentStream")},this.reset=function(){this.resetTimingAndConfig_(),u=[],s=[],d=!0,this.trigger("reset")}};ii.prototype=new u;var ri=ii,ai=un.isLikelyAacData,oi=function(e){return e.prototype=new u,e.prototype.init.call(e),e},si=function(e){var t={type:"ts",tracks:{audio:null,video:null},packet:new Xt.TransportPacketStream,parse:new Xt.TransportParseStream,elementary:new Xt.ElementaryStream,timestampRollover:new Xt.TimestampRolloverStream,adts:new ie.Adts,h264:new ie.h264.H264Stream,captionStream:new Xt.CaptionStream(e),metadataStream:new Xt.MetadataStream};return t.headOfPipeline=t.packet,t.packet.pipe(t.parse).pipe(t.elementary).pipe(t.timestampRollover),t.timestampRollover.pipe(t.h264),t.h264.pipe(t.captionStream),t.timestampRollover.pipe(t.metadataStream),t.timestampRollover.pipe(t.adts),t.elementary.on("data",(function(n){if("metadata"===n.type){for(var i=0;i<n.tracks.length;i++)t.tracks[n.tracks[i].type]||(t.tracks[n.tracks[i].type]=n.tracks[i],t.tracks[n.tracks[i].type].timelineStartInfo.baseMediaDecodeTime=e.baseMediaDecodeTime);t.tracks.video&&!t.videoSegmentStream&&(t.videoSegmentStream=new ri(t.tracks.video,e),t.videoSegmentStream.on("timelineStartInfo",(function(n){t.tracks.audio&&!e.keepOriginalTimestamps&&t.audioSegmentStream.setEarliestDts(n.dts-e.baseMediaDecodeTime)})),t.videoSegmentStream.on("timingInfo",t.trigger.bind(t,"videoTimingInfo")),t.videoSegmentStream.on("data",(function(e){t.trigger("data",{type:"video",data:e})})),t.videoSegmentStream.on("done",t.trigger.bind(t,"done")),t.videoSegmentStream.on("partialdone",t.trigger.bind(t,"partialdone")),t.videoSegmentStream.on("endedtimeline",t.trigger.bind(t,"endedtimeline")),t.h264.pipe(t.videoSegmentStream)),t.tracks.audio&&!t.audioSegmentStream&&(t.audioSegmentStream=new ni(t.tracks.audio,e),t.audioSegmentStream.on("data",(function(e){t.trigger("data",{type:"audio",data:e})})),t.audioSegmentStream.on("done",t.trigger.bind(t,"done")),t.audioSegmentStream.on("partialdone",t.trigger.bind(t,"partialdone")),t.audioSegmentStream.on("endedtimeline",t.trigger.bind(t,"endedtimeline")),t.audioSegmentStream.on("timingInfo",t.trigger.bind(t,"audioTimingInfo")),t.adts.pipe(t.audioSegmentStream)),t.trigger("trackinfo",{hasAudio:!!t.tracks.audio,hasVideo:!!t.tracks.video})}})),t.captionStream.on("data",(function(n){var i;i=t.tracks.video&&t.tracks.video.timelineStartInfo.pts||0,n.startTime=d.metadataTsToSeconds(n.startPts,i,e.keepOriginalTimestamps),n.endTime=d.metadataTsToSeconds(n.endPts,i,e.keepOriginalTimestamps),t.trigger("caption",n)})),t=oi(t),t.metadataStream.on("data",t.trigger.bind(t,"id3Frame")),t},ui=function(e){var t={type:"aac",tracks:{audio:null},metadataStream:new Xt.MetadataStream,aacStream:new fn,audioRollover:new Xt.TimestampRolloverStream("audio"),timedMetadataRollover:new Xt.TimestampRolloverStream("timed-metadata"),adtsStream:new g(!0)};return t.headOfPipeline=t.aacStream,t.aacStream.pipe(t.audioRollover).pipe(t.adtsStream),t.aacStream.pipe(t.timedMetadataRollover).pipe(t.metadataStream),t.metadataStream.on("timestamp",(function(e){t.aacStream.setTimestamp(e.timeStamp)})),t.aacStream.on("data",(function(n){"timed-metadata"!==n.type&&"audio"!==n.type||t.audioSegmentStream||(t.tracks.audio=t.tracks.audio||{timelineStartInfo:{baseMediaDecodeTime:e.baseMediaDecodeTime},codec:"adts",type:"audio"},t.audioSegmentStream=new ni(t.tracks.audio,e),t.audioSegmentStream.on("data",(function(e){t.trigger("data",{type:"audio",data:e})})),t.audioSegmentStream.on("partialdone",t.trigger.bind(t,"partialdone")),t.audioSegmentStream.on("done",t.trigger.bind(t,"done")),t.audioSegmentStream.on("endedtimeline",t.trigger.bind(t,"endedtimeline")),t.audioSegmentStream.on("timingInfo",t.trigger.bind(t,"audioTimingInfo")),t.adtsStream.pipe(t.audioSegmentStream),t.trigger("trackinfo",{hasAudio:!!t.tracks.audio,hasVideo:!!t.tracks.video}))})),t=oi(t),t.metadataStream.on("data",t.trigger.bind(t,"id3Frame")),t},li=function(e,t){e.on("data",t.trigger.bind(t,"data")),e.on("done",t.trigger.bind(t,"done")),e.on("partialdone",t.trigger.bind(t,"partialdone")),e.on("endedtimeline",t.trigger.bind(t,"endedtimeline")),e.on("audioTimingInfo",t.trigger.bind(t,"audioTimingInfo")),e.on("videoTimingInfo",t.trigger.bind(t,"videoTimingInfo")),e.on("trackinfo",t.trigger.bind(t,"trackinfo")),e.on("id3Frame",(function(n){n.dispatchType=e.metadataStream.dispatchType,n.cueTime=d.videoTsToSeconds(n.pts),t.trigger("id3Frame",n)})),e.on("caption",(function(e){t.trigger("caption",e)}))},ci=function e(t){var n=null,i=!0;t=t||{},e.prototype.init.call(this),t.baseMediaDecodeTime=t.baseMediaDecodeTime||0,this.push=function(e){if(i){var r=ai(e);!r||n&&"aac"===n.type?r||n&&"ts"===n.type||(n=si(t),li(n,this)):(n=ui(t),li(n,this)),i=!1}n.headOfPipeline.push(e)},this.flush=function(){n&&(i=!0,n.headOfPipeline.flush())},this.partialFlush=function(){n&&n.headOfPipeline.partialFlush()},this.endTimeline=function(){n&&n.headOfPipeline.endTimeline()},this.reset=function(){n&&n.headOfPipeline.reset()},this.setBaseMediaDecodeTime=function(e){t.keepOriginalTimestamps||(t.baseMediaDecodeTime=e),n&&(n.tracks.audio&&(n.tracks.audio.timelineStartInfo.dts=void 0,n.tracks.audio.timelineStartInfo.pts=void 0,rt.clearDtsInfo(n.tracks.audio),n.audioRollover&&n.audioRollover.discontinuity()),n.tracks.video&&(n.videoSegmentStream&&(n.videoSegmentStream.gopCache_=[]),n.tracks.video.timelineStartInfo.dts=void 0,n.tracks.video.timelineStartInfo.pts=void 0,rt.clearDtsInfo(n.tracks.video)),n.timestampRollover&&n.timestampRollover.discontinuity())},this.setRemux=function(e){t.remux=e,n&&n.coalesceStream&&n.coalesceStream.setRemux(e)},this.setAudioAppendStart=function(e){n&&n.tracks.audio&&n.audioSegmentStream&&n.audioSegmentStream.setAudioAppendStart(e)},this.alignGopsWith=function(e){}};ci.prototype=new u;var di,hi,fi=ci,pi={Transmuxer:fi},gi=Math.pow(2,32),mi=function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:t.getUint32(4),timescale:t.getUint32(8)},i=12;0===n.version?(n.earliestPresentationTime=t.getUint32(i),n.firstOffset=t.getUint32(i+4),i+=8):(n.earliestPresentationTime=t.getUint32(i)*gi+t.getUint32(i+4),n.firstOffset=t.getUint32(i+8)*gi+t.getUint32(i+12),i+=16),i+=2;var r=t.getUint16(i);for(i+=2;r>0;i+=12,r--)n.references.push({referenceType:(128&e[i])>>>7,referencedSize:2147483647&t.getUint32(i),subsegmentDuration:t.getUint32(i+4),startsWithSap:!!(128&e[i+8]),sapType:(112&e[i+8])>>>4,sapDeltaTime:268435455&t.getUint32(i+8)});return n},vi=mi,yi=Math.pow(2,32),bi=function(e){return new Date(1e3*e-20828448e5)},Ti=function(e){var t,n,i=new DataView(e.buffer,e.byteOffset,e.byteLength),r=[];for(t=0;t+4<e.length;t+=n)if(n=i.getUint32(t),t+=4,n<=0)r.push("<span style='color:red;'>MALFORMED DATA</span>");else switch(31&e[t]){case 1:r.push("slice_layer_without_partitioning_rbsp");break;case 5:r.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:r.push("sei_rbsp");break;case 7:r.push("seq_parameter_set_rbsp");break;case 8:r.push("pic_parameter_set_rbsp");break;case 9:r.push("access_unit_delimiter_rbsp");break;default:r.push("UNKNOWN NAL - "+e[t]&31);break}return r},Ei={avc1:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{dataReferenceIndex:t.getUint16(6),width:t.getUint16(24),height:t.getUint16(26),horizresolution:t.getUint16(28)+t.getUint16(30)/16,vertresolution:t.getUint16(32)+t.getUint16(34)/16,frameCount:t.getUint16(40),depth:t.getUint16(74),config:di(e.subarray(78,e.byteLength))}},avcC:function(e){var t,n,i,r,a=new DataView(e.buffer,e.byteOffset,e.byteLength),o={configurationVersion:e[0],avcProfileIndication:e[1],profileCompatibility:e[2],avcLevelIndication:e[3],lengthSizeMinusOne:3&e[4],sps:[],pps:[]},s=31&e[5];for(i=6,r=0;r<s;r++)n=a.getUint16(i),i+=2,o.sps.push(new Uint8Array(e.subarray(i,i+n))),i+=n;for(t=e[i],i++,r=0;r<t;r++)n=a.getUint16(i),i+=2,o.pps.push(new Uint8Array(e.subarray(i,i+n))),i+=n;return o},btrt:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{bufferSizeDB:t.getUint32(0),maxBitrate:t.getUint32(4),avgBitrate:t.getUint32(8)}},edts:function(e){return{boxes:di(e)}},elst:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:n.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),edits:[]},r=n.getUint32(4);for(t=8;r;r--)0===i.version?(i.edits.push({segmentDuration:n.getUint32(t),mediaTime:n.getInt32(t+4),mediaRate:n.getUint16(t+8)+n.getUint16(t+10)/65536}),t+=12):(i.edits.push({segmentDuration:n.getUint32(t)*yi+n.getUint32(t+4),mediaTime:n.getUint32(t+8)*yi+n.getUint32(t+12),mediaRate:n.getUint16(t+16)+n.getUint16(t+18)/65536}),t+=20);return i},esds:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),esId:e[6]<<8|e[7],streamPriority:31&e[8],decoderConfig:{objectProfileIndication:e[11],streamType:e[12]>>>2&63,bufferSize:e[13]<<16|e[14]<<8|e[15],maxBitrate:e[16]<<24|e[17]<<16|e[18]<<8|e[19],avgBitrate:e[20]<<24|e[21]<<16|e[22]<<8|e[23],decoderConfigDescriptor:{tag:e[24],length:e[25],audioObjectType:e[26]>>>3&31,samplingFrequencyIndex:(7&e[26])<<1|e[27]>>>7&1,channelConfiguration:e[27]>>>3&15}}}},ftyp:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={majorBrand:me(e.subarray(0,4)),minorVersion:t.getUint32(4),compatibleBrands:[]},i=8;while(i<e.byteLength)n.compatibleBrands.push(me(e.subarray(i,i+4))),i+=4;return n},dinf:function(e){return{boxes:di(e)}},dref:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),dataReferences:di(e.subarray(8))}},hdlr:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),handlerType:me(e.subarray(8,12)),name:""},i=8;for(i=24;i<e.byteLength;i++){if(0===e[i]){i++;break}n.name+=String.fromCharCode(e[i])}return n.name=decodeURIComponent(escape(n.name)),n},mdat:function(e){return{byteLength:e.byteLength,nals:Ti(e)}},mdhd:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i=4,r={version:n.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),language:""};return 1===r.version?(i+=4,r.creationTime=bi(n.getUint32(i)),i+=8,r.modificationTime=bi(n.getUint32(i)),i+=4,r.timescale=n.getUint32(i),i+=8,r.duration=n.getUint32(i)):(r.creationTime=bi(n.getUint32(i)),i+=4,r.modificationTime=bi(n.getUint32(i)),i+=4,r.timescale=n.getUint32(i),i+=4,r.duration=n.getUint32(i)),i+=4,t=n.getUint16(i),r.language+=String.fromCharCode(96+(t>>10)),r.language+=String.fromCharCode(96+((992&t)>>5)),r.language+=String.fromCharCode(96+(31&t)),r},mdia:function(e){return{boxes:di(e)}},mfhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sequenceNumber:e[4]<<24|e[5]<<16|e[6]<<8|e[7]}},minf:function(e){return{boxes:di(e)}},mp4a:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={dataReferenceIndex:t.getUint16(6),channelcount:t.getUint16(16),samplesize:t.getUint16(18),samplerate:t.getUint16(24)+t.getUint16(26)/65536};return e.byteLength>28&&(n.streamDescriptor=di(e.subarray(28))[0]),n},moof:function(e){return{boxes:di(e)}},moov:function(e){return{boxes:di(e)}},mvex:function(e){return{boxes:di(e)}},mvhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n=4,i={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===i.version?(n+=4,i.creationTime=bi(t.getUint32(n)),n+=8,i.modificationTime=bi(t.getUint32(n)),n+=4,i.timescale=t.getUint32(n),n+=8,i.duration=t.getUint32(n)):(i.creationTime=bi(t.getUint32(n)),n+=4,i.modificationTime=bi(t.getUint32(n)),n+=4,i.timescale=t.getUint32(n),n+=4,i.duration=t.getUint32(n)),n+=4,i.rate=t.getUint16(n)+t.getUint16(n+2)/16,n+=4,i.volume=t.getUint8(n)+t.getUint8(n+1)/8,n+=2,n+=2,n+=8,i.matrix=new Uint32Array(e.subarray(n,n+36)),n+=36,n+=24,i.nextTrackId=t.getUint32(n),i},pdin:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),rate:t.getUint32(4),initialDelay:t.getUint32(8)}},sdtp:function(e){var t,n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]};for(t=4;t<e.byteLength;t++)n.samples.push({dependsOn:(48&e[t])>>4,isDependedOn:(12&e[t])>>2,hasRedundancy:3&e[t]});return n},sidx:vi,smhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),balance:e[4]+e[5]/256}},stbl:function(e){return{boxes:di(e)}},ctts:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:n.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),compositionOffsets:[]},r=n.getUint32(4);for(t=8;r;t+=8,r--)i.compositionOffsets.push({sampleCount:n.getUint32(t),sampleOffset:n[0===i.version?"getUint32":"getInt32"](t+4)});return i},stss:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:n.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),syncSamples:[]},r=n.getUint32(4);for(t=8;r;t+=4,r--)i.syncSamples.push(n.getUint32(t));return i},stco:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),chunkOffsets:[]},r=n.getUint32(4);for(t=8;r;t+=4,r--)i.chunkOffsets.push(n.getUint32(t));return i},stsc:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i=n.getUint32(4),r={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleToChunks:[]};for(t=8;i;t+=12,i--)r.sampleToChunks.push({firstChunk:n.getUint32(t),samplesPerChunk:n.getUint32(t+4),sampleDescriptionIndex:n.getUint32(t+8)});return r},stsd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleDescriptions:di(e.subarray(8))}},stsz:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleSize:n.getUint32(4),entries:[]};for(t=12;t<e.byteLength;t+=4)i.entries.push(n.getUint32(t));return i},stts:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),timeToSamples:[]},r=n.getUint32(4);for(t=8;r;t+=8,r--)i.timeToSamples.push({sampleCount:n.getUint32(t),sampleDelta:n.getUint32(t+4)});return i},styp:function(e){return Ei.ftyp(e)},tfdt:ke,tfhd:Ee,tkhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n=4,i={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===i.version?(n+=4,i.creationTime=bi(t.getUint32(n)),n+=8,i.modificationTime=bi(t.getUint32(n)),n+=4,i.trackId=t.getUint32(n),n+=4,n+=8,i.duration=t.getUint32(n)):(i.creationTime=bi(t.getUint32(n)),n+=4,i.modificationTime=bi(t.getUint32(n)),n+=4,i.trackId=t.getUint32(n),n+=4,n+=4,i.duration=t.getUint32(n)),n+=4,n+=8,i.layer=t.getUint16(n),n+=2,i.alternateGroup=t.getUint16(n),n+=2,i.volume=t.getUint8(n)+t.getUint8(n+1)/8,n+=2,n+=2,i.matrix=new Uint32Array(e.subarray(n,n+36)),n+=36,i.width=t.getUint16(n)+t.getUint16(n+2)/65536,n+=4,i.height=t.getUint16(n)+t.getUint16(n+2)/65536,i},traf:function(e){return{boxes:di(e)}},trak:function(e){return{boxes:di(e)}},trex:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:t.getUint32(4),defaultSampleDescriptionIndex:t.getUint32(8),defaultSampleDuration:t.getUint32(12),defaultSampleSize:t.getUint32(16),sampleDependsOn:3&e[20],sampleIsDependedOn:(192&e[21])>>6,sampleHasRedundancy:(48&e[21])>>4,samplePaddingValue:(14&e[21])>>1,sampleIsDifferenceSample:!!(1&e[21]),sampleDegradationPriority:t.getUint16(22)}},trun:xe,"url ":function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4))}},vmhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),graphicsmode:t.getUint16(4),opcolor:new Uint16Array([t.getUint16(6),t.getUint16(8),t.getUint16(10)])}}};di=function(e){for(var t,n,i,r,a,o=0,s=[],u=new ArrayBuffer(e.length),l=new Uint8Array(u),c=0;c<e.length;++c)l[c]=e[c];t=new DataView(u);while(o<e.byteLength)n=t.getUint32(o),i=me(e.subarray(o+4,o+8)),r=n>1?o+n:e.byteLength,a=(Ei[i]||function(e){return{data:e}})(e.subarray(o+8,r)),a.size=n,a.type=i,s.push(a),o=r;return s},hi=function(e,t){var n;return t=t||0,n=new Array(2*t+1).join(" "),e.map((function(e,i){return n+e.type+"\n"+Object.keys(e).filter((function(e){return"type"!==e&&"boxes"!==e})).map((function(t){var i=n+"  "+t+": ",r=e[t];if(r instanceof Uint8Array||r instanceof Uint32Array){var a=Array.prototype.slice.call(new Uint8Array(r.buffer,r.byteOffset,r.byteLength)).map((function(e){return" "+("00"+e.toString(16)).slice(-2)})).join("").match(/.{1,24}/g);return a?1===a.length?i+"<"+a.join("").slice(1)+">":i+"<\n"+a.map((function(e){return n+"  "+e})).join("\n")+"\n"+n+"  >":i+"<>"}return i+JSON.stringify(r,null,2).split("\n").map((function(e,t){return 0===t?e:n+"  "+e})).join("\n")})).join("\n")+(e.boxes?"\n"+hi(e.boxes,t+1):"")})).join("\n")};var wi={inspect:di,textify:hi,parseType:me,findBox:be,parseTraf:Ei.traf,parseTfdt:Ei.tfdt,parseHdlr:Ei.hdlr,parseTfhd:Ei.tfhd,parseTrun:Ei.trun,parseSidx:Ei.sidx},Si={8:"audio",9:"video",18:"metadata"},Ai=function(e){return"0x"+("00"+e.toString(16)).slice(-2).toUpperCase()},xi=function(e){var t,n=[];while(e.byteLength>0)t=0,n.push(Ai(e[t++])),e=e.subarray(t);return n.join(" ")},_i=function(e,t){var n=["AVC Sequence Header","AVC NALU","AVC End-of-Sequence"],i=e[1]&parseInt("01111111",2)<<16|e[2]<<8|e[3];return t=t||{},t.avcPacketType=n[e[0]],t.CompositionTime=e[1]&parseInt("10000000",2)?-i:i,1===e[0]?t.nalUnitTypeRaw=xi(e.subarray(4,100)):t.data=xi(e.subarray(4)),t},Ii=function(e,t){var n=["Unknown","Keyframe (for AVC, a seekable frame)","Inter frame (for AVC, a nonseekable frame)","Disposable inter frame (H.263 only)","Generated keyframe (reserved for server use only)","Video info/command frame"],i=e[0]&parseInt("00001111",2);return t=t||{},t.frameType=n[(e[0]&parseInt("11110000",2))>>>4],t.codecID=i,7===i?_i(e.subarray(1),t):t},ki=function(e,t){var n=["AAC Sequence Header","AAC Raw"];return t=t||{},t.aacPacketType=n[e[0]],t.data=xi(e.subarray(1)),t},Ci=function(e,t){var n=["Linear PCM, platform endian","ADPCM","MP3","Linear PCM, little endian","Nellymoser 16-kHz mono","Nellymoser 8-kHz mono","Nellymoser","G.711 A-law logarithmic PCM","G.711 mu-law logarithmic PCM","reserved","AAC","Speex","MP3 8-Khz","Device-specific sound"],i=["5.5-kHz","11-kHz","22-kHz","44-kHz"],r=(e[0]&parseInt("11110000",2))>>>4;return t=t||{},t.soundFormat=n[r],t.soundRate=i[(e[0]&parseInt("00001100",2))>>>2],t.soundSize=(e[0]&parseInt("00000010",2))>>>1?"16-bit":"8-bit",t.soundType=e[0]&parseInt("00000001",2)?"Stereo":"Mono",10===r?ki(e.subarray(1),t):t},Li=function(e){return{tagType:Si[e[0]],dataSize:e[1]<<16|e[2]<<8|e[3],timestamp:e[7]<<24|e[4]<<16|e[5]<<8|e[6],streamID:e[8]<<16|e[9]<<8|e[10]}},Pi=function(e){var t=Li(e);switch(e[0]){case 8:Ci(e.subarray(11),t);break;case 9:Ii(e.subarray(11),t);break}return t},Ni=function(e){var t,n,i=9,r=[];i+=4;while(i<e.byteLength)t=e[i+1]<<16,t|=e[i+2]<<8,t|=e[i+3],t+=11,n=e.subarray(i,i+t),r.push(Pi(n)),i+=t+4;return r},Di=function(e){return JSON.stringify(e,null,2)},Ri={inspectTag:Pi,inspect:Ni,textify:Di},Mi=function(e){var t=31&e[1];return t<<=8,t|=e[2],t},Ui=function(e){return!!(64&e[1])},Oi=function(e){var t=0;return(48&e[3])>>>4>1&&(t+=e[4]+1),t},Fi=function(e,t){var n=Mi(e);return 0===n?"pat":n===t?"pmt":t?"pes":null},ji=function(e){var t=Ui(e),n=4+Oi(e);return t&&(n+=e[n]+1),(31&e[n+10])<<8|e[n+11]},Bi=function(e){var t={},n=Ui(e),i=4+Oi(e);if(n&&(i+=e[i]+1),1&e[i+5]){var r,a,o;r=(15&e[i+1])<<8|e[i+2],a=3+r-4,o=(15&e[i+10])<<8|e[i+11];var s=12+o;while(s<a){var u=i+s;t[(31&e[u+1])<<8|e[u+2]]=e[u],s+=5+((15&e[u+3])<<8|e[u+4])}return t}},Gi=function(e,t){var n=Mi(e),i=t[n];switch(i){case _t.H264_STREAM_TYPE:return"video";case _t.ADTS_STREAM_TYPE:return"audio";case _t.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},Vi=function(e){var t=Ui(e);if(!t)return null;var n=4+Oi(e);if(n>=e.byteLength)return null;var i,r=null;return i=e[n+7],192&i&&(r={},r.pts=(14&e[n+9])<<27|(255&e[n+10])<<20|(254&e[n+11])<<12|(255&e[n+12])<<5|(254&e[n+13])>>>3,r.pts*=4,r.pts+=(6&e[n+13])>>>1,r.dts=r.pts,64&i&&(r.dts=(14&e[n+14])<<27|(255&e[n+15])<<20|(254&e[n+16])<<12|(255&e[n+17])<<5|(254&e[n+18])>>>3,r.dts*=4,r.dts+=(6&e[n+18])>>>1)),r},Ki=function(e){switch(e){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},zi=function(e){for(var t,n=4+Oi(e),i=e.subarray(n),r=0,a=0,o=!1;a<i.byteLength-3;a++)if(1===i[a+2]){r=a+5;break}while(r<i.byteLength)switch(i[r]){case 0:if(0!==i[r-1]){r+=2;break}if(0!==i[r-2]){r++;break}a+3!==r-2&&(t=Ki(31&i[a+3]),"slice_layer_without_partitioning_rbsp_idr"===t&&(o=!0));do{r++}while(1!==i[r]&&r<i.length);a=r-2,r+=3;break;case 1:if(0!==i[r-1]||0!==i[r-2]){r+=3;break}t=Ki(31&i[a+3]),"slice_layer_without_partitioning_rbsp_idr"===t&&(o=!0),a=r-2,r+=3;break;default:r+=3;break}return i=i.subarray(a),r-=a,a=0,i&&i.byteLength>3&&(t=Ki(31&i[a+3]),"slice_layer_without_partitioning_rbsp_idr"===t&&(o=!0)),o},Hi={parseType:Fi,parsePat:ji,parsePmt:Bi,parsePayloadUnitStartIndicator:Ui,parsePesType:Gi,parsePesTime:Vi,videoPacketContainsKeyFrame:zi},Wi=Dt.handleRollover,qi={};qi.ts=Hi,qi.aac=un;var Yi=d.ONE_SECOND_IN_TS,Xi=188,$i=71,Ji=function(e,t){var n,i,r=0,a=Xi;while(a<e.byteLength)if(e[r]!==$i||e[a]!==$i)r++,a++;else{switch(n=e.subarray(r,a),i=qi.ts.parseType(n,t.pid),i){case"pat":t.pid=qi.ts.parsePat(n);break;case"pmt":var o=qi.ts.parsePmt(n);t.table=t.table||{},Object.keys(o).forEach((function(e){t.table[e]=o[e]}));break}r+=Xi,a+=Xi}},Qi=function(e,t,n){var i,r,a,o,s,u=0,l=Xi,c=!1;while(l<=e.byteLength)if(e[u]!==$i||e[l]!==$i&&l!==e.byteLength)u++,l++;else{switch(i=e.subarray(u,l),r=qi.ts.parseType(i,t.pid),r){case"pes":a=qi.ts.parsePesType(i,t.table),o=qi.ts.parsePayloadUnitStartIndicator(i),"audio"===a&&o&&(s=qi.ts.parsePesTime(i),s&&(s.type="audio",n.audio.push(s),c=!0));break}if(c)break;u+=Xi,l+=Xi}l=e.byteLength,u=l-Xi,c=!1;while(u>=0)if(e[u]!==$i||e[l]!==$i&&l!==e.byteLength)u--,l--;else{switch(i=e.subarray(u,l),r=qi.ts.parseType(i,t.pid),r){case"pes":a=qi.ts.parsePesType(i,t.table),o=qi.ts.parsePayloadUnitStartIndicator(i),"audio"===a&&o&&(s=qi.ts.parsePesTime(i),s&&(s.type="audio",n.audio.push(s),c=!0));break}if(c)break;u-=Xi,l-=Xi}},Zi=function(e,t,n){var i,r,a,o,s,u,l,c,d=0,h=Xi,f=!1,p={data:[],size:0};while(h<e.byteLength)if(e[d]!==$i||e[h]!==$i)d++,h++;else{switch(i=e.subarray(d,h),r=qi.ts.parseType(i,t.pid),r){case"pes":if(a=qi.ts.parsePesType(i,t.table),o=qi.ts.parsePayloadUnitStartIndicator(i),"video"===a&&(o&&!f&&(s=qi.ts.parsePesTime(i),s&&(s.type="video",n.video.push(s),f=!0)),!n.firstKeyFrame)){if(o&&0!==p.size){u=new Uint8Array(p.size),l=0;while(p.data.length)c=p.data.shift(),u.set(c,l),l+=c.byteLength;if(qi.ts.videoPacketContainsKeyFrame(u)){var g=qi.ts.parsePesTime(u);g?(n.firstKeyFrame=g,n.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}p.size=0}p.data.push(i),p.size+=i.byteLength}break}if(f&&n.firstKeyFrame)break;d+=Xi,h+=Xi}h=e.byteLength,d=h-Xi,f=!1;while(d>=0)if(e[d]!==$i||e[h]!==$i)d--,h--;else{switch(i=e.subarray(d,h),r=qi.ts.parseType(i,t.pid),r){case"pes":a=qi.ts.parsePesType(i,t.table),o=qi.ts.parsePayloadUnitStartIndicator(i),"video"===a&&o&&(s=qi.ts.parsePesTime(i),s&&(s.type="video",n.video.push(s),f=!0));break}if(f)break;d-=Xi,h-=Xi}},er=function(e,t){if(e.audio&&e.audio.length){var n=t;("undefined"===typeof n||isNaN(n))&&(n=e.audio[0].dts),e.audio.forEach((function(e){e.dts=Wi(e.dts,n),e.pts=Wi(e.pts,n),e.dtsTime=e.dts/Yi,e.ptsTime=e.pts/Yi}))}if(e.video&&e.video.length){var i=t;if(("undefined"===typeof i||isNaN(i))&&(i=e.video[0].dts),e.video.forEach((function(e){e.dts=Wi(e.dts,i),e.pts=Wi(e.pts,i),e.dtsTime=e.dts/Yi,e.ptsTime=e.pts/Yi})),e.firstKeyFrame){var r=e.firstKeyFrame;r.dts=Wi(r.dts,i),r.pts=Wi(r.pts,i),r.dtsTime=r.dts/Yi,r.ptsTime=r.pts/Yi}}},tr=function(e){var t,n=!1,i=0,r=null,a=null,o=0,s=0;while(e.length-s>=3){var u=qi.aac.parseType(e,s);switch(u){case"timed-metadata":if(e.length-s<10){n=!0;break}if(o=qi.aac.parseId3TagSize(e,s),o>e.length){n=!0;break}null===a&&(t=e.subarray(s,s+o),a=qi.aac.parseAacTimestamp(t)),s+=o;break;case"audio":if(e.length-s<7){n=!0;break}if(o=qi.aac.parseAdtsSize(e,s),o>e.length){n=!0;break}null===r&&(t=e.subarray(s,s+o),r=qi.aac.parseSampleRate(t)),i++,s+=o;break;default:s++;break}if(n)return null}if(null===r||null===a)return null;var l=Yi/r,c={audio:[{type:"audio",dts:a,pts:a},{type:"audio",dts:a+1024*i*l,pts:a+1024*i*l}]};return c},nr=function(e){var t={pid:null,table:null},n={};for(var i in Ji(e,t),t.table)if(t.table.hasOwnProperty(i)){var r=t.table[i];switch(r){case _t.H264_STREAM_TYPE:n.video=[],Zi(e,t,n),0===n.video.length&&delete n.video;break;case _t.ADTS_STREAM_TYPE:n.audio=[],Qi(e,t,n),0===n.audio.length&&delete n.audio;break}}return n},ir=function(e,t){var n,i=qi.aac.isLikelyAacData(e);return n=i?tr(e):nr(e),n&&(n.audio||n.video)?(er(n,t),n):null},rr={inspect:ir,parseAudioPes_:Qi},ar={codecs:ie,mp4:Un,flv:Qn,mp2t:Zn,partial:pi};ar.mp4.tools=wi,ar.flv.tools=Ri,ar.mp2t.tools=rr;var or=ar;return or}))},faa1:function(e,t,n){"use strict";var i,r="object"===typeof Reflect?Reflect:null,a=r&&"function"===typeof r.apply?r.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};function o(e){console&&console.warn&&console.warn(e)}i=r&&"function"===typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!==e};function u(){u.init.call(this)}e.exports=u,e.exports.once=T,u.EventEmitter=u,u.prototype._events=void 0,u.prototype._eventsCount=0,u.prototype._maxListeners=void 0;var l=10;function c(e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function d(e){return void 0===e._maxListeners?u.defaultMaxListeners:e._maxListeners}function h(e,t,n,i){var r,a,s;if(c(n),a=e._events,void 0===a?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),s=a[t]),void 0===s)s=a[t]=n,++e._eventsCount;else if("function"===typeof s?s=a[t]=i?[n,s]:[s,n]:i?s.unshift(n):s.push(n),r=d(e),r>0&&s.length>r&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=s.length,o(u)}return e}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},r=f.bind(i);return r.listener=n,i.wrapFn=r,r}function g(e,t,n){var i=e._events;if(void 0===i)return[];var r=i[t];return void 0===r?[]:"function"===typeof r?n?[r.listener||r]:[r]:n?b(r):v(r,r.length)}function m(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"===typeof n)return 1;if(void 0!==n)return n.length}return 0}function v(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}function y(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function b(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function T(e,t){return new Promise((function(n,i){function r(n){e.removeListener(t,a),i(n)}function a(){"function"===typeof e.removeListener&&e.removeListener("error",r),n([].slice.call(arguments))}w(e,t,a,{once:!0}),"error"!==t&&E(e,r,{once:!0})}))}function E(e,t,n){"function"===typeof e.on&&w(e,"error",t,n)}function w(e,t,n,i){if("function"===typeof e.on)i.once?e.once(t,n):e.on(t,n);else{if("function"!==typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function r(a){i.once&&e.removeEventListener(t,r),n(a)}))}}Object.defineProperty(u,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!==typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");l=e}}),u.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},u.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},u.prototype.getMaxListeners=function(){return d(this)},u.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,r=this._events;if(void 0!==r)i=i&&void 0===r.error;else if(!i)return!1;if(i){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var u=r[e];if(void 0===u)return!1;if("function"===typeof u)a(u,this,t);else{var l=u.length,c=v(u,l);for(n=0;n<l;++n)a(c[n],this,t)}return!0},u.prototype.addListener=function(e,t){return h(this,e,t,!1)},u.prototype.on=u.prototype.addListener,u.prototype.prependListener=function(e,t){return h(this,e,t,!0)},u.prototype.once=function(e,t){return c(t),this.on(e,p(this,e,t)),this},u.prototype.prependOnceListener=function(e,t){return c(t),this.prependListener(e,p(this,e,t)),this},u.prototype.removeListener=function(e,t){var n,i,r,a,o;if(c(t),i=this._events,void 0===i)return this;if(n=i[e],void 0===n)return this;if(n===t||n.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!==typeof n){for(r=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){o=n[a].listener,r=a;break}if(r<0)return this;0===r?n.shift():y(n,r),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,o||t)}return this},u.prototype.off=u.prototype.removeListener,u.prototype.removeAllListeners=function(e){var t,n,i;if(n=this._events,void 0===n)return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var r,a=Object.keys(n);for(i=0;i<a.length;++i)r=a[i],"removeListener"!==r&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[e],"function"===typeof t)this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},u.prototype.listeners=function(e){return g(this,e,!0)},u.prototype.rawListeners=function(e){return g(this,e,!1)},u.listenerCount=function(e,t){return"function"===typeof e.listenerCount?e.listenerCount(t):m.call(e,t)},u.prototype.listenerCount=m,u.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]}}}]);
//# sourceMappingURL=chunk-517ec54d.997a28c1.js.map