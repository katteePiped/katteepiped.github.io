{"version":3,"sources":["webpack:///./src/routes/Channel.vue?24ac","webpack:///src/routes/Channel.vue","webpack:///./src/routes/Channel.vue?7f7a","webpack:///./src/routes/Channel.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","channel","error","attrs","message","staticClass","staticStyle","avatarUrl","_v","_s","name","id","domProps","renderedDescription","relatedStreams","_l","row","rowId","key","video","videoId","nextpage","directives","rawName","value","expression","_e","staticRenderFns","title","meta","fetchChannel","watch","methods","$store","dispatch","path","$route","params","channelId","entries","isIntersecting","fetchMoreVideos","concat","j","computed","breaks","components","SubscriptionButton","ErrorHandler","VideoItem","component","VCard","VCardText","VCol","VContainer","VDivider","VImg","VProgressLinear","VRow","Intersect"],"mappings":"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","file":"js/chunk-2d213347.65648d21.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.channel && _vm.channel.error)?_c('ErrorHandler',{attrs:{\"message\":_vm.channel.message,\"error\":_vm.channel.error}}):(_vm.channel)?_c('v-container',{attrs:{\"fluid\":\"\"}},[_c('v-card',{staticClass:\"pa-4\"},[_c('div',{staticStyle:{\"justify-items\":\"center\",\"align-items\":\"center\",\"vertical-align\":\"center\",\"display\":\"flex\"}},[_c('div',[_c('v-img',{staticClass:\"rounded-circle\",attrs:{\"src\":_vm.channel.avatarUrl,\"height\":\"48\",\"width\":\"48\"}})],1),_c('div',{staticClass:\"text-h5 ml-4\"},[_vm._v(\" \"+_vm._s(_vm.channel.name)+\" \")]),_c('SubscriptionButton',{attrs:{\"channel-id\":this.channel.id}})],1),_c('v-card-text',[_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.renderedDescription)}})])],1),_c('v-divider',{staticClass:\"my-4\"}),(this.channel && this.channel.relatedStreams)?_c('div',[_vm._l((_vm.chunkedByFour),function(row,rowId){return _c('v-row',{key:rowId},_vm._l((row),function(video,videoId){return _c('v-col',{key:videoId,attrs:{\"md\":\"3\"}},[_c('VideoItem',{attrs:{\"height\":270,\"width\":480,\"video\":video,\"max-height\":\"\"}})],1)}),1)}),(_vm.channel.nextpage != null)?_c('v-progress-linear',{directives:[{name:\"intersect\",rawName:\"v-intersect\",value:(_vm.onRelatedStreamsEndIntersect),expression:\"onRelatedStreamsEndIntersect\"}],attrs:{\"indeterminate\":\"\"}}):_vm._e()],2):_vm._e()],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <ErrorHandler v-if=\"channel && channel.error\" :message=\"channel.message\" :error=\"channel.error\" />\n    <v-container fluid v-else-if=\"channel\">\n      <v-card class=\"pa-4\">\n        <div\n          style=\"justify-items: center; align-items: center; vertical-align: center; display: flex;\"\n        >\n          <div>\n            <v-img :src=\"channel.avatarUrl\" height=\"48\" width=\"48\" class=\"rounded-circle\" />\n          </div>\n          <div class=\"text-h5 ml-4\">\n            {{ channel.name }}\n          </div>\n          <SubscriptionButton :channel-id=\"this.channel.id\" />\n        </div>\n        <v-card-text>\n          <div v-html=\"renderedDescription\" />\n        </v-card-text>\n      </v-card>\n\n      <v-divider class=\"my-4\" />\n\n      <div v-if=\"this.channel && this.channel.relatedStreams\">\n        <v-row v-for=\"(row, rowId) in chunkedByFour\" :key=\"rowId\">\n          <v-col md=\"3\" v-for=\"(video, videoId) in row\" :key=\"videoId\">\n            <VideoItem :height=\"270\" :width=\"480\" :video=\"video\" max-height />\n          </v-col>\n        </v-row>\n        <v-progress-linear v-if=\"channel.nextpage != null\" indeterminate v-intersect=\"onRelatedStreamsEndIntersect\" />\n      </div>\n    </v-container>\n</template>\n\n<script>\nimport marked from 'marked'\nimport { chunk as _chunk } from 'lodash-es'\n\nimport ErrorHandler from '@/components/ErrorHandler'\nimport VideoItem from '@/components/VideoItem.vue'\nimport SubscriptionButton from '@/components/SubscriptionButton'\n\nimport { LibPiped } from '@/tools/libpiped'\n\nexport default {\n  data () {\n    return {\n      channel: null\n    }\n  },\n  metaInfo () {\n    const title = this.channel ? this.channel.name : 'Loading'\n\n    return {\n      title,\n      meta: this.channel && [\n        {\n          name: 'twitter:title',\n          content: this.channel.name\n        },\n        {\n          name: 'twitter:description',\n          content: this.channel.description\n        },\n        {\n          property: 'og:type',\n          content: 'profile'\n        },\n        {\n          property: 'og:title',\n          content: this.channel.name\n        },\n        {\n          property: 'og:profile:username',\n          content: this.channel.name\n        },\n        {\n          property: 'og:description',\n          content: this.channel.description\n        },\n        {\n          name: 'description',\n          content: this.channel.description\n        },\n        {\n          property: 'og:image',\n          content: this.channel.bannerUrl\n        },\n        {\n          name: 'twitter:image',\n          content: this.channel.bannerUrl\n        }\n      ]\n    }\n  },\n\n  mounted () {\n    this.fetchChannel()\n  },\n  watch: {\n    '$route.params.channelId': 'fetchChannel'\n  },\n  methods: {\n    async fetchChannel () {\n      this.channel = await this.$store.dispatch('auth/makeRequest', {\n        path: '/' + this.$route.params.path + '/' + this.$route.params.channelId\n      })\n    },\n\n    onRelatedStreamsEndIntersect (entries) {\n      if (entries[0].isIntersecting) {\n        this.fetchMoreVideos()\n      }\n    },\n\n    fetchMoreVideos () {\n      this.$store.dispatch('auth/makeRequest', {\n        path: '/nextpage/channel/' + this.channel.id,\n        params: {\n          nextpage: this.channel.nextpage\n        }\n      }).then(j => {\n        this.channel.relatedStreams = this.channel.relatedStreams.concat(j.relatedStreams)\n        this.channel.nextpage = j.nextpage\n      })\n    }\n  },\n  computed: {\n    renderedDescription () {\n      return LibPiped.purifyHTML(marked.parseInline(this.channel.description, {\n        breaks: true\n      }))\n    },\n\n    chunkedByFour () {\n      return _chunk(this.channel.relatedStreams, 4)\n    }\n  },\n  components: {\n    SubscriptionButton,\n    ErrorHandler,\n    VideoItem\n  }\n}\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Channel.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Channel.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Channel.vue?vue&type=template&id=3613352f&\"\nimport script from \"./Channel.vue?vue&type=script&lang=js&\"\nexport * from \"./Channel.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDivider } from 'vuetify/lib/components/VDivider';\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VProgressLinear } from 'vuetify/lib/components/VProgressLinear';\nimport { VRow } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VCard,VCardText,VCol,VContainer,VDivider,VImg,VProgressLinear,VRow})\n\n\n/* vuetify-loader */\nimport installDirectives from \"!../../node_modules/vuetify-loader/lib/runtime/installDirectives.js\"\nimport Intersect from 'vuetify/lib/directives/intersect'\ninstallDirectives(component, {Intersect})\n"],"sourceRoot":""}