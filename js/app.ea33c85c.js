(function(e){function t(t){for(var a,o,c=t[0],l=t[1],i=t[2],d=0,u=[];d<c.length;d++)o=c[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&u.push(r[o][0]),r[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);h&&h(t);while(u.length)u.shift()();return s.push.apply(s,i||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],a=!0,o=1;o<n.length;o++){var c=n[o];0!==r[c]&&(a=!1)}a&&(s.splice(t--,1),e=l(l.s=n[0]))}return e}var a={},o={app:0},r={app:0},s=[];function c(e){return l.p+"js/"+({"locale-bn_beng-json":"locale-bn_beng-json","locale-bn_latn-json":"locale-bn_latn-json","locale-cyrl-json":"locale-cyrl-json","locale-de-json":"locale-de-json","locale-el-json":"locale-el-json","locale-fr-json":"locale-fr-json","locale-jp-json":"locale-jp-json","locale-kr-json":"locale-kr-json","locale-lt-json":"locale-lt-json","locale-ml-json":"locale-ml-json","locale-nb_NO-json":"locale-nb_NO-json","locale-tr-json":"locale-tr-json","locale-zh_Hans-json":"locale-zh_Hans-json","locale-zh_Hant-json":"locale-zh_Hant-json"}[e]||e)+"."+{"chunk-108ecad0":"bb5bac05","chunk-1174a3cc":"988da2a0","chunk-2d0ccf3c":"58088317","chunk-356d625d":"72a66856","chunk-48e65af1":"e52889c8","chunk-2d213347":"65648d21","chunk-517ec54d":"997a28c1","chunk-59a47c4a":"7ec73432","chunk-7453a839":"884fc716","chunk-745aa562":"a78bc5d6","chunk-7477f951":"98d0ca4c","chunk-74847539":"5bf6423f","chunk-748bbd95":"8bf0dd03","chunk-74d31cef":"dde0c642","chunk-9ddeb252":"57747720","chunk-e9af1076":"90ec75b6","locale-bn_beng-json":"c0828e08","locale-bn_latn-json":"8ad45144","locale-cyrl-json":"6071baac","locale-de-json":"d6a6b599","locale-el-json":"7b48e5eb","locale-fr-json":"b29df16a","locale-jp-json":"ccc2d4d4","locale-kr-json":"7da679de","locale-lt-json":"668b390b","locale-ml-json":"d3323af3","locale-nb_NO-json":"83029b4c","locale-tr-json":"973041b3","locale-zh_Hans-json":"f3bb0c16","locale-zh_Hant-json":"4aac7c0a"}[e]+".js"}function l(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.e=function(e){var t=[],n={"chunk-1174a3cc":1,"chunk-356d625d":1,"chunk-517ec54d":1,"chunk-7453a839":1,"chunk-745aa562":1,"chunk-7477f951":1,"chunk-74847539":1,"chunk-748bbd95":1,"chunk-74d31cef":1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=new Promise((function(t,n){for(var a="css/"+({"locale-bn_beng-json":"locale-bn_beng-json","locale-bn_latn-json":"locale-bn_latn-json","locale-cyrl-json":"locale-cyrl-json","locale-de-json":"locale-de-json","locale-el-json":"locale-el-json","locale-fr-json":"locale-fr-json","locale-jp-json":"locale-jp-json","locale-kr-json":"locale-kr-json","locale-lt-json":"locale-lt-json","locale-ml-json":"locale-ml-json","locale-nb_NO-json":"locale-nb_NO-json","locale-tr-json":"locale-tr-json","locale-zh_Hans-json":"locale-zh_Hans-json","locale-zh_Hant-json":"locale-zh_Hant-json"}[e]||e)+"."+{"chunk-108ecad0":"31d6cfe0","chunk-1174a3cc":"86e5e636","chunk-2d0ccf3c":"31d6cfe0","chunk-356d625d":"4eb0deb2","chunk-48e65af1":"31d6cfe0","chunk-2d213347":"31d6cfe0","chunk-517ec54d":"c5ff8f10","chunk-59a47c4a":"31d6cfe0","chunk-7453a839":"2c651b64","chunk-745aa562":"4381e969","chunk-7477f951":"b228ed9d","chunk-74847539":"3d611241","chunk-748bbd95":"f69f5dda","chunk-74d31cef":"5de60bea","chunk-9ddeb252":"31d6cfe0","chunk-e9af1076":"31d6cfe0","locale-bn_beng-json":"31d6cfe0","locale-bn_latn-json":"31d6cfe0","locale-cyrl-json":"31d6cfe0","locale-de-json":"31d6cfe0","locale-el-json":"31d6cfe0","locale-fr-json":"31d6cfe0","locale-jp-json":"31d6cfe0","locale-kr-json":"31d6cfe0","locale-lt-json":"31d6cfe0","locale-ml-json":"31d6cfe0","locale-nb_NO-json":"31d6cfe0","locale-tr-json":"31d6cfe0","locale-zh_Hans-json":"31d6cfe0","locale-zh_Hant-json":"31d6cfe0"}[e]+".css",r=l.p+a,s=document.getElementsByTagName("link"),c=0;c<s.length;c++){var i=s[c],d=i.getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(d===a||d===r))return t()}var u=document.getElementsByTagName("style");for(c=0;c<u.length;c++){i=u[c],d=i.getAttribute("data-href");if(d===a||d===r)return t()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=t,h.onerror=function(t){var a=t&&t.target&&t.target.src||r,s=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=a,delete o[e],h.parentNode.removeChild(h),n(s)},h.href=r;var f=document.getElementsByTagName("head")[0];f.appendChild(h)})).then((function(){o[e]=0})));var a=r[e];if(0!==a)if(a)t.push(a[2]);else{var s=new Promise((function(t,n){a=r[e]=[t,n]}));t.push(a[2]=s);var i,d=document.createElement("script");d.charset="utf-8",d.timeout=120,l.nc&&d.setAttribute("nonce",l.nc),d.src=c(e);var u=new Error;i=function(t){d.onerror=d.onload=null,clearTimeout(h);var n=r[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+a+": "+o+")",u.name="ChunkLoadError",u.type=a,u.request=o,n[1](u)}r[e]=void 0}};var h=setTimeout((function(){i({type:"timeout",target:d})}),12e4);d.onerror=d.onload=i,document.head.appendChild(d)}return Promise.all(t)},l.m=e,l.c=a,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)l.d(n,a,function(t){return e[t]}.bind(null,a));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="",l.oe=function(e){throw console.error(e),e};var i=window["webpackJsonp"]=window["webpackJsonp"]||[],d=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var h=d;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},1378:function(e,t,n){var a={"./bn_beng.json":["9acc","locale-bn_beng-json"],"./bn_latn.json":["380f","locale-bn_latn-json"],"./cyrl.json":["fc1a","locale-cyrl-json"],"./de.json":["c5c8","locale-de-json"],"./el.json":["78bb","locale-el-json"],"./en.json":["26d5"],"./fr.json":["a354","locale-fr-json"],"./jp.json":["bdfa","locale-jp-json"],"./kr.json":["da81","locale-kr-json"],"./lt.json":["f294","locale-lt-json"],"./ml.json":["6482","locale-ml-json"],"./nb_NO.json":["1c58","locale-nb_NO-json"],"./tr.json":["04a0","locale-tr-json"],"./zh_Hans.json":["00f2","locale-zh_Hans-json"],"./zh_Hant.json":["2c55","locale-zh_Hant-json"]};function o(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],o=t[0];return Promise.all(t.slice(1).map(n.e)).then((function(){return n.t(o,3)}))}o.keys=function(){return Object.keys(a)},o.id="1378",e.exports=o},"26d5":function(e){e.exports=JSON.parse('{"titles":{"homepage":"Homepage","trending":"Trending","login":"Login","register":"Register","feed":"Feed","preferences":"Preferences","history":"Watch History"},"counts":{"videos":"No videos | One Video | {count} Videos","views":"No views | One view | {n} views"},"errors":{"trendingFetchError":"Could not fetch trending videos. Check whether your country is supported by YouTube"},"misc":{"searchBarLabel":"What are you looking for?"},"actions":{"subscribe":"Subscribe","unsubscribe":"Unsubscribe","view_subscriptions":"View Subscriptions","sort_by":"Sort by:","most_recent":"Most Recent","least_recent":"Least Recent","channel_name_asc":"Channel Name (A-Z)","channel_name_desc":"Channel Name (Z-A)","back":"Back","uses_api_from":"Uses the API from ","enable_sponsorblock":"Enable Sponsorblock","skip_sponsors":"Skip Sponsors","skip_intro":"Skip Intermission/Intro Animation","skip_outro":"Skip Endcards/Credits","skip_preview":"Skip Preview/Recap","skip_interaction":"Skip Interaction Reminder (Subscribe)","skip_self_promo":"Skip Unpaid/Self Promotion","skip_non_music":"Skip Music: Non-Music Section","theme":"Theme","auto":"Auto","dark":"Dark","light":"Light","buffering_goal":"Buffering Goal (in seconds)","show_comments":"Show Comments","minimize_description":"Minimize Description by default","store_watch_history":"Store Watch History","language_selection":"Language Selection","instances_list":"Instances List","enabled_codecs":"Enabled Codecs (Multiple)"},"preferences":{"feedColumns":"Count of Columns in Feed Pages","sponsorblock":"Enable Sponsorblock","selectedSkip":"Segments to Skip","skipToLastPoint":"Skip to the last watched point when encountering a video already seen","disableLBRY":"Disable LBRY","proxyLBRY":"Proxy LBRY videos","playerAutoplay":"Autoplay Video","bufferGoal":"Buffering Goal","listen":"Audio Only","quality":"Default Quality","region":"Country Selection","homepage":"Default Homepage","instance":"Instance"}}')},"40d3":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n("ade3"),o=(n("5319"),n("2b3d"),n("c0c4")),r=n.n(o),s=n("7c4c"),c=n("541d");s["a"].addDefaultLocale(c);const l=new s["a"]("en-US");class i{constructor(){Object(a["a"])(this,"intlDTF",new Intl.DateTimeFormat([],{dateStyle:"full",timeStyle:"full"}))}pad(e,t){return("000"+e).slice(-1*t)}timeFormat(e){const t=parseFloat(e).toFixed(3),n=Math.floor(t/60/60),a=Math.floor(t/60)%60,o=Math.floor(t-60*a);let r="";return n>0&&(r+=n+":"),r+=this.pad(a,2)+":"+this.pad(o,2),r}formatFullDate(e){return this.intlDTF.format(e)}numberFormat(e){const t=2,n=[{value:1,symbol:""},{value:1e3,symbol:"K"},{value:1e6,symbol:"M"},{value:1e9,symbol:"B"}],a=/\.0+$|(\.[0-9]*[1-9])0+$/;let o;for(o=n.length-1;o>0;o--)if(e>=n[o].value)break;return(e/n[o].value).toFixed(t).replace(a,"$1")+n[o].symbol}addCommas(e){return e=parseInt(e),e.toLocaleString("en-US")}purifyHTML(e){return r.a.sanitize(e)}timeAgo(e){return l.format(e)}determineVideoIdFromPath(e){const t=new URL(e,"http://localhost");return t.searchParams.get("v")}determineVideoIdFromChannelURL(e){const t=e.split("/");return t[2]}}const d=new i},"56d7":function(e,t,n){"use strict";n.r(t);var a=n("2b0e"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{style:e.bgStyles},[e.$vuetify.breakpoint.width>1675?n("v-app-bar",{attrs:{app:"",color:"primary",dark:""}},[n("v-row",{attrs:{dense:"",align:"center",justify:"center"}},[e._l(e.links,(function(t){return n("v-col",{key:t.id,attrs:{md:"1"}},[n("v-btn",{attrs:{text:"",link:"","min-width":"100%",to:t.to}},[e._v(" "+e._s(e.$t(t.name))+" ")])],1)})),n("v-col",{attrs:{md:"1"}},[n("AuthenticationModal")],1),n("v-col",{staticClass:"ml-2",attrs:{cols:"auto"}},[n("v-btn",{attrs:{icon:""},on:{click:e.toggleDarkMode}},[n("v-icon",[e._v("mdi-brightness-6")])],1)],1),n("v-col",{attrs:{md:"2"}},[n("v-select",{staticClass:"mt-6",attrs:{dense:"",items:e.languageOptions,label:"Language",value:e.$i18n.locale,outlined:""},on:{input:e.changeLocale}})],1),n("v-col",[n("SearchMenu")],1)],2)],1):n("div",[n("v-navigation-drawer",{attrs:{app:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[n("v-list",{attrs:{nav:""}},[e._l(e.links,(function(t){return n("v-list-item",{key:t.id,attrs:{link:"",to:t.to}},[e._v(" "+e._s(e.$t(t.name))+" ")])})),n("AuthenticationModal",{attrs:{"list-mode":!0}})],2),n("v-switch",{staticClass:"mx-2 mt-0 pt-0",attrs:{dense:"","input-value":e.$store.getters["prefs/getPreferenceBoolean"]("darkMode",!1),label:"Dark Mode"},on:{change:e.toggleDarkMode}}),n("v-select",{staticClass:"mx-2",attrs:{dense:"",items:e.languageOptions,label:"Language",value:e.$i18n.locale,outlined:""},on:{input:e.changeLocale}}),n("SearchMenu",{staticClass:"mx-2"})],1),n("v-app-bar",{attrs:{app:"",color:"primary",dark:""}},[n("v-app-bar-nav-icon",{on:{click:function(t){e.drawer=!e.drawer}}}),n("v-toolbar-title",[e._v("Piped Material")])],1)],1),n("v-main",[n("router-view")],1)],1)},r=[],s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-autocomplete",{ref:"searchMenu",attrs:{loading:e.requestInProgress,items:e.searchSuggestions,"search-input":e.searchText,"cache-items":"",flat:"",dense:"","auto-select-first":"","hide-no-data":"","hide-details":"",label:e.$t("misc.searchBarLabel"),"solo-inverted":""},on:{"update:searchInput":function(t){e.searchText=t},"update:search-input":function(t){e.searchText=t}},model:{value:e.select,callback:function(t){e.select=t},expression:"select"}})},c=[],l=n("7cc9"),i={name:"SearchMenu",data(){return{selected:0,select:"",searchText:"",requestInProgress:!1,searchSuggestions:[]}},watch:{searchText(e){e&&e!==this.select&&this.refreshSuggestions()},async select(e){if(""!==e)try{await this.$router.push({name:"SearchResults",query:{search_query:e}})}catch(t){console.log("???",t)}finally{this.select="",this.searchText=""}}},methods:{async refreshSuggestions(){this.requestInProgress=!0,this.searchSuggestions=await this.$store.dispatch("auth/makeRequest",{path:"/suggestions",params:{query:this.searchText}}),this.searchSuggestions.unshift(this.searchText),this.requestInProgress=!1}},mounted(){this.unsubToKeybindings=Object(l["a"])(window,{"/":e=>{this.$refs.searchMenu.focus(),e.preventDefault()}})},beforeDestroy(){this.unsubToKeybindings()}},d=i,u=n("2877"),h=n("6544"),f=n.n(h),p=n("c6a6"),m=Object(u["a"])(d,s,c,!1,null,null,null),b=m.exports;f()(m,{VAutocomplete:p["a"]});var g=n("a925"),v=n("26d5");a["default"].use(g["a"]);const k={en:v},y=new g["a"]({locale:"en",fallbackLocale:"en",messages:k});async function w(e){switch(e){case"de":case"en":case"el":case"fr":case"lt":case"ml":case"tr":case"bn_latn":document.body.classList.remove(...document.body.classList),document.body.classList.add("latin");break;case"bn_beng":await n.e("chunk-748bbd95").then(n.t.bind(null,"4caf",7)),document.body.classList.remove(...document.body.classList),document.body.classList.add("bengali");break;case"zh_Hant":await n.e("chunk-7477f951").then(n.t.bind(null,"493f",7)),document.body.classList.remove(...document.body.classList),document.body.classList.add("traditional-chinese");break;case"zh_Hans":await n.e("chunk-7453a839").then(n.t.bind(null,"0e83",7)),document.body.classList.remove(...document.body.classList),document.body.classList.add("simplified-chinese");break;case"jp":await n.e("chunk-74d31cef").then(n.t.bind(null,"9ec1",7)),document.body.classList.remove(...document.body.classList),document.body.classList.add("japanese");break;case"kr":await n.e("chunk-74847539").then(n.t.bind(null,"54b3",7)),document.body.classList.remove(...document.body.classList),document.body.classList.add("korean");break;case"cyrl":await n.e("chunk-745aa562").then(n.t.bind(null,"25ae",7)),document.body.classList.remove(...document.body.classList),document.body.classList.add("cyrillic");break}}async function j(e){if(y.availableLocales.includes(e))return;const t=await n("1378")(`./${e}.json`);return y.setLocaleMessage(e,t.default),a["default"].nextTick()}async function _(e){await j(e),await w(e),y.locale=e,window.localStorage.setItem("LOCALE",e)}function S(){let e=window.localStorage.getItem("LOCALE");null==e&&(e="en"),_(e).catch(e=>console.error(e))}S();var O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.$store.getters["auth/isCurrentlyAuthenticated"]?!0===e.listMode?n("v-list-item",{on:{click:e.logOut}},[e._v(" Log Out ")]):n("v-btn",{staticClass:"mx-2",attrs:{text:"","min-width":"100%"},on:{click:e.logOut}},[e._v("Log Out")]):n("v-dialog",{attrs:{width:768},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,o=t.attrs;return[!0===e.listMode?n("v-list-item",e._g(e._b({},"v-list-item",o,!1),a),[e._v(" Log In/Sign Up ")]):n("v-btn",e._g(e._b({staticClass:"mx-2",attrs:{text:"","min-width":"100%"}},"v-btn",o,!1),a),[e._v(" Log In/Sign Up ")])]}}],null,!1,3316236207),model:{value:e.dialogOpen,callback:function(t){e.dialogOpen=t},expression:"dialogOpen"}},[n("v-card",[n("v-card-title",[e._v("Authentication")]),n("v-card-text",[n("v-text-field",{attrs:{label:"Username"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),n("v-text-field",{attrs:{type:"password",label:"Password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),null!=e.error?n("v-alert",{attrs:{outlined:"",color:"error"}},[e._v(e._s(e.error))]):e._e(),n("v-btn",{attrs:{disabled:e.requestInProgress,loading:e.requestInProgress,color:"primary",outlined:"",large:""},on:{click:e.login}},[e._v("Log In")]),n("v-btn",{staticClass:"ml-2",attrs:{disabled:e.requestInProgress,loading:e.requestInProgress,color:"primary",outlined:"",large:""},on:{click:e.register}},[e._v("Sign Up")])],1)],1)],1)},L=[],I=n("bc3a"),P=n.n(I),x=n("bc48"),C=n("e8b2");class T extends Error{constructor(e){super(),this.message=e}}const N={namespaced:!0,state:()=>({authStateByInstance:{}}),mutations:{replaceAuth(e,t){e.authStateByInstance=t},setAuthToken(e,{apiURL:t,token:n}){Object(x["a"])(e.authStateByInstance,[t],{isAuthenticated:!0,authToken:n}),window.localStorage.setItem("AUTH",JSON.stringify(e.authStateByInstance))},deleteAuthToken(e,{apiURL:t}){Object(x["a"])(e.authStateByInstance,[t],{isAuthenticated:!1}),window.localStorage.setItem("AUTH",JSON.stringify(e.authStateByInstance))}},getters:{isCurrentlyAuthenticated(e,t,n,a){const o=e.authStateByInstance[a["prefs/apiUrl"]];return!!o&&!0===o.isAuthenticated},authToken(e,t,n,a){const o=e.authStateByInstance[a["prefs/apiUrl"]]||{};return o.authToken}},actions:{initializeAuth({commit:e}){const t=window.localStorage.getItem("AUTH");null!=t&&e("replaceAuth",JSON.parse(t))},async loginOrRegister({commit:e,rootGetters:t},{path:n,username:a,password:o}){const r=t["prefs/apiUrl"],{data:s}=await P()({method:"POST",baseURL:r,url:"/"+n,data:{username:a,password:o}});if("error"in s)throw new T(s.error);e("setAuthToken",{apiURL:r,token:s.token})},async makeRequest({commit:e,state:t,rootGetters:n},{path:a,method:o,data:r,params:s,tokenInParams:c=!1}){const l=n["prefs/apiUrl"],i=t.authStateByInstance[l]||{};i.isAuthenticated&&c&&(Object(C["a"])(s)?s.authToken=i.authToken:s={authToken:i.authToken});const{data:d}=await P()({baseURL:l,method:o,url:a,params:s,data:r,headers:i.isAuthenticated?{Authorization:i.authToken}:void 0});return d}}};function A(e){window.addEventListener("storage",t=>{"AUTH"===t.key&&e.commit("auth/replaceAuth",JSON.parse(t.newValue))})}var V={name:"AuthenticationModal",props:["listMode"],data:()=>({error:null,requestInProgress:!1,dialogOpen:!1,username:"",password:""}),methods:{async doCall(e){this.error=null;try{this.requestInProgress=!0,await this.$store.dispatch("auth/loginOrRegister",{path:e,username:this.username,password:this.password}),this.dialogOpen=!1}catch(t){if(!(t instanceof T))throw t;this.error=t.message}finally{this.requestInProgress=!1}},logOut(){this.$store.commit("auth/deleteAuthToken",{apiURL:this.$store.getters["prefs/apiUrl"]})},login(){return this.doCall("login")},register(){return this.doCall("register")}}},E=V,$=n("0798"),M=n("8336"),R=n("b0af"),U=n("99d9"),B=n("169a"),F=n("da13"),H=n("8654"),z=Object(u["a"])(E,O,L,!1,null,null,null),D=z.exports;f()(z,{VAlert:$["a"],VBtn:M["a"],VCard:R["a"],VCardText:U["c"],VCardTitle:U["d"],VDialog:B["a"],VListItem:F["a"],VTextField:H["a"]});var q={name:"App",components:{AuthenticationModal:D,SearchMenu:b},metaInfo(){return{title:this.$t("titles.homepage"),titleTemplate:"%s - Piped"}},data:()=>({languageOptions:[{value:"zh_Hant",text:"Chinese (Traditional)"},{value:"en",text:"English"},{value:"fr",text:"French"},{value:"de",text:"German"},{value:"el",text:"Greek"},{value:"zh_Hans",text:"Chinese (Simplified, only loads the font)"},{value:"jp",text:"Japanese (only loads fonts)"},{value:"kr",text:"Korean (only loads fonts)"},{value:"cyrl",text:"Cyrillic Languages (fonts)"},{value:"lt",text:"Lithuanian"},{value:"ml",text:"Malayalam"},{value:"nb_NO",text:"Norwegian Bokmål"},{value:"tr",text:"Turkish"},{value:"bn_beng",text:"Bengali (বাংলা)"}].sort((e,t)=>e.text.localeCompare(t.text)),drawer:!1}),computed:{bgStyles(){return{backgroundColor:this.$vuetify.theme.dark?"#282828":"#fbf1c7"}},links(){const e=[{id:"trending",name:"titles.trending",to:"/trending"},{id:"prefs",name:"titles.preferences",to:"/preferences"},{id:"watch-history",name:"titles.history",to:"/watch-history"}];return this.$store.getters["auth/isCurrentlyAuthenticated"]&&e.splice(0,0,{id:"feed",name:"titles.feed",to:"/feed"}),e}},watch:{"$store.state.prefs.prefs.darkMode"(e){this.$vuetify.theme.dark=e}},methods:{changeLocale(e){return _(e)},toggleDarkMode(){this.$vuetify.theme.dark=!this.$vuetify.theme.dark,this.$store.commit("prefs/setPrefs",{id:"darkMode",value:this.$vuetify.theme.dark})}},created(){this.$store.dispatch("prefs/loadState"),this.$store.dispatch("auth/initializeAuth")}},J=q,W=n("7496"),Y=n("40dc"),G=n("5bc1"),K=n("62ad"),Z=n("132d"),Q=n("8860"),X=n("f6c4"),ee=n("f774"),te=n("0fd9"),ne=n("b974"),ae=n("b73d"),oe=n("2a7f"),re=Object(u["a"])(J,o,r,!1,null,null,null),se=re.exports;f()(re,{VApp:W["a"],VAppBar:Y["a"],VAppBarNavIcon:G["a"],VBtn:M["a"],VCol:K["a"],VIcon:Z["a"],VList:Q["a"],VListItem:F["a"],VMain:X["a"],VNavigationDrawer:ee["a"],VRow:te["a"],VSelect:ne["a"],VSwitch:ae["a"],VToolbarTitle:oe["a"]});n("41e6"),n("fb98");var ce=n("f309");a["default"].use(ce["a"]);var le=new ce["a"]({theme:{dark:(()=>{try{const e=JSON.parse(window.localStorage.getItem("PREFERENCES"));return e.darkMode}catch(e){return!1}})(),themes:{light:{primary:"#458588",secondary:"#689d6a",accent:"#af3a03",error:"#cc241d",warning:"#d79921",info:"#458588",success:"#98971a",bgOne:"#fbf1c7",bgTwo:"#ebdbb2"},dark:{primary:"#458588",secondary:"#689d6a",accent:"#af3a03",error:"#cc241d",warning:"#d79921",info:"#458588",success:"#98971a",bgOne:"#282828",bgTwo:"#3c3836"}}}}),ie=n("2f62"),de=n("8121"),ue=n("ec41");const he={namespaced:!0,state:()=>({prefs:{darkMode:!1,playerAutoplay:!0,autoplay:!1,listen:!1,disableLBRY:!0,proxyLBRY:!0,sponsorblock:!0,skipToLastPoint:!0}}),mutations:{setPrefs(e,{id:t,value:n}){Object(x["a"])(e.prefs,t,n),window.localStorage.setItem("PREFERENCES",JSON.stringify(e.prefs))},replacePrefs(e,t){e.prefs=t}},actions:{loadState({commit:e}){try{const t=window.localStorage.getItem("PREFERENCES");if(Object(de["a"])(t)&&0!==t.length){const n=JSON.parse(t);e("replacePrefs",n)}}catch(t){console.log("Error:",t)}}},getters:{getPreference:e=>(t,n)=>Object(ue["a"])(e.prefs,t,n),getPreferenceBoolean:(e,t)=>(...e)=>{const n=t.getPreference(...e);switch(n){case"true":case!0:case"1":case"on":case"yes":return!0;default:return!1}},getPreferenceNumber:(e,t)=>(e,n)=>{const a=t.getPreference(e,n),o=Number(a);return Number.isFinite(o)?o:n},apiUrl(e,t){return t.getPreference("instance",Object({NODE_ENV:"production",BASE_URL:""}).VUE_APP_PIPED_URL||"https://pipedapi.kavin.rocks")}}};function fe(e){window.addEventListener("storage",t=>{"PREFERENCES"===t.key&&e.commit("prefs/replacePrefs",JSON.parse(t.newValue))})}a["default"].use(ie["a"]);const pe=new ie["a"].Store({modules:{prefs:he,auth:N}});fe(pe),A(pe);var me=pe,be=n("8c4f"),ge=n("58ca"),ve=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{attrs:{fluid:""}},[n("h3",{staticClass:"text-h4 justify-center"},[e._v(e._s(e.$t("titles."+e.feedName)))]),e.$store.getters["auth/isCurrentlyAuthenticated"]?n("v-btn",{staticClass:"mt-2",attrs:{outlined:"",color:"primary",link:"",to:"/subscriptions"}},[e._v("Your Subscriptions")]):e._e(),e.$store.getters["auth/isCurrentlyAuthenticated"]?n("v-btn",{staticClass:"mt-2 ml-2",attrs:{outlined:"",color:"primary",link:"",href:e.$store.getters["prefs/apiUrl"]+"/feed/rss?authToken="+e.$store.getters["auth/authToken"]}},[n("v-icon",[e._v("mdi-rss")]),e._v(" RSS of Your Subscriptions ")],1):e._e(),n("v-divider",{staticClass:"my-4"}),e.error?n("v-alert",{attrs:{color:"error",prominent:"",text:""}},[e.errorIsJSON?n("JSONViewer",{attrs:{value:e.error}}):n("span",[e._v(e._s(e.$t(e.error)))])],1):e._e(),e._l(e.splitIntoRows,(function(t,a){return n("div",{key:a,class:e.$vuetify.breakpoint.mdAndUp?"grid":void 0},e._l(t,(function(t,a){return n("VideoItem",{key:a,class:e.columnClass,attrs:{video:t}})})),1)}))],2)},ke=[],ye=n("6419"),we=n("5fdc"),je={data(){return{feedName:"trending",videos:[],error:null,errorIsJSON:!1}},metaInfo(){return{title:this.$t("titles."+this.feedName)}},watch:{"$route.path":"fetchData"},mounted(){this.fetchData()},methods:{async fetchData(){const e=this.$store.getters["prefs/getPreference"]("region","US"),t=this.$store.getters["prefs/getPreference"]("homepage","trending");let n;switch(this.$route.path){case"/":"trending"===t?(n="/trending",this.feedName="trending"):(n="/feed",this.feedName="feed");break;case"/trending":n="/trending",this.feedName="trending";break;case"/feed":n="/feed",this.feedName="feed";break}try{this.error=null,this.videos=await this.$store.dispatch("auth/makeRequest",{path:n,params:{region:e},tokenInParams:!0})}catch(a){if(!a.isAxiosError)throw a;{const e=a.response.data;"Could not get Trending name"===e.message?this.error="errors.trendingFetchError":(this.error=e,this.errorIsJSON=!0)}}}},computed:{rowSize(){return this.$store.getters["prefs/getPreferenceNumber"]("feedColumns",4)},columnClass(){if(this.$vuetify.breakpoint.mdAndUp)return"span-col-"+60/this.rowSize+" mb-4"},splitIntoRows(){return Object(ye["a"])(this.videos,this.rowSize)}},components:{VideoItem:we["a"],JSONViewer:()=>n.e("chunk-e9af1076").then(n.t.bind(null,"349e",7))}},_e=je,Se=(n("b4a9"),n("a523")),Oe=n("ce7e"),Le=Object(u["a"])(_e,ve,ke,!1,null,"7d87b062",null),Ie=Le.exports;f()(Le,{VAlert:$["a"],VBtn:M["a"],VContainer:Se["a"],VDivider:Oe["a"],VIcon:Z["a"]}),a["default"].use(ge["a"]),a["default"].use(be["a"]);const Pe=[{path:"/index.html",name:"index",component:Ie},{path:"/",name:"Homepage",component:Ie},{path:"/trending",name:"Trending",component:Ie},{path:"/feed",name:"Feed",component:Ie},{path:"/preferences",name:"Preferences",component:()=>n.e("chunk-1174a3cc").then(n.bind(null,"ebe4"))},{path:"/subscriptions",component:()=>n.e("chunk-59a47c4a").then(n.bind(null,"bb3c"))},{path:"/results",name:"SearchResults",component:()=>n.e("chunk-9ddeb252").then(n.bind(null,"7445"))},{path:"/playlist",name:"Playlist",component:()=>n.e("chunk-108ecad0").then(n.bind(null,"e208"))},{path:"/:path(v|w|embed|shorts|watch)/:v?",name:"WatchVideo",component:()=>Promise.all([n.e("chunk-48e65af1"),n.e("chunk-517ec54d")]).then(n.bind(null,"22b2"))},{path:"/:path(channel|user|c)/:channelId/:videos?",name:"Channel",component:()=>Promise.all([n.e("chunk-48e65af1"),n.e("chunk-2d213347")]).then(n.bind(null,"ac4c"))},{path:"/:videoId([a-zA-Z0-9_-]{11})",component:()=>n.e("chunk-2d0ccf3c").then(n.bind(null,"4fb6"))},{path:"/watch-history",component:()=>n.e("chunk-356d625d").then(n.bind(null,"421e"))}],xe=new be["a"]({base:"",routes:Pe});var Ce=xe,Te=n("9483");Object(Te["a"])("service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh."),window.location.reload()},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}}),a["default"].config.productionTip=!1,new a["default"]({vuetify:le,i18n:y,store:me,router:Ce,render:e=>e(se)}).$mount("#app")},"5fdc":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{attrs:{link:"",to:e.video.url,outlined:"",height:e.maxHeight?"100%":void 0,color:"bgTwo"}},[n("v-img",{attrs:{height:e.height,width:e.width,src:e.video.thumbnail||e.video.thumbnailUrl,alt:"thumbnail",loading:"lazy"}}),e.alreadyWatched?n("v-progress-linear",{attrs:{value:e.progress}}):e._e(),n("v-card-title",{staticClass:"text-subtitle-1"},[e._v(e._s(e.video.title))]),n("v-card-text",[e.video.uploaderUrl&&(e.video.uploaderName||e.video.uploader)&&!e.hideChannel?n("router-link",{staticClass:"text-subtitle-1 text-decoration-none",attrs:{to:e.video.uploaderUrl,custom:""},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.navigate;return[n("h5",{attrs:{role:"link"},on:{click:a,keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:a.apply(null,arguments)}}},[e._v(e._s(e.video.uploaderName||e.video.uploader))])]}}],null,!1,1560647685)}):e._e(),e._t("default"),e._v(" "+e._s(e.$tc("counts.views",e.video.views,{n:e.numberFormat(e.video.views)}))),n("br"),e._v(" "+e._s(e.video.uploadedDate)+" "),n("br"),e._v(" "+e._s(e.timeFormat(e.video.duration))+" ")],2)],1)},o=[],r=n("40d3"),s=n("cb2b"),c={name:"VideoItem",props:{video:Object,height:Number,width:Number,hideChannel:Boolean,maxHeight:Boolean,srcProgress:Number},data:()=>({alreadyWatched:!1,progress:0}),mounted(){this.findIfVideoWatched()},watch:{"video.videoId":"findIfVideoWatched","video.url":"findIfVideoWatched",srcProgress:"findIfVideoWatched"},methods:{calcProgress(e,t){return Math.min(e/t*100,100)},async findIfVideoWatched(){if(this.srcProgress)return this.alreadyWatched=!0,void(this.progress=this.calcProgress(this.srcProgress,this.video.duration));let e;if(e=this.video.videoId?this.video.videoId:r["a"].determineVideoIdFromPath(this.video.url),e){const t=await Object(s["c"])(e);null!=t&&(this.alreadyWatched=!0,this.progress=null!=t.progress?this.calcProgress(t.progress,t.video.duration):100)}},numberFormat(...e){return r["a"].numberFormat(...e)},timeFormat(...e){return r["a"].timeFormat(...e)}}},l=c,i=n("2877"),d=n("6544"),u=n.n(d),h=n("b0af"),f=n("99d9"),p=n("adda"),m=n("8e36"),b=Object(i["a"])(l,a,o,!1,null,null,null);t["a"]=b.exports;u()(b,{VCard:h["a"],VCardText:f["c"],VCardTitle:f["d"],VImg:p["a"],VProgressLinear:m["a"]})},7851:function(e,t,n){},"7cc9":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n("4a70");function o(e,t,...n){const o={};for(const[a,r]of Object.entries(t))o[a]=(e,...t)=>{const n=e.target,a=n instanceof HTMLElement&&(n.isContentEditable||"INPUT"===n.tagName||"TEXTAREA"===n.tagName||"SELECT"===n.tagName);if(!a)return r(e,...t)};return Object(a["a"])(e,o,...n)}},b4a9:function(e,t,n){"use strict";n("7851")},cb2b:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"e",(function(){return s})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"b",(function(){return i}));var a=n("4dec");const o=new a["a"]("PipedMaterialDB");async function r(e){return o.watchedVideos.add({videoId:e.videoId,video:e,progress:0,timestamp:new Date})}function s(e,t){return o.watchedVideos.update(e,{progress:t})}function c(e){return o.watchedVideos.where("videoId").equals(e).last()}function l(){return o.watchedVideos.orderBy("timestamp").reverse().toArray()}function i(){return o.watchedVideos.clear()}o.version(2).stores({watchedVideos:"++id,videoId,timestamp"})},fb98:function(e,t,n){}});
//# sourceMappingURL=app.ea33c85c.js.map